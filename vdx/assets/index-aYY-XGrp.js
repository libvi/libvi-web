const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-nlYZ2Hsc.js","assets/index.dom-C3-224fz.js"])))=>i.map(i=>d[i]);
function uM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w7={exports:{}},Z1={},C7={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p6;function aM(){if(p6)return Zt;p6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function v(X){return X===null||typeof X!="object"?null:(X=p&&X[p]||X["@@iterator"],typeof X=="function"?X:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,y={};function S(X,Ee,st){this.props=X,this.context=Ee,this.refs=y,this.updater=st||w}S.prototype.isReactComponent={},S.prototype.setState=function(X,Ee){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,Ee,"setState")},S.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function A(){}A.prototype=S.prototype;function B(X,Ee,st){this.props=X,this.context=Ee,this.refs=y,this.updater=st||w}var I=B.prototype=new A;I.constructor=B,E(I,S.prototype),I.isPureReactComponent=!0;var _=Array.isArray,L=Object.prototype.hasOwnProperty,j={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function J(X,Ee,st){var Me,K={},fe=null,Ce=null;if(Ee!=null)for(Me in Ee.ref!==void 0&&(Ce=Ee.ref),Ee.key!==void 0&&(fe=""+Ee.key),Ee)L.call(Ee,Me)&&!z.hasOwnProperty(Me)&&(K[Me]=Ee[Me]);var Se=arguments.length-2;if(Se===1)K.children=st;else if(1<Se){for(var Ke=Array(Se),Ue=0;Ue<Se;Ue++)Ke[Ue]=arguments[Ue+2];K.children=Ke}if(X&&X.defaultProps)for(Me in Se=X.defaultProps,Se)K[Me]===void 0&&(K[Me]=Se[Me]);return{$$typeof:e,type:X,key:fe,ref:Ce,props:K,_owner:j.current}}function ae(X,Ee){return{$$typeof:e,type:X.type,key:Ee,ref:X.ref,props:X.props,_owner:X._owner}}function ne(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function Pe(X){var Ee={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(st){return Ee[st]})}var oe=/\/+/g;function ce(X,Ee){return typeof X=="object"&&X!==null&&X.key!=null?Pe(""+X.key):Ee.toString(36)}function me(X,Ee,st,Me,K){var fe=typeof X;(fe==="undefined"||fe==="boolean")&&(X=null);var Ce=!1;if(X===null)Ce=!0;else switch(fe){case"string":case"number":Ce=!0;break;case"object":switch(X.$$typeof){case e:case t:Ce=!0}}if(Ce)return Ce=X,K=K(Ce),X=Me===""?"."+ce(Ce,0):Me,_(K)?(st="",X!=null&&(st=X.replace(oe,"$&/")+"/"),me(K,Ee,st,"",function(Ue){return Ue})):K!=null&&(ne(K)&&(K=ae(K,st+(!K.key||Ce&&Ce.key===K.key?"":(""+K.key).replace(oe,"$&/")+"/")+X)),Ee.push(K)),1;if(Ce=0,Me=Me===""?".":Me+":",_(X))for(var Se=0;Se<X.length;Se++){fe=X[Se];var Ke=Me+ce(fe,Se);Ce+=me(fe,Ee,st,Ke,K)}else if(Ke=v(X),typeof Ke=="function")for(X=Ke.call(X),Se=0;!(fe=X.next()).done;)fe=fe.value,Ke=Me+ce(fe,Se++),Ce+=me(fe,Ee,st,Ke,K);else if(fe==="object")throw Ee=String(X),Error("Objects are not valid as a React child (found: "+(Ee==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":Ee)+"). If you meant to render a collection of children, use an array instead.");return Ce}function ye(X,Ee,st){if(X==null)return X;var Me=[],K=0;return me(X,Me,"","",function(fe){return Ee.call(st,fe,K++)}),Me}function Fe(X){if(X._status===-1){var Ee=X._result;Ee=Ee(),Ee.then(function(st){(X._status===0||X._status===-1)&&(X._status=1,X._result=st)},function(st){(X._status===0||X._status===-1)&&(X._status=2,X._result=st)}),X._status===-1&&(X._status=0,X._result=Ee)}if(X._status===1)return X._result.default;throw X._result}var Te={current:null},ge={transition:null},se={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:ge,ReactCurrentOwner:j};function we(){throw Error("act(...) is not supported in production builds of React.")}return Zt.Children={map:ye,forEach:function(X,Ee,st){ye(X,function(){Ee.apply(this,arguments)},st)},count:function(X){var Ee=0;return ye(X,function(){Ee++}),Ee},toArray:function(X){return ye(X,function(Ee){return Ee})||[]},only:function(X){if(!ne(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Zt.Component=S,Zt.Fragment=n,Zt.Profiler=i,Zt.PureComponent=B,Zt.StrictMode=r,Zt.Suspense=f,Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Zt.act=we,Zt.cloneElement=function(X,Ee,st){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Me=E({},X.props),K=X.key,fe=X.ref,Ce=X._owner;if(Ee!=null){if(Ee.ref!==void 0&&(fe=Ee.ref,Ce=j.current),Ee.key!==void 0&&(K=""+Ee.key),X.type&&X.type.defaultProps)var Se=X.type.defaultProps;for(Ke in Ee)L.call(Ee,Ke)&&!z.hasOwnProperty(Ke)&&(Me[Ke]=Ee[Ke]===void 0&&Se!==void 0?Se[Ke]:Ee[Ke])}var Ke=arguments.length-2;if(Ke===1)Me.children=st;else if(1<Ke){Se=Array(Ke);for(var Ue=0;Ue<Ke;Ue++)Se[Ue]=arguments[Ue+2];Me.children=Se}return{$$typeof:e,type:X.type,key:K,ref:fe,props:Me,_owner:Ce}},Zt.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:o,_context:X},X.Consumer=X},Zt.createElement=J,Zt.createFactory=function(X){var Ee=J.bind(null,X);return Ee.type=X,Ee},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(X){return{$$typeof:a,render:X}},Zt.isValidElement=ne,Zt.lazy=function(X){return{$$typeof:d,_payload:{_status:-1,_result:X},_init:Fe}},Zt.memo=function(X,Ee){return{$$typeof:h,type:X,compare:Ee===void 0?null:Ee}},Zt.startTransition=function(X){var Ee=ge.transition;ge.transition={};try{X()}finally{ge.transition=Ee}},Zt.unstable_act=we,Zt.useCallback=function(X,Ee){return Te.current.useCallback(X,Ee)},Zt.useContext=function(X){return Te.current.useContext(X)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(X){return Te.current.useDeferredValue(X)},Zt.useEffect=function(X,Ee){return Te.current.useEffect(X,Ee)},Zt.useId=function(){return Te.current.useId()},Zt.useImperativeHandle=function(X,Ee,st){return Te.current.useImperativeHandle(X,Ee,st)},Zt.useInsertionEffect=function(X,Ee){return Te.current.useInsertionEffect(X,Ee)},Zt.useLayoutEffect=function(X,Ee){return Te.current.useLayoutEffect(X,Ee)},Zt.useMemo=function(X,Ee){return Te.current.useMemo(X,Ee)},Zt.useReducer=function(X,Ee,st){return Te.current.useReducer(X,Ee,st)},Zt.useRef=function(X){return Te.current.useRef(X)},Zt.useState=function(X){return Te.current.useState(X)},Zt.useSyncExternalStore=function(X,Ee,st){return Te.current.useSyncExternalStore(X,Ee,st)},Zt.useTransition=function(){return Te.current.useTransition()},Zt.version="18.3.1",Zt}var m6;function Y5(){return m6||(m6=1,C7.exports=aM()),C7.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v6;function lM(){if(v6)return Z1;v6=1;var e=Y5(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,f,h){var d,p={},v=null,w=null;h!==void 0&&(v=""+h),f.key!==void 0&&(v=""+f.key),f.ref!==void 0&&(w=f.ref);for(d in f)r.call(f,d)&&!o.hasOwnProperty(d)&&(p[d]=f[d]);if(a&&a.defaultProps)for(d in f=a.defaultProps,f)p[d]===void 0&&(p[d]=f[d]);return{$$typeof:t,type:a,key:v,ref:w,props:p,_owner:i.current}}return Z1.Fragment=n,Z1.jsx=s,Z1.jsxs=s,Z1}var y6;function cM(){return y6||(y6=1,w7.exports=lM()),w7.exports}var b=cM(),W=Y5();const Pt=uc(W),fM=uM({__proto__:null,default:Pt},[W]);var N2={},x7={exports:{}},lo={},E7={exports:{}},P7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w6;function hM(){return w6||(w6=1,function(e){function t(ge,se){var we=ge.length;ge.push(se);e:for(;0<we;){var X=we-1>>>1,Ee=ge[X];if(0<i(Ee,se))ge[X]=se,ge[we]=Ee,we=X;else break e}}function n(ge){return ge.length===0?null:ge[0]}function r(ge){if(ge.length===0)return null;var se=ge[0],we=ge.pop();if(we!==se){ge[0]=we;e:for(var X=0,Ee=ge.length,st=Ee>>>1;X<st;){var Me=2*(X+1)-1,K=ge[Me],fe=Me+1,Ce=ge[fe];if(0>i(K,we))fe<Ee&&0>i(Ce,K)?(ge[X]=Ce,ge[fe]=we,X=fe):(ge[X]=K,ge[Me]=we,X=Me);else if(fe<Ee&&0>i(Ce,we))ge[X]=Ce,ge[fe]=we,X=fe;else break e}}return se}function i(ge,se){var we=ge.sortIndex-se.sortIndex;return we!==0?we:ge.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var f=[],h=[],d=1,p=null,v=3,w=!1,E=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ge){for(var se=n(h);se!==null;){if(se.callback===null)r(h);else if(se.startTime<=ge)r(h),se.sortIndex=se.expirationTime,t(f,se);else break;se=n(h)}}function _(ge){if(y=!1,I(ge),!E)if(n(f)!==null)E=!0,Fe(L);else{var se=n(h);se!==null&&Te(_,se.startTime-ge)}}function L(ge,se){E=!1,y&&(y=!1,A(J),J=-1),w=!0;var we=v;try{for(I(se),p=n(f);p!==null&&(!(p.expirationTime>se)||ge&&!Pe());){var X=p.callback;if(typeof X=="function"){p.callback=null,v=p.priorityLevel;var Ee=X(p.expirationTime<=se);se=e.unstable_now(),typeof Ee=="function"?p.callback=Ee:p===n(f)&&r(f),I(se)}else r(f);p=n(f)}if(p!==null)var st=!0;else{var Me=n(h);Me!==null&&Te(_,Me.startTime-se),st=!1}return st}finally{p=null,v=we,w=!1}}var j=!1,z=null,J=-1,ae=5,ne=-1;function Pe(){return!(e.unstable_now()-ne<ae)}function oe(){if(z!==null){var ge=e.unstable_now();ne=ge;var se=!0;try{se=z(!0,ge)}finally{se?ce():(j=!1,z=null)}}else j=!1}var ce;if(typeof B=="function")ce=function(){B(oe)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ye=me.port2;me.port1.onmessage=oe,ce=function(){ye.postMessage(null)}}else ce=function(){S(oe,0)};function Fe(ge){z=ge,j||(j=!0,ce())}function Te(ge,se){J=S(function(){ge(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ge){ge.callback=null},e.unstable_continueExecution=function(){E||w||(E=!0,Fe(L))},e.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<ge?Math.floor(1e3/ge):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(ge){switch(v){case 1:case 2:case 3:var se=3;break;default:se=v}var we=v;v=se;try{return ge()}finally{v=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ge,se){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var we=v;v=ge;try{return se()}finally{v=we}},e.unstable_scheduleCallback=function(ge,se,we){var X=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?X+we:X):we=X,ge){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=we+Ee,ge={id:d++,callback:se,priorityLevel:ge,startTime:we,expirationTime:Ee,sortIndex:-1},we>X?(ge.sortIndex=we,t(h,ge),n(f)===null&&ge===n(h)&&(y?(A(J),J=-1):y=!0,Te(_,we-X))):(ge.sortIndex=Ee,t(f,ge),E||w||(E=!0,Fe(L))),ge},e.unstable_shouldYield=Pe,e.unstable_wrapCallback=function(ge){var se=v;return function(){var we=v;v=se;try{return ge.apply(this,arguments)}finally{v=we}}}}(P7)),P7}var C6;function dM(){return C6||(C6=1,E7.exports=hM()),E7.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x6;function gM(){if(x6)return lo;x6=1;var e=Y5(),t=dM();function n(u){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+u,m=1;m<arguments.length;m++)l+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+u+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(u,l){s(u,l),s(u+"Capture",l)}function s(u,l){for(i[u]=l,u=0;u<l.length;u++)r.add(l[u])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(u){return f.call(p,u)?!0:f.call(d,u)?!1:h.test(u)?p[u]=!0:(d[u]=!0,!1)}function w(u,l,m,C){if(m!==null&&m.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return C?!1:m!==null?!m.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function E(u,l,m,C){if(l===null||typeof l>"u"||w(u,l,m,C))return!0;if(C)return!1;if(m!==null)switch(m.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function y(u,l,m,C,P,D,k){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=C,this.attributeNamespace=P,this.mustUseProperty=m,this.propertyName=u,this.type=l,this.sanitizeURL=D,this.removeEmptyString=k}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){S[u]=new y(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var l=u[0];S[l]=new y(l,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){S[u]=new y(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){S[u]=new y(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){S[u]=new y(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){S[u]=new y(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){S[u]=new y(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){S[u]=new y(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){S[u]=new y(u,5,!1,u.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function B(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var l=u.replace(A,B);S[l]=new y(l,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var l=u.replace(A,B);S[l]=new y(l,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var l=u.replace(A,B);S[l]=new y(l,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){S[u]=new y(u,1,!1,u.toLowerCase(),null,!1,!1)}),S.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){S[u]=new y(u,1,!1,u.toLowerCase(),null,!0,!0)});function I(u,l,m,C){var P=S.hasOwnProperty(l)?S[l]:null;(P!==null?P.type!==0:C||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,m,P,C)&&(m=null),C||P===null?v(l)&&(m===null?u.removeAttribute(l):u.setAttribute(l,""+m)):P.mustUseProperty?u[P.propertyName]=m===null?P.type===3?!1:"":m:(l=P.attributeName,C=P.attributeNamespace,m===null?u.removeAttribute(l):(P=P.type,m=P===3||P===4&&m===!0?"":""+m,C?u.setAttributeNS(C,l,m):u.setAttribute(l,m))))}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),j=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),ge=Symbol.iterator;function se(u){return u===null||typeof u!="object"?null:(u=ge&&u[ge]||u["@@iterator"],typeof u=="function"?u:null)}var we=Object.assign,X;function Ee(u){if(X===void 0)try{throw Error()}catch(m){var l=m.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+u}var st=!1;function Me(u,l){if(!u||st)return"";st=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(xe){var C=xe}Reflect.construct(u,[],l)}else{try{l.call()}catch(xe){C=xe}u.call(l.prototype)}else{try{throw Error()}catch(xe){C=xe}u()}}catch(xe){if(xe&&C&&typeof xe.stack=="string"){for(var P=xe.stack.split(`
`),D=C.stack.split(`
`),k=P.length-1,V=D.length-1;1<=k&&0<=V&&P[k]!==D[V];)V--;for(;1<=k&&0<=V;k--,V--)if(P[k]!==D[V]){if(k!==1||V!==1)do if(k--,V--,0>V||P[k]!==D[V]){var Z=`
`+P[k].replace(" at new "," at ");return u.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",u.displayName)),Z}while(1<=k&&0<=V);break}}}finally{st=!1,Error.prepareStackTrace=m}return(u=u?u.displayName||u.name:"")?Ee(u):""}function K(u){switch(u.tag){case 5:return Ee(u.type);case 16:return Ee("Lazy");case 13:return Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 2:case 15:return u=Me(u.type,!1),u;case 11:return u=Me(u.type.render,!1),u;case 1:return u=Me(u.type,!0),u;default:return""}}function fe(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case z:return"Fragment";case j:return"Portal";case ae:return"Profiler";case J:return"StrictMode";case ce:return"Suspense";case me:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Pe:return(u.displayName||"Context")+".Consumer";case ne:return(u._context.displayName||"Context")+".Provider";case oe:var l=u.render;return u=u.displayName,u||(u=l.displayName||l.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case ye:return l=u.displayName||null,l!==null?l:fe(u.type)||"Memo";case Fe:l=u._payload,u=u._init;try{return fe(u(l))}catch{}}return null}function Ce(u){var l=u.type;switch(u.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=l.render,u=u.displayName||u.name||"",l.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(l);case 8:return l===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Se(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Ke(u){var l=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ue(u){var l=Ke(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,l),C=""+u[l];if(!u.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var P=m.get,D=m.set;return Object.defineProperty(u,l,{configurable:!0,get:function(){return P.call(this)},set:function(k){C=""+k,D.call(this,k)}}),Object.defineProperty(u,l,{enumerable:m.enumerable}),{getValue:function(){return C},setValue:function(k){C=""+k},stopTracking:function(){u._valueTracker=null,delete u[l]}}}}function Bt(u){u._valueTracker||(u._valueTracker=Ue(u))}function It(u){if(!u)return!1;var l=u._valueTracker;if(!l)return!0;var m=l.getValue(),C="";return u&&(C=Ke(u)?u.checked?"true":"false":u.value),u=C,u!==m?(l.setValue(u),!0):!1}function St(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function lt(u,l){var m=l.checked;return we({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??u._wrapperState.initialChecked})}function yt(u,l){var m=l.defaultValue==null?"":l.defaultValue,C=l.checked!=null?l.checked:l.defaultChecked;m=Se(l.value!=null?l.value:m),u._wrapperState={initialChecked:C,initialValue:m,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function wn(u,l){l=l.checked,l!=null&&I(u,"checked",l,!1)}function Rt(u,l){wn(u,l);var m=Se(l.value),C=l.type;if(m!=null)C==="number"?(m===0&&u.value===""||u.value!=m)&&(u.value=""+m):u.value!==""+m&&(u.value=""+m);else if(C==="submit"||C==="reset"){u.removeAttribute("value");return}l.hasOwnProperty("value")?rr(u,l.type,m):l.hasOwnProperty("defaultValue")&&rr(u,l.type,Se(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(u.defaultChecked=!!l.defaultChecked)}function Nn(u,l,m){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var C=l.type;if(!(C!=="submit"&&C!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+u._wrapperState.initialValue,m||l===u.value||(u.value=l),u.defaultValue=l}m=u.name,m!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,m!==""&&(u.name=m)}function rr(u,l,m){(l!=="number"||St(u.ownerDocument)!==u)&&(m==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+m&&(u.defaultValue=""+m))}var Dn=Array.isArray;function en(u,l,m,C){if(u=u.options,l){l={};for(var P=0;P<m.length;P++)l["$"+m[P]]=!0;for(m=0;m<u.length;m++)P=l.hasOwnProperty("$"+u[m].value),u[m].selected!==P&&(u[m].selected=P),P&&C&&(u[m].defaultSelected=!0)}else{for(m=""+Se(m),l=null,P=0;P<u.length;P++){if(u[P].value===m){u[P].selected=!0,C&&(u[P].defaultSelected=!0);return}l!==null||u[P].disabled||(l=u[P])}l!==null&&(l.selected=!0)}}function tn(u,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return we({},l,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Kn(u,l){var m=l.value;if(m==null){if(m=l.children,l=l.defaultValue,m!=null){if(l!=null)throw Error(n(92));if(Dn(m)){if(1<m.length)throw Error(n(93));m=m[0]}l=m}l==null&&(l=""),m=l}u._wrapperState={initialValue:Se(m)}}function Hn(u,l){var m=Se(l.value),C=Se(l.defaultValue);m!=null&&(m=""+m,m!==u.value&&(u.value=m),l.defaultValue==null&&u.defaultValue!==m&&(u.defaultValue=m)),C!=null&&(u.defaultValue=""+C)}function Wt(u){var l=u.textContent;l===u._wrapperState.initialValue&&l!==""&&l!==null&&(u.value=l)}function Sr(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vr(u,l){return u==null||u==="http://www.w3.org/1999/xhtml"?Sr(l):u==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var Tn,yr=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,m,C,P){MSApp.execUnsafeLocalFunction(function(){return u(l,m,C,P)})}:u}(function(u,l){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=l;else{for(Tn=Tn||document.createElement("div"),Tn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Tn.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;l.firstChild;)u.appendChild(l.firstChild)}});function wr(u,l){if(l){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=l;return}}u.textContent=l}var ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vi=["Webkit","ms","Moz","O"];Object.keys(ir).forEach(function(u){Vi.forEach(function(l){l=l+u.charAt(0).toUpperCase()+u.substring(1),ir[l]=ir[u]})});function Ui(u,l,m){return l==null||typeof l=="boolean"||l===""?"":m||typeof l!="number"||l===0||ir.hasOwnProperty(u)&&ir[u]?(""+l).trim():l+"px"}function Xi(u,l){u=u.style;for(var m in l)if(l.hasOwnProperty(m)){var C=m.indexOf("--")===0,P=Ui(m,l[m],C);m==="float"&&(m="cssFloat"),C?u.setProperty(m,P):u[m]=P}}var qu=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rs(u,l){if(l){if(qu[u]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Eo(u,l){if(u.indexOf("-")===-1)return typeof l.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=null;function Zu(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var pi=null,Ms=null,bs=null;function wc(u){if(u=_r(u)){if(typeof pi!="function")throw Error(n(280));var l=u.stateNode;l&&(l=Fh(l),pi(u.stateNode,u.type,l))}}function eh(u){Ms?bs?bs.push(u):bs=[u]:Ms=u}function th(){if(Ms){var u=Ms,l=bs;if(bs=Ms=null,wc(u),l)for(u=0;u<l.length;u++)wc(l[u])}}function nh(u,l){return u(l)}function Cc(){}var xc=!1;function rh(u,l,m){if(xc)return u(l,m);xc=!0;try{return nh(u,l,m)}finally{xc=!1,(Ms!==null||bs!==null)&&(Cc(),th())}}function Qu(u,l){var m=u.stateNode;if(m===null)return null;var C=Fh(m);if(C===null)return null;m=C[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(u=u.type,C=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!C;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(n(231,l,typeof m));return m}var Ju=!1;if(a)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{Ju=!1}function Ec(u,l,m,C,P,D,k,V,Z){var xe=Array.prototype.slice.call(arguments,3);try{l.apply(m,xe)}catch(_e){this.onError(_e)}}var lu=!1,Qa=null,Ja=!1,Pc=null,O0={onError:function(u){lu=!0,Qa=u}};function I0(u,l,m,C,P,D,k,V,Z){lu=!1,Qa=null,Ec.apply(O0,arguments)}function F0(u,l,m,C,P,D,k,V,Z){if(I0.apply(this,arguments),lu){if(lu){var xe=Qa;lu=!1,Qa=null}else throw Error(n(198));Ja||(Ja=!0,Pc=xe)}}function Os(u){var l=u,m=u;if(u.alternate)for(;l.return;)l=l.return;else{u=l;do l=u,(l.flags&4098)!==0&&(m=l.return),u=l.return;while(u)}return l.tag===3?m:null}function Sc(u){if(u.tag===13){var l=u.memoizedState;if(l===null&&(u=u.alternate,u!==null&&(l=u.memoizedState)),l!==null)return l.dehydrated}return null}function ih(u){if(Os(u)!==u)throw Error(n(188))}function k0(u){var l=u.alternate;if(!l){if(l=Os(u),l===null)throw Error(n(188));return l!==u?null:u}for(var m=u,C=l;;){var P=m.return;if(P===null)break;var D=P.alternate;if(D===null){if(C=P.return,C!==null){m=C;continue}break}if(P.child===D.child){for(D=P.child;D;){if(D===m)return ih(P),u;if(D===C)return ih(P),l;D=D.sibling}throw Error(n(188))}if(m.return!==C.return)m=P,C=D;else{for(var k=!1,V=P.child;V;){if(V===m){k=!0,m=P,C=D;break}if(V===C){k=!0,C=P,m=D;break}V=V.sibling}if(!k){for(V=D.child;V;){if(V===m){k=!0,m=D,C=P;break}if(V===C){k=!0,C=D,m=P;break}V=V.sibling}if(!k)throw Error(n(189))}}if(m.alternate!==C)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?u:l}function oh(u){return u=k0(u),u!==null?sh(u):null}function sh(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var l=sh(u);if(l!==null)return l;u=u.sibling}return null}var uh=t.unstable_scheduleCallback,ah=t.unstable_cancelCallback,el=t.unstable_shouldYield,lh=t.unstable_requestPaint,mn=t.unstable_now,ch=t.unstable_getCurrentPriorityLevel,Ko=t.unstable_ImmediatePriority,fh=t.unstable_UserBlockingPriority,Yo=t.unstable_NormalPriority,tl=t.unstable_LowPriority,Dc=t.unstable_IdlePriority,nl=null,mi=null;function L0(u){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(nl,u,void 0,(u.current.flags&128)===128)}catch{}}var Bi=Math.clz32?Math.clz32:$,H=Math.log,Y=Math.LN2;function $(u){return u>>>=0,u===0?32:31-(H(u)/Y|0)|0}var re=64,ue=4194304;function ee(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Be(u,l){var m=u.pendingLanes;if(m===0)return 0;var C=0,P=u.suspendedLanes,D=u.pingedLanes,k=m&268435455;if(k!==0){var V=k&~P;V!==0?C=ee(V):(D&=k,D!==0&&(C=ee(D)))}else k=m&~P,k!==0?C=ee(k):D!==0&&(C=ee(D));if(C===0)return 0;if(l!==0&&l!==C&&(l&P)===0&&(P=C&-C,D=l&-l,P>=D||P===16&&(D&4194240)!==0))return l;if((C&4)!==0&&(C|=m&16),l=u.entangledLanes,l!==0)for(u=u.entanglements,l&=C;0<l;)m=31-Bi(l),P=1<<m,C|=u[m],l&=~P;return C}function Ne(u,l){switch(u){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function je(u,l){for(var m=u.suspendedLanes,C=u.pingedLanes,P=u.expirationTimes,D=u.pendingLanes;0<D;){var k=31-Bi(D),V=1<<k,Z=P[k];Z===-1?((V&m)===0||(V&C)!==0)&&(P[k]=Ne(V,l)):Z<=l&&(u.expiredLanes|=V),D&=~V}}function We(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Xe(){var u=re;return re<<=1,(re&4194240)===0&&(re=64),u}function tt(u){for(var l=[],m=0;31>m;m++)l.push(u);return l}function kt(u,l,m){u.pendingLanes|=l,l!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,l=31-Bi(l),u[l]=m}function sn(u,l){var m=u.pendingLanes&~l;u.pendingLanes=l,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=l,u.mutableReadLanes&=l,u.entangledLanes&=l,l=u.entanglements;var C=u.eventTimes;for(u=u.expirationTimes;0<m;){var P=31-Bi(m),D=1<<P;l[P]=0,C[P]=-1,u[P]=-1,m&=~D}}function Qt(u,l){var m=u.entangledLanes|=l;for(u=u.entanglements;m;){var C=31-Bi(m),P=1<<C;P&l|u[C]&l&&(u[C]|=l),m&=~P}}var wt=0;function Cn(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Fr,qo,rl,Tc,ta,Ac=!1,na=[],Zo=null,Po=null,cu=null,il=new Map,Bc=new Map,fu=[],P3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pp(u,l){switch(u){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":cu=null;break;case"pointerover":case"pointerout":il.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(l.pointerId)}}function ra(u,l,m,C,P,D){return u===null||u.nativeEvent!==D?(u={blockedOn:l,domEventName:m,eventSystemFlags:C,nativeEvent:D,targetContainers:[P]},l!==null&&(l=_r(l),l!==null&&qo(l)),u):(u.eventSystemFlags|=C,l=u.targetContainers,P!==null&&l.indexOf(P)===-1&&l.push(P),u)}function S3(u,l,m,C,P){switch(l){case"focusin":return Zo=ra(Zo,u,l,m,C,P),!0;case"dragenter":return Po=ra(Po,u,l,m,C,P),!0;case"mouseover":return cu=ra(cu,u,l,m,C,P),!0;case"pointerover":var D=P.pointerId;return il.set(D,ra(il.get(D)||null,u,l,m,C,P)),!0;case"gotpointercapture":return D=P.pointerId,Bc.set(D,ra(Bc.get(D)||null,u,l,m,C,P)),!0}return!1}function Sp(u){var l=ts(u.target);if(l!==null){var m=Os(l);if(m!==null){if(l=m.tag,l===13){if(l=Sc(m),l!==null){u.blockedOn=l,ta(u.priority,function(){rl(m)});return}}else if(l===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function hh(u){if(u.blockedOn!==null)return!1;for(var l=u.targetContainers;0<l.length;){var m=ph(u.domEventName,u.eventSystemFlags,l[0],u.nativeEvent);if(m===null){m=u.nativeEvent;var C=new m.constructor(m.type,m);au=C,m.target.dispatchEvent(C),au=null}else return l=_r(m),l!==null&&qo(l),u.blockedOn=m,!1;l.shift()}return!0}function Dp(u,l,m){hh(u)&&m.delete(l)}function D3(){Ac=!1,Zo!==null&&hh(Zo)&&(Zo=null),Po!==null&&hh(Po)&&(Po=null),cu!==null&&hh(cu)&&(cu=null),il.forEach(Dp),Bc.forEach(Dp)}function xn(u,l){u.blockedOn===l&&(u.blockedOn=null,Ac||(Ac=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,D3)))}function vn(u){function l(P){return xn(P,u)}if(0<na.length){xn(na[0],u);for(var m=1;m<na.length;m++){var C=na[m];C.blockedOn===u&&(C.blockedOn=null)}}for(Zo!==null&&xn(Zo,u),Po!==null&&xn(Po,u),cu!==null&&xn(cu,u),il.forEach(l),Bc.forEach(l),m=0;m<fu.length;m++)C=fu[m],C.blockedOn===u&&(C.blockedOn=null);for(;0<fu.length&&(m=fu[0],m.blockedOn===null);)Sp(m),m.blockedOn===null&&fu.shift()}var ol=_.ReactCurrentBatchConfig,dh=!0;function T3(u,l,m,C){var P=wt,D=ol.transition;ol.transition=null;try{wt=1,_0(u,l,m,C)}finally{wt=P,ol.transition=D}}function A3(u,l,m,C){var P=wt,D=ol.transition;ol.transition=null;try{wt=4,_0(u,l,m,C)}finally{wt=P,ol.transition=D}}function _0(u,l,m,C){if(dh){var P=ph(u,l,m,C);if(P===null)e1(u,l,C,gh,m),Pp(u,C);else if(S3(P,u,l,m,C))C.stopPropagation();else if(Pp(u,C),l&4&&-1<P3.indexOf(u)){for(;P!==null;){var D=_r(P);if(D!==null&&Fr(D),D=ph(u,l,m,C),D===null&&e1(u,l,C,gh,m),D===P)break;P=D}P!==null&&C.stopPropagation()}else e1(u,l,C,null,m)}}var gh=null;function ph(u,l,m,C){if(gh=null,u=Zu(C),u=ts(u),u!==null)if(l=Os(u),l===null)u=null;else if(m=l.tag,m===13){if(u=Sc(l),u!==null)return u;u=null}else if(m===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;u=null}else l!==u&&(u=null);return gh=u,null}function Tp(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ch()){case Ko:return 1;case fh:return 4;case Yo:case tl:return 16;case Dc:return 536870912;default:return 16}default:return 16}}var Gn=null,Rc=null,Qo=null;function N0(){if(Qo)return Qo;var u,l=Rc,m=l.length,C,P="value"in Gn?Gn.value:Gn.textContent,D=P.length;for(u=0;u<m&&l[u]===P[u];u++);var k=m-u;for(C=1;C<=k&&l[m-C]===P[D-C];C++);return Qo=P.slice(u,1<C?1-C:void 0)}function sl(u){var l=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&l===13&&(u=13)):u=l,u===10&&(u=13),32<=u||u===13?u:0}function Qr(){return!0}function H0(){return!1}function vi(u){function l(m,C,P,D,k){this._reactName=m,this._targetInst=P,this.type=C,this.nativeEvent=D,this.target=k,this.currentTarget=null;for(var V in u)u.hasOwnProperty(V)&&(m=u[V],this[V]=m?m(D):D[V]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Qr:H0,this.isPropagationStopped=H0,this}return we(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),l}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mh=vi(ia),ul=we({},ia,{view:0,detail:0}),Ap=vi(ul),Jr,G0,kr,vh=we({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:V0,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==kr&&(kr&&u.type==="mousemove"?(Jr=u.screenX-kr.screenX,G0=u.screenY-kr.screenY):G0=Jr=0,kr=u),Jr)},movementY:function(u){return"movementY"in u?u.movementY:G0}}),W0=vi(vh),hu=we({},vh,{dataTransfer:0}),yh=vi(hu),$0=we({},ul,{relatedTarget:0}),Rn=vi($0),du=we({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),j0=vi(du),B3=we({},ia,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),z0=vi(B3),R3=we({},ia,{data:0}),Bp=vi(R3),M3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(u){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(u):(u=wh[u])?!!l[u]:!1}function V0(){return al}var Mp=we({},ul,{key:function(u){if(u.key){var l=M3[u.key]||u.key;if(l!=="Unidentified")return l}return u.type==="keypress"?(u=sl(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Rp[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:V0,charCode:function(u){return u.type==="keypress"?sl(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?sl(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),bp=vi(Mp),U0=we({},vh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ch=vi(U0),Op=we({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:V0}),b3=vi(Op),X0=we({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),K0=vi(X0),O3=we({},vh,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Ip=vi(O3),Ri=[9,13,27,32],Mc=a&&"CompositionEvent"in window,Is=null;a&&"documentMode"in document&&(Is=document.documentMode);var Fp=a&&"TextEvent"in window&&!Is,Y0=a&&(!Mc||Is&&8<Is&&11>=Is),kp=" ",Lp=!1;function _p(u,l){switch(u){case"keyup":return Ri.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var ll=!1;function cl(u,l){switch(u){case"compositionend":return Np(l);case"keypress":return l.which!==32?null:(Lp=!0,kp);case"textInput":return u=l.data,u===kp&&Lp?null:u;default:return null}}function I3(u,l){if(ll)return u==="compositionend"||!Mc&&_p(u,l)?(u=N0(),Qo=Rc=Gn=null,ll=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Y0&&l.locale!=="ko"?null:l.data;default:return null}}var F3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xh(u){var l=u&&u.nodeName&&u.nodeName.toLowerCase();return l==="input"?!!F3[u.type]:l==="textarea"}function q0(u,l,m,C){eh(C),l=Mh(l,"onChange"),0<l.length&&(m=new mh("onChange","change",null,m,C),u.push({event:m,listeners:l}))}var Ki=null,gu=null;function k3(u){Vp(u,0)}function Eh(u){var l=Nt(u);if(It(l))return u}function L3(u,l){if(u==="change")return l}var oa=!1;if(a){var Mi;if(a){var Ph="oninput"in document;if(!Ph){var Hp=document.createElement("div");Hp.setAttribute("oninput","return;"),Ph=typeof Hp.oninput=="function"}Mi=Ph}else Mi=!1;oa=Mi&&(!document.documentMode||9<document.documentMode)}function Gp(){Ki&&(Ki.detachEvent("onpropertychange",Wp),gu=Ki=null)}function Wp(u){if(u.propertyName==="value"&&Eh(gu)){var l=[];q0(l,gu,u,Zu(u)),rh(k3,l)}}function _3(u,l,m){u==="focusin"?(Gp(),Ki=l,gu=m,Ki.attachEvent("onpropertychange",Wp)):u==="focusout"&&Gp()}function N3(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Eh(gu)}function fl(u,l){if(u==="click")return Eh(l)}function ie(u,l){if(u==="input"||u==="change")return Eh(l)}function Re(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var ve=typeof Object.is=="function"?Object.is:Re;function Qe(u,l){if(ve(u,l))return!0;if(typeof u!="object"||u===null||typeof l!="object"||l===null)return!1;var m=Object.keys(u),C=Object.keys(l);if(m.length!==C.length)return!1;for(C=0;C<m.length;C++){var P=m[C];if(!f.call(l,P)||!ve(u[P],l[P]))return!1}return!0}function Ft(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function cn(u,l){var m=Ft(u);u=0;for(var C;m;){if(m.nodeType===3){if(C=u+m.textContent.length,u<=l&&C>=l)return{node:m,offset:l-u};u=C}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ft(m)}}function or(u,l){return u&&l?u===l?!0:u&&u.nodeType===3?!1:l&&l.nodeType===3?or(u,l.parentNode):"contains"in u?u.contains(l):u.compareDocumentPosition?!!(u.compareDocumentPosition(l)&16):!1:!1}function En(){for(var u=window,l=St();l instanceof u.HTMLIFrameElement;){try{var m=typeof l.contentWindow.location.href=="string"}catch{m=!1}if(m)u=l.contentWindow;else break;l=St(u.document)}return l}function bc(u){var l=u&&u.nodeName&&u.nodeName.toLowerCase();return l&&(l==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||l==="textarea"||u.contentEditable==="true")}function H3(u){var l=En(),m=u.focusedElem,C=u.selectionRange;if(l!==m&&m&&m.ownerDocument&&or(m.ownerDocument.documentElement,m)){if(C!==null&&bc(m)){if(l=C.start,u=C.end,u===void 0&&(u=l),"selectionStart"in m)m.selectionStart=l,m.selectionEnd=Math.min(u,m.value.length);else if(u=(l=m.ownerDocument||document)&&l.defaultView||window,u.getSelection){u=u.getSelection();var P=m.textContent.length,D=Math.min(C.start,P);C=C.end===void 0?D:Math.min(C.end,P),!u.extend&&D>C&&(P=C,C=D,D=P),P=cn(m,D);var k=cn(m,C);P&&k&&(u.rangeCount!==1||u.anchorNode!==P.node||u.anchorOffset!==P.offset||u.focusNode!==k.node||u.focusOffset!==k.offset)&&(l=l.createRange(),l.setStart(P.node,P.offset),u.removeAllRanges(),D>C?(u.addRange(l),u.extend(k.node,k.offset)):(l.setEnd(k.node,k.offset),u.addRange(l)))}}for(l=[],u=m;u=u.parentNode;)u.nodeType===1&&l.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<l.length;m++)u=l[m],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var Yi=a&&"documentMode"in document&&11>=document.documentMode,Fs=null,Z0=null,Jo=null,hl=!1;function Oc(u,l,m){var C=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;hl||Fs==null||Fs!==St(C)||(C=Fs,"selectionStart"in C&&bc(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Jo&&Qe(Jo,C)||(Jo=C,C=Mh(Z0,"onSelect"),0<C.length&&(l=new mh("onSelect","select",null,l,m),u.push({event:l,listeners:C}),l.target=Fs)))}function fn(u,l){var m={};return m[u.toLowerCase()]=l.toLowerCase(),m["Webkit"+u]="webkit"+l,m["Moz"+u]="moz"+l,m}var dl={animationend:fn("Animation","AnimationEnd"),animationiteration:fn("Animation","AnimationIteration"),animationstart:fn("Animation","AnimationStart"),transitionend:fn("Transition","TransitionEnd")},Sh={},Ic={};a&&(Ic=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function Dh(u){if(Sh[u])return Sh[u];if(!dl[u])return u;var l=dl[u],m;for(m in l)if(l.hasOwnProperty(m)&&m in Ic)return Sh[u]=l[m];return u}var $p=Dh("animationend"),jp=Dh("animationiteration"),Fc=Dh("animationstart"),ks=Dh("transitionend"),kc=new Map,Q0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(u,l){kc.set(u,l),o(l,[u])}for(var Th=0;Th<Q0.length;Th++){var Ah=Q0[Th],Bh=Ah.toLowerCase(),zp=Ah[0].toUpperCase()+Ah.slice(1);So(Bh,"on"+zp)}So($p,"onAnimationEnd"),So(jp,"onAnimationIteration"),So(Fc,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(ks,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function Lc(u,l,m){var C=u.type||"unknown-event";u.currentTarget=m,F0(C,l,void 0,u),u.currentTarget=null}function Vp(u,l){l=(l&4)!==0;for(var m=0;m<u.length;m++){var C=u[m],P=C.event;C=C.listeners;e:{var D=void 0;if(l)for(var k=C.length-1;0<=k;k--){var V=C[k],Z=V.instance,xe=V.currentTarget;if(V=V.listener,Z!==D&&P.isPropagationStopped())break e;Lc(P,V,xe),D=Z}else for(k=0;k<C.length;k++){if(V=C[k],Z=V.instance,xe=V.currentTarget,V=V.listener,Z!==D&&P.isPropagationStopped())break e;Lc(P,V,xe),D=Z}}}if(Ja)throw u=Pc,Ja=!1,Pc=null,u}function Fn(u,l){var m=l[Ih];m===void 0&&(m=l[Ih]=new Set);var C=u+"__bubble";m.has(C)||(Rh(l,u,2,!1),m.add(C))}function J0(u,l,m){var C=0;l&&(C|=4),Rh(m,u,C,l)}var ua="_reactListening"+Math.random().toString(36).slice(2);function pu(u){if(!u[ua]){u[ua]=!0,r.forEach(function(m){m!=="selectionchange"&&(sa.has(m)||J0(m,!1,u),J0(m,!0,u))});var l=u.nodeType===9?u:u.ownerDocument;l===null||l[ua]||(l[ua]=!0,J0("selectionchange",!1,l))}}function Rh(u,l,m,C){switch(Tp(l)){case 1:var P=T3;break;case 4:P=A3;break;default:P=_0}m=P.bind(null,l,m,u),P=void 0,!Ju||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(P=!0),C?P!==void 0?u.addEventListener(l,m,{capture:!0,passive:P}):u.addEventListener(l,m,!0):P!==void 0?u.addEventListener(l,m,{passive:P}):u.addEventListener(l,m,!1)}function e1(u,l,m,C,P){var D=C;if((l&1)===0&&(l&2)===0&&C!==null)e:for(;;){if(C===null)return;var k=C.tag;if(k===3||k===4){var V=C.stateNode.containerInfo;if(V===P||V.nodeType===8&&V.parentNode===P)break;if(k===4)for(k=C.return;k!==null;){var Z=k.tag;if((Z===3||Z===4)&&(Z=k.stateNode.containerInfo,Z===P||Z.nodeType===8&&Z.parentNode===P))return;k=k.return}for(;V!==null;){if(k=ts(V),k===null)return;if(Z=k.tag,Z===5||Z===6){C=D=k;continue e}V=V.parentNode}}C=C.return}rh(function(){var xe=D,_e=Zu(m),Ge=[];e:{var ke=kc.get(u);if(ke!==void 0){var Je=mh,nt=u;switch(u){case"keypress":if(sl(m)===0)break e;case"keydown":case"keyup":Je=bp;break;case"focusin":nt="focus",Je=Rn;break;case"focusout":nt="blur",Je=Rn;break;case"beforeblur":case"afterblur":Je=Rn;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=b3;break;case $p:case jp:case Fc:Je=j0;break;case ks:Je=K0;break;case"scroll":Je=Ap;break;case"wheel":Je=Ip;break;case"copy":case"cut":case"paste":Je=z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=Ch}var it=(l&4)!==0,er=!it&&u==="scroll",de=it?ke!==null?ke+"Capture":null:ke;it=[];for(var te=xe,pe;te!==null;){pe=te;var ze=pe.stateNode;if(pe.tag===5&&ze!==null&&(pe=ze,de!==null&&(ze=Qu(te,de),ze!=null&&it.push(gl(te,ze,pe)))),er)break;te=te.return}0<it.length&&(ke=new Je(ke,nt,null,m,_e),Ge.push({event:ke,listeners:it}))}}if((l&7)===0){e:{if(ke=u==="mouseover"||u==="pointerover",Je=u==="mouseout"||u==="pointerout",ke&&m!==au&&(nt=m.relatedTarget||m.fromElement)&&(ts(nt)||nt[bi]))break e;if((Je||ke)&&(ke=_e.window===_e?_e:(ke=_e.ownerDocument)?ke.defaultView||ke.parentWindow:window,Je?(nt=m.relatedTarget||m.toElement,Je=xe,nt=nt?ts(nt):null,nt!==null&&(er=Os(nt),nt!==er||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(Je=null,nt=xe),Je!==nt)){if(it=W0,ze="onMouseLeave",de="onMouseEnter",te="mouse",(u==="pointerout"||u==="pointerover")&&(it=Ch,ze="onPointerLeave",de="onPointerEnter",te="pointer"),er=Je==null?ke:Nt(Je),pe=nt==null?ke:Nt(nt),ke=new it(ze,te+"leave",Je,m,_e),ke.target=er,ke.relatedTarget=pe,ze=null,ts(_e)===xe&&(it=new it(de,te+"enter",nt,m,_e),it.target=pe,it.relatedTarget=er,ze=it),er=ze,Je&&nt)t:{for(it=Je,de=nt,te=0,pe=it;pe;pe=pl(pe))te++;for(pe=0,ze=de;ze;ze=pl(ze))pe++;for(;0<te-pe;)it=pl(it),te--;for(;0<pe-te;)de=pl(de),pe--;for(;te--;){if(it===de||de!==null&&it===de.alternate)break t;it=pl(it),de=pl(de)}it=null}else it=null;Je!==null&&sr(Ge,ke,Je,it,!1),nt!==null&&er!==null&&sr(Ge,er,nt,it,!0)}}e:{if(ke=xe?Nt(xe):window,Je=ke.nodeName&&ke.nodeName.toLowerCase(),Je==="select"||Je==="input"&&ke.type==="file")var ct=L3;else if(xh(ke))if(oa)ct=ie;else{ct=N3;var Ct=_3}else(Je=ke.nodeName)&&Je.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(ct=fl);if(ct&&(ct=ct(u,xe))){q0(Ge,ct,m,_e);break e}Ct&&Ct(u,ke,xe),u==="focusout"&&(Ct=ke._wrapperState)&&Ct.controlled&&ke.type==="number"&&rr(ke,"number",ke.value)}switch(Ct=xe?Nt(xe):window,u){case"focusin":(xh(Ct)||Ct.contentEditable==="true")&&(Fs=Ct,Z0=xe,Jo=null);break;case"focusout":Jo=Z0=Fs=null;break;case"mousedown":hl=!0;break;case"contextmenu":case"mouseup":case"dragend":hl=!1,Oc(Ge,m,_e);break;case"selectionchange":if(Yi)break;case"keydown":case"keyup":Oc(Ge,m,_e)}var vt;if(Mc)e:{switch(u){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else ll?_p(u,m)&&(Dt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Dt="onCompositionStart");Dt&&(Y0&&m.locale!=="ko"&&(ll||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&ll&&(vt=N0()):(Gn=_e,Rc="value"in Gn?Gn.value:Gn.textContent,ll=!0)),Ct=Mh(xe,Dt),0<Ct.length&&(Dt=new Bp(Dt,u,null,m,_e),Ge.push({event:Dt,listeners:Ct}),vt?Dt.data=vt:(vt=Np(m),vt!==null&&(Dt.data=vt)))),(vt=Fp?cl(u,m):I3(u,m))&&(xe=Mh(xe,"onBeforeInput"),0<xe.length&&(_e=new Bp("onBeforeInput","beforeinput",null,m,_e),Ge.push({event:_e,listeners:xe}),_e.data=vt))}Vp(Ge,l)})}function gl(u,l,m){return{instance:u,listener:l,currentTarget:m}}function Mh(u,l){for(var m=l+"Capture",C=[];u!==null;){var P=u,D=P.stateNode;P.tag===5&&D!==null&&(P=D,D=Qu(u,m),D!=null&&C.unshift(gl(u,D,P)),D=Qu(u,l),D!=null&&C.push(gl(u,D,P))),u=u.return}return C}function pl(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function sr(u,l,m,C,P){for(var D=l._reactName,k=[];m!==null&&m!==C;){var V=m,Z=V.alternate,xe=V.stateNode;if(Z!==null&&Z===C)break;V.tag===5&&xe!==null&&(V=xe,P?(Z=Qu(m,D),Z!=null&&k.unshift(gl(m,Z,V))):P||(Z=Qu(m,D),Z!=null&&k.push(gl(m,Z,V)))),m=m.return}k.length!==0&&u.push({event:l,listeners:k})}var Lr=/\r\n?/g,G3=/\u0000|\uFFFD/g;function Up(u){return(typeof u=="string"?u:""+u).replace(Lr,`
`).replace(G3,"")}function _c(u,l,m){if(l=Up(l),Up(u)!==l&&m)throw Error(n(425))}function bh(){}var Nc=null,aa=null;function Hc(u,l){return u==="textarea"||u==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var mu=typeof setTimeout=="function"?setTimeout:void 0,Gc=typeof clearTimeout=="function"?clearTimeout:void 0,ml=typeof Promise=="function"?Promise:void 0,Oh=typeof queueMicrotask=="function"?queueMicrotask:typeof ml<"u"?function(u){return ml.resolve(null).then(u).catch(vl)}:mu;function vl(u){setTimeout(function(){throw u})}function t1(u,l){var m=l,C=0;do{var P=m.nextSibling;if(u.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(C===0){u.removeChild(P),vn(l);return}C--}else m!=="$"&&m!=="$?"&&m!=="$!"||C++;m=P}while(m);vn(l)}function vu(u){for(;u!=null;u=u.nextSibling){var l=u.nodeType;if(l===1||l===3)break;if(l===8){if(l=u.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return u}function Xp(u){u=u.previousSibling;for(var l=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(l===0)return u;l--}else m==="/$"&&l++}u=u.previousSibling}return null}var yl=Math.random().toString(36).slice(2),es="__reactFiber$"+yl,yu="__reactProps$"+yl,bi="__reactContainer$"+yl,Ih="__reactEvents$"+yl,N="__reactListeners$"+yl,wl="__reactHandles$"+yl;function ts(u){var l=u[es];if(l)return l;for(var m=u.parentNode;m;){if(l=m[bi]||m[es]){if(m=l.alternate,l.child!==null||m!==null&&m.child!==null)for(u=Xp(u);u!==null;){if(m=u[es])return m;u=Xp(u)}return l}u=m,m=u.parentNode}return null}function _r(u){return u=u[es]||u[bi],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Nt(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function Fh(u){return u[yu]||null}var n1=[],Cl=-1;function yi(u){return{current:u}}function kn(u){0>Cl||(u.current=n1[Cl],n1[Cl]=null,Cl--)}function Mn(u,l){Cl++,n1[Cl]=u.current,u.current=l}var wu={},Nr=yi(wu),wi=yi(!1),ei=wu;function xl(u,l){var m=u.type.contextTypes;if(!m)return wu;var C=u.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===l)return C.__reactInternalMemoizedMaskedChildContext;var P={},D;for(D in m)P[D]=l[D];return C&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=l,u.__reactInternalMemoizedMaskedChildContext=P),P}function Ci(u){return u=u.childContextTypes,u!=null}function kh(){kn(wi),kn(Nr)}function Kp(u,l,m){if(Nr.current!==wu)throw Error(n(168));Mn(Nr,l),Mn(wi,m)}function Yp(u,l,m){var C=u.stateNode;if(l=l.childContextTypes,typeof C.getChildContext!="function")return m;C=C.getChildContext();for(var P in C)if(!(P in l))throw Error(n(108,Ce(u)||"Unknown",P));return we({},m,C)}function qi(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||wu,ei=Nr.current,Mn(Nr,u),Mn(wi,wi.current),!0}function qp(u,l,m){var C=u.stateNode;if(!C)throw Error(n(169));m?(u=Yp(u,l,ei),C.__reactInternalMemoizedMergedChildContext=u,kn(wi),kn(Nr),Mn(Nr,u)):kn(wi),Mn(wi,m)}var _s=null,Lh=!1,r1=!1;function Zp(u){_s===null?_s=[u]:_s.push(u)}function la(u){Lh=!0,Zp(u)}function Cu(){if(!r1&&_s!==null){r1=!0;var u=0,l=wt;try{var m=_s;for(wt=1;u<m.length;u++){var C=m[u];do C=C(!0);while(C!==null)}_s=null,Lh=!1}catch(P){throw _s!==null&&(_s=_s.slice(u+1)),uh(Ko,Cu),P}finally{wt=l,r1=!1}}return null}var El=[],Hr=0,_h=null,Nh=0,Zi=[],Qi=0,ca=null,ns=1,rs="";function fa(u,l){El[Hr++]=Nh,El[Hr++]=_h,_h=u,Nh=l}function Qp(u,l,m){Zi[Qi++]=ns,Zi[Qi++]=rs,Zi[Qi++]=ca,ca=u;var C=ns;u=rs;var P=32-Bi(C)-1;C&=~(1<<P),m+=1;var D=32-Bi(l)+P;if(30<D){var k=P-P%5;D=(C&(1<<k)-1).toString(32),C>>=k,P-=k,ns=1<<32-Bi(l)+P|m<<P|C,rs=D+u}else ns=1<<D|m<<P|C,rs=u}function Wc(u){u.return!==null&&(fa(u,1),Qp(u,1,0))}function ha(u){for(;u===_h;)_h=El[--Hr],El[Hr]=null,Nh=El[--Hr],El[Hr]=null;for(;u===ca;)ca=Zi[--Qi],Zi[Qi]=null,rs=Zi[--Qi],Zi[Qi]=null,ns=Zi[--Qi],Zi[Qi]=null}var Gr=null,Oi=null,Ln=!1,Do=null;function is(u,l){var m=oo(5,null,null,0);m.elementType="DELETED",m.stateNode=l,m.return=u,l=u.deletions,l===null?(u.deletions=[m],u.flags|=16):l.push(m)}function Hh(u,l){switch(u.tag){case 5:var m=u.type;return l=l.nodeType!==1||m.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(u.stateNode=l,Gr=u,Oi=vu(l.firstChild),!0):!1;case 6:return l=u.pendingProps===""||l.nodeType!==3?null:l,l!==null?(u.stateNode=l,Gr=u,Oi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(m=ca!==null?{id:ns,overflow:rs}:null,u.memoizedState={dehydrated:l,treeContext:m,retryLane:1073741824},m=oo(18,null,null,0),m.stateNode=l,m.return=u,u.child=m,Gr=u,Oi=null,!0):!1;default:return!1}}function Ns(u){return(u.mode&1)!==0&&(u.flags&128)===0}function xi(u){if(Ln){var l=Oi;if(l){var m=l;if(!Hh(u,l)){if(Ns(u))throw Error(n(418));l=vu(m.nextSibling);var C=Gr;l&&Hh(u,l)?is(C,m):(u.flags=u.flags&-4097|2,Ln=!1,Gr=u)}}else{if(Ns(u))throw Error(n(418));u.flags=u.flags&-4097|2,Ln=!1,Gr=u}}}function Jp(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Gr=u}function $c(u){if(u!==Gr)return!1;if(!Ln)return Jp(u),Ln=!0,!1;var l;if((l=u.tag!==3)&&!(l=u.tag!==5)&&(l=u.type,l=l!=="head"&&l!=="body"&&!Hc(u.type,u.memoizedProps)),l&&(l=Oi)){if(Ns(u))throw i1(),Error(n(418));for(;l;)is(u,l),l=vu(l.nextSibling)}if(Jp(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,l=0;u;){if(u.nodeType===8){var m=u.data;if(m==="/$"){if(l===0){Oi=vu(u.nextSibling);break e}l--}else m!=="$"&&m!=="$!"&&m!=="$?"||l++}u=u.nextSibling}Oi=null}}else Oi=Gr?vu(u.stateNode.nextSibling):null;return!0}function i1(){for(var u=Oi;u;)u=vu(u.nextSibling)}function os(){Oi=Gr=null,Ln=!1}function ss(u){Do===null?Do=[u]:Do.push(u)}var e2=_.ReactCurrentBatchConfig;function jc(u,l,m){if(u=m.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var C=m.stateNode}if(!C)throw Error(n(147,u));var P=C,D=""+u;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===D?l.ref:(l=function(k){var V=P.refs;k===null?delete V[D]:V[D]=k},l._stringRef=D,l)}if(typeof u!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,u))}return u}function da(u,l){throw u=Object.prototype.toString.call(l),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":u))}function t2(u){var l=u._init;return l(u._payload)}function o1(u){function l(de,te){if(u){var pe=de.deletions;pe===null?(de.deletions=[te],de.flags|=16):pe.push(te)}}function m(de,te){if(!u)return null;for(;te!==null;)l(de,te),te=te.sibling;return null}function C(de,te){for(de=new Map;te!==null;)te.key!==null?de.set(te.key,te):de.set(te.index,te),te=te.sibling;return de}function P(de,te){return de=Oo(de,te),de.index=0,de.sibling=null,de}function D(de,te,pe){return de.index=pe,u?(pe=de.alternate,pe!==null?(pe=pe.index,pe<te?(de.flags|=2,te):pe):(de.flags|=2,te)):(de.flags|=1048576,te)}function k(de){return u&&de.alternate===null&&(de.flags|=2),de}function V(de,te,pe,ze){return te===null||te.tag!==6?(te=V1(pe,de.mode,ze),te.return=de,te):(te=P(te,pe),te.return=de,te)}function Z(de,te,pe,ze){var ct=pe.type;return ct===z?_e(de,te,pe.props.children,ze,pe.key):te!==null&&(te.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Fe&&t2(ct)===te.type)?(ze=P(te,pe.props),ze.ref=jc(de,te,pe),ze.return=de,ze):(ze=Cd(pe.type,pe.key,pe.props,null,de.mode,ze),ze.ref=jc(de,te,pe),ze.return=de,ze)}function xe(de,te,pe,ze){return te===null||te.tag!==4||te.stateNode.containerInfo!==pe.containerInfo||te.stateNode.implementation!==pe.implementation?(te=U1(pe,de.mode,ze),te.return=de,te):(te=P(te,pe.children||[]),te.return=de,te)}function _e(de,te,pe,ze,ct){return te===null||te.tag!==7?(te=Sa(pe,de.mode,ze,ct),te.return=de,te):(te=P(te,pe),te.return=de,te)}function Ge(de,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return te=V1(""+te,de.mode,pe),te.return=de,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case L:return pe=Cd(te.type,te.key,te.props,null,de.mode,pe),pe.ref=jc(de,null,te),pe.return=de,pe;case j:return te=U1(te,de.mode,pe),te.return=de,te;case Fe:var ze=te._init;return Ge(de,ze(te._payload),pe)}if(Dn(te)||se(te))return te=Sa(te,de.mode,pe,null),te.return=de,te;da(de,te)}return null}function ke(de,te,pe,ze){var ct=te!==null?te.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return ct!==null?null:V(de,te,""+pe,ze);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case L:return pe.key===ct?Z(de,te,pe,ze):null;case j:return pe.key===ct?xe(de,te,pe,ze):null;case Fe:return ct=pe._init,ke(de,te,ct(pe._payload),ze)}if(Dn(pe)||se(pe))return ct!==null?null:_e(de,te,pe,ze,null);da(de,pe)}return null}function Je(de,te,pe,ze,ct){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return de=de.get(pe)||null,V(te,de,""+ze,ct);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case L:return de=de.get(ze.key===null?pe:ze.key)||null,Z(te,de,ze,ct);case j:return de=de.get(ze.key===null?pe:ze.key)||null,xe(te,de,ze,ct);case Fe:var Ct=ze._init;return Je(de,te,pe,Ct(ze._payload),ct)}if(Dn(ze)||se(ze))return de=de.get(pe)||null,_e(te,de,ze,ct,null);da(te,ze)}return null}function nt(de,te,pe,ze){for(var ct=null,Ct=null,vt=te,Dt=te=0,Er=null;vt!==null&&Dt<pe.length;Dt++){vt.index>Dt?(Er=vt,vt=null):Er=vt.sibling;var hn=ke(de,vt,pe[Dt],ze);if(hn===null){vt===null&&(vt=Er);break}u&&vt&&hn.alternate===null&&l(de,vt),te=D(hn,te,Dt),Ct===null?ct=hn:Ct.sibling=hn,Ct=hn,vt=Er}if(Dt===pe.length)return m(de,vt),Ln&&fa(de,Dt),ct;if(vt===null){for(;Dt<pe.length;Dt++)vt=Ge(de,pe[Dt],ze),vt!==null&&(te=D(vt,te,Dt),Ct===null?ct=vt:Ct.sibling=vt,Ct=vt);return Ln&&fa(de,Dt),ct}for(vt=C(de,vt);Dt<pe.length;Dt++)Er=Je(vt,de,Dt,pe[Dt],ze),Er!==null&&(u&&Er.alternate!==null&&vt.delete(Er.key===null?Dt:Er.key),te=D(Er,te,Dt),Ct===null?ct=Er:Ct.sibling=Er,Ct=Er);return u&&vt.forEach(function(Ou){return l(de,Ou)}),Ln&&fa(de,Dt),ct}function it(de,te,pe,ze){var ct=se(pe);if(typeof ct!="function")throw Error(n(150));if(pe=ct.call(pe),pe==null)throw Error(n(151));for(var Ct=ct=null,vt=te,Dt=te=0,Er=null,hn=pe.next();vt!==null&&!hn.done;Dt++,hn=pe.next()){vt.index>Dt?(Er=vt,vt=null):Er=vt.sibling;var Ou=ke(de,vt,hn.value,ze);if(Ou===null){vt===null&&(vt=Er);break}u&&vt&&Ou.alternate===null&&l(de,vt),te=D(Ou,te,Dt),Ct===null?ct=Ou:Ct.sibling=Ou,Ct=Ou,vt=Er}if(hn.done)return m(de,vt),Ln&&fa(de,Dt),ct;if(vt===null){for(;!hn.done;Dt++,hn=pe.next())hn=Ge(de,hn.value,ze),hn!==null&&(te=D(hn,te,Dt),Ct===null?ct=hn:Ct.sibling=hn,Ct=hn);return Ln&&fa(de,Dt),ct}for(vt=C(de,vt);!hn.done;Dt++,hn=pe.next())hn=Je(vt,de,Dt,hn.value,ze),hn!==null&&(u&&hn.alternate!==null&&vt.delete(hn.key===null?Dt:hn.key),te=D(hn,te,Dt),Ct===null?ct=hn:Ct.sibling=hn,Ct=hn);return u&&vt.forEach(function(u7){return l(de,u7)}),Ln&&fa(de,Dt),ct}function er(de,te,pe,ze){if(typeof pe=="object"&&pe!==null&&pe.type===z&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case L:e:{for(var ct=pe.key,Ct=te;Ct!==null;){if(Ct.key===ct){if(ct=pe.type,ct===z){if(Ct.tag===7){m(de,Ct.sibling),te=P(Ct,pe.props.children),te.return=de,de=te;break e}}else if(Ct.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Fe&&t2(ct)===Ct.type){m(de,Ct.sibling),te=P(Ct,pe.props),te.ref=jc(de,Ct,pe),te.return=de,de=te;break e}m(de,Ct);break}else l(de,Ct);Ct=Ct.sibling}pe.type===z?(te=Sa(pe.props.children,de.mode,ze,pe.key),te.return=de,de=te):(ze=Cd(pe.type,pe.key,pe.props,null,de.mode,ze),ze.ref=jc(de,te,pe),ze.return=de,de=ze)}return k(de);case j:e:{for(Ct=pe.key;te!==null;){if(te.key===Ct)if(te.tag===4&&te.stateNode.containerInfo===pe.containerInfo&&te.stateNode.implementation===pe.implementation){m(de,te.sibling),te=P(te,pe.children||[]),te.return=de,de=te;break e}else{m(de,te);break}else l(de,te);te=te.sibling}te=U1(pe,de.mode,ze),te.return=de,de=te}return k(de);case Fe:return Ct=pe._init,er(de,te,Ct(pe._payload),ze)}if(Dn(pe))return nt(de,te,pe,ze);if(se(pe))return it(de,te,pe,ze);da(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,te!==null&&te.tag===6?(m(de,te.sibling),te=P(te,pe),te.return=de,de=te):(m(de,te),te=V1(pe,de.mode,ze),te.return=de,de=te),k(de)):m(de,te)}return er}var Yn=o1(!0),Gh=o1(!1),zc=yi(null),Ii=null,xu=null,Pl=null;function Hs(){Pl=xu=Ii=null}function Wh(u){var l=zc.current;kn(zc),u._currentValue=l}function Dr(u,l,m){for(;u!==null;){var C=u.alternate;if((u.childLanes&l)!==l?(u.childLanes|=l,C!==null&&(C.childLanes|=l)):C!==null&&(C.childLanes&l)!==l&&(C.childLanes|=l),u===m)break;u=u.return}}function Eu(u,l){Ii=u,Pl=xu=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&l)!==0&&(ni=!0),u.firstContext=null)}function Ji(u){var l=u._currentValue;if(Pl!==u)if(u={context:u,memoizedValue:l,next:null},xu===null){if(Ii===null)throw Error(n(308));xu=u,Ii.dependencies={lanes:0,firstContext:u}}else xu=xu.next=u;return l}var ga=null;function s1(u){ga===null?ga=[u]:ga.push(u)}function $h(u,l,m,C){var P=l.interleaved;return P===null?(m.next=m,s1(l)):(m.next=P.next,P.next=m),l.interleaved=m,Gs(u,C)}function Gs(u,l){u.lanes|=l;var m=u.alternate;for(m!==null&&(m.lanes|=l),m=u,u=u.return;u!==null;)u.childLanes|=l,m=u.alternate,m!==null&&(m.childLanes|=l),m=u,u=u.return;return m.tag===3?m.stateNode:null}var eo=!1;function jh(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n2(u,l){u=u.updateQueue,l.updateQueue===u&&(l.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Ws(u,l){return{eventTime:u,lane:l,tag:0,payload:null,callback:null,next:null}}function to(u,l,m){var C=u.updateQueue;if(C===null)return null;if(C=C.shared,(un&2)!==0){var P=C.pending;return P===null?l.next=l:(l.next=P.next,P.next=l),C.pending=l,Gs(u,m)}return P=C.interleaved,P===null?(l.next=l,s1(C)):(l.next=P.next,P.next=l),C.interleaved=l,Gs(u,m)}function zh(u,l,m){if(l=l.updateQueue,l!==null&&(l=l.shared,(m&4194240)!==0)){var C=l.lanes;C&=u.pendingLanes,m|=C,l.lanes=m,Qt(u,m)}}function r2(u,l){var m=u.updateQueue,C=u.alternate;if(C!==null&&(C=C.updateQueue,m===C)){var P=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var k={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};D===null?P=D=k:D=D.next=k,m=m.next}while(m!==null);D===null?P=D=l:D=D.next=l}else P=D=l;m={baseState:C.baseState,firstBaseUpdate:P,lastBaseUpdate:D,shared:C.shared,effects:C.effects},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=l:u.next=l,m.lastBaseUpdate=l}function Sl(u,l,m,C){var P=u.updateQueue;eo=!1;var D=P.firstBaseUpdate,k=P.lastBaseUpdate,V=P.shared.pending;if(V!==null){P.shared.pending=null;var Z=V,xe=Z.next;Z.next=null,k===null?D=xe:k.next=xe,k=Z;var _e=u.alternate;_e!==null&&(_e=_e.updateQueue,V=_e.lastBaseUpdate,V!==k&&(V===null?_e.firstBaseUpdate=xe:V.next=xe,_e.lastBaseUpdate=Z))}if(D!==null){var Ge=P.baseState;k=0,_e=xe=Z=null,V=D;do{var ke=V.lane,Je=V.eventTime;if((C&ke)===ke){_e!==null&&(_e=_e.next={eventTime:Je,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var nt=u,it=V;switch(ke=l,Je=m,it.tag){case 1:if(nt=it.payload,typeof nt=="function"){Ge=nt.call(Je,Ge,ke);break e}Ge=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=it.payload,ke=typeof nt=="function"?nt.call(Je,Ge,ke):nt,ke==null)break e;Ge=we({},Ge,ke);break e;case 2:eo=!0}}V.callback!==null&&V.lane!==0&&(u.flags|=64,ke=P.effects,ke===null?P.effects=[V]:ke.push(V))}else Je={eventTime:Je,lane:ke,tag:V.tag,payload:V.payload,callback:V.callback,next:null},_e===null?(xe=_e=Je,Z=Ge):_e=_e.next=Je,k|=ke;if(V=V.next,V===null){if(V=P.shared.pending,V===null)break;ke=V,V=ke.next,ke.next=null,P.lastBaseUpdate=ke,P.shared.pending=null}}while(!0);if(_e===null&&(Z=Ge),P.baseState=Z,P.firstBaseUpdate=xe,P.lastBaseUpdate=_e,l=P.shared.interleaved,l!==null){P=l;do k|=P.lane,P=P.next;while(P!==l)}else D===null&&(P.shared.lanes=0);Au|=k,u.lanes=k,u.memoizedState=Ge}}function u1(u,l,m){if(u=l.effects,l.effects=null,u!==null)for(l=0;l<u.length;l++){var C=u[l],P=C.callback;if(P!==null){if(C.callback=null,C=m,typeof P!="function")throw Error(n(191,P));P.call(C)}}}var Vc={},us=yi(Vc),Uc=yi(Vc),Dl=yi(Vc);function $s(u){if(u===Vc)throw Error(n(174));return u}function a1(u,l){switch(Mn(Dl,l),Mn(Uc,u),Mn(us,Vc),u=l.nodeType,u){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:vr(null,"");break;default:u=u===8?l.parentNode:l,l=u.namespaceURI||null,u=u.tagName,l=vr(l,u)}kn(us),Mn(us,l)}function Pu(){kn(us),kn(Uc),kn(Dl)}function l1(u){$s(Dl.current);var l=$s(us.current),m=vr(l,u.type);l!==m&&(Mn(Uc,u),Mn(us,m))}function Vh(u){Uc.current===u&&(kn(us),kn(Uc))}var Wn=yi(0);function pa(u){for(var l=u;l!==null;){if(l.tag===13){var m=l.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break;for(;l.sibling===null;){if(l.return===null||l.return===u)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var c1=[];function Uh(){for(var u=0;u<c1.length;u++)c1[u]._workInProgressVersionPrimary=null;c1.length=0}var Xc=_.ReactCurrentDispatcher,f1=_.ReactCurrentBatchConfig,Su=0,jn=null,Jn=null,hr=null,Tl=!1,Kc=!1,ma=0,jt=0;function Wr(){throw Error(n(321))}function h1(u,l){if(l===null)return!1;for(var m=0;m<l.length&&m<u.length;m++)if(!ve(u[m],l[m]))return!1;return!0}function va(u,l,m,C,P,D){if(Su=D,jn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Xc.current=u===null||u.memoizedState===null?$3:Jh,u=m(C,P),Kc){D=0;do{if(Kc=!1,ma=0,25<=D)throw Error(n(301));D+=1,hr=Jn=null,l.updateQueue=null,Xc.current=Ml,u=m(C,P)}while(Kc)}if(Xc.current=Qh,l=Jn!==null&&Jn.next!==null,Su=0,hr=Jn=jn=null,Tl=!1,l)throw Error(n(300));return u}function Xh(){var u=ma!==0;return ma=0,u}function as(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?jn.memoizedState=hr=u:hr=hr.next=u,hr}function no(){if(Jn===null){var u=jn.alternate;u=u!==null?u.memoizedState:null}else u=Jn.next;var l=hr===null?jn.memoizedState:hr.next;if(l!==null)hr=l,Jn=u;else{if(u===null)throw Error(n(310));Jn=u,u={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},hr===null?jn.memoizedState=hr=u:hr=hr.next=u}return hr}function $r(u,l){return typeof l=="function"?l(u):l}function d1(u){var l=no(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var C=Jn,P=C.baseQueue,D=m.pending;if(D!==null){if(P!==null){var k=P.next;P.next=D.next,D.next=k}C.baseQueue=P=D,m.pending=null}if(P!==null){D=P.next,C=C.baseState;var V=k=null,Z=null,xe=D;do{var _e=xe.lane;if((Su&_e)===_e)Z!==null&&(Z=Z.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),C=xe.hasEagerState?xe.eagerState:u(C,xe.action);else{var Ge={lane:_e,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};Z===null?(V=Z=Ge,k=C):Z=Z.next=Ge,jn.lanes|=_e,Au|=_e}xe=xe.next}while(xe!==null&&xe!==D);Z===null?k=C:Z.next=V,ve(C,l.memoizedState)||(ni=!0),l.memoizedState=C,l.baseState=k,l.baseQueue=Z,m.lastRenderedState=C}if(u=m.interleaved,u!==null){P=u;do D=P.lane,jn.lanes|=D,Au|=D,P=P.next;while(P!==u)}else P===null&&(m.lanes=0);return[l.memoizedState,m.dispatch]}function Al(u){var l=no(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var C=m.dispatch,P=m.pending,D=l.memoizedState;if(P!==null){m.pending=null;var k=P=P.next;do D=u(D,k.action),k=k.next;while(k!==P);ve(D,l.memoizedState)||(ni=!0),l.memoizedState=D,l.baseQueue===null&&(l.baseState=D),m.lastRenderedState=D}return[D,C]}function Kh(){}function g1(u,l){var m=jn,C=no(),P=l(),D=!ve(C.memoizedState,P);if(D&&(C.memoizedState=P,ni=!0),C=C.queue,ls(js.bind(null,m,C,u),[u]),C.getSnapshot!==l||D||hr!==null&&hr.memoizedState.tag&1){if(m.flags|=2048,Bl(9,Ei.bind(null,m,C,P,l),void 0,null),xr===null)throw Error(n(349));(Su&30)!==0||p1(m,l,P)}return P}function p1(u,l,m){u.flags|=16384,u={getSnapshot:l,value:m},l=jn.updateQueue,l===null?(l={lastEffect:null,stores:null},jn.updateQueue=l,l.stores=[u]):(m=l.stores,m===null?l.stores=[u]:m.push(u))}function Ei(u,l,m,C){l.value=m,l.getSnapshot=C,Yh(l)&&m1(u)}function js(u,l,m){return m(function(){Yh(l)&&m1(u)})}function Yh(u){var l=u.getSnapshot;u=u.value;try{var m=l();return!ve(u,m)}catch{return!0}}function m1(u){var l=Gs(u,1);l!==null&&bo(l,u,1,-1)}function Yc(u){var l=as();return typeof u=="function"&&(u=u()),l.memoizedState=l.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:u},l.queue=u,u=u.dispatch=l2.bind(null,jn,u),[l.memoizedState,u]}function Bl(u,l,m,C){return u={tag:u,create:l,destroy:m,deps:C,next:null},l=jn.updateQueue,l===null?(l={lastEffect:null,stores:null},jn.updateQueue=l,l.lastEffect=u.next=u):(m=l.lastEffect,m===null?l.lastEffect=u.next=u:(C=m.next,m.next=u,u.next=C,l.lastEffect=u)),u}function qh(){return no().memoizedState}function qc(u,l,m,C){var P=as();jn.flags|=u,P.memoizedState=Bl(1|l,m,void 0,C===void 0?null:C)}function Rl(u,l,m,C){var P=no();C=C===void 0?null:C;var D=void 0;if(Jn!==null){var k=Jn.memoizedState;if(D=k.destroy,C!==null&&h1(C,k.deps)){P.memoizedState=Bl(l,m,D,C);return}}jn.flags|=u,P.memoizedState=Bl(1|l,m,D,C)}function Zh(u,l){return qc(8390656,8,u,l)}function ls(u,l){return Rl(2048,8,u,l)}function i2(u,l){return Rl(4,2,u,l)}function zs(u,l){return Rl(4,4,u,l)}function v1(u,l){if(typeof l=="function")return u=u(),l(u),function(){l(null)};if(l!=null)return u=u(),l.current=u,function(){l.current=null}}function y1(u,l,m){return m=m!=null?m.concat([u]):null,Rl(4,4,v1.bind(null,l,u),m)}function Zc(){}function o2(u,l){var m=no();l=l===void 0?null:l;var C=m.memoizedState;return C!==null&&l!==null&&h1(l,C[1])?C[0]:(m.memoizedState=[u,l],u)}function s2(u,l){var m=no();l=l===void 0?null:l;var C=m.memoizedState;return C!==null&&l!==null&&h1(l,C[1])?C[0]:(u=u(),m.memoizedState=[u,l],u)}function u2(u,l,m){return(Su&21)===0?(u.baseState&&(u.baseState=!1,ni=!0),u.memoizedState=m):(ve(m,l)||(m=Xe(),jn.lanes|=m,Au|=m,u.baseState=!0),l)}function a2(u,l){var m=wt;wt=m!==0&&4>m?m:4,u(!0);var C=f1.transition;f1.transition={};try{u(!1),l()}finally{wt=m,f1.transition=C}}function w1(){return no().memoizedState}function W3(u,l,m){var C=Mu(u);if(m={lane:C,action:m,hasEagerState:!1,eagerState:null,next:null},C1(u))ti(l,m);else if(m=$h(u,l,m,C),m!==null){var P=oi();bo(m,u,C,P),To(m,l,C)}}function l2(u,l,m){var C=Mu(u),P={lane:C,action:m,hasEagerState:!1,eagerState:null,next:null};if(C1(u))ti(l,P);else{var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=l.lastRenderedReducer,D!==null))try{var k=l.lastRenderedState,V=D(k,m);if(P.hasEagerState=!0,P.eagerState=V,ve(V,k)){var Z=l.interleaved;Z===null?(P.next=P,s1(l)):(P.next=Z.next,Z.next=P),l.interleaved=P;return}}catch{}finally{}m=$h(u,l,P,C),m!==null&&(P=oi(),bo(m,u,C,P),To(m,l,C))}}function C1(u){var l=u.alternate;return u===jn||l!==null&&l===jn}function ti(u,l){Kc=Tl=!0;var m=u.pending;m===null?l.next=l:(l.next=m.next,m.next=l),u.pending=l}function To(u,l,m){if((m&4194240)!==0){var C=l.lanes;C&=u.pendingLanes,m|=C,l.lanes=m,Qt(u,m)}}var Qh={readContext:Ji,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},$3={readContext:Ji,useCallback:function(u,l){return as().memoizedState=[u,l===void 0?null:l],u},useContext:Ji,useEffect:Zh,useImperativeHandle:function(u,l,m){return m=m!=null?m.concat([u]):null,qc(4194308,4,v1.bind(null,l,u),m)},useLayoutEffect:function(u,l){return qc(4194308,4,u,l)},useInsertionEffect:function(u,l){return qc(4,2,u,l)},useMemo:function(u,l){var m=as();return l=l===void 0?null:l,u=u(),m.memoizedState=[u,l],u},useReducer:function(u,l,m){var C=as();return l=m!==void 0?m(l):l,C.memoizedState=C.baseState=l,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:l},C.queue=u,u=u.dispatch=W3.bind(null,jn,u),[C.memoizedState,u]},useRef:function(u){var l=as();return u={current:u},l.memoizedState=u},useState:Yc,useDebugValue:Zc,useDeferredValue:function(u){return as().memoizedState=u},useTransition:function(){var u=Yc(!1),l=u[0];return u=a2.bind(null,u[1]),as().memoizedState=u,[l,u]},useMutableSource:function(){},useSyncExternalStore:function(u,l,m){var C=jn,P=as();if(Ln){if(m===void 0)throw Error(n(407));m=m()}else{if(m=l(),xr===null)throw Error(n(349));(Su&30)!==0||p1(C,l,m)}P.memoizedState=m;var D={value:m,getSnapshot:l};return P.queue=D,Zh(js.bind(null,C,D,u),[u]),C.flags|=2048,Bl(9,Ei.bind(null,C,D,m,l),void 0,null),m},useId:function(){var u=as(),l=xr.identifierPrefix;if(Ln){var m=rs,C=ns;m=(C&~(1<<32-Bi(C)-1)).toString(32)+m,l=":"+l+"R"+m,m=ma++,0<m&&(l+="H"+m.toString(32)),l+=":"}else m=jt++,l=":"+l+"r"+m.toString(32)+":";return u.memoizedState=l},unstable_isNewReconciler:!1},Jh={readContext:Ji,useCallback:o2,useContext:Ji,useEffect:ls,useImperativeHandle:y1,useInsertionEffect:i2,useLayoutEffect:zs,useMemo:s2,useReducer:d1,useRef:qh,useState:function(){return d1($r)},useDebugValue:Zc,useDeferredValue:function(u){var l=no();return u2(l,Jn.memoizedState,u)},useTransition:function(){var u=d1($r)[0],l=no().memoizedState;return[u,l]},useMutableSource:Kh,useSyncExternalStore:g1,useId:w1,unstable_isNewReconciler:!1},Ml={readContext:Ji,useCallback:o2,useContext:Ji,useEffect:ls,useImperativeHandle:y1,useInsertionEffect:i2,useLayoutEffect:zs,useMemo:s2,useReducer:Al,useRef:qh,useState:function(){return Al($r)},useDebugValue:Zc,useDeferredValue:function(u){var l=no();return Jn===null?l.memoizedState=u:u2(l,Jn.memoizedState,u)},useTransition:function(){var u=Al($r)[0],l=no().memoizedState;return[u,l]},useMutableSource:Kh,useSyncExternalStore:g1,useId:w1,unstable_isNewReconciler:!1};function ro(u,l){if(u&&u.defaultProps){l=we({},l),u=u.defaultProps;for(var m in u)l[m]===void 0&&(l[m]=u[m]);return l}return l}function ed(u,l,m,C){l=u.memoizedState,m=m(C,l),m=m==null?l:we({},l,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var td={isMounted:function(u){return(u=u._reactInternals)?Os(u)===u:!1},enqueueSetState:function(u,l,m){u=u._reactInternals;var C=oi(),P=Mu(u),D=Ws(C,P);D.payload=l,m!=null&&(D.callback=m),l=to(u,D,P),l!==null&&(bo(l,u,P,C),zh(l,u,P))},enqueueReplaceState:function(u,l,m){u=u._reactInternals;var C=oi(),P=Mu(u),D=Ws(C,P);D.tag=1,D.payload=l,m!=null&&(D.callback=m),l=to(u,D,P),l!==null&&(bo(l,u,P,C),zh(l,u,P))},enqueueForceUpdate:function(u,l){u=u._reactInternals;var m=oi(),C=Mu(u),P=Ws(m,C);P.tag=2,l!=null&&(P.callback=l),l=to(u,P,C),l!==null&&(bo(l,u,C,m),zh(l,u,C))}};function x1(u,l,m,C,P,D,k){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(C,D,k):l.prototype&&l.prototype.isPureReactComponent?!Qe(m,C)||!Qe(P,D):!0}function ya(u,l,m){var C=!1,P=wu,D=l.contextType;return typeof D=="object"&&D!==null?D=Ji(D):(P=Ci(l)?ei:Nr.current,C=l.contextTypes,D=(C=C!=null)?xl(u,P):wu),l=new l(m,D),u.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=td,u.stateNode=l,l._reactInternals=u,C&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=P,u.__reactInternalMemoizedMaskedChildContext=D),l}function bl(u,l,m,C){u=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(m,C),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(m,C),l.state!==u&&td.enqueueReplaceState(l,l.state,null)}function E1(u,l,m,C){var P=u.stateNode;P.props=m,P.state=u.memoizedState,P.refs={},jh(u);var D=l.contextType;typeof D=="object"&&D!==null?P.context=Ji(D):(D=Ci(l)?ei:Nr.current,P.context=xl(u,D)),P.state=u.memoizedState,D=l.getDerivedStateFromProps,typeof D=="function"&&(ed(u,l,D,m),P.state=u.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(l=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),l!==P.state&&td.enqueueReplaceState(P,P.state,null),Sl(u,m,P,C),P.state=u.memoizedState),typeof P.componentDidMount=="function"&&(u.flags|=4194308)}function wa(u,l){try{var m="",C=l;do m+=K(C),C=C.return;while(C);var P=m}catch(D){P=`
Error generating stack: `+D.message+`
`+D.stack}return{value:u,source:l,stack:P,digest:null}}function nd(u,l,m){return{value:u,source:null,stack:m??null,digest:l??null}}function Ol(u,l){try{console.error(l.value)}catch(m){setTimeout(function(){throw m})}}var c2=typeof WeakMap=="function"?WeakMap:Map;function Qc(u,l,m){m=Ws(-1,m),m.tag=3,m.payload={element:null};var C=l.value;return m.callback=function(){dd||(dd=!0,N1=C),Ol(u,l)},m}function rd(u,l,m){m=Ws(-1,m),m.tag=3;var C=u.type.getDerivedStateFromError;if(typeof C=="function"){var P=l.value;m.payload=function(){return C(P)},m.callback=function(){Ol(u,l)}}var D=u.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(m.callback=function(){Ol(u,l),typeof C!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this));var k=l.stack;this.componentDidCatch(l.value,{componentStack:k!==null?k:""})}),m}function Jc(u,l,m){var C=u.pingCache;if(C===null){C=u.pingCache=new c2;var P=new Set;C.set(l,P)}else P=C.get(l),P===void 0&&(P=new Set,C.set(l,P));P.has(m)||(P.add(m),u=q3.bind(null,u,l,m),l.then(u,u))}function f2(u){do{var l;if((l=u.tag===13)&&(l=u.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return u;u=u.return}while(u!==null);return null}function P1(u,l,m,C,P){return(u.mode&1)===0?(u===l?u.flags|=65536:(u.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(l=Ws(-1,1),l.tag=2,to(m,l,1))),m.lanes|=1),u):(u.flags|=65536,u.lanes=P,u)}var id=_.ReactCurrentOwner,ni=!1;function Tr(u,l,m,C){l.child=u===null?Gh(l,null,m,C):Yn(l,u.child,m,C)}function h2(u,l,m,C,P){m=m.render;var D=l.ref;return Eu(l,P),C=va(u,l,m,C,D,P),m=Xh(),u!==null&&!ni?(l.updateQueue=u.updateQueue,l.flags&=-2053,u.lanes&=~P,Ao(u,l,P)):(Ln&&m&&Wc(l),l.flags|=1,Tr(u,l,C,P),l.child)}function S1(u,l,m,C,P){if(u===null){var D=m.type;return typeof D=="function"&&!wd(D)&&D.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(l.tag=15,l.type=D,cs(u,l,D,C,P)):(u=Cd(m.type,null,C,l,l.mode,P),u.ref=l.ref,u.return=l,l.child=u)}if(D=u.child,(u.lanes&P)===0){var k=D.memoizedProps;if(m=m.compare,m=m!==null?m:Qe,m(k,C)&&u.ref===l.ref)return Ao(u,l,P)}return l.flags|=1,u=Oo(D,C),u.ref=l.ref,u.return=l,l.child=u}function cs(u,l,m,C,P){if(u!==null){var D=u.memoizedProps;if(Qe(D,C)&&u.ref===l.ref)if(ni=!1,l.pendingProps=C=D,(u.lanes&P)!==0)(u.flags&131072)!==0&&(ni=!0);else return l.lanes=u.lanes,Ao(u,l,P)}return A1(u,l,m,C,P)}function D1(u,l,m){var C=l.pendingProps,P=C.children,D=u!==null?u.memoizedState:null;if(C.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(Ll,ki),ki|=m;else{if((m&1073741824)===0)return u=D!==null?D.baseLanes|m:m,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:u,cachePool:null,transitions:null},l.updateQueue=null,Mn(Ll,ki),ki|=u,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=D!==null?D.baseLanes:m,Mn(Ll,ki),ki|=C}else D!==null?(C=D.baseLanes|m,l.memoizedState=null):C=m,Mn(Ll,ki),ki|=C;return Tr(u,l,P,m),l.child}function T1(u,l){var m=l.ref;(u===null&&m!==null||u!==null&&u.ref!==m)&&(l.flags|=512,l.flags|=2097152)}function A1(u,l,m,C,P){var D=Ci(m)?ei:Nr.current;return D=xl(l,D),Eu(l,P),m=va(u,l,m,C,D,P),C=Xh(),u!==null&&!ni?(l.updateQueue=u.updateQueue,l.flags&=-2053,u.lanes&=~P,Ao(u,l,P)):(Ln&&C&&Wc(l),l.flags|=1,Tr(u,l,m,P),l.child)}function B1(u,l,m,C,P){if(Ci(m)){var D=!0;qi(l)}else D=!1;if(Eu(l,P),l.stateNode===null)sd(u,l),ya(l,m,C),E1(l,m,C,P),C=!0;else if(u===null){var k=l.stateNode,V=l.memoizedProps;k.props=V;var Z=k.context,xe=m.contextType;typeof xe=="object"&&xe!==null?xe=Ji(xe):(xe=Ci(m)?ei:Nr.current,xe=xl(l,xe));var _e=m.getDerivedStateFromProps,Ge=typeof _e=="function"||typeof k.getSnapshotBeforeUpdate=="function";Ge||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(V!==C||Z!==xe)&&bl(l,k,C,xe),eo=!1;var ke=l.memoizedState;k.state=ke,Sl(l,C,k,P),Z=l.memoizedState,V!==C||ke!==Z||wi.current||eo?(typeof _e=="function"&&(ed(l,m,_e,C),Z=l.memoizedState),(V=eo||x1(l,m,V,C,ke,Z,xe))?(Ge||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(l.flags|=4194308)):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=C,l.memoizedState=Z),k.props=C,k.state=Z,k.context=xe,C=V):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),C=!1)}else{k=l.stateNode,n2(u,l),V=l.memoizedProps,xe=l.type===l.elementType?V:ro(l.type,V),k.props=xe,Ge=l.pendingProps,ke=k.context,Z=m.contextType,typeof Z=="object"&&Z!==null?Z=Ji(Z):(Z=Ci(m)?ei:Nr.current,Z=xl(l,Z));var Je=m.getDerivedStateFromProps;(_e=typeof Je=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(V!==Ge||ke!==Z)&&bl(l,k,C,Z),eo=!1,ke=l.memoizedState,k.state=ke,Sl(l,C,k,P);var nt=l.memoizedState;V!==Ge||ke!==nt||wi.current||eo?(typeof Je=="function"&&(ed(l,m,Je,C),nt=l.memoizedState),(xe=eo||x1(l,m,xe,C,ke,nt,Z)||!1)?(_e||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(C,nt,Z),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(C,nt,Z)),typeof k.componentDidUpdate=="function"&&(l.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof k.componentDidUpdate!="function"||V===u.memoizedProps&&ke===u.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===u.memoizedProps&&ke===u.memoizedState||(l.flags|=1024),l.memoizedProps=C,l.memoizedState=nt),k.props=C,k.state=nt,k.context=Z,C=xe):(typeof k.componentDidUpdate!="function"||V===u.memoizedProps&&ke===u.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===u.memoizedProps&&ke===u.memoizedState||(l.flags|=1024),C=!1)}return R1(u,l,m,C,D,P)}function R1(u,l,m,C,P,D){T1(u,l);var k=(l.flags&128)!==0;if(!C&&!k)return P&&qp(l,m,!1),Ao(u,l,D);C=l.stateNode,id.current=l;var V=k&&typeof m.getDerivedStateFromError!="function"?null:C.render();return l.flags|=1,u!==null&&k?(l.child=Yn(l,u.child,null,D),l.child=Yn(l,null,V,D)):Tr(u,l,V,D),l.memoizedState=C.state,P&&qp(l,m,!0),l.child}function d2(u){var l=u.stateNode;l.pendingContext?Kp(u,l.pendingContext,l.pendingContext!==l.context):l.context&&Kp(u,l.context,!1),a1(u,l.containerInfo)}function fs(u,l,m,C,P){return os(),ss(P),l.flags|=256,Tr(u,l,m,C),l.child}var ef={dehydrated:null,treeContext:null,retryLane:0};function tf(u){return{baseLanes:u,cachePool:null,transitions:null}}function od(u,l,m){var C=l.pendingProps,P=Wn.current,D=!1,k=(l.flags&128)!==0,V;if((V=k)||(V=u!==null&&u.memoizedState===null?!1:(P&2)!==0),V?(D=!0,l.flags&=-129):(u===null||u.memoizedState!==null)&&(P|=1),Mn(Wn,P&1),u===null)return xi(l),u=l.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((l.mode&1)===0?l.lanes=1:u.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(k=C.children,u=C.fallback,D?(C=l.mode,D=l.child,k={mode:"hidden",children:k},(C&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=k):D=xd(k,C,0,null),u=Sa(u,C,m,null),D.return=l,u.return=l,D.sibling=u,l.child=D,l.child.memoizedState=tf(m),l.memoizedState=ef,u):Il(l,k));if(P=u.memoizedState,P!==null&&(V=P.dehydrated,V!==null))return xt(u,l,k,C,V,P,m);if(D){D=C.fallback,k=l.mode,P=u.child,V=P.sibling;var Z={mode:"hidden",children:C.children};return(k&1)===0&&l.child!==P?(C=l.child,C.childLanes=0,C.pendingProps=Z,l.deletions=null):(C=Oo(P,Z),C.subtreeFlags=P.subtreeFlags&14680064),V!==null?D=Oo(V,D):(D=Sa(D,k,m,null),D.flags|=2),D.return=l,C.return=l,C.sibling=D,l.child=C,C=D,D=l.child,k=u.child.memoizedState,k=k===null?tf(m):{baseLanes:k.baseLanes|m,cachePool:null,transitions:k.transitions},D.memoizedState=k,D.childLanes=u.childLanes&~m,l.memoizedState=ef,C}return D=u.child,u=D.sibling,C=Oo(D,{mode:"visible",children:C.children}),(l.mode&1)===0&&(C.lanes=m),C.return=l,C.sibling=null,u!==null&&(m=l.deletions,m===null?(l.deletions=[u],l.flags|=16):m.push(u)),l.child=C,l.memoizedState=null,C}function Il(u,l){return l=xd({mode:"visible",children:l},u.mode,0,null),l.return=u,u.child=l}function Vs(u,l,m,C){return C!==null&&ss(C),Yn(l,u.child,null,m),u=Il(l,l.pendingProps.children),u.flags|=2,l.memoizedState=null,u}function xt(u,l,m,C,P,D,k){if(m)return l.flags&256?(l.flags&=-257,C=nd(Error(n(422))),Vs(u,l,k,C)):l.memoizedState!==null?(l.child=u.child,l.flags|=128,null):(D=C.fallback,P=l.mode,C=xd({mode:"visible",children:C.children},P,0,null),D=Sa(D,P,k,null),D.flags|=2,C.return=l,D.return=l,C.sibling=D,l.child=C,(l.mode&1)!==0&&Yn(l,u.child,null,k),l.child.memoizedState=tf(k),l.memoizedState=ef,D);if((l.mode&1)===0)return Vs(u,l,k,null);if(P.data==="$!"){if(C=P.nextSibling&&P.nextSibling.dataset,C)var V=C.dgst;return C=V,D=Error(n(419)),C=nd(D,C,void 0),Vs(u,l,k,C)}if(V=(k&u.childLanes)!==0,ni||V){if(C=xr,C!==null){switch(k&-k){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(C.suspendedLanes|k))!==0?0:P,P!==0&&P!==D.retryLane&&(D.retryLane=P,Gs(u,P),bo(C,u,P,-1))}return z1(),C=nd(Error(n(421))),Vs(u,l,k,C)}return P.data==="$?"?(l.flags|=128,l.child=u.child,l=Z3.bind(null,u),P._reactRetry=l,null):(u=D.treeContext,Oi=vu(P.nextSibling),Gr=l,Ln=!0,Do=null,u!==null&&(Zi[Qi++]=ns,Zi[Qi++]=rs,Zi[Qi++]=ca,ns=u.id,rs=u.overflow,ca=l),l=Il(l,C.children),l.flags|=4096,l)}function nf(u,l,m){u.lanes|=l;var C=u.alternate;C!==null&&(C.lanes|=l),Dr(u.return,l,m)}function rf(u,l,m,C,P){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:C,tail:m,tailMode:P}:(D.isBackwards=l,D.rendering=null,D.renderingStartTime=0,D.last=C,D.tail=m,D.tailMode=P)}function Du(u,l,m){var C=l.pendingProps,P=C.revealOrder,D=C.tail;if(Tr(u,l,C.children,m),C=Wn.current,(C&2)!==0)C=C&1|2,l.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=l.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&nf(u,m,l);else if(u.tag===19)nf(u,m,l);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}C&=1}if(Mn(Wn,C),(l.mode&1)===0)l.memoizedState=null;else switch(P){case"forwards":for(m=l.child,P=null;m!==null;)u=m.alternate,u!==null&&pa(u)===null&&(P=m),m=m.sibling;m=P,m===null?(P=l.child,l.child=null):(P=m.sibling,m.sibling=null),rf(l,!1,P,m,D);break;case"backwards":for(m=null,P=l.child,l.child=null;P!==null;){if(u=P.alternate,u!==null&&pa(u)===null){l.child=P;break}u=P.sibling,P.sibling=m,m=P,P=u}rf(l,!0,m,null,D);break;case"together":rf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function sd(u,l){(l.mode&1)===0&&u!==null&&(u.alternate=null,l.alternate=null,l.flags|=2)}function Ao(u,l,m){if(u!==null&&(l.dependencies=u.dependencies),Au|=l.lanes,(m&l.childLanes)===0)return null;if(u!==null&&l.child!==u.child)throw Error(n(153));if(l.child!==null){for(u=l.child,m=Oo(u,u.pendingProps),l.child=m,m.return=l;u.sibling!==null;)u=u.sibling,m=m.sibling=Oo(u,u.pendingProps),m.return=l;m.sibling=null}return l.child}function g2(u,l,m){switch(l.tag){case 3:d2(l),os();break;case 5:l1(l);break;case 1:Ci(l.type)&&qi(l);break;case 4:a1(l,l.stateNode.containerInfo);break;case 10:var C=l.type._context,P=l.memoizedProps.value;Mn(zc,C._currentValue),C._currentValue=P;break;case 13:if(C=l.memoizedState,C!==null)return C.dehydrated!==null?(Mn(Wn,Wn.current&1),l.flags|=128,null):(m&l.child.childLanes)!==0?od(u,l,m):(Mn(Wn,Wn.current&1),u=Ao(u,l,m),u!==null?u.sibling:null);Mn(Wn,Wn.current&1);break;case 19:if(C=(m&l.childLanes)!==0,(u.flags&128)!==0){if(C)return Du(u,l,m);l.flags|=128}if(P=l.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Mn(Wn,Wn.current),C)break;return null;case 22:case 23:return l.lanes=0,D1(u,l,m)}return Ao(u,l,m)}var Ar,M1,p2,b1;Ar=function(u,l){for(var m=l.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===l)break;for(;m.sibling===null;){if(m.return===null||m.return===l)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},M1=function(){},p2=function(u,l,m,C){var P=u.memoizedProps;if(P!==C){u=l.stateNode,$s(us.current);var D=null;switch(m){case"input":P=lt(u,P),C=lt(u,C),D=[];break;case"select":P=we({},P,{value:void 0}),C=we({},C,{value:void 0}),D=[];break;case"textarea":P=tn(u,P),C=tn(u,C),D=[];break;default:typeof P.onClick!="function"&&typeof C.onClick=="function"&&(u.onclick=bh)}Rs(m,C);var k;m=null;for(xe in P)if(!C.hasOwnProperty(xe)&&P.hasOwnProperty(xe)&&P[xe]!=null)if(xe==="style"){var V=P[xe];for(k in V)V.hasOwnProperty(k)&&(m||(m={}),m[k]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(i.hasOwnProperty(xe)?D||(D=[]):(D=D||[]).push(xe,null));for(xe in C){var Z=C[xe];if(V=P!=null?P[xe]:void 0,C.hasOwnProperty(xe)&&Z!==V&&(Z!=null||V!=null))if(xe==="style")if(V){for(k in V)!V.hasOwnProperty(k)||Z&&Z.hasOwnProperty(k)||(m||(m={}),m[k]="");for(k in Z)Z.hasOwnProperty(k)&&V[k]!==Z[k]&&(m||(m={}),m[k]=Z[k])}else m||(D||(D=[]),D.push(xe,m)),m=Z;else xe==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,V=V?V.__html:void 0,Z!=null&&V!==Z&&(D=D||[]).push(xe,Z)):xe==="children"?typeof Z!="string"&&typeof Z!="number"||(D=D||[]).push(xe,""+Z):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(i.hasOwnProperty(xe)?(Z!=null&&xe==="onScroll"&&Fn("scroll",u),D||V===Z||(D=[])):(D=D||[]).push(xe,Z))}m&&(D=D||[]).push("style",m);var xe=D;(l.updateQueue=xe)&&(l.flags|=4)}},b1=function(u,l,m,C){m!==C&&(l.flags|=4)};function of(u,l){if(!Ln)switch(u.tailMode){case"hidden":l=u.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var C=null;m!==null;)m.alternate!==null&&(C=m),m=m.sibling;C===null?l||u.tail===null?u.tail=null:u.tail.sibling=null:C.sibling=null}}function Br(u){var l=u.alternate!==null&&u.alternate.child===u.child,m=0,C=0;if(l)for(var P=u.child;P!==null;)m|=P.lanes|P.childLanes,C|=P.subtreeFlags&14680064,C|=P.flags&14680064,P.return=u,P=P.sibling;else for(P=u.child;P!==null;)m|=P.lanes|P.childLanes,C|=P.subtreeFlags,C|=P.flags,P.return=u,P=P.sibling;return u.subtreeFlags|=C,u.childLanes=m,l}function j3(u,l,m){var C=l.pendingProps;switch(ha(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(l),null;case 1:return Ci(l.type)&&kh(),Br(l),null;case 3:return C=l.stateNode,Pu(),kn(wi),kn(Nr),Uh(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(u===null||u.child===null)&&($c(l)?l.flags|=4:u===null||u.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Do!==null&&(W1(Do),Do=null))),M1(u,l),Br(l),null;case 5:Vh(l);var P=$s(Dl.current);if(m=l.type,u!==null&&l.stateNode!=null)p2(u,l,m,C,P),u.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!C){if(l.stateNode===null)throw Error(n(166));return Br(l),null}if(u=$s(us.current),$c(l)){C=l.stateNode,m=l.type;var D=l.memoizedProps;switch(C[es]=l,C[yu]=D,u=(l.mode&1)!==0,m){case"dialog":Fn("cancel",C),Fn("close",C);break;case"iframe":case"object":case"embed":Fn("load",C);break;case"video":case"audio":for(P=0;P<Ls.length;P++)Fn(Ls[P],C);break;case"source":Fn("error",C);break;case"img":case"image":case"link":Fn("error",C),Fn("load",C);break;case"details":Fn("toggle",C);break;case"input":yt(C,D),Fn("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!D.multiple},Fn("invalid",C);break;case"textarea":Kn(C,D),Fn("invalid",C)}Rs(m,D),P=null;for(var k in D)if(D.hasOwnProperty(k)){var V=D[k];k==="children"?typeof V=="string"?C.textContent!==V&&(D.suppressHydrationWarning!==!0&&_c(C.textContent,V,u),P=["children",V]):typeof V=="number"&&C.textContent!==""+V&&(D.suppressHydrationWarning!==!0&&_c(C.textContent,V,u),P=["children",""+V]):i.hasOwnProperty(k)&&V!=null&&k==="onScroll"&&Fn("scroll",C)}switch(m){case"input":Bt(C),Nn(C,D,!0);break;case"textarea":Bt(C),Wt(C);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(C.onclick=bh)}C=P,l.updateQueue=C,C!==null&&(l.flags|=4)}else{k=P.nodeType===9?P:P.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Sr(m)),u==="http://www.w3.org/1999/xhtml"?m==="script"?(u=k.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof C.is=="string"?u=k.createElement(m,{is:C.is}):(u=k.createElement(m),m==="select"&&(k=u,C.multiple?k.multiple=!0:C.size&&(k.size=C.size))):u=k.createElementNS(u,m),u[es]=l,u[yu]=C,Ar(u,l,!1,!1),l.stateNode=u;e:{switch(k=Eo(m,C),m){case"dialog":Fn("cancel",u),Fn("close",u),P=C;break;case"iframe":case"object":case"embed":Fn("load",u),P=C;break;case"video":case"audio":for(P=0;P<Ls.length;P++)Fn(Ls[P],u);P=C;break;case"source":Fn("error",u),P=C;break;case"img":case"image":case"link":Fn("error",u),Fn("load",u),P=C;break;case"details":Fn("toggle",u),P=C;break;case"input":yt(u,C),P=lt(u,C),Fn("invalid",u);break;case"option":P=C;break;case"select":u._wrapperState={wasMultiple:!!C.multiple},P=we({},C,{value:void 0}),Fn("invalid",u);break;case"textarea":Kn(u,C),P=tn(u,C),Fn("invalid",u);break;default:P=C}Rs(m,P),V=P;for(D in V)if(V.hasOwnProperty(D)){var Z=V[D];D==="style"?Xi(u,Z):D==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&yr(u,Z)):D==="children"?typeof Z=="string"?(m!=="textarea"||Z!=="")&&wr(u,Z):typeof Z=="number"&&wr(u,""+Z):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?Z!=null&&D==="onScroll"&&Fn("scroll",u):Z!=null&&I(u,D,Z,k))}switch(m){case"input":Bt(u),Nn(u,C,!1);break;case"textarea":Bt(u),Wt(u);break;case"option":C.value!=null&&u.setAttribute("value",""+Se(C.value));break;case"select":u.multiple=!!C.multiple,D=C.value,D!=null?en(u,!!C.multiple,D,!1):C.defaultValue!=null&&en(u,!!C.multiple,C.defaultValue,!0);break;default:typeof P.onClick=="function"&&(u.onclick=bh)}switch(m){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Br(l),null;case 6:if(u&&l.stateNode!=null)b1(u,l,u.memoizedProps,C);else{if(typeof C!="string"&&l.stateNode===null)throw Error(n(166));if(m=$s(Dl.current),$s(us.current),$c(l)){if(C=l.stateNode,m=l.memoizedProps,C[es]=l,(D=C.nodeValue!==m)&&(u=Gr,u!==null))switch(u.tag){case 3:_c(C.nodeValue,m,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&_c(C.nodeValue,m,(u.mode&1)!==0)}D&&(l.flags|=4)}else C=(m.nodeType===9?m:m.ownerDocument).createTextNode(C),C[es]=l,l.stateNode=C}return Br(l),null;case 13:if(kn(Wn),C=l.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Ln&&Oi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)i1(),os(),l.flags|=98560,D=!1;else if(D=$c(l),C!==null&&C.dehydrated!==null){if(u===null){if(!D)throw Error(n(318));if(D=l.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[es]=l}else os(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Br(l),D=!1}else Do!==null&&(W1(Do),Do=null),D=!0;if(!D)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=m,l):(C=C!==null,C!==(u!==null&&u.memoizedState!==null)&&C&&(l.child.flags|=8192,(l.mode&1)!==0&&(u===null||(Wn.current&1)!==0?dr===0&&(dr=3):z1())),l.updateQueue!==null&&(l.flags|=4),Br(l),null);case 4:return Pu(),M1(u,l),u===null&&pu(l.stateNode.containerInfo),Br(l),null;case 10:return Wh(l.type._context),Br(l),null;case 17:return Ci(l.type)&&kh(),Br(l),null;case 19:if(kn(Wn),D=l.memoizedState,D===null)return Br(l),null;if(C=(l.flags&128)!==0,k=D.rendering,k===null)if(C)of(D,!1);else{if(dr!==0||u!==null&&(u.flags&128)!==0)for(u=l.child;u!==null;){if(k=pa(u),k!==null){for(l.flags|=128,of(D,!1),C=k.updateQueue,C!==null&&(l.updateQueue=C,l.flags|=4),l.subtreeFlags=0,C=m,m=l.child;m!==null;)D=m,u=C,D.flags&=14680066,k=D.alternate,k===null?(D.childLanes=0,D.lanes=u,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=k.childLanes,D.lanes=k.lanes,D.child=k.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=k.memoizedProps,D.memoizedState=k.memoizedState,D.updateQueue=k.updateQueue,D.type=k.type,u=k.dependencies,D.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),m=m.sibling;return Mn(Wn,Wn.current&1|2),l.child}u=u.sibling}D.tail!==null&&mn()>Ca&&(l.flags|=128,C=!0,of(D,!1),l.lanes=4194304)}else{if(!C)if(u=pa(k),u!==null){if(l.flags|=128,C=!0,m=u.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),of(D,!0),D.tail===null&&D.tailMode==="hidden"&&!k.alternate&&!Ln)return Br(l),null}else 2*mn()-D.renderingStartTime>Ca&&m!==1073741824&&(l.flags|=128,C=!0,of(D,!1),l.lanes=4194304);D.isBackwards?(k.sibling=l.child,l.child=k):(m=D.last,m!==null?m.sibling=k:l.child=k,D.last=k)}return D.tail!==null?(l=D.tail,D.rendering=l,D.tail=l.sibling,D.renderingStartTime=mn(),l.sibling=null,m=Wn.current,Mn(Wn,C?m&1|2:m&1),l):(Br(l),null);case 22:case 23:return j1(),C=l.memoizedState!==null,u!==null&&u.memoizedState!==null!==C&&(l.flags|=8192),C&&(l.mode&1)!==0?(ki&1073741824)!==0&&(Br(l),l.subtreeFlags&6&&(l.flags|=8192)):Br(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function z3(u,l){switch(ha(l),l.tag){case 1:return Ci(l.type)&&kh(),u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 3:return Pu(),kn(wi),kn(Nr),Uh(),u=l.flags,(u&65536)!==0&&(u&128)===0?(l.flags=u&-65537|128,l):null;case 5:return Vh(l),null;case 13:if(kn(Wn),u=l.memoizedState,u!==null&&u.dehydrated!==null){if(l.alternate===null)throw Error(n(340));os()}return u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 19:return kn(Wn),null;case 4:return Pu(),null;case 10:return Wh(l.type._context),null;case 22:case 23:return j1(),null;case 24:return null;default:return null}}var ud=!1,$n=!1,ri=typeof WeakSet=="function"?WeakSet:Set,et=null;function Fl(u,l){var m=u.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(C){zn(u,l,C)}else m.current=null}function sf(u,l,m){try{m()}catch(C){zn(u,l,C)}}var m2=!1;function V3(u,l){if(Nc=dh,u=En(),bc(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var C=m.getSelection&&m.getSelection();if(C&&C.rangeCount!==0){m=C.anchorNode;var P=C.anchorOffset,D=C.focusNode;C=C.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var k=0,V=-1,Z=-1,xe=0,_e=0,Ge=u,ke=null;t:for(;;){for(var Je;Ge!==m||P!==0&&Ge.nodeType!==3||(V=k+P),Ge!==D||C!==0&&Ge.nodeType!==3||(Z=k+C),Ge.nodeType===3&&(k+=Ge.nodeValue.length),(Je=Ge.firstChild)!==null;)ke=Ge,Ge=Je;for(;;){if(Ge===u)break t;if(ke===m&&++xe===P&&(V=k),ke===D&&++_e===C&&(Z=k),(Je=Ge.nextSibling)!==null)break;Ge=ke,ke=Ge.parentNode}Ge=Je}m=V===-1||Z===-1?null:{start:V,end:Z}}else m=null}m=m||{start:0,end:0}}else m=null;for(aa={focusedElem:u,selectionRange:m},dh=!1,et=l;et!==null;)if(l=et,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,et=u;else for(;et!==null;){l=et;try{var nt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var it=nt.memoizedProps,er=nt.memoizedState,de=l.stateNode,te=de.getSnapshotBeforeUpdate(l.elementType===l.type?it:ro(l.type,it),er);de.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var pe=l.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ze){zn(l,l.return,ze)}if(u=l.sibling,u!==null){u.return=l.return,et=u;break}et=l.return}return nt=m2,m2=!1,nt}function Us(u,l,m){var C=l.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var P=C=C.next;do{if((P.tag&u)===u){var D=P.destroy;P.destroy=void 0,D!==void 0&&sf(l,m,D)}P=P.next}while(P!==C)}}function uf(u,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var m=l=l.next;do{if((m.tag&u)===u){var C=m.create;m.destroy=C()}m=m.next}while(m!==l)}}function ad(u){var l=u.ref;if(l!==null){var m=u.stateNode;switch(u.tag){case 5:u=m;break;default:u=m}typeof l=="function"?l(u):l.current=u}}function v2(u){var l=u.alternate;l!==null&&(u.alternate=null,v2(l)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(l=u.stateNode,l!==null&&(delete l[es],delete l[yu],delete l[Ih],delete l[N],delete l[wl])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function y2(u){return u.tag===5||u.tag===3||u.tag===4}function w2(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||y2(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function O1(u,l,m){var C=u.tag;if(C===5||C===6)u=u.stateNode,l?m.nodeType===8?m.parentNode.insertBefore(u,l):m.insertBefore(u,l):(m.nodeType===8?(l=m.parentNode,l.insertBefore(u,m)):(l=m,l.appendChild(u)),m=m._reactRootContainer,m!=null||l.onclick!==null||(l.onclick=bh));else if(C!==4&&(u=u.child,u!==null))for(O1(u,l,m),u=u.sibling;u!==null;)O1(u,l,m),u=u.sibling}function ld(u,l,m){var C=u.tag;if(C===5||C===6)u=u.stateNode,l?m.insertBefore(u,l):m.appendChild(u);else if(C!==4&&(u=u.child,u!==null))for(ld(u,l,m),u=u.sibling;u!==null;)ld(u,l,m),u=u.sibling}var Cr=null,Bo=!1;function hs(u,l,m){for(m=m.child;m!==null;)I1(u,l,m),m=m.sibling}function I1(u,l,m){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(nl,m)}catch{}switch(m.tag){case 5:$n||Fl(m,l);case 6:var C=Cr,P=Bo;Cr=null,hs(u,l,m),Cr=C,Bo=P,Cr!==null&&(Bo?(u=Cr,m=m.stateNode,u.nodeType===8?u.parentNode.removeChild(m):u.removeChild(m)):Cr.removeChild(m.stateNode));break;case 18:Cr!==null&&(Bo?(u=Cr,m=m.stateNode,u.nodeType===8?t1(u.parentNode,m):u.nodeType===1&&t1(u,m),vn(u)):t1(Cr,m.stateNode));break;case 4:C=Cr,P=Bo,Cr=m.stateNode.containerInfo,Bo=!0,hs(u,l,m),Cr=C,Bo=P;break;case 0:case 11:case 14:case 15:if(!$n&&(C=m.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){P=C=C.next;do{var D=P,k=D.destroy;D=D.tag,k!==void 0&&((D&2)!==0||(D&4)!==0)&&sf(m,l,k),P=P.next}while(P!==C)}hs(u,l,m);break;case 1:if(!$n&&(Fl(m,l),C=m.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=m.memoizedProps,C.state=m.memoizedState,C.componentWillUnmount()}catch(V){zn(m,l,V)}hs(u,l,m);break;case 21:hs(u,l,m);break;case 22:m.mode&1?($n=(C=$n)||m.memoizedState!==null,hs(u,l,m),$n=C):hs(u,l,m);break;default:hs(u,l,m)}}function kl(u){var l=u.updateQueue;if(l!==null){u.updateQueue=null;var m=u.stateNode;m===null&&(m=u.stateNode=new ri),l.forEach(function(C){var P=Q3.bind(null,u,C);m.has(C)||(m.add(C),C.then(P,P))})}}function Fi(u,l){var m=l.deletions;if(m!==null)for(var C=0;C<m.length;C++){var P=m[C];try{var D=u,k=l,V=k;e:for(;V!==null;){switch(V.tag){case 5:Cr=V.stateNode,Bo=!1;break e;case 3:Cr=V.stateNode.containerInfo,Bo=!0;break e;case 4:Cr=V.stateNode.containerInfo,Bo=!0;break e}V=V.return}if(Cr===null)throw Error(n(160));I1(D,k,P),Cr=null,Bo=!1;var Z=P.alternate;Z!==null&&(Z.return=null),P.return=null}catch(xe){zn(P,l,xe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)F1(l,u),l=l.sibling}function F1(u,l){var m=u.alternate,C=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Fi(l,u),Ro(u),C&4){try{Us(3,u,u.return),uf(3,u)}catch(it){zn(u,u.return,it)}try{Us(5,u,u.return)}catch(it){zn(u,u.return,it)}}break;case 1:Fi(l,u),Ro(u),C&512&&m!==null&&Fl(m,m.return);break;case 5:if(Fi(l,u),Ro(u),C&512&&m!==null&&Fl(m,m.return),u.flags&32){var P=u.stateNode;try{wr(P,"")}catch(it){zn(u,u.return,it)}}if(C&4&&(P=u.stateNode,P!=null)){var D=u.memoizedProps,k=m!==null?m.memoizedProps:D,V=u.type,Z=u.updateQueue;if(u.updateQueue=null,Z!==null)try{V==="input"&&D.type==="radio"&&D.name!=null&&wn(P,D),Eo(V,k);var xe=Eo(V,D);for(k=0;k<Z.length;k+=2){var _e=Z[k],Ge=Z[k+1];_e==="style"?Xi(P,Ge):_e==="dangerouslySetInnerHTML"?yr(P,Ge):_e==="children"?wr(P,Ge):I(P,_e,Ge,xe)}switch(V){case"input":Rt(P,D);break;case"textarea":Hn(P,D);break;case"select":var ke=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!D.multiple;var Je=D.value;Je!=null?en(P,!!D.multiple,Je,!1):ke!==!!D.multiple&&(D.defaultValue!=null?en(P,!!D.multiple,D.defaultValue,!0):en(P,!!D.multiple,D.multiple?[]:"",!1))}P[yu]=D}catch(it){zn(u,u.return,it)}}break;case 6:if(Fi(l,u),Ro(u),C&4){if(u.stateNode===null)throw Error(n(162));P=u.stateNode,D=u.memoizedProps;try{P.nodeValue=D}catch(it){zn(u,u.return,it)}}break;case 3:if(Fi(l,u),Ro(u),C&4&&m!==null&&m.memoizedState.isDehydrated)try{vn(l.containerInfo)}catch(it){zn(u,u.return,it)}break;case 4:Fi(l,u),Ro(u);break;case 13:Fi(l,u),Ro(u),P=u.child,P.flags&8192&&(D=P.memoizedState!==null,P.stateNode.isHidden=D,!D||P.alternate!==null&&P.alternate.memoizedState!==null||(_1=mn())),C&4&&kl(u);break;case 22:if(_e=m!==null&&m.memoizedState!==null,u.mode&1?($n=(xe=$n)||_e,Fi(l,u),$n=xe):Fi(l,u),Ro(u),C&8192){if(xe=u.memoizedState!==null,(u.stateNode.isHidden=xe)&&!_e&&(u.mode&1)!==0)for(et=u,_e=u.child;_e!==null;){for(Ge=et=_e;et!==null;){switch(ke=et,Je=ke.child,ke.tag){case 0:case 11:case 14:case 15:Us(4,ke,ke.return);break;case 1:Fl(ke,ke.return);var nt=ke.stateNode;if(typeof nt.componentWillUnmount=="function"){C=ke,m=ke.return;try{l=C,nt.props=l.memoizedProps,nt.state=l.memoizedState,nt.componentWillUnmount()}catch(it){zn(C,m,it)}}break;case 5:Fl(ke,ke.return);break;case 22:if(ke.memoizedState!==null){Tu(Ge);continue}}Je!==null?(Je.return=ke,et=Je):Tu(Ge)}_e=_e.sibling}e:for(_e=null,Ge=u;;){if(Ge.tag===5){if(_e===null){_e=Ge;try{P=Ge.stateNode,xe?(D=P.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(V=Ge.stateNode,Z=Ge.memoizedProps.style,k=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,V.style.display=Ui("display",k))}catch(it){zn(u,u.return,it)}}}else if(Ge.tag===6){if(_e===null)try{Ge.stateNode.nodeValue=xe?"":Ge.memoizedProps}catch(it){zn(u,u.return,it)}}else if((Ge.tag!==22&&Ge.tag!==23||Ge.memoizedState===null||Ge===u)&&Ge.child!==null){Ge.child.return=Ge,Ge=Ge.child;continue}if(Ge===u)break e;for(;Ge.sibling===null;){if(Ge.return===null||Ge.return===u)break e;_e===Ge&&(_e=null),Ge=Ge.return}_e===Ge&&(_e=null),Ge.sibling.return=Ge.return,Ge=Ge.sibling}}break;case 19:Fi(l,u),Ro(u),C&4&&kl(u);break;case 21:break;default:Fi(l,u),Ro(u)}}function Ro(u){var l=u.flags;if(l&2){try{e:{for(var m=u.return;m!==null;){if(y2(m)){var C=m;break e}m=m.return}throw Error(n(160))}switch(C.tag){case 5:var P=C.stateNode;C.flags&32&&(wr(P,""),C.flags&=-33);var D=w2(u);ld(u,D,P);break;case 3:case 4:var k=C.stateNode.containerInfo,V=w2(u);O1(u,V,k);break;default:throw Error(n(161))}}catch(Z){zn(u,u.return,Z)}u.flags&=-3}l&4096&&(u.flags&=-4097)}function cd(u,l,m){et=u,k1(u)}function k1(u,l,m){for(var C=(u.mode&1)!==0;et!==null;){var P=et,D=P.child;if(P.tag===22&&C){var k=P.memoizedState!==null||ud;if(!k){var V=P.alternate,Z=V!==null&&V.memoizedState!==null||$n;V=ud;var xe=$n;if(ud=k,($n=Z)&&!xe)for(et=P;et!==null;)k=et,Z=k.child,k.tag===22&&k.memoizedState!==null?C2(P):Z!==null?(Z.return=k,et=Z):C2(P);for(;D!==null;)et=D,k1(D),D=D.sibling;et=P,ud=V,$n=xe}Mo(u)}else(P.subtreeFlags&8772)!==0&&D!==null?(D.return=P,et=D):Mo(u)}}function Mo(u){for(;et!==null;){var l=et;if((l.flags&8772)!==0){var m=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:$n||uf(5,l);break;case 1:var C=l.stateNode;if(l.flags&4&&!$n)if(m===null)C.componentDidMount();else{var P=l.elementType===l.type?m.memoizedProps:ro(l.type,m.memoizedProps);C.componentDidUpdate(P,m.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var D=l.updateQueue;D!==null&&u1(l,D,C);break;case 3:var k=l.updateQueue;if(k!==null){if(m=null,l.child!==null)switch(l.child.tag){case 5:m=l.child.stateNode;break;case 1:m=l.child.stateNode}u1(l,k,m)}break;case 5:var V=l.stateNode;if(m===null&&l.flags&4){m=V;var Z=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&m.focus();break;case"img":Z.src&&(m.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var xe=l.alternate;if(xe!==null){var _e=xe.memoizedState;if(_e!==null){var Ge=_e.dehydrated;Ge!==null&&vn(Ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$n||l.flags&512&&ad(l)}catch(ke){zn(l,l.return,ke)}}if(l===u){et=null;break}if(m=l.sibling,m!==null){m.return=l.return,et=m;break}et=l.return}}function Tu(u){for(;et!==null;){var l=et;if(l===u){et=null;break}var m=l.sibling;if(m!==null){m.return=l.return,et=m;break}et=l.return}}function C2(u){for(;et!==null;){var l=et;try{switch(l.tag){case 0:case 11:case 15:var m=l.return;try{uf(4,l)}catch(Z){zn(l,m,Z)}break;case 1:var C=l.stateNode;if(typeof C.componentDidMount=="function"){var P=l.return;try{C.componentDidMount()}catch(Z){zn(l,P,Z)}}var D=l.return;try{ad(l)}catch(Z){zn(l,D,Z)}break;case 5:var k=l.return;try{ad(l)}catch(Z){zn(l,k,Z)}}}catch(Z){zn(l,l.return,Z)}if(l===u){et=null;break}var V=l.sibling;if(V!==null){V.return=l.return,et=V;break}et=l.return}}var x2=Math.ceil,fd=_.ReactCurrentDispatcher,L1=_.ReactCurrentOwner,io=_.ReactCurrentBatchConfig,un=0,xr=null,ur=null,Rr=0,ki=0,Ll=yi(0),dr=0,af=null,Au=0,lf=0,hd=0,cf=null,Pi=null,_1=0,Ca=1/0,Xs=null,dd=!1,N1=null,Bu=null,gd=!1,Ru=null,ii=0,ff=0,H1=null,pd=-1,hf=0;function oi(){return(un&6)!==0?mn():pd!==-1?pd:pd=mn()}function Mu(u){return(u.mode&1)===0?1:(un&2)!==0&&Rr!==0?Rr&-Rr:e2.transition!==null?(hf===0&&(hf=Xe()),hf):(u=wt,u!==0||(u=window.event,u=u===void 0?16:Tp(u.type)),u)}function bo(u,l,m,C){if(50<ff)throw ff=0,H1=null,Error(n(185));kt(u,m,C),((un&2)===0||u!==xr)&&(u===xr&&((un&2)===0&&(lf|=m),dr===4&&bu(u,Rr)),Si(u,C),m===1&&un===0&&(l.mode&1)===0&&(Ca=mn()+500,Lh&&Cu()))}function Si(u,l){var m=u.callbackNode;je(u,l);var C=Be(u,u===xr?Rr:0);if(C===0)m!==null&&ah(m),u.callbackNode=null,u.callbackPriority=0;else if(l=C&-C,u.callbackPriority!==l){if(m!=null&&ah(m),l===1)u.tag===0?la(E2.bind(null,u)):Zp(E2.bind(null,u)),Oh(function(){(un&6)===0&&Cu()}),m=null;else{switch(Cn(C)){case 1:m=Ko;break;case 4:m=fh;break;case 16:m=Yo;break;case 536870912:m=Dc;break;default:m=Yo}m=R2(m,md.bind(null,u))}u.callbackPriority=l,u.callbackNode=m}}function md(u,l){if(pd=-1,hf=0,(un&6)!==0)throw Error(n(327));var m=u.callbackNode;if(_l()&&u.callbackNode!==m)return null;var C=Be(u,u===xr?Rr:0);if(C===0)return null;if((C&30)!==0||(C&u.expiredLanes)!==0||l)l=vd(u,C);else{l=C;var P=un;un|=2;var D=S2();(xr!==u||Rr!==l)&&(Xs=null,Ca=mn()+500,Ea(u,l));do try{K3();break}catch(V){P2(u,V)}while(!0);Hs(),fd.current=D,un=P,ur!==null?l=0:(xr=null,Rr=0,l=dr)}if(l!==0){if(l===2&&(P=We(u),P!==0&&(C=P,l=G1(u,P))),l===1)throw m=af,Ea(u,0),bu(u,C),Si(u,mn()),m;if(l===6)bu(u,C);else{if(P=u.current.alternate,(C&30)===0&&!U3(P)&&(l=vd(u,C),l===2&&(D=We(u),D!==0&&(C=D,l=G1(u,D))),l===1))throw m=af,Ea(u,0),bu(u,C),Si(u,mn()),m;switch(u.finishedWork=P,u.finishedLanes=C,l){case 0:case 1:throw Error(n(345));case 2:Pa(u,Pi,Xs);break;case 3:if(bu(u,C),(C&130023424)===C&&(l=_1+500-mn(),10<l)){if(Be(u,0)!==0)break;if(P=u.suspendedLanes,(P&C)!==C){oi(),u.pingedLanes|=u.suspendedLanes&P;break}u.timeoutHandle=mu(Pa.bind(null,u,Pi,Xs),l);break}Pa(u,Pi,Xs);break;case 4:if(bu(u,C),(C&4194240)===C)break;for(l=u.eventTimes,P=-1;0<C;){var k=31-Bi(C);D=1<<k,k=l[k],k>P&&(P=k),C&=~D}if(C=P,C=mn()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*x2(C/1960))-C,10<C){u.timeoutHandle=mu(Pa.bind(null,u,Pi,Xs),C);break}Pa(u,Pi,Xs);break;case 5:Pa(u,Pi,Xs);break;default:throw Error(n(329))}}}return Si(u,mn()),u.callbackNode===m?md.bind(null,u):null}function G1(u,l){var m=cf;return u.current.memoizedState.isDehydrated&&(Ea(u,l).flags|=256),u=vd(u,l),u!==2&&(l=Pi,Pi=m,l!==null&&W1(l)),u}function W1(u){Pi===null?Pi=u:Pi.push.apply(Pi,u)}function U3(u){for(var l=u;;){if(l.flags&16384){var m=l.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var C=0;C<m.length;C++){var P=m[C],D=P.getSnapshot;P=P.value;try{if(!ve(D(),P))return!1}catch{return!1}}}if(m=l.child,l.subtreeFlags&16384&&m!==null)m.return=l,l=m;else{if(l===u)break;for(;l.sibling===null;){if(l.return===null||l.return===u)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function bu(u,l){for(l&=~hd,l&=~lf,u.suspendedLanes|=l,u.pingedLanes&=~l,u=u.expirationTimes;0<l;){var m=31-Bi(l),C=1<<m;u[m]=-1,l&=~C}}function E2(u){if((un&6)!==0)throw Error(n(327));_l();var l=Be(u,0);if((l&1)===0)return Si(u,mn()),null;var m=vd(u,l);if(u.tag!==0&&m===2){var C=We(u);C!==0&&(l=C,m=G1(u,C))}if(m===1)throw m=af,Ea(u,0),bu(u,l),Si(u,mn()),m;if(m===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=l,Pa(u,Pi,Xs),Si(u,mn()),null}function $1(u,l){var m=un;un|=1;try{return u(l)}finally{un=m,un===0&&(Ca=mn()+500,Lh&&Cu())}}function xa(u){Ru!==null&&Ru.tag===0&&(un&6)===0&&_l();var l=un;un|=1;var m=io.transition,C=wt;try{if(io.transition=null,wt=1,u)return u()}finally{wt=C,io.transition=m,un=l,(un&6)===0&&Cu()}}function j1(){ki=Ll.current,kn(Ll)}function Ea(u,l){u.finishedWork=null,u.finishedLanes=0;var m=u.timeoutHandle;if(m!==-1&&(u.timeoutHandle=-1,Gc(m)),ur!==null)for(m=ur.return;m!==null;){var C=m;switch(ha(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&kh();break;case 3:Pu(),kn(wi),kn(Nr),Uh();break;case 5:Vh(C);break;case 4:Pu();break;case 13:kn(Wn);break;case 19:kn(Wn);break;case 10:Wh(C.type._context);break;case 22:case 23:j1()}m=m.return}if(xr=u,ur=u=Oo(u.current,null),Rr=ki=l,dr=0,af=null,hd=lf=Au=0,Pi=cf=null,ga!==null){for(l=0;l<ga.length;l++)if(m=ga[l],C=m.interleaved,C!==null){m.interleaved=null;var P=C.next,D=m.pending;if(D!==null){var k=D.next;D.next=P,C.next=k}m.pending=C}ga=null}return u}function P2(u,l){do{var m=ur;try{if(Hs(),Xc.current=Qh,Tl){for(var C=jn.memoizedState;C!==null;){var P=C.queue;P!==null&&(P.pending=null),C=C.next}Tl=!1}if(Su=0,hr=Jn=jn=null,Kc=!1,ma=0,L1.current=null,m===null||m.return===null){dr=1,af=l,ur=null;break}e:{var D=u,k=m.return,V=m,Z=l;if(l=Rr,V.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var xe=Z,_e=V,Ge=_e.tag;if((_e.mode&1)===0&&(Ge===0||Ge===11||Ge===15)){var ke=_e.alternate;ke?(_e.updateQueue=ke.updateQueue,_e.memoizedState=ke.memoizedState,_e.lanes=ke.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var Je=f2(k);if(Je!==null){Je.flags&=-257,P1(Je,k,V,D,l),Je.mode&1&&Jc(D,xe,l),l=Je,Z=xe;var nt=l.updateQueue;if(nt===null){var it=new Set;it.add(Z),l.updateQueue=it}else nt.add(Z);break e}else{if((l&1)===0){Jc(D,xe,l),z1();break e}Z=Error(n(426))}}else if(Ln&&V.mode&1){var er=f2(k);if(er!==null){(er.flags&65536)===0&&(er.flags|=256),P1(er,k,V,D,l),ss(wa(Z,V));break e}}D=Z=wa(Z,V),dr!==4&&(dr=2),cf===null?cf=[D]:cf.push(D),D=k;do{switch(D.tag){case 3:D.flags|=65536,l&=-l,D.lanes|=l;var de=Qc(D,Z,l);r2(D,de);break e;case 1:V=Z;var te=D.type,pe=D.stateNode;if((D.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Bu===null||!Bu.has(pe)))){D.flags|=65536,l&=-l,D.lanes|=l;var ze=rd(D,V,l);r2(D,ze);break e}}D=D.return}while(D!==null)}T2(m)}catch(ct){l=ct,ur===m&&m!==null&&(ur=m=m.return);continue}break}while(!0)}function S2(){var u=fd.current;return fd.current=Qh,u===null?Qh:u}function z1(){(dr===0||dr===3||dr===2)&&(dr=4),xr===null||(Au&268435455)===0&&(lf&268435455)===0||bu(xr,Rr)}function vd(u,l){var m=un;un|=2;var C=S2();(xr!==u||Rr!==l)&&(Xs=null,Ea(u,l));do try{X3();break}catch(P){P2(u,P)}while(!0);if(Hs(),un=m,fd.current=C,ur!==null)throw Error(n(261));return xr=null,Rr=0,dr}function X3(){for(;ur!==null;)D2(ur)}function K3(){for(;ur!==null&&!el();)D2(ur)}function D2(u){var l=B2(u.alternate,u,ki);u.memoizedProps=u.pendingProps,l===null?T2(u):ur=l,L1.current=null}function T2(u){var l=u;do{var m=l.alternate;if(u=l.return,(l.flags&32768)===0){if(m=j3(m,l,ki),m!==null){ur=m;return}}else{if(m=z3(m,l),m!==null){m.flags&=32767,ur=m;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{dr=6,ur=null;return}}if(l=l.sibling,l!==null){ur=l;return}ur=l=u}while(l!==null);dr===0&&(dr=5)}function Pa(u,l,m){var C=wt,P=io.transition;try{io.transition=null,wt=1,Y3(u,l,m,C)}finally{io.transition=P,wt=C}return null}function Y3(u,l,m,C){do _l();while(Ru!==null);if((un&6)!==0)throw Error(n(327));m=u.finishedWork;var P=u.finishedLanes;if(m===null)return null;if(u.finishedWork=null,u.finishedLanes=0,m===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var D=m.lanes|m.childLanes;if(sn(u,D),u===xr&&(ur=xr=null,Rr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||gd||(gd=!0,R2(Yo,function(){return _l(),null})),D=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||D){D=io.transition,io.transition=null;var k=wt;wt=1;var V=un;un|=4,L1.current=null,V3(u,m),F1(m,u),H3(aa),dh=!!Nc,aa=Nc=null,u.current=m,cd(m),lh(),un=V,wt=k,io.transition=D}else u.current=m;if(gd&&(gd=!1,Ru=u,ii=P),D=u.pendingLanes,D===0&&(Bu=null),L0(m.stateNode),Si(u,mn()),l!==null)for(C=u.onRecoverableError,m=0;m<l.length;m++)P=l[m],C(P.value,{componentStack:P.stack,digest:P.digest});if(dd)throw dd=!1,u=N1,N1=null,u;return(ii&1)!==0&&u.tag!==0&&_l(),D=u.pendingLanes,(D&1)!==0?u===H1?ff++:(ff=0,H1=u):ff=0,Cu(),null}function _l(){if(Ru!==null){var u=Cn(ii),l=io.transition,m=wt;try{if(io.transition=null,wt=16>u?16:u,Ru===null)var C=!1;else{if(u=Ru,Ru=null,ii=0,(un&6)!==0)throw Error(n(331));var P=un;for(un|=4,et=u.current;et!==null;){var D=et,k=D.child;if((et.flags&16)!==0){var V=D.deletions;if(V!==null){for(var Z=0;Z<V.length;Z++){var xe=V[Z];for(et=xe;et!==null;){var _e=et;switch(_e.tag){case 0:case 11:case 15:Us(8,_e,D)}var Ge=_e.child;if(Ge!==null)Ge.return=_e,et=Ge;else for(;et!==null;){_e=et;var ke=_e.sibling,Je=_e.return;if(v2(_e),_e===xe){et=null;break}if(ke!==null){ke.return=Je,et=ke;break}et=Je}}}var nt=D.alternate;if(nt!==null){var it=nt.child;if(it!==null){nt.child=null;do{var er=it.sibling;it.sibling=null,it=er}while(it!==null)}}et=D}}if((D.subtreeFlags&2064)!==0&&k!==null)k.return=D,et=k;else e:for(;et!==null;){if(D=et,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Us(9,D,D.return)}var de=D.sibling;if(de!==null){de.return=D.return,et=de;break e}et=D.return}}var te=u.current;for(et=te;et!==null;){k=et;var pe=k.child;if((k.subtreeFlags&2064)!==0&&pe!==null)pe.return=k,et=pe;else e:for(k=te;et!==null;){if(V=et,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:uf(9,V)}}catch(ct){zn(V,V.return,ct)}if(V===k){et=null;break e}var ze=V.sibling;if(ze!==null){ze.return=V.return,et=ze;break e}et=V.return}}if(un=P,Cu(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(nl,u)}catch{}C=!0}return C}finally{wt=m,io.transition=l}}return!1}function yd(u,l,m){l=wa(m,l),l=Qc(u,l,1),u=to(u,l,1),l=oi(),u!==null&&(kt(u,1,l),Si(u,l))}function zn(u,l,m){if(u.tag===3)yd(u,u,m);else for(;l!==null;){if(l.tag===3){yd(l,u,m);break}else if(l.tag===1){var C=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Bu===null||!Bu.has(C))){u=wa(m,u),u=rd(l,u,1),l=to(l,u,1),u=oi(),l!==null&&(kt(l,1,u),Si(l,u));break}}l=l.return}}function q3(u,l,m){var C=u.pingCache;C!==null&&C.delete(l),l=oi(),u.pingedLanes|=u.suspendedLanes&m,xr===u&&(Rr&m)===m&&(dr===4||dr===3&&(Rr&130023424)===Rr&&500>mn()-_1?Ea(u,0):hd|=m),Si(u,l)}function A2(u,l){l===0&&((u.mode&1)===0?l=1:(l=ue,ue<<=1,(ue&130023424)===0&&(ue=4194304)));var m=oi();u=Gs(u,l),u!==null&&(kt(u,l,m),Si(u,m))}function Z3(u){var l=u.memoizedState,m=0;l!==null&&(m=l.retryLane),A2(u,m)}function Q3(u,l){var m=0;switch(u.tag){case 13:var C=u.stateNode,P=u.memoizedState;P!==null&&(m=P.retryLane);break;case 19:C=u.stateNode;break;default:throw Error(n(314))}C!==null&&C.delete(l),A2(u,m)}var B2;B2=function(u,l,m){if(u!==null)if(u.memoizedProps!==l.pendingProps||wi.current)ni=!0;else{if((u.lanes&m)===0&&(l.flags&128)===0)return ni=!1,g2(u,l,m);ni=(u.flags&131072)!==0}else ni=!1,Ln&&(l.flags&1048576)!==0&&Qp(l,Nh,l.index);switch(l.lanes=0,l.tag){case 2:var C=l.type;sd(u,l),u=l.pendingProps;var P=xl(l,Nr.current);Eu(l,m),P=va(null,l,C,u,P,m);var D=Xh();return l.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Ci(C)?(D=!0,qi(l)):D=!1,l.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,jh(l),P.updater=td,l.stateNode=P,P._reactInternals=l,E1(l,C,u,m),l=R1(null,l,C,!0,D,m)):(l.tag=0,Ln&&D&&Wc(l),Tr(null,l,P,m),l=l.child),l;case 16:C=l.elementType;e:{switch(sd(u,l),u=l.pendingProps,P=C._init,C=P(C._payload),l.type=C,P=l.tag=e7(C),u=ro(C,u),P){case 0:l=A1(null,l,C,u,m);break e;case 1:l=B1(null,l,C,u,m);break e;case 11:l=h2(null,l,C,u,m);break e;case 14:l=S1(null,l,C,ro(C.type,u),m);break e}throw Error(n(306,C,""))}return l;case 0:return C=l.type,P=l.pendingProps,P=l.elementType===C?P:ro(C,P),A1(u,l,C,P,m);case 1:return C=l.type,P=l.pendingProps,P=l.elementType===C?P:ro(C,P),B1(u,l,C,P,m);case 3:e:{if(d2(l),u===null)throw Error(n(387));C=l.pendingProps,D=l.memoizedState,P=D.element,n2(u,l),Sl(l,C,null,m);var k=l.memoizedState;if(C=k.element,D.isDehydrated)if(D={element:C,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},l.updateQueue.baseState=D,l.memoizedState=D,l.flags&256){P=wa(Error(n(423)),l),l=fs(u,l,C,m,P);break e}else if(C!==P){P=wa(Error(n(424)),l),l=fs(u,l,C,m,P);break e}else for(Oi=vu(l.stateNode.containerInfo.firstChild),Gr=l,Ln=!0,Do=null,m=Gh(l,null,C,m),l.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(os(),C===P){l=Ao(u,l,m);break e}Tr(u,l,C,m)}l=l.child}return l;case 5:return l1(l),u===null&&xi(l),C=l.type,P=l.pendingProps,D=u!==null?u.memoizedProps:null,k=P.children,Hc(C,P)?k=null:D!==null&&Hc(C,D)&&(l.flags|=32),T1(u,l),Tr(u,l,k,m),l.child;case 6:return u===null&&xi(l),null;case 13:return od(u,l,m);case 4:return a1(l,l.stateNode.containerInfo),C=l.pendingProps,u===null?l.child=Yn(l,null,C,m):Tr(u,l,C,m),l.child;case 11:return C=l.type,P=l.pendingProps,P=l.elementType===C?P:ro(C,P),h2(u,l,C,P,m);case 7:return Tr(u,l,l.pendingProps,m),l.child;case 8:return Tr(u,l,l.pendingProps.children,m),l.child;case 12:return Tr(u,l,l.pendingProps.children,m),l.child;case 10:e:{if(C=l.type._context,P=l.pendingProps,D=l.memoizedProps,k=P.value,Mn(zc,C._currentValue),C._currentValue=k,D!==null)if(ve(D.value,k)){if(D.children===P.children&&!wi.current){l=Ao(u,l,m);break e}}else for(D=l.child,D!==null&&(D.return=l);D!==null;){var V=D.dependencies;if(V!==null){k=D.child;for(var Z=V.firstContext;Z!==null;){if(Z.context===C){if(D.tag===1){Z=Ws(-1,m&-m),Z.tag=2;var xe=D.updateQueue;if(xe!==null){xe=xe.shared;var _e=xe.pending;_e===null?Z.next=Z:(Z.next=_e.next,_e.next=Z),xe.pending=Z}}D.lanes|=m,Z=D.alternate,Z!==null&&(Z.lanes|=m),Dr(D.return,m,l),V.lanes|=m;break}Z=Z.next}}else if(D.tag===10)k=D.type===l.type?null:D.child;else if(D.tag===18){if(k=D.return,k===null)throw Error(n(341));k.lanes|=m,V=k.alternate,V!==null&&(V.lanes|=m),Dr(k,m,l),k=D.sibling}else k=D.child;if(k!==null)k.return=D;else for(k=D;k!==null;){if(k===l){k=null;break}if(D=k.sibling,D!==null){D.return=k.return,k=D;break}k=k.return}D=k}Tr(u,l,P.children,m),l=l.child}return l;case 9:return P=l.type,C=l.pendingProps.children,Eu(l,m),P=Ji(P),C=C(P),l.flags|=1,Tr(u,l,C,m),l.child;case 14:return C=l.type,P=ro(C,l.pendingProps),P=ro(C.type,P),S1(u,l,C,P,m);case 15:return cs(u,l,l.type,l.pendingProps,m);case 17:return C=l.type,P=l.pendingProps,P=l.elementType===C?P:ro(C,P),sd(u,l),l.tag=1,Ci(C)?(u=!0,qi(l)):u=!1,Eu(l,m),ya(l,C,P),E1(l,C,P,m),R1(null,l,C,!0,u,m);case 19:return Du(u,l,m);case 22:return D1(u,l,m)}throw Error(n(156,l.tag))};function R2(u,l){return uh(u,l)}function J3(u,l,m,C){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oo(u,l,m,C){return new J3(u,l,m,C)}function wd(u){return u=u.prototype,!(!u||!u.isReactComponent)}function e7(u){if(typeof u=="function")return wd(u)?1:0;if(u!=null){if(u=u.$$typeof,u===oe)return 11;if(u===ye)return 14}return 2}function Oo(u,l){var m=u.alternate;return m===null?(m=oo(u.tag,l,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=l,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&14680064,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,l=u.dependencies,m.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m}function Cd(u,l,m,C,P,D){var k=2;if(C=u,typeof u=="function")wd(u)&&(k=1);else if(typeof u=="string")k=5;else e:switch(u){case z:return Sa(m.children,P,D,l);case J:k=8,P|=8;break;case ae:return u=oo(12,m,l,P|2),u.elementType=ae,u.lanes=D,u;case ce:return u=oo(13,m,l,P),u.elementType=ce,u.lanes=D,u;case me:return u=oo(19,m,l,P),u.elementType=me,u.lanes=D,u;case Te:return xd(m,P,D,l);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case ne:k=10;break e;case Pe:k=9;break e;case oe:k=11;break e;case ye:k=14;break e;case Fe:k=16,C=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return l=oo(k,m,l,P),l.elementType=u,l.type=C,l.lanes=D,l}function Sa(u,l,m,C){return u=oo(7,u,C,l),u.lanes=m,u}function xd(u,l,m,C){return u=oo(22,u,C,l),u.elementType=Te,u.lanes=m,u.stateNode={isHidden:!1},u}function V1(u,l,m){return u=oo(6,u,null,l),u.lanes=m,u}function U1(u,l,m){return l=oo(4,u.children!==null?u.children:[],u.key,l),l.lanes=m,l.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},l}function t7(u,l,m,C,P){this.tag=l,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tt(0),this.expirationTimes=tt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tt(0),this.identifierPrefix=C,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function X1(u,l,m,C,P,D,k,V,Z){return u=new t7(u,l,m,V,Z),l===1?(l=1,D===!0&&(l|=8)):l=0,D=oo(3,null,null,l),u.current=D,D.stateNode=u,D.memoizedState={element:C,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(D),u}function n7(u,l,m){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:C==null?null:""+C,children:u,containerInfo:l,implementation:m}}function M2(u){if(!u)return wu;u=u._reactInternals;e:{if(Os(u)!==u||u.tag!==1)throw Error(n(170));var l=u;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ci(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(u.tag===1){var m=u.type;if(Ci(m))return Yp(u,m,l)}return l}function b2(u,l,m,C,P,D,k,V,Z){return u=X1(m,C,!0,u,P,D,k,V,Z),u.context=M2(null),m=u.current,C=oi(),P=Mu(m),D=Ws(C,P),D.callback=l??null,to(m,D,P),u.current.lanes=P,kt(u,P,C),Si(u,C),u}function Ed(u,l,m,C){var P=l.current,D=oi(),k=Mu(P);return m=M2(m),l.context===null?l.context=m:l.pendingContext=m,l=Ws(D,k),l.payload={element:u},C=C===void 0?null:C,C!==null&&(l.callback=C),u=to(P,l,k),u!==null&&(bo(u,P,k,D),zh(u,P,k)),k}function Pd(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function O2(u,l){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<l?m:l}}function K1(u,l){O2(u,l),(u=u.alternate)&&O2(u,l)}function r7(){return null}var I2=typeof reportError=="function"?reportError:function(u){console.error(u)};function Sd(u){this._internalRoot=u}df.prototype.render=Sd.prototype.render=function(u){var l=this._internalRoot;if(l===null)throw Error(n(409));Ed(u,l,null,null)},df.prototype.unmount=Sd.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var l=u.containerInfo;xa(function(){Ed(null,u,null,null)}),l[bi]=null}};function df(u){this._internalRoot=u}df.prototype.unstable_scheduleHydration=function(u){if(u){var l=Tc();u={blockedOn:null,target:u,priority:l};for(var m=0;m<fu.length&&l!==0&&l<fu[m].priority;m++);fu.splice(m,0,u),m===0&&Sp(u)}};function Y1(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Dd(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function F2(){}function i7(u,l,m,C,P){if(P){if(typeof C=="function"){var D=C;C=function(){var xe=Pd(k);D.call(xe)}}var k=b2(l,C,u,0,null,!1,!1,"",F2);return u._reactRootContainer=k,u[bi]=k.current,pu(u.nodeType===8?u.parentNode:u),xa(),k}for(;P=u.lastChild;)u.removeChild(P);if(typeof C=="function"){var V=C;C=function(){var xe=Pd(Z);V.call(xe)}}var Z=X1(u,0,!1,null,null,!1,!1,"",F2);return u._reactRootContainer=Z,u[bi]=Z.current,pu(u.nodeType===8?u.parentNode:u),xa(function(){Ed(l,Z,m,C)}),Z}function Da(u,l,m,C,P){var D=m._reactRootContainer;if(D){var k=D;if(typeof P=="function"){var V=P;P=function(){var Z=Pd(k);V.call(Z)}}Ed(l,k,u,P)}else k=i7(m,l,u,P,C);return Pd(k)}Fr=function(u){switch(u.tag){case 3:var l=u.stateNode;if(l.current.memoizedState.isDehydrated){var m=ee(l.pendingLanes);m!==0&&(Qt(l,m|1),Si(l,mn()),(un&6)===0&&(Ca=mn()+500,Cu()))}break;case 13:xa(function(){var C=Gs(u,1);if(C!==null){var P=oi();bo(C,u,1,P)}}),K1(u,1)}},qo=function(u){if(u.tag===13){var l=Gs(u,134217728);if(l!==null){var m=oi();bo(l,u,134217728,m)}K1(u,134217728)}},rl=function(u){if(u.tag===13){var l=Mu(u),m=Gs(u,l);if(m!==null){var C=oi();bo(m,u,l,C)}K1(u,l)}},Tc=function(){return wt},ta=function(u,l){var m=wt;try{return wt=u,l()}finally{wt=m}},pi=function(u,l,m){switch(l){case"input":if(Rt(u,m),l=m.name,m.type==="radio"&&l!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<m.length;l++){var C=m[l];if(C!==u&&C.form===u.form){var P=Fh(C);if(!P)throw Error(n(90));It(C),Rt(C,P)}}}break;case"textarea":Hn(u,m);break;case"select":l=m.value,l!=null&&en(u,!!m.multiple,l,!1)}},nh=$1,Cc=xa;var o7={usingClientEntryPoint:!1,Events:[_r,Nt,Fh,eh,th,$1]},gf={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s7={bundleType:gf.bundleType,version:gf.version,rendererPackageName:gf.rendererPackageName,rendererConfig:gf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=oh(u),u===null?null:u.stateNode},findFiberByHostInstance:gf.findFiberByHostInstance||r7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{nl=Td.inject(s7),mi=Td}catch{}}return lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o7,lo.createPortal=function(u,l){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Y1(l))throw Error(n(200));return n7(u,l,null,m)},lo.createRoot=function(u,l){if(!Y1(u))throw Error(n(299));var m=!1,C="",P=I2;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(C=l.identifierPrefix),l.onRecoverableError!==void 0&&(P=l.onRecoverableError)),l=X1(u,1,!1,null,null,m,!1,C,P),u[bi]=l.current,pu(u.nodeType===8?u.parentNode:u),new Sd(l)},lo.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var l=u._reactInternals;if(l===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=oh(l),u=u===null?null:u.stateNode,u},lo.flushSync=function(u){return xa(u)},lo.hydrate=function(u,l,m){if(!Dd(l))throw Error(n(200));return Da(null,u,l,!0,m)},lo.hydrateRoot=function(u,l,m){if(!Y1(u))throw Error(n(405));var C=m!=null&&m.hydratedSources||null,P=!1,D="",k=I2;if(m!=null&&(m.unstable_strictMode===!0&&(P=!0),m.identifierPrefix!==void 0&&(D=m.identifierPrefix),m.onRecoverableError!==void 0&&(k=m.onRecoverableError)),l=b2(l,null,u,1,m??null,P,!1,D,k),u[bi]=l.current,pu(u),C)for(u=0;u<C.length;u++)m=C[u],P=m._getVersion,P=P(m._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[m,P]:l.mutableSourceEagerHydrationData.push(m,P);return new df(l)},lo.render=function(u,l,m){if(!Dd(l))throw Error(n(200));return Da(null,u,l,!1,m)},lo.unmountComponentAtNode=function(u){if(!Dd(u))throw Error(n(40));return u._reactRootContainer?(xa(function(){Da(null,null,u,!1,function(){u._reactRootContainer=null,u[bi]=null})}),!0):!1},lo.unstable_batchedUpdates=$1,lo.unstable_renderSubtreeIntoContainer=function(u,l,m,C){if(!Dd(m))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return Da(u,l,m,!1,C)},lo.version="18.3.1-next-f1338f8080-20240426",lo}var E6;function Lx(){if(E6)return x7.exports;E6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),x7.exports=gM(),x7.exports}var P6;function pM(){if(P6)return N2;P6=1;var e=Lx();return N2.createRoot=e.createRoot,N2.hydrateRoot=e.hydrateRoot,N2}var Av=pM();const S7=[{id:"Sfftf",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:"结束"}],align:"center"},points:[[-276.50609579402317,624.50390625],[-156.50609579402317,684.50390625]],strokeWidth:2},{id:"aMJWD",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:"过程"}],align:"center"},points:[[-71.50609579402317,464.50390625],[48.49390420597683,524.50390625]],strokeWidth:2},{id:"FHSxH",type:"geometry",shape:"decision",angle:0,opacity:1,textHeight:20,text:{children:[{text:"判断"}],align:"center"},points:[[-286.50609579402317,459.50390625],[-146.50609579402317,529.50390625]],strokeWidth:2},{id:"xnnhM",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:"过程"}],align:"center"},points:[[-276.50609579402317,344.50390625],[-156.50609579402317,404.50390625]],strokeWidth:2},{id:"FAkXk",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:"开始"}],align:"center"},points:[[-276.50609579402317,229.50390625],[-156.50609579402317,289.50390625]],strokeWidth:2},{id:"mrdfi",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"aMJWD"},texts:[],target:{marker:"arrow",connection:[1,.5],boundId:"Sfftf"},opacity:1,points:[[-11.506095794023167,524.50390625],[-156.50609579402317,654.50390625]],strokeWidth:2},{id:"bjjcw",type:"line",shape:"elbow",source:{marker:"none",connection:[1,.5],boundId:"FHSxH"},texts:[{text:{children:[{text:"否"}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[0,.5],boundId:"aMJWD"},opacity:1,points:[[-146.50609579402317,494.50390625],[-71.50609579402317,494.50390625]],strokeWidth:2},{id:"mnzKm",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FHSxH"},texts:[{text:{children:[{text:"是"}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[.5,0],boundId:"Sfftf"},opacity:1,points:[[-216.50609579402317,529.50390625],[-216.50609579402317,624.50390625]],strokeWidth:2},{id:"bJmWK",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"xnnhM"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"FHSxH"},opacity:1,points:[[-216.50609579402317,404.50390625],[-216.50609579402317,459.50390625]],strokeWidth:2},{id:"zZtTs",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FAkXk"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"xnnhM"},opacity:1,points:[[-216.50609579402317,289.50390625],[-216.50609579402317,344.50390625]],strokeWidth:2},{type:"mindmap",id:"rzdDJ",rightNodeCount:4,data:{topic:{children:[{text:"思维导图"}]}},children:[{id:"WKQyj",data:{topic:{children:[{text:"观点一"}]}},children:[{id:"RYSRd",data:{topic:{children:[{text:""}]}},children:[{id:"nDBRj",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"PWzAD",data:{topic:{children:[{text:"观点二"}]}},children:[{id:"bTRmh",data:{topic:{children:[{text:""}]}},children:[{id:"bnZEJ",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"nJTYp",data:{topic:{children:[{text:"观点三"}]}},children:[{id:"GtyaH",data:{topic:{children:[{text:""}]}},children:[{id:"JsPEN",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"aCpyY",data:{topic:{children:[{text:"观点四"}]}},children:[{id:"iHynm",data:{topic:{children:[{text:""}]}},children:[{id:"TiZGR",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20}],width:72,height:25,isRoot:!0,points:[[248.24308817248368,470.83369157012714]]},{id:"KXysP",type:"freehand",shape:"feltTipPen",points:[[25.82611644667014,703.0773612017922],[25.82611644667014,703.0773612017922],[25.82611644667014,703.6097522549182],[25.82611644667014,704.3161805643415],[26.219339493852715,705.9147174603097],[26.48289275611893,708.3977757618361],[26.652999042487693,711.790612427639],[26.769301740349704,716.4831439393704],[26.878486952048036,723.296430945664],[26.95866526031142,732.0965563549373],[26.713628951597514,742.3221727926768],[26.486869670889348,753.3770839295942],[25.987022009734176,764.5720189960005],[25.28182221137496,774.44582872661],[24.71533082578759,783.2675093262444],[23.963661997062502,790.8945479975139],[23.048301926497345,796.8236443273966],[22.30614309560343,801.348762610761],[21.461047195923868,804.4435612647787],[20.52751449945191,805.8852357468843],[19.836896435116216,805.9631902162557],[19.044986054339063,804.8675121843237],[18.41427186859147,802.5658687174848],[17.651416774455868,799.3506655010544]],strokeWidth:2},{id:"ieFQi",type:"freehand",shape:"feltTipPen",points:[[8.525144612123597,771.6634663797779],[7.830358871157216,770.2738948978451],[7.591057945441719,769.2798889341004],[7.482369285893185,768.3643833772924],[7.798637396813376,767.4159924631342],[8.727962400166064,766.4739109910918],[10.385700520019384,765.5012158644142],[12.557252168364641,764.1624007167368],[15.606815358091183,762.6087757914249],[19.584975785597692,761.1935846313784],[24.374070128432834,759.4662112021517],[29.276715846788704,758.1906705015783],[34.270819142426774,756.953009907764],[38.993590498356355,755.7158759823526],[43.523460758474414,754.1442520466846],[47.47550632130975,752.6877532620595],[51.0235645885237,751.2751690748494],[53.95684387375701,749.5479777217163]],strokeWidth:2},{id:"ZjTpX",type:"freehand",shape:"feltTipPen",points:[[51.777574198490186,713.5816323638003],[51.087113151163805,711.5102492218223],[50.333175194926355,710.2754270887046],[49.91784499679267,710.0204110808911],[49.72806186749682,710.7217690064483],[49.253941837357445,712.5988913023077],[48.91286613548829,715.5919909067745],[48.67849218109524,719.6742933129437],[48.420540988742516,725.5121622904564],[47.94132711956655,733.3087527347764],[47.59258197774267,742.2932025112325],[47.028192929209865,751.7429725824952],[46.57151926717057,761.1557394184322],[45.958295450227126,769.419040297825],[45.468055902714525,776.6194973399336],[45.097923992038716,782.2306032113204],[44.806647581817344,786.6706955038064],[44.91739682712506,789.9906758390628],[45.362029379494345,791.550697846834],[46.064169573880065,791.7416144980164],[47.25805131980479,791.2552119777804],[48.555674442526026,790.0928593770825],[50.17300374572875,788.4489595891948],[52.14521730899634,786.4279232879601],[54.630991243387655,783.8616587784566],[57.12296994544664,781.2796893907964],[59.6930988097418,778.3176970534962],[62.26335632862043,775.1412187012495],[64.80785320499814,771.440485128099],[67.01974288823436,767.7163984200536],[68.94919602635883,764.2976026042336],[70.37436449390867,761.0662389180918],[71.01923603897131,758.365639559933],[71.08185089113528,756.3903295623597],[70.39600150042935,755.6710674357867],[69.1469160498853,755.9374137062653],[67.43266475807383,757.6008172885024],[65.42929472223483,759.996564795237],[63.18664295715604,762.9122360413178],[61.13023394045382,765.8947561320495],[59.265574385832736,769.2068272459221],[57.906650309900726,772.3599211413432],[57.26568857039325,775.3749323541281],[57.52323457431777,777.9314614013704],[58.79855692832831,780.0197669785541],[60.85528419455483,781.5094332264418],[63.486558526298325,782.5098062457266],[66.87071300227745,782.8817113580437],[70.63912378906781,782.3973341407193],[74.31887093199595,780.9658838909702],[78.05269569606918,778.7980026763337],[81.84064862451606,776.421931772413],[84.97154602946881,773.5920632054033],[87.88863238808887,770.1166896682728]],strokeWidth:2},{id:"BcwPw",type:"freehand",shape:"feltTipPen",points:[[90.08686897498643,716.0531997687351],[90.08686897498643,715.3545991865524],[90.59961654974978,713.5755714732616],[90.87506071849776,713.9030098966789],[91.02059831129924,715.7164493423636],[90.76230894069141,718.7019488012759],[90.2351007751177,722.7946121926946],[89.52661403388362,728.3163804733442],[88.66046603398723,735.6683141594506],[87.65095963532332,744.4542762613858],[86.85624062201697,753.6443805658103],[86.26948385821157,762.1377405296901],[85.82784922765273,769.4276946867515],[85.519431772583,775.5723325145475],[85.63021011196253,780.604474172321],[86.09216067893914,784.3172010194023],[86.84282246119466,786.9517804708441],[88.09874694099636,787.8900083748733],[89.39232871426367,787.2529913647807],[91.34234891859779,785.242021100915],[93.21198133744298,782.2576321785939],[95.2542706345983,777.9538837939938]],strokeWidth:2},{id:"yMmdM",type:"freehand",shape:"feltTipPen",points:[[111.0951919169359,732.1183879008142],[112.43345337198554,728.1036035356649],[113.9186466695026,724.1322186002501],[115.08677500986283,720.8947537269144],[116.16280674513024,718.5729978256343],[116.9433132530092,717.2466060137942],[117.06139522232257,717.2071347122185],[116.8062594055462,718.1644654916529],[116.13643241549863,719.465600268358],[115.1924377874796,722.0109822440893],[113.74336935643561,725.4898824499571],[112.18534459109225,730.0631763717322],[110.69749639684989,735.0979384281429],[109.23244551532599,740.8994562126247],[108.14148979714088,747.239427295048],[107.05020337373054,753.9158374223928],[106.27420656641885,760.5537181684188],[105.73061295271333,766.7543047523343],[105.70818220430925,772.029148763276],[106.06654251025822,776.1953731120932],[106.72464226044082,779.3071539024043],[107.59748274595,781.0663373837599],[108.88382636657485,781.455722523727],[110.90412164628202,780.8588558476742],[113.12509997478656,779.5514814132296],[115.47825116605173,777.738561433631],[117.62498087858563,775.5777325893271],[119.88146256638294,773.2175445323621],[121.8487044556469,770.8119842760645],[123.63518410437229,768.3573801068753],[124.94928957854046,766.1896256686716],[125.80588563089879,763.9992523780031],[126.38823326236235,762.0596360591719],[126.75854012706947,760.3174607508001],[127.00257772995707,758.726044206401],[126.79906743898852,757.4870637313718],[126.26061619709509,757.0393148167525],[125.49445373291411,757.4565318785355],[124.8935883866555,758.1591844211355],[124.11929519158008,759.4190620418588],[123.51769935630415,761.0728292415927],[123.02821693949846,763.0865384871543],[122.67844919876558,765.6464819058831],[122.46093955961197,768.229858125995],[122.65358910252604,770.8899648615427],[123.17669405562043,773.4536609277841],[123.9199334547007,775.7302937042689],[125.19016929925334,777.4034167275224],[126.81643351306258,777.912356839068],[128.69023085085092,777.5299147081153],[130.49723956949703,776.1305408931714],[132.16438944441876,773.9978693851629],[133.42318320268106,771.2810865769673],[134.34412130312654,768.1333831400555],[134.36274997369566,764.9647034156062],[133.60142236845473,762.3104296518698],[131.62729077178034,760.6597597861266],[129.34818433476363,759.8457550748419]],strokeWidth:2},{id:"mGnrA",type:"freehand",shape:"feltTipPen",points:[[160.41280963538162,759.3056293551019],[161.11194853439616,757.9073515570728],[161.36096546095615,758.4062348768805],[161.46430494820066,760.0038682781008],[161.52370540048634,762.1226774279305],[161.56168593762396,764.9389127980714],[161.5864635186045,767.8674646636539],[161.92761802593333,770.9230083451187],[162.23641994879932,774.2515034453047],[162.75872522954938,777.1204824103181],[163.80990583423005,779.5079020245369],[164.96132732559255,781.217213583913],[166.50983858559226,781.7921766780466],[168.32653830968053,781.0553063594846],[170.37798064787881,779.3731401547259],[172.92997221208822,776.949828307572],[175.53136136485028,773.7195424992635],[178.13259196236828,770.2119048493162],[180.37534341070915,766.8424634111827],[182.36903438286396,763.9490094327678],[183.93418490078608,761.9603528663295],[184.59419077283252,761.4196605988075],[184.69209281722743,762.4098200665787],[184.63853528471583,764.2981055696976],[184.20788955052723,766.8912729444321],[183.78972122799956,769.9874799376314],[183.41778828295088,773.1925778175403],[183.44321929032031,776.2744618893068],[183.8097636431474,778.8774440025256],[184.79170798581623,780.8485049732083],[186.23728197938482,781.8111337485691],[188.0088359513698,781.763134199645],[190.04172733046454,780.9377964455673],[192.60522750745127,779.1981561132291],[195.23950036382922,776.7854600916028],[197.88300474742942,773.86315343923],[200.5156939477502,770.2756837271293],[203.09132440082482,766.5531468291013],[205.28654546544664,763.4603169872091],[206.5462871342325,761.5273726326861],[207.4819999282584,760.368236411756],[207.76182702032662,759.6634107166776],[207.52570707602428,759.5764624849628],[207.24934808565723,759.9531458811882],[207.24514778509734,760.4484098425721],[207.24880318550123,760.6039046512999],[207.502970018192,760.6866215048415]],strokeWidth:2},{id:"zZrtc",type:"freehand",shape:"feltTipPen",points:[[218.4946436513597,759.3056293551019],[217.79320406596258,759.3056293551019],[217.53245542671,758.8278804264075],[217.03805860789208,758.5323190489155],[216.3745272152192,758.3954199103384],[215.55802320211643,758.6341827958652],[214.67604137475274,759.468293779548],[214.03318852479293,761.0369000262674],[213.09197007199128,763.2718306949075],[212.37407056141552,766.0462511302169],[211.56136146741375,769.1270120536622],[210.95404877103766,772.1797603304105],[210.8602470105589,775.1490650597655],[211.48464824218973,777.4374700138817],[212.66865572127045,778.6977628481857],[214.2437798296856,778.8792727439279],[216.1457991496382,777.9082548720128],[218.26383168408762,776.0479329344482],[220.58198130738043,773.5099601328304],[222.4119579055385,770.4511100480188],[224.0321848644449,767.4198354314506],[224.89351748479163,764.4232072923908],[225.11500629940298,762.1657268019219],[224.54342210187434,760.6353439713823],[223.658941290742,760.1577094065226],[222.6141671704989,760.2816572633931],[221.37985004319904,760.5269734107708],[220.3630873447608,761.148065714516],[220.2390244954134,761.7039938417195],[220.58643837834444,762.1322842873753],[221.5303895360201,762.4907333074063],[223.00897388459026,762.4397792264274],[224.85871469988598,762.3116726812152],[227.01030270822122,762.1873094033274],[229.388413083814,762.4034170517527],[231.4416641168105,762.8812048793354],[232.96869218407102,763.9107901549316],[234.0553220008506,765.674286597635],[234.48637475261063,768.0422072846361],[234.38652340583786,770.5322786754725],[233.906995954794,773.1029545262993],[233.44950685162786,775.4286523535277],[232.67615139640253,777.3202413449019],[232.0470197247085,778.2570567409268],[231.93114924912862,778.1802630328059],[232.1760190436999,777.0503155368854],[233.04242213182903,774.769935027037],[234.40773632018437,771.6167696825416],[236.18990747054437,768.0106888565745],[238.26241588098816,764.1684830058687],[240.49324616670134,760.6848149173986],[242.85278863906484,757.7454812231856],[244.94736313635673,755.2655513797301]],strokeWidth:2},{id:"yrTcA",type:"freehand",shape:"feltTipPen",points:[[261.7470732377263,729.6468204958794],[261.7470732377263,728.2550271437415],[261.7470732377263,727.2627033436686],[261.7470732377263,725.8923340121712],[262.1338576733629,724.6755107320298],[262.40333499910713,723.5487648150704],[262.56315406887944,723.5215318974717],[262.67845749595705,724.4860436313477],[262.46492831612665,726.395011505286],[261.9605446123183,729.5932337161332],[261.23638161267314,734.1009025044843],[260.02253851245797,739.6345148790408],[258.72160413955845,745.7944291079696],[257.09245462439577,752.8023965878576],[255.531452297076,759.3159315977348],[254.33118128964867,764.8584180501705],[253.45461388383575,769.2765065090937],[253.4070009518253,772.7254923792091],[254.12552340193844,774.3107952365174],[255.40318921136105,774.5847118752893],[257.1081249784418,773.5839054095316],[259.474554654677,771.5273352811912],[261.96611890443825,768.8355714802349],[264.6090198193961,766.2814725200853],[267.23456615536,763.6984343532424],[269.4881229099165,761.7335311075424],[270.7522292768727,760.3684309375278],[271.33122659124575,759.3792901160662],[271.37575230366184,758.3855948428293],[271.2645495971315,757.4146015843774],[271.1293011166218,756.4832087769103],[270.6057129660342,755.7079507769552],[270.11814909084825,754.9473114049954],[269.4502322104452,754.341417478938],[268.9775433264927,753.9302565119581],[268.3163815352464,753.9139185555425],[267.80555023110657,754.2742675652946],[267.0889795851095,755.23219760905],[266.5279061701713,757.0034052701169],[265.80882196793715,759.4109108147288],[264.9633042479248,762.2009748014591],[264.33825177354566,765.3375953131701],[263.85590932455494,768.7781748033278],[263.5356524232903,771.6467472312918],[263.6054873169165,774.2456013596304],[264.04616511942237,776.0870117017487],[265.0313987933744,777.0008551945541],[266.4836019457046,776.919496986907],[268.3048970233006,775.4311204166636],[270.67052206216914,772.8444135854636],[273.1840309754728,769.4099463804034],[275.7707848558701,765.0750557374924],[278.67759125369554,759.7401468158962],[281.5281737871026,753.379489568689],[284.24725529930885,746.3141362964309],[287.22927950330137,738.9653705111589],[289.76358625362064,732.2542123158421],[291.89365014600963,726.6540265757596],[293.788611078368,721.8378268909958],[295.56351546513935,718.1386345706198],[296.86033654949284,715.2258478982142],[297.6343910939998,713.1749165303929],[298.1697388337432,711.4940646097432],[298.18260890317066,710.3163701615524],[298.08389298194226,709.9386996974465],[297.6960214141655,710.3902370094977],[297.02172456102954,711.456210089945],[296.1447638814739,713.283694037463],[295.1393907438406,716.0346613609229],[293.6670048941808,719.9484998261198],[291.8624864106792,725.022696536332],[289.8891354673065,730.7900161663413],[287.4072282608516,737.7780354602776],[285.22367870943896,745.2456462943121],[283.2926292161963,752.1752677224688],[282.14283046141765,758.4102948224165],[281.6541885433906,763.6419588229085],[282.00556444059686,767.8746747016241],[283.02416296088614,770.8616920226789],[284.87300101396505,772.6139967593947],[287.40106985613016,772.9317114245034],[290.38558985135893,771.9048022764766],[293.3289431939457,770.6119005851108]],strokeWidth:2},{id:"HbPrm",type:"freehand",shape:"feltTipPen",points:[[62.463113658224756,126.9073543983011],[62.463113658224756,126.9073543983011],[62.463113658224756,127.43974545142805],[62.022767433957824,128.58646981921515],[60.59130555648426,130.43552109835196],[58.21264998246238,133.42373691821626],[54.891001034704914,137.5026870889085],[50.8989500213886,142.35614913791937],[45.70619772779264,148.29995078784282],[40.48880550033391,153.7501562209843],[35.53870374913345,158.50345525354692],[31.10650641299344,162.4210288545362],[27.591767832852383,165.18105722016458],[25.829359527583392,166.32827738255014],[25.393412722937683,166.28540068898997],[26.231087472286845,165.03320876508656],[28.12673912717355,162.8335299846592],[30.729890934076366,160.3576474262843],[33.55840093875213,157.67662746607925],[36.40964829971517,155.30350139072812],[39.19449221177206,153.24862649683178],[41.59581603398624,151.41634651691197],[43.50400234838867,150.2905792358613],[44.634866642708175,150.02689370348685],[45.41163886171853,150.5789220223512],[45.902944799547186,152.0733130682754],[45.87725865733728,154.630548147348],[45.76654333632314,158.28299499486616],[45.28214369521925,163.58748695347617],[44.86440051384716,170.17298396503952],[44.246103401018445,178.4090678013315],[43.753971962227524,187.26043432433084],[43.0766346807502,196.9217836357809],[42.23569827213737,206.36808189001817],[41.608327351431626,215.08734859200263],[41.136515723036155,222.22437805824643],[40.805297543159895,228.19948358721354],[40.85193301605818,232.13559315564066],[41.27574945455217,233.79320880172122],[41.94544686752238,233.47791818376095],[42.8346326761432,230.85413188276902],[43.87673344631435,226.88968301404088],[44.98516689824669,222.72010666556594]],strokeWidth:2},{id:"kMZAM",type:"freehand",shape:"feltTipPen",points:[[62.463113658224756,169.5419626734772],[63.14392901733822,167.49951659613703],[66.27022018144635,162.41636194566922],[69.22467765256647,158.84824297553837],[71.73677927117183,156.016443695951],[73.75471355985269,154.1354729345046],[75.26061916862386,153.07237890397005],[76.1049799898326,153.15822999690022],[77.14307497269556,154.03302978752595],[77.34743678128257,156.10962035193347],[76.53702367755113,159.7422504176618],[74.81311638406623,163.96518761661423],[72.71288421039435,168.34395475221822],[70.11524512597748,172.87233446522964],[67.15055202212329,177.27026765807636],[64.21905658433116,180.90047545681568],[61.631938541209365,183.53328328591192],[59.56419551646127,185.20704952501342],[58.299018429677744,185.145182512382],[58.35736043309112,183.94227702104922],[59.16996851348222,181.93905453428283],[60.890591008179854,179.25293382683208],[63.32340611109589,176.40754773391268],[66.66972766226331,173.4089450683175],[70.48191497266907,170.62294075231307],[74.76960902071414,168.15157806905404],[79.34075123341609,166.07053563007753],[83.69922478532612,164.6023773217064],[88.29937328329925,163.26830810650586],[92.31518071982191,162.36742808192298],[95.96768421543379,162.0710343165208],[98.91108243346207,162.2651124447791],[101.05034803217927,163.15235981900219],[102.15020105830422,164.8491110360817],[102.1651701153528,167.18807829224238],[101.07127288138668,169.9831763219479],[98.75259311162677,173.46952479238166],[95.56739747913025,176.81583892511367],[91.71016304978389,180.3267944739025],[87.45351083445098,183.26657490262437],[83.90936759222473,185.39203035682908]],strokeWidth:2},{id:"zRYyC",type:"freehand",shape:"feltTipPen",points:[[78.52830179030389,179.42823229321834],[78.52830179030389,178.7287824260236],[79.00297374921092,178.46607033840132],[79.67868169182043,178.37262584169343],[80.15035304336834,177.95267576923357],[80.74476873569529,177.6315955237376],[81.46746581050525,178.05918935975092],[81.98845005162138,178.7180306742655],[82.5071210715762,180.1528095819201],[82.87262951134312,182.2750173155025],[83.13967792900439,184.9726981322217],[83.31367326137183,188.44297752374837],[83.42626672769416,192.4211084441256],[83.14703133808734,196.77364125732015],[82.88114199774691,201.62694149649792],[82.36461620817681,206.5916495728868],[81.9547360809222,211.5891364294173],[81.3283228611383,215.94224922411172],[80.83562751920272,219.49586167538905],[80.12392197223494,222.2542238400681],[79.55900974323276,223.7410009629682],[79.21992286027057,223.96971055747304],[78.95501481872179,223.32020347593038],[78.78173947175242,222.01924158004817],[78.32935527382801,219.85471397133347],[77.6662830306916,217.39591601600182],[76.82219791028774,214.43867693593234],[75.56238264110448,211.611396211473],[73.93489956936833,208.52304351009911],[72.68681780771317,205.91350799905717]],strokeWidth:2},{id:"iixpb",type:"freehand",shape:"feltTipPen",points:[[68.64203217056274,195.49342042529656],[68.64203217056274,195.49342042529656],[68.64203217056274,196.55726992648192],[68.20695356564033,197.53447770207345],[67.55463511380094,198.86062115118762],[66.41635431907662,200.43714280897143],[65.29550768046511,202.18081693037107],[64.19535379143235,204.04514170092875],[63.24942950690843,206.00385473822257]],strokeWidth:2},{id:"xaJii",type:"freehand",shape:"feltTipPen",points:[[92.1219225174475,194.25763672282915],[92.82137238464225,194.25763672282915],[94.10232265882883,194.25763672282915],[95.61926253588172,194.25763672282915],[96.9130159159522,194.64031076687183],[98.0883461515225,194.90912185784214],[99.20968891165762,195.4085878063986],[100.6027879268654,196.0837605660688],[102.19597162880746,196.95928690687538],[103.70028012461717,197.95295194197183],[105.19857834413006,198.78653091938463],[106.58397652919848,199.71317530189822],[107.91781567983435,200.400835339972]],strokeWidth:2},{id:"nHaGM",type:"freehand",shape:"feltTipPen",points:[[147.73218912849052,178.19244859075002],[147.03239868223795,177.49265814449768],[146.78628841027603,176.74310177919665],[147.09502287587793,175.94080197132985],[148.04918414741314,175.45800363017656],[149.37678172124924,175.17486346694727],[151.6503035934477,174.9778847939058],[154.90842612822803,174.84083356776387],[159.2197380810876,174.96153334869155],[164.22136933986667,175.11401879868004],[170.0874238745282,175.27464529504573],[175.98683546028565,175.41864932237854],[181.72749400389057,175.52672929506912],[187.04176358780978,175.60925016204942],[191.62845268182627,175.67284461704344],[195.278038524591,175.7208811858152],[198.12298363781633,176.03273507404333]],strokeWidth:2},{id:"EDFJM",type:"freehand",shape:"feltTipPen",points:[[177.39099798771326,163.36304416113921],[177.39099798771326,162.66196718425522],[177.8746215686201,162.888175082923],[178.55670616134762,163.88571193196344],[178.97828030049868,165.63420733829275],[179.24235094249366,168.19357405043843],[179.4204615186943,171.6507152581005],[179.54307676526446,176.0542789924973],[179.07789849565734,181.85965218746855],[177.7014631049908,188.1356064660638],[175.61795686452297,194.49367286006304],[172.99979316819463,200.56426819522926],[170.01284808479568,205.7603988432436],[166.7491780887549,210.2177907067978],[163.54112711404468,213.507506167776],[160.80688164528715,215.74043813253115],[158.43685534599217,217.23876943946902],[156.6223226934194,217.54456090360304],[155.49150573751626,216.54753093644172]],strokeWidth:2},{id:"tPPjW",type:"freehand",shape:"feltTipPen",points:[[167.50472836797235,168.30617897100888],[168.20219977318743,168.30617897100888],[167.97972850844212,168.78762311076912],[167.80691679902202,169.8769197243953],[167.34145171978753,171.66576503182728],[166.67835406364065,174.24860946641252],[165.5485247336153,178.06715817763848],[164.09630085888102,182.3988616913573],[162.21676066902933,187.46133319946762],[160.117866033263,192.2264807735371],[157.89969112698464,196.44581147229724],[155.8479445419507,199.63242352530483],[154.21089855816513,201.74127742354972],[153.17069474586265,202.3569054637071],[152.74129834510381,201.9515563496641],[153.14898512987997,200.78376585823275],[154.20455769261048,199.40365688206816],[156.08164516759552,197.89621108213646],[158.3185928673645,196.28439386968762],[161.01946956317056,195.1197880869065],[163.77604778610726,194.9107658766668],[167.1465944063034,195.52351171916212],[170.37335187016993,197.37898670557456],[173.7035874732021,200.20871324552422],[177.1533806005275,203.72724210034607],[179.9927322849651,207.0903812236827],[182.45805503715314,210.0822356366641],[184.51633692110113,212.63275248609966],[186.42406443554432,214.61948174393888],[187.72800400428537,215.37905819513412],[188.56470397204203,215.0722175663202],[189.1060496451487,213.70006608053222]],strokeWidth:2},{id:"XDkHb",type:"freehand",shape:"feltTipPen",points:[[195.92775352472745,173.24931378087945],[196.6219714267927,172.5550958788142],[198.40335147039377,171.2874057233946],[200.1803076238159,170.20821956977284],[201.9889710546356,169.57949555551272],[203.85993001668567,169.54493910088036],[205.45800827120343,169.87986439961037],[206.9208243295261,171.09561303809164],[208.2789827275069,172.60684722716155],[209.2791418063464,174.78846412410235],[209.94245792271158,177.5479125370382],[210.03650921001213,180.3753475698793],[209.36357255440794,183.18154958049195],[208.10602360098733,185.91484953306622],[206.43330941386967,188.31209906015624],[204.79009741013306,190.32590093344584],[203.22753894082803,192.104421793533],[202.24730260686692,193.76917969566125],[202.2543276850863,194.86365555157113],[202.9855137055656,195.91358389910852],[204.59788407907013,196.97869310572855],[206.59477272626896,198.37660206524538],[208.82399061173942,200.05933109614557],[211.32980499417022,202.36121423102645],[213.2389324668784,204.7387462015829],[214.60633279178091,207.14717633131727],[215.56524619481183,209.64475828027093],[215.60105551094875,211.94074590636842],[214.8143479996745,213.86222694866387],[213.45928880501947,215.29278794244215],[211.3684967301931,216.29606124875932],[208.7050604962003,216.92854072172554],[205.6632571554701,217.0132314392456],[202.29467923275615,216.34484701485667],[198.8102717225213,215.08566856484208],[195.83134466367187,213.08212828969113],[193.39425311243303,210.87392868331858],[191.5848499900842,208.83130369719288],[190.34327920690384,206.98214729875576],[189.50278946305707,205.23066471870038],[189.25768456153514,203.79759225142402],[189.86771958913778,202.6042017115085],[191.11067863356152,201.7643317484733],[193.08901054430567,200.90806230990415],[195.60396105613563,200.0073554376438],[198.86476732754954,199.0138535626063],[202.83309284931374,198.24144216391574],[207.75379632300746,197.39448780380076],[213.1239013059867,196.42185240418144],[218.7861313118408,195.70405161941176],[224.3078529992231,194.85434555584175],[229.3929862914115,194.23048946867743],[234.16292999005577,193.79212179062392],[238.6402394957015,193.17192418248737],[242.29233516921477,192.68409708851027]],strokeWidth:2},{id:"NicwR",type:"freehand",shape:"feltTipPen",points:[[294.67671934187797,139.88315381425377],[294.67671934187797,139.18140711316732],[294.67671934187797,138.42088464604126],[294.67671934187797,137.60497626261235],[294.67671934187797,137.938966538032],[294.67671934187797,139.26048965840778],[294.33470219889887,141.899839796303],[293.7526136838112,146.08380983154143],[292.64847937463423,151.97351379261704],[291.13117091274444,159.48142152757532],[289.01248152486096,168.15939161000892],[287.08949605240196,176.22067382658474],[284.96167480200165,183.73389111819301],[283.29766955211903,190.38725693206175],[281.73979034529293,196.0106206384787],[280.5647185169978,200.7322420468688],[279.75300999889214,204.35183708206455]],strokeWidth:2},{id:"sRRNe",type:"freehand",shape:"feltTipPen",points:[[278.61153120979884,222.68066187958425],[278.61153120979884,222.68066187958425],[277.053070303808,223.71963581691193],[275.82174127112285,225.12042274503597]],strokeWidth:2},{id:"fDPmi",type:"freehand",shape:"feltTipPen",points:[[357.0329998371771,714.9768561557182],[357.0329998371771,713.5755714732616],[357.0329998371771,713.6437821184152],[356.60306046673617,714.1116737776472],[356.33124235413646,715.1615088589035],[355.46941070538236,716.5646909624427],[354.51449494434877,719.185764040082],[353.2115364414339,722.6793255217606],[351.17159450600815,727.4301589470722],[348.5687109123755,733.5325594428311],[345.9422113202267,739.7610930352996],[343.32945735821244,745.7668916308901],[340.6796182628149,751.274755280497],[338.3918748405908,756.0595279652855],[336.6520002612196,759.9113333891707],[335.05941602722663,763.0515699508699]],strokeWidth:2},{id:"PFTyp",type:"freehand",shape:"feltTipPen",points:[[327.1384072754867,780.3596620062428],[326.4378134400444,779.6590681708005],[326.2077265538182,779.4289812845743]],strokeWidth:2}];function Fy(e,t,n){if(e&&e.length){const[r,i]=t,o=Math.PI/180*n,s=Math.cos(o),a=Math.sin(o);for(const f of e){const[h,d]=f;f[0]=(h-r)*s-(d-i)*a+r,f[1]=(h-r)*a+(d-i)*s+i}}}function mM(e,t,n){const r=[];e.forEach(i=>r.push(...i)),Fy(r,t,n)}function vM(e,t){return e[0]===t[0]&&e[1]===t[1]}function yM(e,t,n,r=1){const i=n,o=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(i)for(const h of s)Fy(h,a,i);const f=wM(s,o,r);if(i){for(const h of s)Fy(h,a,-i);mM(f,a,-i)}return f}function wM(e,t,n){const r=[];for(const h of e){const d=[...h];vM(d[0],d[d.length-1])||d.push([d[0][0],d[0][1]]),d.length>2&&r.push(d)}const i=[];t=Math.max(t,.1);const o=[];for(const h of r)for(let d=0;d<h.length-1;d++){const p=h[d],v=h[d+1];if(p[1]!==v[1]){const w=Math.min(p[1],v[1]);o.push({ymin:w,ymax:Math.max(p[1],v[1]),x:w===p[1]?p[0]:v[0],islope:(v[0]-p[0])/(v[1]-p[1])})}}if(o.sort((h,d)=>h.ymin<d.ymin?-1:h.ymin>d.ymin?1:h.x<d.x?-1:h.x>d.x?1:h.ymax===d.ymax?0:(h.ymax-d.ymax)/Math.abs(h.ymax-d.ymax)),!o.length)return i;let s=[],a=o[0].ymin,f=0;for(;s.length||o.length;){if(o.length){let h=-1;for(let p=0;p<o.length&&!(o[p].ymin>a);p++)h=p;o.splice(0,h+1).forEach(p=>{s.push({s:a,edge:p})})}if(s=s.filter(h=>!(h.edge.ymax<=a)),s.sort((h,d)=>h.edge.x===d.edge.x?0:(h.edge.x-d.edge.x)/Math.abs(h.edge.x-d.edge.x)),(n!==1||f%t===0)&&s.length>1)for(let h=0;h<s.length;h=h+2){const d=h+1;if(d>=s.length)break;const p=s[h].edge,v=s[d].edge;i.push([[Math.round(p.x),a],[Math.round(v.x),a]])}a+=n,s.forEach(h=>{h.edge.x=h.edge.x+n*h.edge.islope}),f++}return i}function ep(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.round(Math.max(i,.1));let o=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(o=i),yM(e,i,r,o||1)}class q5{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=ep(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Bv(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class CM extends q5{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),o=ep(t,i),s=Math.PI/180*n.hachureAngle,a=[],f=r*.5*Math.cos(s),h=r*.5*Math.sin(s);for(const[p,v]of o)Bv([p,v])&&a.push([[p[0]-f,p[1]+h],[...v]],[[p[0]+f,p[1]-h],[...v]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class xM extends q5{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),o=this._fillPolygons(t,i);return r.ops=r.ops.concat(o.ops),r}}class EM{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=ep(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let o=n.fillWeight;o<0&&(o=n.strokeWidth/2);const s=i/4;for(const a of t){const f=Bv(a),h=f/i,d=Math.ceil(h)-1,p=f-d*i,v=(a[0][0]+a[1][0])/2-i/4,w=Math.min(a[0][1],a[1][1]);for(let E=0;E<d;E++){const y=w+p+E*i,S=v-s+Math.random()*2*s,A=y-s+Math.random()*2*s,B=this.helper.ellipse(S,A,o,o,n);r.push(...B.ops)}}return{type:"fillSketch",ops:r}}}class PM{constructor(t){this.helper=t}fillPolygons(t,n){const r=ep(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,o=[];return t.forEach(s=>{const a=Bv(s),f=Math.floor(a/(r+i)),h=(a+i-f*(r+i))/2;let d=s[0],p=s[1];d[0]>p[0]&&(d=s[1],p=s[0]);const v=Math.atan((p[1]-d[1])/(p[0]-d[0]));for(let w=0;w<f;w++){const E=w*(r+i),y=E+r,S=[d[0]+E*Math.cos(v)+h*Math.cos(v),d[1]+E*Math.sin(v)+h*Math.sin(v)],A=[d[0]+y*Math.cos(v)+h*Math.cos(v),d[1]+y*Math.sin(v)+h*Math.sin(v)];o.push(...this.helper.doubleLineOps(S[0],S[1],A[0],A[1],n))}}),o}}class SM{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const o=ep(t,n);return{type:"fillSketch",ops:this.zigzagLines(o,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(o=>{const s=Bv(o),a=Math.round(s/(2*n));let f=o[0],h=o[1];f[0]>h[0]&&(f=o[1],h=o[0]);const d=Math.atan((h[1]-f[1])/(h[0]-f[0]));for(let p=0;p<a;p++){const v=p*2*n,w=(p+1)*2*n,E=Math.sqrt(2*Math.pow(n,2)),y=[f[0]+v*Math.cos(d),f[1]+v*Math.sin(d)],S=[f[0]+w*Math.cos(d),f[1]+w*Math.sin(d)],A=[y[0]+E*Math.cos(d+Math.PI/4),y[1]+E*Math.sin(d+Math.PI/4)];i.push(...this.helper.doubleLineOps(y[0],y[1],A[0],A[1],r),...this.helper.doubleLineOps(A[0],A[1],S[0],S[1],r))}}),i}}const co={};function DM(e,t){let n=e.fillStyle||"hachure";if(!co[n])switch(n){case"zigzag":co[n]||(co[n]=new CM(t));break;case"cross-hatch":co[n]||(co[n]=new xM(t));break;case"dots":co[n]||(co[n]=new EM(t));break;case"dashed":co[n]||(co[n]=new PM(t));break;case"zigzag-line":co[n]||(co[n]=new SM(t));break;case"hachure":default:n="hachure",co[n]||(co[n]=new q5(t));break}return co[n]}function TM(){return Math.floor(Math.random()*2**31)}class AM{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const BM=0,ky=1,_x=2,H2={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function RM(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:BM,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:ky,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:_x,text:""},t}function D7(e,t){return e.type===t}function Z5(e){const t=[],n=RM(e);let r="BOD",i=0,o=n[i];for(;!D7(o,_x);){let s=0;const a=[];if(r==="BOD")if(o.text==="M"||o.text==="m")i++,s=H2[o.text],r=o.text;else return Z5("M0,0"+e);else D7(o,ky)?s=H2[r]:(i++,s=H2[o.text],r=o.text);if(i+s<n.length){for(let f=i;f<i+s;f++){const h=n[f];if(D7(h,ky))a[a.length]=+h.text;else throw new Error("Param not a number: "+r+","+h.text)}if(typeof H2[r]=="number"){const f={key:r,data:a};t.push(f),i+=s,o=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function Nx(e){let t=0,n=0,r=0,i=0;const o=[];for(const{key:s,data:a}of e)switch(s){case"M":o.push({key:"M",data:[...a]}),[t,n]=a,[r,i]=a;break;case"m":t+=a[0],n+=a[1],o.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":o.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],o.push({key:"L",data:[t,n]});break;case"C":o.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const f=a.map((h,d)=>d%2?h+n:h+t);o.push({key:"C",data:f}),t=f[4],n=f[5];break}case"Q":o.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const f=a.map((h,d)=>d%2?h+n:h+t);o.push({key:"Q",data:f}),t=f[2],n=f[3];break}case"A":o.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],o.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":o.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const f=a.map((h,d)=>d%2?h+n:h+t);o.push({key:"S",data:f}),t=f[2],n=f[3];break}case"T":o.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],o.push({key:"T",data:[t,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=r,n=i;break}return o}function Hx(e){const t=[];let n="",r=0,i=0,o=0,s=0,a=0,f=0;for(const{key:h,data:d}of e){switch(h){case"M":t.push({key:"M",data:[...d]}),[r,i]=d,[o,s]=d;break;case"C":t.push({key:"C",data:[...d]}),r=d[4],i=d[5],a=d[2],f=d[3];break;case"L":t.push({key:"L",data:[...d]}),[r,i]=d;break;case"H":r=d[0],t.push({key:"L",data:[r,i]});break;case"V":i=d[0],t.push({key:"L",data:[r,i]});break;case"S":{let p=0,v=0;n==="C"||n==="S"?(p=r+(r-a),v=i+(i-f)):(p=r,v=i),t.push({key:"C",data:[p,v,...d]}),a=d[0],f=d[1],r=d[2],i=d[3];break}case"T":{const[p,v]=d;let w=0,E=0;n==="Q"||n==="T"?(w=r+(r-a),E=i+(i-f)):(w=r,E=i);const y=r+2*(w-r)/3,S=i+2*(E-i)/3,A=p+2*(w-p)/3,B=v+2*(E-v)/3;t.push({key:"C",data:[y,S,A,B,p,v]}),a=w,f=E,r=p,i=v;break}case"Q":{const[p,v,w,E]=d,y=r+2*(p-r)/3,S=i+2*(v-i)/3,A=w+2*(p-w)/3,B=E+2*(v-E)/3;t.push({key:"C",data:[y,S,A,B,w,E]}),a=p,f=v,r=w,i=E;break}case"A":{const p=Math.abs(d[0]),v=Math.abs(d[1]),w=d[2],E=d[3],y=d[4],S=d[5],A=d[6];p===0||v===0?(t.push({key:"C",data:[r,i,S,A,S,A]}),r=S,i=A):(r!==S||i!==A)&&(Gx(r,i,S,A,p,v,w,E,y).forEach(function(I){t.push({key:"C",data:I})}),r=S,i=A);break}case"Z":t.push({key:"Z",data:[]}),r=o,i=s;break}n=h}return t}function MM(e){return Math.PI*e/180}function Q1(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function Gx(e,t,n,r,i,o,s,a,f,h){const d=MM(s);let p=[],v=0,w=0,E=0,y=0;if(h)[v,w,E,y]=h;else{[e,t]=Q1(e,t,-d),[n,r]=Q1(n,r,-d);const oe=(e-n)/2,ce=(t-r)/2;let me=oe*oe/(i*i)+ce*ce/(o*o);me>1&&(me=Math.sqrt(me),i=me*i,o=me*o);const ye=a===f?-1:1,Fe=i*i,Te=o*o,ge=Fe*Te-Fe*ce*ce-Te*oe*oe,se=Fe*ce*ce+Te*oe*oe,we=ye*Math.sqrt(Math.abs(ge/se));E=we*i*ce/o+(e+n)/2,y=we*-o*oe/i+(t+r)/2,v=Math.asin(parseFloat(((t-y)/o).toFixed(9))),w=Math.asin(parseFloat(((r-y)/o).toFixed(9))),e<E&&(v=Math.PI-v),n<E&&(w=Math.PI-w),v<0&&(v=Math.PI*2+v),w<0&&(w=Math.PI*2+w),f&&v>w&&(v=v-Math.PI*2),!f&&w>v&&(w=w-Math.PI*2)}let S=w-v;if(Math.abs(S)>Math.PI*120/180){const oe=w,ce=n,me=r;f&&w>v?w=v+Math.PI*120/180*1:w=v+Math.PI*120/180*-1,n=E+i*Math.cos(w),r=y+o*Math.sin(w),p=Gx(n,r,ce,me,i,o,s,0,f,[w,oe,E,y])}S=w-v;const A=Math.cos(v),B=Math.sin(v),I=Math.cos(w),_=Math.sin(w),L=Math.tan(S/4),j=4/3*i*L,z=4/3*o*L,J=[e,t],ae=[e+j*B,t-z*A],ne=[n+j*_,r-z*I],Pe=[n,r];if(ae[0]=2*J[0]-ae[0],ae[1]=2*J[1]-ae[1],h)return[ae,ne,Pe].concat(p);{p=[ae,ne,Pe].concat(p);const oe=[];for(let ce=0;ce<p.length;ce+=3){const me=Q1(p[ce][0],p[ce][1],d),ye=Q1(p[ce+1][0],p[ce+1][1],d),Fe=Q1(p[ce+2][0],p[ce+2][1],d);oe.push([me[0],me[1],ye[0],ye[1],Fe[0],Fe[1]])}return oe}}const bM={randOffset:LM,randOffsetWithRange:_M,ellipse:FM,doubleLineOps:NM};function Wx(e,t,n,r,i){return{type:"path",ops:Ql(e,t,n,r,i)}}function hm(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let o=0;o<r-1;o++)i.push(...Ql(e[o][0],e[o][1],e[o+1][0],e[o+1][1],n));return t&&i.push(...Ql(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return Wx(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function OM(e,t){return hm(e,!0,t)}function IM(e,t,n,r,i){const o=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return OM(o,i)}function S6(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,i=G2(r[0],1*(1+t.roughness*.2),t),o=t.disableMultiStroke?[]:G2(r[0],1.5*(1+t.roughness*.22),A6(t));for(let s=1;s<r.length;s++){const a=r[s];if(a.length){const f=G2(a,1*(1+t.roughness*.2),t),h=t.disableMultiStroke?[]:G2(a,1.5*(1+t.roughness*.22),A6(t));for(const d of f)d.op!=="move"&&i.push(d);for(const d of h)d.op!=="move"&&o.push(d)}}return{type:"path",ops:i.concat(o)}}return{type:"path",ops:[]}}function FM(e,t,n,r,i){const o=$x(n,r,i);return Ly(e,t,i,o).opset}function $x(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=Math.PI*2/i;let s=Math.abs(e/2),a=Math.abs(t/2);const f=1-n.curveFitting;return s+=Mt(s*f,n),a+=Mt(a*f,n),{increment:o,rx:s,ry:a}}function Ly(e,t,n,r){const[i,o]=B6(r.increment,e,t,r.rx,r.ry,1,r.increment*Rm(.1,Rm(.4,1,n),n),n);let s=Mm(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=B6(r.increment,e,t,r.rx,r.ry,1.5,0,n),f=Mm(a,null,n);s=s.concat(f)}return{estimatedPoints:o,opset:{type:"path",ops:s}}}function D6(e,t,n,r,i,o,s,a,f){const h=e,d=t;let p=Math.abs(n/2),v=Math.abs(r/2);p+=Mt(p*.01,f),v+=Mt(v*.01,f);let w=i,E=o;for(;w<0;)w+=Math.PI*2,E+=Math.PI*2;E-w>Math.PI*2&&(w=0,E=Math.PI*2);const y=Math.PI*2/f.curveStepCount,S=Math.min(y/2,(E-w)/2),A=R6(S,h,d,p,v,w,E,1,f);if(!f.disableMultiStroke){const B=R6(S,h,d,p,v,w,E,1.5,f);A.push(...B)}return s&&(a?A.push(...Ql(h,d,h+p*Math.cos(w),d+v*Math.sin(w),f),...Ql(h,d,h+p*Math.cos(E),d+v*Math.sin(E),f)):A.push({op:"lineTo",data:[h,d]},{op:"lineTo",data:[h+p*Math.cos(w),d+v*Math.sin(w)]})),{type:"path",ops:A}}function T6(e,t){const n=Hx(Nx(Z5(e))),r=[];let i=[0,0],o=[0,0];for(const{key:s,data:a}of n)switch(s){case"M":{o=[a[0],a[1]],i=[a[0],a[1]];break}case"L":r.push(...Ql(o[0],o[1],a[0],a[1],t)),o=[a[0],a[1]];break;case"C":{const[f,h,d,p,v,w]=a;r.push(...HM(f,h,d,p,v,w,o,t)),o=[v,w];break}case"Z":r.push(...Ql(o[0],o[1],i[0],i[1],t)),o=[i[0],i[1]];break}return{type:"path",ops:r}}function T7(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,o=r.length;if(o>2){n.push({op:"move",data:[r[0][0]+Mt(i,t),r[0][1]+Mt(i,t)]});for(let s=1;s<o;s++)n.push({op:"lineTo",data:[r[s][0]+Mt(i,t),r[s][1]+Mt(i,t)]})}}return{type:"fillPath",ops:n}}function kd(e,t){return DM(t,bM).fillPolygons(e,t)}function kM(e,t,n,r,i,o,s){const a=e,f=t;let h=Math.abs(n/2),d=Math.abs(r/2);h+=Mt(h*.01,s),d+=Mt(d*.01,s);let p=i,v=o;for(;p<0;)p+=Math.PI*2,v+=Math.PI*2;v-p>Math.PI*2&&(p=0,v=Math.PI*2);const w=(v-p)/s.curveStepCount,E=[];for(let y=p;y<=v;y=y+w)E.push([a+h*Math.cos(y),f+d*Math.sin(y)]);return E.push([a+h*Math.cos(v),f+d*Math.sin(v)]),E.push([a,f]),kd([E],s)}function LM(e,t){return Mt(e,t)}function _M(e,t,n){return Rm(e,t,n)}function NM(e,t,n,r,i){return Ql(e,t,n,r,i,!0)}function A6(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function jx(e){return e.randomizer||(e.randomizer=new AM(e.seed||0)),e.randomizer.next()}function Rm(e,t,n,r=1){return n.roughness*r*(jx(n)*(t-e)+e)}function Mt(e,t,n=1){return Rm(-e,e,t,n)}function Ql(e,t,n,r,i,o=!1){const s=o?i.disableMultiStrokeFill:i.disableMultiStroke,a=_y(e,t,n,r,i,!0,!1);if(s)return a;const f=_y(e,t,n,r,i,!0,!0);return a.concat(f)}function _y(e,t,n,r,i,o,s){const a=Math.pow(e-n,2)+Math.pow(t-r,2),f=Math.sqrt(a);let h=1;f<200?h=1:f>500?h=.4:h=-.0016668*f+1.233334;let d=i.maxRandomnessOffset||0;d*d*100>a&&(d=f/10);const p=d/2,v=.2+jx(i)*.2;let w=i.bowing*i.maxRandomnessOffset*(r-t)/200,E=i.bowing*i.maxRandomnessOffset*(e-n)/200;w=Mt(w,i,h),E=Mt(E,i,h);const y=[],S=()=>Mt(p,i,h),A=()=>Mt(d,i,h),B=i.preserveVertices;return s?y.push({op:"move",data:[e+(B?0:S()),t+(B?0:S())]}):y.push({op:"move",data:[e+(B?0:Mt(d,i,h)),t+(B?0:Mt(d,i,h))]}),s?y.push({op:"bcurveTo",data:[w+e+(n-e)*v+S(),E+t+(r-t)*v+S(),w+e+2*(n-e)*v+S(),E+t+2*(r-t)*v+S(),n+(B?0:S()),r+(B?0:S())]}):y.push({op:"bcurveTo",data:[w+e+(n-e)*v+A(),E+t+(r-t)*v+A(),w+e+2*(n-e)*v+A(),E+t+2*(r-t)*v+A(),n+(B?0:A()),r+(B?0:A())]}),y}function G2(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+Mt(t,n),e[0][1]+Mt(t,n)]),r.push([e[0][0]+Mt(t,n),e[0][1]+Mt(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+Mt(t,n),e[i][1]+Mt(t,n)]),i===e.length-1&&r.push([e[i][0]+Mt(t,n),e[i][1]+Mt(t,n)]);return Mm(r,null,n)}function Mm(e,t,n){const r=e.length,i=[];if(r>3){const o=[],s=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<r;a++){const f=e[a];o[0]=[f[0],f[1]],o[1]=[f[0]+(s*e[a+1][0]-s*e[a-1][0])/6,f[1]+(s*e[a+1][1]-s*e[a-1][1])/6],o[2]=[e[a+1][0]+(s*e[a][0]-s*e[a+2][0])/6,e[a+1][1]+(s*e[a][1]-s*e[a+2][1])/6],o[3]=[e[a+1][0],e[a+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(..._y(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return i}function B6(e,t,n,r,i,o,s,a){const f=a.roughness===0,h=[],d=[];if(f){e=e/4,d.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let p=0;p<=Math.PI*2;p=p+e){const v=[t+r*Math.cos(p),n+i*Math.sin(p)];h.push(v),d.push(v)}d.push([t+r*Math.cos(0),n+i*Math.sin(0)]),d.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const p=Mt(.5,a)-Math.PI/2;d.push([Mt(o,a)+t+.9*r*Math.cos(p-e),Mt(o,a)+n+.9*i*Math.sin(p-e)]);const v=Math.PI*2+p-.01;for(let w=p;w<v;w=w+e){const E=[Mt(o,a)+t+r*Math.cos(w),Mt(o,a)+n+i*Math.sin(w)];h.push(E),d.push(E)}d.push([Mt(o,a)+t+r*Math.cos(p+Math.PI*2+s*.5),Mt(o,a)+n+i*Math.sin(p+Math.PI*2+s*.5)]),d.push([Mt(o,a)+t+.98*r*Math.cos(p+s),Mt(o,a)+n+.98*i*Math.sin(p+s)]),d.push([Mt(o,a)+t+.9*r*Math.cos(p+s*.5),Mt(o,a)+n+.9*i*Math.sin(p+s*.5)])}return[d,h]}function R6(e,t,n,r,i,o,s,a,f){const h=o+Mt(.1,f),d=[];d.push([Mt(a,f)+t+.9*r*Math.cos(h-e),Mt(a,f)+n+.9*i*Math.sin(h-e)]);for(let p=h;p<=s;p=p+e)d.push([Mt(a,f)+t+r*Math.cos(p),Mt(a,f)+n+i*Math.sin(p)]);return d.push([t+r*Math.cos(s),n+i*Math.sin(s)]),d.push([t+r*Math.cos(s),n+i*Math.sin(s)]),Mm(d,null,f)}function HM(e,t,n,r,i,o,s,a){const f=[],h=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let d=[0,0];const p=a.disableMultiStroke?1:2,v=a.preserveVertices;for(let w=0;w<p;w++)w===0?f.push({op:"move",data:[s[0],s[1]]}):f.push({op:"move",data:[s[0]+(v?0:Mt(h[0],a)),s[1]+(v?0:Mt(h[0],a))]}),d=v?[i,o]:[i+Mt(h[w],a),o+Mt(h[w],a)],f.push({op:"bcurveTo",data:[e+Mt(h[w],a),t+Mt(h[w],a),n+Mt(h[w],a),r+Mt(h[w],a),d[0],d[1]]});return f}function J1(e){return[...e]}function M6(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(J1(e[0]),J1(e[1]),J1(e[2]),J1(e[2]));else{const i=[];i.push(e[0],e[0]);for(let a=1;a<e.length;a++)i.push(e[a]),a===e.length-1&&i.push(e[a]);const o=[],s=1-t;r.push(J1(i[0]));for(let a=1;a+2<i.length;a++){const f=i[a];o[0]=[f[0],f[1]],o[1]=[f[0]+(s*i[a+1][0]-s*i[a-1][0])/6,f[1]+(s*i[a+1][1]-s*i[a-1][1])/6],o[2]=[i[a+1][0]+(s*i[a][0]-s*i[a+2][0])/6,i[a+1][1]+(s*i[a][1]-s*i[a+2][1])/6],o[3]=[i[a+1][0],i[a+1][1]],r.push(o[1],o[2],o[3])}}return r}function GM(e,t){return Math.sqrt(dm(e,t))}function dm(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function WM(e,t,n){const r=dm(t,n);if(r===0)return dm(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),dm(e,vf(t,n,i))}function vf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function $M(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let a=3*r[1]-2*n[1]-o[1];a*=a;let f=3*i[0]-2*o[0]-n[0];f*=f;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<f&&(s=f),a<h&&(a=h),s+a}function Ny(e,t,n,r){const i=r||[];if($M(e,t)<n){const o=e[t+0];i.length?GM(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],a=e[t+1],f=e[t+2],h=e[t+3],d=vf(s,a,.5),p=vf(a,f,.5),v=vf(f,h,.5),w=vf(d,p,.5),E=vf(p,v,.5),y=vf(w,E,.5);Ny([s,d,w,y],0,n,i),Ny([y,E,v,h],0,n,i)}return i}function jM(e,t){return bm(e,0,e.length,t)}function bm(e,t,n,r,i){const o=i||[],s=e[t],a=e[n-1];let f=0,h=1;for(let d=t+1;d<n-1;++d){const p=WM(e[d],s,a);p>f&&(f=p,h=d)}return Math.sqrt(f)>r?(bm(e,t,h+1,r,o),bm(e,h,n,r,o)):(o.length||o.push(s),o.push(a)),o}function ci(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;Ny(e,s,t,r)}return n&&n>0?bm(r,0,r.length,n):r}function zM(e,t,n){const r=Z5(e),i=Hx(Nx(r)),o=[];let s=[],a=[0,0],f=[];const h=()=>{f.length>=4&&s.push(...ci(f,t)),f=[]},d=()=>{h(),s.length&&(o.push(s),s=[])};for(const{key:v,data:w}of i)switch(v){case"M":d(),a=[w[0],w[1]],s.push(a);break;case"L":h(),s.push([w[0],w[1]]);break;case"C":if(!f.length){const E=s.length?s[s.length-1]:a;f.push([E[0],E[1]])}f.push([w[0],w[1]]),f.push([w[2],w[3]]),f.push([w[4],w[5]]);break;case"Z":h(),s.push([a[0],a[1]]);break}if(d(),!n)return o;const p=[];for(const v of o){const w=jM(v,n);w.length&&p.push(w)}return p}const Lo="none";class Om{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return TM()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,o){const s=this._o(o);return this._d("line",[Wx(t,n,r,i,s)],s)}rectangle(t,n,r,i,o){const s=this._o(o),a=[],f=IM(t,n,r,i,s);if(s.fill){const h=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];s.fillStyle==="solid"?a.push(T7([h],s)):a.push(kd([h],s))}return s.stroke!==Lo&&a.push(f),this._d("rectangle",a,s)}ellipse(t,n,r,i,o){const s=this._o(o),a=[],f=$x(r,i,s),h=Ly(t,n,s,f);if(s.fill)if(s.fillStyle==="solid"){const d=Ly(t,n,s,f).opset;d.type="fillPath",a.push(d)}else a.push(kd([h.estimatedPoints],s));return s.stroke!==Lo&&a.push(h.opset),this._d("ellipse",a,s)}circle(t,n,r,i){const o=this.ellipse(t,n,r,r,i);return o.shape="circle",o}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[hm(t,!1,r)],r)}arc(t,n,r,i,o,s,a=!1,f){const h=this._o(f),d=[],p=D6(t,n,r,i,o,s,a,!0,h);if(a&&h.fill)if(h.fillStyle==="solid"){const v=Object.assign({},h);v.disableMultiStroke=!0;const w=D6(t,n,r,i,o,s,!0,!1,v);w.type="fillPath",d.push(w)}else d.push(kM(t,n,r,i,o,s,h));return h.stroke!==Lo&&d.push(p),this._d("arc",d,h)}curve(t,n){const r=this._o(n),i=[],o=S6(t,r);if(r.fill&&r.fill!==Lo)if(r.fillStyle==="solid"){const s=S6(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],a=t;if(a.length){const h=typeof a[0][0]=="number"?[a]:a;for(const d of h)d.length<3?s.push(...d):d.length===3?s.push(...ci(M6([d[0],d[0],d[1],d[2]]),10,(1+r.roughness)/2)):s.push(...ci(M6(d),10,(1+r.roughness)/2))}s.length&&i.push(kd([s],r))}return r.stroke!==Lo&&i.push(o),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],o=hm(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(T7([t],r)):i.push(kd([t],r))),r.stroke!==Lo&&i.push(o),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=r.fill&&r.fill!=="transparent"&&r.fill!==Lo,s=r.stroke!==Lo,a=!!(r.simplification&&r.simplification<1),f=a?4-4*(r.simplification||1):(1+r.roughness)/2,h=zM(t,1,f),d=T6(t,r);if(o)if(r.fillStyle==="solid")if(h.length===1){const p=T6(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(p.ops)})}else i.push(T7(h,r));else i.push(kd(h,r));return s&&(a?h.forEach(p=>{i.push(hm(p,!1,r))}):i.push(d)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const o=typeof n=="number"&&n>=0?i.data.map(s=>+s.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":r+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":r+=`L${o[0]} ${o[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const o of n){let s=null;switch(o.type){case"path":s={d:this.opsToPath(o),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:Lo};break;case"fillPath":s={d:this.opsToPath(o),stroke:Lo,strokeWidth:0,fill:r.fill||Lo};break;case"fillSketch":s=this.fillSketch(o,r);break}s&&i.push(s)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Lo,strokeWidth:r,fill:Lo}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class VM{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Om(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const s of n)switch(s.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,s,o),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,o,a),i.restore();break}case"fillSketch":this.fillSketch(i,s,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map(a=>+a.toFixed(r)):o.data;switch(o.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s),s}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s),s}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s),s}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o),o}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,o,s,a=!1,f){const h=this.gen.arc(t,n,r,i,o,s,a,f);return this.draw(h),h}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const W2="http://www.w3.org/2000/svg";class UM{constructor(t,n){this.svg=t,this.gen=new Om(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,o=i.createElementNS(W2,"g"),s=t.options.fixedDecimalPlaceDigits;for(const a of n){let f=null;switch(a.type){case"path":{f=i.createElementNS(W2,"path"),f.setAttribute("d",this.opsToPath(a,s)),f.setAttribute("stroke",r.stroke),f.setAttribute("stroke-width",r.strokeWidth+""),f.setAttribute("fill","none"),r.strokeLineDash&&f.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&f.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{f=i.createElementNS(W2,"path"),f.setAttribute("d",this.opsToPath(a,s)),f.setAttribute("stroke","none"),f.setAttribute("stroke-width","0"),f.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&f.setAttribute("fill-rule","evenodd");break}case"fillSketch":{f=this.fillSketch(i,a,r);break}}f&&o.appendChild(f)}return o}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const o=t.createElementNS(W2,"path");return o.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),o.setAttribute("stroke",r.fill||""),o.setAttribute("stroke-width",i+""),o.setAttribute("fill","none"),r.fillLineDash&&o.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s)}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s)}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s)}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,o,s,a=!1,f){const h=this.gen.arc(t,n,r,i,o,s,a,f);return this.draw(h)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const XM={canvas(e,t){return new VM(e,t)},svg(e,t){return new UM(e,t)},generator(e){return new Om(e)},newSeed(){return Om.newSeed()}};var zx=Symbol.for("immer-nothing"),b6=Symbol.for("immer-draftable"),jo=Symbol.for("immer-state");function Js(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var t0=Object.getPrototypeOf;function Hu(e){return!!e&&!!e[jo]}function Ff(e){var t;return e?Vx(e)||Array.isArray(e)||!!e[b6]||!!((t=e.constructor)!=null&&t[b6])||Mv(e)||bv(e):!1}var KM=Object.prototype.constructor.toString();function Vx(e){if(!e||typeof e!="object")return!1;const t=t0(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===KM}function Im(e,t){Rv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Rv(e){const t=e[jo];return t?t.type_:Array.isArray(e)?1:Mv(e)?2:bv(e)?3:0}function Hy(e,t){return Rv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ux(e,t,n){const r=Rv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function YM(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Mv(e){return e instanceof Map}function bv(e){return e instanceof Set}function yf(e){return e.copy_||e.base_}function Gy(e,t){if(Mv(e))return new Map(e);if(bv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Vx(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[jo];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(t0(e),r)}else{const r=t0(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Q5(e,t=!1){return Ov(e)||Hu(e)||!Ff(e)||(Rv(e)>1&&(e.set=e.add=e.clear=e.delete=qM),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Q5(r,!0))),e}function qM(){Js(2)}function Ov(e){return Object.isFrozen(e)}var ZM={};function kf(e){const t=ZM[e];return t||Js(0,e),t}var Dg;function Xx(){return Dg}function QM(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function O6(e,t){t&&(kf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Wy(e){$y(e),e.drafts_.forEach(JM),e.drafts_=null}function $y(e){e===Dg&&(Dg=e.parent_)}function I6(e){return Dg=QM(Dg,e)}function JM(e){const t=e[jo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function F6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[jo].modified_&&(Wy(t),Js(4)),Ff(e)&&(e=Fm(t,e),t.parent_||km(t,e)),t.patches_&&kf("Patches").generateReplacementPatches_(n[jo].base_,e,t.patches_,t.inversePatches_)):e=Fm(t,n,[]),Wy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==zx?e:void 0}function Fm(e,t,n){if(Ov(t))return t;const r=t[jo];if(!r)return Im(t,(i,o)=>k6(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return km(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),Im(o,(a,f)=>k6(e,r,i,a,f,n,s)),km(e,i,!1),n&&e.patches_&&kf("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function k6(e,t,n,r,i,o,s){if(Hu(i)){const a=o&&t&&t.type_!==3&&!Hy(t.assigned_,r)?o.concat(r):void 0,f=Fm(e,i,a);if(Ux(n,r,f),Hu(f))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Ff(i)&&!Ov(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Fm(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&km(e,i)}}function km(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Q5(t,n)}function eb(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Xx(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=J5;n&&(i=[r],o=Tg);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var J5={get(e,t){if(t===jo)return e;const n=yf(e);if(!Hy(n,t))return tb(e,n,t);const r=n[t];return e.finalized_||!Ff(r)?r:r===A7(e.base_,t)?(B7(e),e.copy_[t]=zy(r,e)):r},has(e,t){return t in yf(e)},ownKeys(e){return Reflect.ownKeys(yf(e))},set(e,t,n){const r=Kx(yf(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=A7(yf(e),t),o=i==null?void 0:i[jo];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(YM(n,i)&&(n!==void 0||Hy(e.base_,t)))return!0;B7(e),jy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return A7(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,B7(e),jy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=yf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Js(11)},getPrototypeOf(e){return t0(e.base_)},setPrototypeOf(){Js(12)}},Tg={};Im(J5,(e,t)=>{Tg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Tg.deleteProperty=function(e,t){return Tg.set.call(this,e,t,void 0)};Tg.set=function(e,t,n){return J5.set.call(this,e[0],t,n,e[0])};function A7(e,t){const n=e[jo];return(n?yf(n):e)[t]}function tb(e,t,n){var i;const r=Kx(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Kx(e,t){if(!(t in e))return;let n=t0(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=t0(n)}}function jy(e){e.modified_||(e.modified_=!0,e.parent_&&jy(e.parent_))}function B7(e){e.copy_||(e.copy_=Gy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var nb=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(f=o,...h){return s.produce(f,d=>n.call(this,d,...h))}}typeof n!="function"&&Js(6),r!==void 0&&typeof r!="function"&&Js(7);let i;if(Ff(t)){const o=I6(this),s=zy(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?Wy(o):$y(o)}return O6(o,r),F6(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===zx&&(i=void 0),this.autoFreeze_&&Q5(i,!0),r){const o=[],s=[];kf("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else Js(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,f=>t(f,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ff(e)||Js(8),Hu(e)&&(e=rb(e));const t=I6(this),n=zy(e,void 0);return n[jo].isManual_=!0,$y(t),n}finishDraft(e,t){const n=e&&e[jo];(!n||!n.isManual_)&&Js(9);const{scope_:r}=n;return O6(r,t),F6(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=kf("Patches").applyPatches_;return Hu(e)?r(e,t):this.produce(e,i=>r(i,t))}};function zy(e,t){const n=Mv(e)?kf("MapSet").proxyMap_(e,t):bv(e)?kf("MapSet").proxySet_(e,t):eb(e,t);return(t?t.scope_:Xx()).drafts_.push(n),n}function rb(e){return Hu(e)||Js(10,e),Yx(e)}function Yx(e){if(!Ff(e)||Ov(e))return e;const t=e[jo];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Gy(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Gy(e,!0);return Im(n,(r,i)=>{Ux(n,r,Yx(i))}),t&&(t.finalized_=!1),n}var zo=new nb,ew=zo.produce;zo.produceWithPatches.bind(zo);zo.setAutoFreeze.bind(zo);zo.setUseStrictShallowCopy.bind(zo);zo.applyPatches.bind(zo);var Nd=zo.createDraft.bind(zo),Hd=zo.finishDraft.bind(zo),qs={},L6;function ib(){if(L6)return qs;L6=1,Object.defineProperty(qs,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),t={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)r["f"+i]=111+i;function o(v,w,E){w&&!("byKey"in w)&&(E=w,w=null),Array.isArray(v)||(v=[v]);var y=v.map(function(B){return f(B,w)}),S=function(I){return y.some(function(_){return h(_,I)})},A=E==null?S:S(E);return A}function s(v,w){return o(v,w)}function a(v,w){return o(v,{byKey:!0},w)}function f(v,w){var E=w&&w.byKey,y={};v=v.replace("++","+add");var S=v.split("+"),A=S.length;for(var B in t)y[t[B]]=!1;var I=!0,_=!1,L=void 0;try{for(var j=S[Symbol.iterator](),z;!(I=(z=j.next()).done);I=!0){var J=z.value,ae=J.endsWith("?")&&J.length>1;ae&&(J=J.slice(0,-1));var ne=p(J),Pe=t[ne];if(J.length>1&&!Pe&&!n[J]&&!r[ne])throw new TypeError('Unknown modifier: "'+J+'"');(A===1||!Pe)&&(E?y.key=ne:y.which=d(J)),Pe&&(y[Pe]=ae?null:!0)}}catch(oe){_=!0,L=oe}finally{try{!I&&j.return&&j.return()}finally{if(_)throw L}}return y}function h(v,w){for(var E in v){var y=v[E],S=void 0;if(y!=null&&(E==="key"&&w.key!=null?S=w.key.toLowerCase():E==="which"?S=y===91&&w.which===93?91:w.which:S=w[E],!(S==null&&y===!1)&&S!==y))return!1}return!0}function d(v){v=p(v);var w=r[v]||v.toUpperCase().charCodeAt(0);return w}function p(v){return v=v.toLowerCase(),v=n[v]||v,v}return qs.default=o,qs.isHotkey=o,qs.isCodeHotkey=s,qs.isKeyHotkey=a,qs.parseHotkey=f,qs.compareHotkey=h,qs.toKeyCode=d,qs.toKeyName=p,qs}var dn=ib(),Vy=function(e,t){return Vy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Vy(e,t)};function ac(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Vy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function ob(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{h(r.next(d))}catch(p){s(p)}}function f(d){try{h(r.throw(d))}catch(p){s(p)}}function h(d){d.done?o(d.value):i(d.value).then(a,f)}h((r=r.apply(e,t||[])).next())})}function qx(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(d){return f([h,d])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function n0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function r0(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Ag(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Kd(e){return this instanceof Kd?(this.v=e,this):new Kd(e)}function sb(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(E){return Promise.resolve(E).then(w,p)}}function a(w,E){r[w]&&(i[w]=function(y){return new Promise(function(S,A){o.push([w,y,S,A])>1||f(w,y)})},E&&(i[w]=E(i[w])))}function f(w,E){try{h(r[w](E))}catch(y){v(o[0][3],y)}}function h(w){w.value instanceof Kd?Promise.resolve(w.value.v).then(d,p):v(o[0][2],w)}function d(w){f("next",w)}function p(w){f("throw",w)}function v(w,E){w(E),o.shift(),o.length&&f(o[0][0],o[0][1])}}function ub(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof n0=="function"?n0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,f){s=e[o](s),i(a,f,s.done,s.value)})}}function i(o,s,a,f){Promise.resolve(f).then(function(h){o({value:h,done:a})},s)}}function Qn(e){return typeof e=="function"}function Zx(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var R7=Zx(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Lm(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var tp=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=n0(s),f=a.next();!f.done;f=a.next()){var h=f.value;h.remove(this)}}catch(y){t={error:y}}finally{try{f&&!f.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var d=this.initialTeardown;if(Qn(d))try{d()}catch(y){o=y instanceof R7?y.errors:[y]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var v=n0(p),w=v.next();!w.done;w=v.next()){var E=w.value;try{_6(E)}catch(y){o=o??[],y instanceof R7?o=Ag(Ag([],r0(o)),r0(y.errors)):o.push(y)}}}catch(y){r={error:y}}finally{try{w&&!w.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}}if(o)throw new R7(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)_6(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Lm(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Lm(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Qx=tp.EMPTY;function Jx(e){return e instanceof tp||e&&"closed"in e&&Qn(e.remove)&&Qn(e.add)&&Qn(e.unsubscribe)}function _6(e){Qn(e)?e():e.unsubscribe()}var ab={Promise:void 0},lb={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Ag([e,t],r0(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function eE(e){lb.setTimeout(function(){throw e})}function N6(){}function gm(e){e()}var tw=function(e){ac(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Jx(n)&&n.add(r)):r.destination=hb,r}return t.create=function(n,r,i){return new Uy(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(tp),cb=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){$2(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){$2(r)}else $2(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){$2(n)}},e}(),Uy=function(e){ac(t,e);function t(n,r,i){var o=e.call(this)||this,s;return Qn(n)||!n?s={next:n??void 0,error:r??void 0,complete:i??void 0}:s=n,o.destination=new cb(s),o}return t}(tw);function $2(e){eE(e)}function fb(e){throw e}var hb={closed:!0,next:N6,error:fb,complete:N6},nw=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function db(e){return e}function gb(e){return e.length===0?db:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var iu=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=mb(t)?t:new Uy(t,n,r);return gm(function(){var s=i,a=s.operator,f=s.source;o.add(a?a.call(o,f):f?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=H6(n),new n(function(i,o){var s=new Uy({next:function(a){try{t(a)}catch(f){o(f),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[nw]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return gb(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=H6(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function H6(e){var t;return(t=e??ab.Promise)!==null&&t!==void 0?t:Promise}function pb(e){return e&&Qn(e.next)&&Qn(e.error)&&Qn(e.complete)}function mb(e){return e&&e instanceof tw||pb(e)&&Jx(e)}function vb(e){return Qn(e==null?void 0:e.lift)}function Iv(e){return function(t){if(vb(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Bg(e,t,n,r,i){return new yb(e,t,n,r,i)}var yb=function(e){ac(t,e);function t(n,r,i,o,s,a){var f=e.call(this,n)||this;return f.onFinalize=s,f.shouldUnsubscribe=a,f._next=r?function(h){try{r(h)}catch(d){n.error(d)}}:e.prototype._next,f._error=o?function(h){try{o(h)}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._error,f._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,f}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(tw),wb=Zx(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),tE=function(e){ac(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new G6(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new wb},t.prototype.next=function(n){var r=this;gm(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=n0(r.currentObservers),a=s.next();!a.done;a=s.next()){var f=a.value;f.next(n)}}catch(h){i={error:h}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;gm(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;gm(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?Qx:(this.currentObservers=null,a.push(n),new tp(function(){r.currentObservers=null,Lm(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new iu;return n.source=this,n},t.create=function(n,r){return new G6(n,r)},t}(iu),G6=function(e){ac(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Qx},t}(tE),Cb={now:function(){return Date.now()}},xb=function(e){ac(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(tp),W6={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Ag([e,t],r0(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Eb=function(e){ac(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),W6.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&W6.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Lm(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(xb),$6=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=Cb.now,e}(),Pb=function(e){ac(t,e);function t(n,r){r===void 0&&(r=$6.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}($6),Sb=new Pb(Eb),Db=Sb,Tb=new iu(function(e){return e.complete()}),nE=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Ab(e){return Qn(e==null?void 0:e.then)}function Bb(e){return Qn(e[nw])}function Rb(e){return Symbol.asyncIterator&&Qn(e==null?void 0:e[Symbol.asyncIterator])}function Mb(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function bb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ob=bb();function Ib(e){return Qn(e==null?void 0:e[Ob])}function Fb(e){return sb(this,arguments,function(){var n,r,i,o;return qx(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Kd(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Kd(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Kd(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function kb(e){return Qn(e==null?void 0:e.getReader)}function rw(e){if(e instanceof iu)return e;if(e!=null){if(Bb(e))return Lb(e);if(nE(e))return _b(e);if(Ab(e))return Nb(e);if(Rb(e))return rE(e);if(Ib(e))return Hb(e);if(kb(e))return Gb(e)}throw Mb(e)}function Lb(e){return new iu(function(t){var n=e[nw]();if(Qn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _b(e){return new iu(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Nb(e){return new iu(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,eE)})}function Hb(e){return new iu(function(t){var n,r;try{for(var i=n0(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function rE(e){return new iu(function(t){Wb(e,t).catch(function(n){return t.error(n)})})}function Gb(e){return rE(Fb(e))}function Wb(e,t){var n,r,i,o;return ob(this,void 0,void 0,function(){var s,a;return qx(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]),n=ub(e),f.label=1;case 1:return[4,n.next()];case 2:if(r=f.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];f.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=f.sent(),i={error:a},[3,11];case 6:return f.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function $b(e){return e instanceof Date&&!isNaN(e)}function iE(e,t){return Iv(function(n,r){var i=0;n.subscribe(Bg(r,function(o){r.next(e.call(t,o,i++))}))})}var jb=Array.isArray;function zb(e,t){return jb(t)?e.apply(void 0,Ag([],r0(t))):e(t)}function Vb(e){return iE(function(t){return zb(e,t)})}function Ub(e,t,n,r,i,o,s,a){var f=[],h=0,d=0,p=!1,v=function(){p&&!f.length&&!h&&t.complete()},w=function(y){return h<r?E(y):f.push(y)},E=function(y){h++;var S=!1;rw(n(y,d++)).subscribe(Bg(t,function(A){t.next(A)},function(){S=!0},void 0,function(){if(S)try{h--;for(var A=function(){var B=f.shift();s||E(B)};f.length&&h<r;)A();v()}catch(B){t.error(B)}}))};return e.subscribe(Bg(t,w,function(){p=!0,v()})),function(){}}function oE(e,t,n){return n===void 0&&(n=1/0),Qn(t)?oE(function(r,i){return iE(function(o,s){return t(r,o,i,s)})(rw(e(r,i)))},n):(typeof t=="number"&&(n=t),Iv(function(r,i){return Ub(r,i,e,n)}))}var Xb=["addListener","removeListener"],Kb=["addEventListener","removeEventListener"],Yb=["on","off"];function Lf(e,t,n,r){if(Qn(n)&&(r=n,n=void 0),r)return Lf(e,t,n).pipe(Vb(r));var i=r0(Qb(e)?Kb.map(function(a){return function(f){return e[a](t,f,n)}}):qb(e)?Xb.map(j6(e,t)):Zb(e)?Yb.map(j6(e,t)):[],2),o=i[0],s=i[1];if(!o&&nE(e))return oE(function(a){return Lf(a,t,n)})(rw(e));if(!o)throw new TypeError("Invalid event target");return new iu(function(a){var f=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];return a.next(1<h.length?h:h[0])};return o(f),function(){return s(f)}})}function j6(e,t){return function(n){return function(r){return e[n](t,r)}}}function qb(e){return Qn(e.addListener)&&Qn(e.removeListener)}function Zb(e){return Qn(e.on)&&Qn(e.off)}function Qb(e){return Qn(e.addEventListener)&&Qn(e.removeEventListener)}function Jb(e,t,n){return n===void 0&&(n=Db),new iu(function(r){var i=$b(e)?+e-n.now():e;i<0&&(i=0);var o=0;return n.schedule(function(){r.closed||(r.next(o++),r.complete())},i)})}function eO(e,t){return Iv(function(n,r){var i=0;n.subscribe(Bg(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function Xy(e){return e<=0?function(){return Tb}:Iv(function(t,n){var r=0;t.subscribe(Bg(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}var eu;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(eu||(eu={}));var _m;(function(e){e.crosshair="crosshair"})(_m||(_m={}));const M7=[eu.ns,eu.nesw,eu.ew,eu.nwse],Ya="plait-board-attached",fr=1,Ky=2,np="selection-rectangle",tO="selection-rectangle-bounding",nO=.1,sE=.1,uE=4,rO="plait-board-container",aE="active-with-moving",z6="rotate-handle",iO="resize-handle",oO=20,lE={MAIN:0,WHEEL:1},iw=3,cE=10,ow=5;function sO(e){return!!e.beforeContextChange}function uO(e){return!!e.onContextChanged}const V6=new WeakMap,pm=new WeakMap,Yd=new WeakMap,Af=new WeakMap,Yy=new WeakMap,sg=new WeakMap,ug=new WeakMap,qy=new WeakMap,Nm=new WeakMap,Hm=new WeakMap,Zy=new WeakMap,Qy=new WeakMap,Jy=new WeakMap,e5=new WeakMap,Ma=new WeakMap,fE=new WeakMap,t5=new WeakMap,hE=new WeakMap,sw=new WeakMap,uw=new WeakMap,Fv=new WeakMap,kv=new WeakMap,U6=new WeakMap,ag=new WeakMap;function Vo(e){return e==null}const dE=(e,t)=>e+Math.floor(t*255).toString(16);function aO(e){return e.button===2}function aw(e){const t=new Map;return e.forEach(n=>{t.has(n.id)||t.set(n.id,n)}),Array.from(t.values())}const lO=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},cO=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},fO=e=>{e.sort((t,n)=>t-n);for(let t=1;t<e.length;t++)if(e[t]!==e[t-1]+1)return!1;return!0},hO={isViewport:e=>!Vo(e.zoom)&&!Vo(e.viewBackgroundColor)},mt={ancestors(e,t={}){const{reverse:n=!1}=t;let r=mt.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},levels(e,t={}){const{reverse:n=!1}=t,r=[];for(let i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const t=e[e.length-1];return e.slice(0,-1).concat(t+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const t=e[e.length-1];if(t<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(t-1)},isAncestor(e,t){return e.length<t.length&&mt.compare(e,t)===0},compare(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},endsBefore(e,t){const n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return mt.equals(r,i)&&o<s},isSibling(e,t){if(e.length!==t.length)return!1;const n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&mt.equals(n,r)},transform(e,t){if(!e)return null;const n=[...e];if(e.length===0)return n;switch(t.type){case"insert_node":{const{path:r}=t;(mt.equals(r,n)||mt.endsBefore(r,n)||mt.isAncestor(r,n))&&(n[r.length-1]+=1);break}case"remove_node":{const{path:r}=t;if(mt.equals(r,n)||mt.isAncestor(r,n))return null;mt.endsBefore(r,n)&&(n[r.length-1]-=1);break}case"move_node":{const{path:r,newPath:i}=t;if(mt.equals(r,i))return n;if(mt.isAncestor(r,n)||mt.equals(r,n)){const o=i.slice();return mt.endsBefore(r,i)&&r.length<i.length&&(o[r.length-1]-=1),o.concat(n.slice(r.length))}else mt.isSibling(r,i)&&(mt.isAncestor(i,n)||mt.equals(i,n))?mt.endsBefore(r,n)?n[r.length-1]-=1:n[r.length-1]+=1:mt.endsBefore(i,n)||mt.equals(i,n)||mt.isAncestor(i,n)?(mt.endsBefore(r,n)&&(n[r.length-1]-=1),n[i.length-1]+=1):mt.endsBefore(r,n)&&(mt.equals(i,n)&&(n[i.length-1]+=1),n[r.length-1]-=1);break}}return n}},Vt={parent:(e,t)=>{const n=mt.parent(t);return Vt.get(e,n)},*parents(e,t,n={}){for(const r of mt.ancestors(t,n))yield Vt.get(e,r)},get(e,t){let n=e;for(let r=0;r<t.length;r++){const i=t[r];if(!n||!n.children||!n.children[i])throw new Error(`Cannot find a descendant at path [${t}]`);n=n.children[i]}return n},last(e,t){let n=Vt.get(e,t);for(;n&&n.children&&n.children.length>0;){const r=n.children.length-1;n=n.children[r]}return n},first(e,t){const n=t.slice();let r=Vt.get(e,n);if(!r.children||!e.isExpanded(r))return r;for(;r&&r.children&&r.children.length>0&&e.isExpanded(r)&&r.children.length!==0;)r=r.children[0],n.push(0);return r}},dO=(e,t,n,r,i)=>{var o,s;switch(i.type){case"insert_node":{const{path:a,node:f}=i,h=Vt.parent(e,a),d=a[a.length-1];if(!h.children||d>h.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${a}] because the destination is past the end of the node.`);h.children.splice(d,0,f);break}case"remove_node":{const{path:a}=i,f=Vt.parent(e,a),h=a[a.length-1];if(!f.children||h>f.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${a}] because the destination is past the end of the node.`);f.children.splice(h,1);break}case"move_node":{const{path:a,newPath:f}=i;if(mt.isAncestor(a,f))throw new Error(`Cannot move a path [${a}] to new path [${f}] because the destination is inside itself.`);const h=Vt.get(e,a),d=Vt.parent(e,a),p=a[a.length-1];(o=d.children)==null||o.splice(p,1);const v=mt.transform(a,i),w=Vt.get(e,mt.parent(v)),E=v[v.length-1];(s=w.children)==null||s.splice(E,0,h);break}case"set_node":{const{path:a,properties:f,newProperties:h}=i;if(a.length===0)throw new Error("Cannot set properties on the root node!");const d=Vt.get(e,a);for(const p in h){const v=h[p];v==null?delete d[p]:d[p]=v}for(const p in f)h.hasOwnProperty(p)||delete d[p];break}case"set_viewport":{const{newProperties:a}=i;if(a==null)n=a;else{if(n==null){if(!hO.isViewport(a))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(a)} when there is no current viewport.`);n={...a}}for(const f in a){const h=a[f];h==null?delete n[f]:n[f]=h}}break}case"set_selection":{const{newProperties:a}=i;a==null?t=a:t===null?t=i.newProperties:t=a;break}case"set_theme":{const{newProperties:a}=i;r=a;break}}return{selection:t,viewport:n,theme:r}},gO={transform(e,t){e.children=Nd(e.children);let n=e.viewport&&Nd(e.viewport),r=e.selection&&Nd(e.selection),i=e.theme&&Nd(e.theme);try{const o=dO(e,r,n,i,t);n=o.viewport,r=o.selection,i=o.theme}finally{e.children=Hd(e.children),r?e.selection=Hu(r)?Hd(r):r:e.selection=null,e.viewport=Hu(n)?Hd(n):n,e.theme=Hu(i)?Hd(i):i}}},R={isHit:(e,t)=>R.isHitX(e,t)&&R.isHitY(e,t),isHitX:(e,t)=>{const n=e.x<t.x?e.x:t.x,r=e.x+e.width>t.x+t.width?e.x+e.width:t.x+t.width;return Math.floor(r-n-e.width-t.width)<=0},isHitY:(e,t)=>{const n=e.y<t.y?e.y:t.y,r=e.y+e.height>t.y+t.height?e.y+e.height:t.y+t.height;return Math.floor(r-n-e.height-t.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,t,n){return R.getRectangleByPoint([e[0]-t/2,e[1]-n/2],t,n)},getRectangleByPoint(e,t,n){return{x:e[0],y:e[1],width:t,height:n}},getRectangleByPoints(e){pO(e)&&(e=[e]);let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const s of e){const a=s.map(h=>h[0]),f=s.map(h=>h[1]);t=Math.min(t,...a),n=Math.min(n,...f),r=Math.max(r,...a),n=Math.min(n,...f),i=Math.max(i,...f)}return{x:t,y:n,width:r-t,height:i-n}},getCornerPointsByPoints(e){const t=e.map(a=>a[0]),n=e.map(a=>a[1]),r=Math.min(...t),i=Math.max(...t),o=Math.min(...n),s=Math.max(...n);return[[r,o],[i,o],[i,s],[r,s]]},getOutlineRectangle:(e,t)=>({x:e.x+t,y:e.y+t,width:e.width-t*2,height:e.height-t*2}),inflate:(e,t)=>{const n=t/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}},isEqual:(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>R.getCenterPoint(R.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,t)=>[e.x+e.width*t[0],e.y+e.height*t[1]],expand(e,t,n=t,r=t,i=n){return{x:e.x-t,y:e.y-n,width:e.width+t+r,height:e.height+n+i}},getGapCenter(e,t,n){const r=n?"x":"y",i=n?"width":"height",s=[e[r],e[r]+e[i],t[r],t[r]+t[i]].sort((a,f)=>a-f);return(s[1]+s[2])/2},isPointInRectangle(e,t){const n=t[0],r=t[1];return n>e.x&&n<e.x+e.width&&r>e.y&&r<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.forEach(o=>{t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x+o.width),i=Math.max(i,o.y+o.height)}),{x:t,y:n,width:r-t,height:i-n}}};function pO(e){return Array.isArray(e)&&e.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")}function gE(e,t,n,r,i,o){const s=e-n,a=t-r,f=i-n,h=o-r,d=s*f+a*h,p=f*f+h*h;let v=-1;p!==0&&(v=d/p);let w,E;v<0?(w=n,E=r):v>1?(w=i,E=o):(w=n+v*f,E=r+v*h);const y=e-w,S=t-E;return Math.hypot(y,S)}function Lv(e,t){const n=e[0],r=e[1],i=t[0][0],o=t[0][1],s=t[1][0],a=t[1][1],f=n-i,h=r-o,d=s-i,p=a-o,v=f*d+h*p,w=d*d+p*p;let E=-1;w!==0&&(E=v/w);let y,S;return E<0?(y=i,S=o):E>1?(y=s,S=a):(y=i+E*d,S=o+E*p),[y,S]}function pE(e,t){const n=t.length;let r=1/0;if(t.length===1)return Et(...t[0],...e);for(let i=0;i<n-1;i++){const o=t[i],s=t[i+1],a=gE(e[0],e[1],o[0],o[1],s[0],s[1]);a<r&&(r=a)}return r}function In(e,t,n=!0){const r=t.length;let i=1/0,o=e;for(let s=0;s<r;s++){const a=t[s];if(s===r-1&&!n)continue;const f=s===r-1?t[0]:t[s+1],h=gE(e[0],e[1],a[0],a[1],f[0],f[1]);h<i&&(i=h,o=Lv(e,[a,f]))}return o}function lw(e,t){let n=1/0,r=e;for(const i of t){const o=Lv(e,i),s=Et(e[0],e[1],o[0],o[1]);s<n&&(n=s,r=o)}return r}function Ai(e,t,n,r){const i={x:t[0]-n,y:t[1]-r,height:r*2,width:n*2},o=Math.abs(e[0]-i.x-i.width/2),s=Math.abs(e[1]-i.y-i.height/2);let a=.707,f=.707;const h=Math.abs(i.width)/2,d=Math.abs(i.height)/2;[0,1,2,3].forEach(w=>{const E=h*a,y=d*f,S=(h*h-d*d)*a**3/h,A=(d*d-h*h)*f**3/d,B=E-S,I=y-A,_=o-S,L=s-A,j=Math.hypot(I,B),z=Math.hypot(L,_);a=Math.min(1,Math.max(0,(_*j/z+S)/h)),f=Math.min(1,Math.max(0,(L*j/z+A)/d));const J=Math.hypot(f,a);a/=J,f/=J});const p=e[0]>t[0]?1:-1,v=e[1]>t[1]?1:-1;return[t[0]+h*a*p,t[1]+d*f*v]}function i0(e,t,n,r,i){return[(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r]}function Et(e,t,n,r){const i=e-n,o=t-r;return Math.hypot(i,o)}function rp(e,t,n){var r=Math.max(n.x-e,0,e-(n.x+n.width)),i=Math.max(n.y-t,0,t-(n.y+n.height));return Math.sqrt(r*r+i*i)}const j2=(e,t,n,r)=>{if(dt.isEquals(e,t)&&dt.isEquals(n,r)&&!dt.isEquals(e,n))return!1;const i=(p,v)=>p[0]*v[1]-p[1]*v[0],o=[t[0]-e[0],t[1]-e[1]],s=[n[0]-e[0],n[1]-e[1]],a=[r[0]-e[0],r[1]-e[1]],f=[e[0]-n[0],e[1]-n[1]],h=[t[0]-n[0],t[1]-n[1]],d=[r[0]-n[0],r[1]-n[1]];return i(o,s)*i(o,a)<=0&&i(d,f)*i(d,h)<=0},Gm=(e,t)=>{if(e.length===1)return R.isPointInRectangle(t,e[0]);const n=R.getCornerPoints(t),r=e.length;for(let i=0;i<r;i++){const o=e[i],s=e[(i+1)%r];if(i===r-1&&dt.isEquals(o,s))continue;if(mO(o,s,t)||Jl(o,n)||Jl(s,n))return!0}return!1},mO=(e,t,n)=>{const r=R.getCornerPoints(n);return j2(e,t,r[0],r[1])||j2(e,t,r[1],r[2])||j2(e,t,r[2],r[3])||j2(e,t,r[3],r[0])},Jl=(e,t)=>{const n=e[0],r=e[1];let i=!1;for(var o=0,s=t.length-1;o<t.length;s=o++){let a=t[o][0],f=t[o][1],h=t[s][0],d=t[s][1];f>r!=d>r&&n<(h-a)*(r-f)/(d-f)+a&&(i=!i)}return i},Ha=(e,t,n,r,i=0)=>{const o=Math.cos(i),s=Math.sin(i),a=(e[0]-t[0])*o+(e[1]-t[1])*s,f=(e[1]-t[1])*o-(e[0]-t[0])*s;return a*a/(n*n)+f*f/(r*r)<=1},cw=(e,t,n,r=0)=>{const{x:i,y:o,width:s,height:a}=t,f=e[0]>=i&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+a,h=e[0]>=i&&e[0]<=i+n&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+n),e[1]-(o+n))>n,d=e[0]>=i&&e[0]<=i+n&&e[1]>=o+a&&e[1]<=o+a-n&&Math.hypot(e[0]-(i+n),e[1]-(o+a-n))>n,p=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+s-n),e[1]-(o+n))>n,v=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o+a-n&&e[1]<=o+a&&Math.hypot(e[0]-(i+s-n),e[1]-(o+a-n))>n;return f&&!(h||d||p||v)},ip=function(e){let n,r,i,o,s,a,f,h,d,p,v,w,E;var y,S,A,B,I,_;const L=[];L.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var j=e.length,z=0;z<j-1;z++)n=z==0?e[0]:e[z-1],r=e[z],i=e[z+1],o=z+2<j?e[z+2]:i,f=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)),h=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)),d=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),y=Math.pow(d,.5),A=Math.pow(d,2*.5),S=Math.pow(h,.5),B=Math.pow(h,2*.5),_=Math.pow(f,.5),I=Math.pow(f,2*.5),p=2*I+3*_*S+B,v=2*A+3*y*S+B,w=3*_*(_+S),w>0&&(w=1/w),E=3*y*(y+S),E>0&&(E=1/E),s=[(-B*n[0]+p*r[0]+I*i[0])*w,(-B*n[1]+p*r[1]+I*i[1])*w],a=[(A*r[0]+v*i[0]-B*o[0])*E,(A*r[1]+v*i[1]-B*o[1])*E],s[0]==0&&s[1]==0&&(s=r),a[0]==0&&a[1]==0&&(a=i),L.push(s,a,i);return L};function Uu(e,t,n,r){return Math.abs(t)===0?e>0?-1/0:1/0:-r*r*e/(n*n*t)}function Xu(e,t,n){if(n===1/0)return[0,-1];if(n===-1/0)return[0,1];let r=[1,-n];return t<0&&(r=[-r[0],-r[1]]),r}function vO(e){return+e.toFixed(2)}function fw(e,t){const n=Math.pow(10,t);return Math.ceil(e*n)/n}function n5(e,t,n=1e-6){return Math.abs(e-t)<=n}function X6(e,t,n,r,i,o,s=!0){if(i===0||o===0||e[0]===t[0]&&e[1]===t[1])return[];i=i<0?i:-i,o=o<0?o:-o,e[0]-=n,e[1]-=r,t[0]-=n,t[1]-=r;var a=(t[0]-e[0])*(t[0]-e[0])/i/i+(t[1]-e[1])*(t[1]-e[1])/o/o,f=2*e[0]*(t[0]-e[0])/i/i+2*e[1]*(t[1]-e[1])/o/o,h=e[0]*e[0]/i/i+e[1]*e[1]/o/o-1,d=[],p=f*f-4*a*h;return p===0?d.push(-f/2/a):p>0&&(d.push((-f+Math.sqrt(p))/2/a),d.push((-f-Math.sqrt(p))/2/a)),d.filter(v=>!s||v>=0&&v<=1).map(v=>[e[0]+(t[0]-e[0])*v+n,e[1]+(t[1]-e[1])*v+r])}function K6(e,t,n,r,i=.5){return[e+(n-e)*i,t+(r-t)*i]}function mE(e,t){const n=(t.endX-e[0])/2,r=(t.endY-e[1])/2,i=Math.cos(t.xAxisRotation),o=Math.sin(t.xAxisRotation),s=i*n+o*r,a=-o*n+i*r,f=Math.abs(t.rx),h=Math.abs(t.ry),d=s*s/(f*f)+a*a/(h*h),p=d>1?Math.sqrt(d):1,v=f*p,w=h*p,E=t.largeArcFlag===t.sweepFlag?-1:1,y=(v*v*w*w-v*v*a*a-w*w*s*s)/(v*v*a*a+w*w*s*s),S=E*Math.sqrt(Math.max(0,y)),A=S*(v*a/w),B=S*(-(w*s)/v),I=i*A-o*B+(e[0]+t.endX)/2,_=o*A+i*B+(e[1]+t.endY)/2;return{center:[I,_],rx:v,ry:w}}function _v(e,t,n){const{center:r,rx:i,ry:o}=mE(t,n),s=Ai(e,r,i,o),a=Math.atan2(t[1]-r[1],t[0]-r[0]),f=Math.atan2(n.endY-r[1],n.endX-r[0]),h=Math.atan2(s[1]-r[1],s[0]-r[0]);if(yO(h,a,f,n.sweepFlag===1))return s;const p=Et(e[0],e[1],t[0],t[1]),v=Et(e[0],e[1],n.endX,n.endY);return p<v?t:[n.endX,n.endY]}function yO(e,t,n,r){const i=f=>(f%(2*Math.PI)+2*Math.PI)%(2*Math.PI),o=i(e),s=i(t),a=i(n);return r?s<=a?o>=s&&o<=a:o>=s||o<=a:s>=a?o<=s&&o>=a:o<=s||o>=a}function wO(e,t,n){const i=O.getBoardContainer(e).getBoundingClientRect();return rp(t,n,i)===0}function hw(e){const{hideScrollbar:t}=e.options;let n=0;if(!t){const r=O.getViewportContainer(e);n=r.offsetWidth-r.clientWidth}return n}const m0="http://www.w3.org/2000/svg";function Gt(){return document.createElementNS(m0,"g")}function dw(){return document.createElementNS(m0,"path")}function b7(e,t){const n=document.createElementNS(m0,"rect");n.setAttribute("x",`${e.x}`),n.setAttribute("y",`${e.y}`),n.setAttribute("width",`${e.width}`),n.setAttribute("height",`${e.height}`);for(let r in t){const i=r;n.setAttribute(r,`${t[i]}`)}return n}const Xt=(e,t)=>{e.setAttribute("stroke-linecap",t)},CO=(e,t)=>{e.querySelectorAll("path").forEach(n=>{n.setAttribute("stroke-linecap",t)})};function xO(){return document.createElementNS(m0,"mask")}function EO(e,t,n,r){var i=document.createElementNS(m0,"text");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("fill",n),i.textContent=r,i}const PO=e=>SO(e)&&e.nodeType===1,SO=e=>e instanceof window.Node,DO=e=>!!(PO(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),ju=e=>e.button===lE.MAIN,TO=e=>e.button===lE.WHEEL;function gw(e,t,n,r){var i=document.createElementNS(m0,"foreignObject");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("width",`${fw(n,0)}`),i.setAttribute("height",`${r}`),i}function hg(e,t,n,r,i){const o=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");o&&(o.setAttribute("width",`${fw(t,0)}`),o.setAttribute("height",`${n}`),o.setAttribute("x",`${r}`),o.setAttribute("y",`${i}`))}function AO(e,t){const n=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");n&&n.setAttribute("width",`${fw(t,0)}`)}const BO=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),RO=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Wm=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),MO=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),bO=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),OO=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),IO=(e,t)=>e.type==="set_viewport"&&e.type===(t==null?void 0:t.type),FO=(e,t)=>!(e.type==="set_selection"||e.type==="set_viewport"),kO=e=>e.type!=="set_selection",gs={isSaving(e){return O7.get(e)},isMerging(e){return Vr.get(e)},isSplittingOnce(e){return V2.get(e)},setSplittingOnce(e,t){V2.set(e,t)},withMerging(e,t){const n=gs.isMerging(e);Vr.set(e,!0),t(),Vr.set(e,n)},withNewBatch(e,t){const n=gs.isMerging(e);Vr.set(e,!0),V2.set(e,!0),t(),Vr.set(e,n),V2.delete(e)},withoutMerging(e,t){const n=gs.isMerging(e);Vr.set(e,!1),t(),Vr.set(e,n)},withoutSaving(e,t){const n=gs.isSaving(e);O7.set(e,!1),t(),O7.set(e,n)}},LO={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},_O={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},NO={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Sn=e=>{const t=LO[e],n=_O[e],r=NO[e],i=t&&dn.isKeyHotkey(t),o=n&&dn.isKeyHotkey(n),s=r&&dn.isKeyHotkey(r);return a=>!!(i&&i(a)||Wm&&o&&o(a)||!Wm&&s&&s(a))},Di={isBold:Sn("bold"),isCompose:Sn("compose"),isArrow:Sn("arrow"),isMoveBackward:Sn("moveBackward"),isMoveForward:Sn("moveForward"),isMoveUp:Sn("moveUp"),isMoveDown:Sn("moveDown"),isDeleteBackward:Sn("deleteBackward"),isDeleteForward:Sn("deleteForward"),isDeleteLineBackward:Sn("deleteLineBackward"),isDeleteLineForward:Sn("deleteLineForward"),isDeleteWordBackward:Sn("deleteWordBackward"),isDeleteWordForward:Sn("deleteWordForward"),isExtendBackward:Sn("extendBackward"),isExtendForward:Sn("extendForward"),isExtendUp:Sn("extendUp"),isExtendDown:Sn("extendDown"),isExtendArrow:Sn("extendArrow"),isExtendLineBackward:Sn("extendLineBackward"),isExtendLineForward:Sn("extendLineForward"),isItalic:Sn("italic"),isMoveLineBackward:Sn("moveLineBackward"),isMoveLineForward:Sn("moveLineForward"),isMoveWordBackward:Sn("moveWordBackward"),isMoveWordForward:Sn("moveWordForward"),isRedo:Sn("redo"),isSplitBlock:Sn("splitBlock"),isTransposeCharacter:Sn("transposeCharacter"),isUndo:Sn("undo"),isShift:Sn("shift")};function yn(e=5){const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",n=t.length;let r="";for(let i=0;i<e;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}function hi(e,t,n,r){if(e.children&&(!n||n(e))){let i=[...e.children];i=r?i.reverse():i,i.forEach(o=>{hi(o,t,n)})}t(e)}const Uf=e=>t=>!!(O.isBoard(t)||e.isRecursion(t)),vo="#6698FF",pw="#6698FF25",o0={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},pn={isRootElement(e){const t=Af.get(e);return!!(t&&O.isBoard(t))},getElementRef(e){return ag.get(e)},getElementG(e){const t=sg.get(e);if(!t)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return t},hasMounted(e){return!!pn.getContainerG(e,{suppressThrow:!0})},getContainerG(e,t){const n=ug.get(e)||null;if(!n){if(t.suppressThrow)return null;throw new Error("can not resolve container g")}return n}},Nv=(e,t,n=!0)=>[...t].sort((r,i)=>{const o=O.findPath(e,r),s=O.findPath(e,i);return n?o[0]-s[0]:s[0]-o[0]}),vE=new Map,eg=e=>vE.get(e)||[],tg=(e,t)=>{vE.set(e,t)};class HO{constructor(t){this.debugKey=t}isDebug(){return jl(this.debugKey)}clear(){if(!this.isDebug())return;const t=eg(this.debugKey);tg(this.debugKey,[]),t.forEach(n=>n.remove())}drawPolygon(t,n,r){if(!jl(this.debugKey))return;const i=O.getRoughSVG(t).polygon(n,r||{stroke:"red"});i.classList.add(this.debugKey),O.getElementTopHost(t).append(i);const o=eg(this.debugKey);return o.push(i),tg(this.debugKey,o),i}drawLine(t,n,r){if(!jl(this.debugKey))return;const i=O.getRoughSVG(t).linearPath(n,r||{stroke:"red"});i.classList.add(this.debugKey),O.getElementTopHost(t).append(i);const o=eg(this.debugKey);return o.push(i),tg(this.debugKey,o),i}drawRectangle(t,n,r){if(!jl(this.debugKey))return;let i;n instanceof Array?i=R.getRectangleByPoints(n):i=n;const o=O.getRoughSVG(t).rectangle(i.x,i.y,i.width,i.height,r||{stroke:"red"});o.classList.add(this.debugKey),O.getElementTopHost(t).append(o);const s=eg(this.debugKey);return s.push(o),tg(this.debugKey,s),o}drawCircles(t,n,r=0,i=!1,o){if(!jl(this.debugKey))return;const s=[];return n.forEach((a,f)=>{const h=O.getRoughSVG(t).circle(a[0],a[1],i?r*(f+1):r,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},o||{}));h.classList.add(this.debugKey),O.getElementTopHost(t).append(h);const d=eg(this.debugKey);d.push(h),s.push(h),tg(this.debugKey,d)}),s}}const v0=e=>new HO(e),jl=e=>localStorage.getItem(e||"debug:plait")==="true";var Gu;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(Gu||(Gu={}));const yE=(e,t,n=()=>!0)=>{const r=t||e.selection,i=[];if(!r)return[];if(o0.isCollapsed(r)){const s=wE(e,r.anchor,n);return s!=null&&s.length?s:[]}return hi(e,s=>{if(!O.isBoard(s)&&n(s)){let a=!1;try{a=e.isRectangleHit(s,r)}catch(f){jl()&&console.error("isRectangleHit",f,"node",s)}a&&i.push(s)}},Uf(e),!0),i},wE=(e,t,n=()=>!0,r=!0)=>{let i=[];return hi(e,o=>{if(O.isBoard(o)||!n(o)||!pn.hasMounted(o))return;let s=!1;try{s=e.isHit(o,t,r)}catch(a){jl()&&console.error("isHit",a,"node",o)}if(s){i.push(o);return}},Uf(e),!0),i},lc=(e,t,n=()=>!0,r=!0)=>{const i=wE(e,t,n,r);return e.getOneHitElement(i)},GO=(e,t)=>{const n=qe(e),r=n.length>0&&on(e,n,!1);return r&&R.isPointInRectangle(r,t)?n:[]},Nu=(e,t)=>{const n=Nv(e,t);fE.set(e,n)},qe=e=>fE.get(e)||[],Xf=(e,t)=>{let n=[];Array.isArray(t)?n.push(...t):n.push(t);const r=qe(e);Nu(e,[...r,...n])},Hv=(e,t,n=!1)=>{const r=qe(e);if(r.includes(t)){const i=[];e.isRecursion(t)&&n?hi(t,s=>{i.push(s)},s=>e.isRecursion(s)):i.push(t);const o=r.filter(s=>!i.includes(s));Nu(e,o)}},WO=(e,t,n)=>{const r=qe(e);r.splice(r.indexOf(t),1,n)},y0=e=>{Nu(e,[])},r5=(e,t)=>!!qe(e).find(r=>r===t),i5=e=>{const t=e.getPluginOptions(Gu.withSelection);e.setPluginOptions(Gu.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Gu.withSelection,{...t})},0)},$O=(e,t)=>GO(e,t).length>0,CE=(e,t)=>!!lc(e,t)||$O(e,t);function w0(e,t,n,r,i,o,s=!1,a){let f=a||0;const h=[t+f,n],d=[r-f,n],p=[r,n+f],v=[r,i-f],w=[r-f,i],E=[t+f,i],y=[t,i-f],S=[t,n+f],A=e.path(`M${d[0]} ${d[1]} A ${f} ${f}, 0, 0, 1, ${p[0]} ${p[1]} L ${v[0]} ${v[1]} A ${f} ${f}, 0, 0, 1, ${w[0]} ${w[1]} L ${E[0]} ${E[1]} A ${f} ${f}, 0, 0, 1, ${y[0]} ${y[1]} L ${S[0]} ${S[1]} A ${f} ${f}, 0, 0, 1, ${h[0]} ${h[1]} Z`,o);return Xt(A,"round"),A}const su=(e,t,n)=>{const i=O.getRoughSVG(e).rectangle(t.x,t.y,t.width,t.height,n);return Xt(i,"round"),i};function C0(e,t,n=40){const r=Math.abs(e[0]-t[0]),i=Math.abs(e[1]-t[1]);let o=Math.hypot(r,i);const s=o/2,a=s/o*r,f=s/o*i,h=[t[0]>e[0]?t[0]-a:t[0]+a,t[1]>e[1]?t[1]-f:t[1]+f],d=i0(h[0],h[1],t[0],t[1],n*Math.PI/180);return{pointLeft:i0(h[0],h[1],t[0],t[1],-n*Math.PI/180),pointRight:d}}function Kf(e,t,n,r){return e.circle(t[0],t[1],n,r)}function z2(e,t,n,r){return e.linearPath([t,n],r)}function Uo(e,t,n){const r=Gt(),i=dw();let o="";return e.forEach((s,a)=>{a===0?o+=`M ${s[0]} ${s[1]} `:o+=`L ${s[0]} ${s[1]} `}),n&&(o+="Z"),i.setAttribute("d",o),i.setAttribute("stroke",`${t==null?void 0:t.stroke}`),i.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),i.setAttribute("fill",`${(t==null?void 0:t.fill)||"none"}`),t!=null&&t.strokeLineDash&&i.setAttribute("stroke-dasharray",`${t.strokeLineDash}`),r.appendChild(i),r}function jO(e,t){const n=Gt(),r=dw();let i="";for(let o=0;o<e.length-3;o+=3)o===0?i+=`M ${e[0][0]} ${e[0][1]} `:i+=`C ${e[o+1][0]} ${e[o+1][1]}, ${e[o+2][0]} ${e[o+2][1]}, ${e[o+3][0]} ${e[o+3][1]}`;return r.setAttribute("d",i),r.setAttribute("stroke",`${t==null?void 0:t.stroke}`),r.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),r.setAttribute("fill","none"),n.appendChild(r),n}function mw(e,t){const n={type:"set_viewport",properties:e.viewport,newProperties:t};e.apply(n)}const zO={setViewport:mw};function VO(e,t){const n={type:"set_theme",properties:e.theme,newProperties:t};e.apply(n)}function Gv(e,t,n){n=n??e.viewport.zoom,mw(e,{...e.viewport,zoom:n,origination:t}),ME(e)}function UO(e,t,n){t=tI(t);const i=O.getBoardContainer(e).getBoundingClientRect(),o=O.getBoardContainer(e).getBoundingClientRect();let s=[o.width/2,o.height/2];n&&rp(n[0],n[1],i)===0&&(s=[n[0]-i.x,n[1]-i.y]);const a=e.viewport.zoom,f=x0(e),h=f[0]+s[0]/a,d=f[1]+s[1]/a,p=[h-s[0]/t,d-s[1]/t];Gv(e,p,t)}function XO(e){let t=hw(e);const n=O.getBoardContainer(e).getBoundingClientRect(),r=on(e,e.children,!0),i=e.viewport.zoom,o=16,s=n.width-2*o,a=n.height-2*o;let f=i;s<r.width||a<r.height?f=Math.min(s/r.width,a/r.height):f=1;const h=TE(e),d=[h[0]-n.width/2/f+t/2/i,h[1]-n.height/2/f+t/2/i];Gv(e,d,f)}function KO(e,t){let n=hw(e);const r=O.getBoardContainer(e),i=r.getBoundingClientRect();let o=0;t.maxWidth?o=t.maxWidth:o=i.width;const s=on(e,e.children,!0),a=o-2*t.autoFitPadding;let f=0;a<s.width?f=Math.min(a/s.width):f=1;let h=s.height*f+2*t.autoFitPadding;if(h>t.limitHeight){const w=r.closest(`.${t.containerClass}`);w.style.height=`${h}px`,yw(e)}else h=t.limitHeight;const d=s.x+s.width/2,p=s.y+s.height/2,v=[d-o/2/f+n/2/f,p-h/2/f+n/2/f];Gv(e,v,f)}function YO(e,t){t=t??e.theme.themeColorMode,VO(e,{themeColorMode:t}),hi(e,n=>{e.applyTheme(n)})}const qO=(e,t)=>{e.pointer!==t&&(e.pointer=t)};function ZO(e,t){var r;if((r=qe(e))==null?void 0:r[0]){const i=O.getBoardContainer(e).getBoundingClientRect(),o=hw(e),s=TE(e),a=t[0]-s[0],f=t[1]-s[1],h=e.viewport.zoom,d=[a-i.width/2/h+o/2/h,f-i.height/2/h+o/2/h];mw(e,{...e.viewport,origination:d}),ME(e)}}const Bn={updatePointerType:qO,updateViewport:Gv,fitViewport:XO,updateZoom:UO,updateThemeColor:YO,fitViewportWidth:KO,moveToCenter:ZO},vw=e=>O.getHost(e).viewBox.baseVal;function Ot(e,t,n){const i=O.getHost(e).getBoundingClientRect();return[t-i.x,n-i.y]}function Ti(e,t){const n=[t.x,t.y],r=[t.x+t.width,t.y+t.height],i=Rg(e,n),o=Rg(e,r);return R.getRectangleByPoints([i,o])}function Rg(e,t){const n=o5(e,$m(e,t));return _f(e,n[0],n[1])}function _f(e,t,n){const i=O.getBoardContainer(e).getBoundingClientRect();return[t-i.x,n-i.y]}function QO(e,t){const r=O.getBoardContainer(e).getBoundingClientRect();return[r.x+t[0],r.y+t[1]]}function bt(e,t){const n=vw(e),{zoom:r}=e.viewport,i=t[0]/r+n.x,o=t[1]/r+n.y;return[i,o]}function o5(e,t){const r=O.getHost(e).getBoundingClientRect();return[t[0]+r.x,t[1]+r.y]}function $m(e,t){const{zoom:n}=e.viewport,r=vw(e),i=(t[0]-r.x)*n,o=(t[1]-r.y)*n;return[i,o]}const xE=.75,EE=new WeakMap,PE=new WeakMap;function JO(e){const{hideScrollbar:t}=e.options,n=t?oO:0,r=O.getBoardContainer(e).getBoundingClientRect();return{width:r.width+n,height:r.height+n}}function eI(e,t){const n=on(e,e.children,!0);let r,i,o,s;return r=n.x,i=n.x+n.width,o=n.y,s=n.y+n.height,{left:r,right:i,top:o,bottom:s}}function tI(e,t=sE,n=uE){return e<t?t:e>n?n:e}function SE(e,t){const n=O.getBoardContainer(e).getBoundingClientRect(),r=eI(e),i=n.width,o=n.height;let s=r.right-r.left,a=r.bottom-r.top;const f=i/2,h=o/2;if(s<f/t){const d=r.left+s/2;r.left=d-f/2/t,r.right=d+f/2/t,s=f/t}if(a<h/t){const d=r.top+a/2;r.top=d-h/2/t,r.bottom=d+h/2/t,a=h/t}return{elementHostBBox:r,containerWidth:i,containerHeight:o,width:s,height:a}}function s5(e,t,n,r,i,o,s=xE){const a=t*s/o,f=n*s/o;return[e.left-a,e.top-f,r+a*2,i+f*2]}function DE(e,t){const{elementHostBBox:n,containerWidth:r,containerHeight:i,width:o,height:s}=SE(e,t);return s5(n,r,i,o,s,t)}function TE(e){const t=on(e,e.children,!0);return[t.x+t.width/2,t.y+t.height/2]}function AE(e,t){const n=e.viewport.zoom,r=O.getHost(e);r.style.display="block",r.style.width=`${t[2]*n}px`,r.style.height=`${t[3]*n}px`,t&&t[2]>0&&t[3]>0&&r.setAttribute("viewBox",t.join(" "))}function jm(e){const t=x0(e);if(!t)return;const[n,r]=$m(e,t);BE(e,n,r)}function BE(e,t,n,r=!0){const i=O.getViewportContainer(e),o=i.scrollLeft,s=i.scrollTop;if(!n5(i.scrollLeft,t,1)||!n5(i.scrollTop,n,1)){i.scrollLeft=t,i.scrollTop=n;const a=i.offsetWidth,f=i.offsetHeight;if(o===i.scrollLeft&&s===i.scrollTop)RE(e,o,s);else{const h=t>0&&n>0&&t<i.scrollWidth-a&&n<i.scrollHeight-f;r&&h&&OE(e,!0)}}}function RE(e,t,n){const r=bt(e,[t,n]);dt.isEquals(r,x0(e))||(Bn.updateViewport(e,r),bE(e,!0))}function yw(e){const{width:t,height:n}=JO(e),r=O.getViewportContainer(e);r.style.width=`${t}px`,r.style.height=`${n}px`}function ww(e){const t=e.viewport.zoom,n=DE(e,t);AE(e,n)}function nI(e){const t=e.viewport.zoom,{elementHostBBox:n,containerWidth:r,containerHeight:i,width:o,height:s}=SE(e,t),a=s5(n,r,i,o,s,t,.5),f=vw(e);if(a[0]<f.x||a[1]<f.y||a[0]+a[2]>f.x+f.width||a[1]+a[3]>f.y+f.height){const h=s5(n,r,i,o,s,t,xE);AE(e,h)}}function rI(e){var t;if(!((t=e.viewport)!=null&&t.origination)){const n=e.viewport.zoom,r=O.getBoardContainer(e).getBoundingClientRect(),i=DE(e,n),o=i[0]+i[2]/2,s=i[1]+i[3]/2,a=[o-r.width/2/n,s-r.height/2/n];iI(e,a),jm(e);return}jm(e)}const iI=(e,t)=>{sw.set(e,t)},ME=e=>{sw.delete(e)},x0=e=>{const t=sw.get(e);return t||e.viewport.origination},oI=e=>!!EE.get(e),bE=(e,t)=>{EE.set(e,t)},sI=e=>!!PE.get(e),OE=(e,t)=>{PE.set(e,t)};function uI(e,t,n){const r={type:"insert_node",node:t,path:n};e.apply(r)}function aI(e,t,n){const r={},i={},o=Vt.get(e,n);for(const a in t)o[a]!==t[a]&&(o.hasOwnProperty(a)&&(r[a]=o[a]),t[a]!=null&&(i[a]=t[a]));const s={type:"set_node",properties:r,newProperties:i,path:n};e.apply(s)}function IE(e,t){const n=Vt.get(e,t),r={type:"remove_node",path:t,node:n};e.apply(r)}function lI(e,t,n){const r={type:"move_node",path:t,newPath:n};e.apply(r)}const Bf={insertNode:uI,setNode:aI,removeNode:IE,moveNode:lI},mm=new WeakMap,cI=(e,t)=>FE(e)[t]||null,FE=e=>mm.get(e)||{},Ga=(e,t,n)=>{const r=()=>{let o=requestAnimationFrame(()=>{const a=mm.get(e)||{};a[t]=null,mm.set(e,a),O.isAlive(e)&&n()});const s=FE(e);s[t]=o,mm.set(e,s)};let i=cI(e,t);i!==null&&cancelAnimationFrame(i),r()},Wv=(e,t)=>(Nv(e,t),t.map(n=>e.children.map(r=>r.id).indexOf(n.id)).filter(n=>n>=0)),fI=(e,t)=>{const n=Wv(e,t);return n[n.length-1]},op=(e,t)=>{t.map(n=>{const r=O.findPath(e,n.element),i=e.pathRef(r);return()=>{i.current&&Bf.moveNode(e,i.current,n.newPath),i.unref()}}).forEach(n=>{n()})},kE=new WeakMap,s0=e=>!!kE.get(e),qa=(e,t)=>{kE.set(e,t)},hI=e=>kv.get(e)||[],u0=e=>(kv.get(e)||[]).length>0,dI=e=>{kv.delete(e),qa(e,!1)},Y6=(e,t)=>{kv.set(e,t),qa(e,!0)},u5="foreignObject[class^='foreign-object']";function q6(e){return e.nodeType===Node.ELEMENT_NODE}function gI(e){return new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>t(r),r.onerror=()=>n(new Error("Failed to load image")),r.src=e})}function pI(e,t,n="transparent"){const r=document.createElement("canvas"),i=r.getContext("2d");return r.width=e,r.height=t,r.style.width=`${e}px`,r.style.height=`${t}px`,i.strokeStyle="#ffffff",i.fillStyle=n,i.fillRect(0,0,e,t),{canvas:r,ctx:i}}async function mI(e){const n=await(await fetch(e)).blob();return new Promise((r,i)=>{const o=new FileReader;o.onloadend=()=>r(o.result),o.onerror=i,o.readAsDataURL(n)})}function vI(e,t){const n=t==null?void 0:t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Array.from(r).forEach(i=>{let o=r.getPropertyValue(i);n.setProperty(i,o,r.getPropertyPriority(i))})}function yI(e,t,n){if(n){const r=n+`, ${u5}`,i=Array.from(e.querySelectorAll(r)),o=Array.from(t.querySelectorAll(r));i.forEach((s,a)=>{const f=Array.from(s.querySelectorAll("*")).filter(q6),h=Array.from(o[a].querySelectorAll("*")).filter(q6);i.push(...f),o.push(...h)}),i.map((s,a)=>{vI(s,o[a])})}}async function wI(e,t){const n=Array.from(e.querySelectorAll(`${u5}`)),r=Array.from(t.querySelectorAll(`${u5}`));await Promise.all(n.map((i,o)=>new Promise(s=>{const f=r[o].querySelector("img"),h=f==null?void 0:f.getAttribute("src");if(!h)return s(!0);mI(h).then(d=>{f==null||f.setAttribute("src",d),s(!0)})})))}async function CI(e,t,n,r){const{width:i,height:o,x:s,y:a}=n,{padding:f=4,inlineStyleClassNames:h}=r,d=O.getHost(e),p=t.map(y=>pn.getElementG(y)),v=d.cloneNode(),w=O.getElementHost(e).cloneNode();v.style.width=`${i}px`,v.style.height=`${o}px`,v.style.backgroundColor="",v.setAttribute("width",`${i}`),v.setAttribute("height",`${o}`),v.setAttribute("viewBox",[s-f,a-f,i+2*f,o+2*f].join(","));const E=new Array(p.length);return await Promise.all(p.map(async(y,S)=>{const A=y.cloneNode(!0);yI(y,A,h),await wI(y,A),E[S]=A})),w.append(...E),v.appendChild(w),v}async function xI(e,t){if(!e)return;const n=t.elements||E0(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=on(e,n,!1),{ratio:i=2,fillStyle:o="transparent"}=t,{width:s,height:a}=r,f=s*i,h=a*i,d=await CI(e,n,r,t),{canvas:p,ctx:v}=pI(f,h,o),w=new XMLSerializer().serializeToString(d),E=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(w)}`;try{const y=await gI(E);return v.drawImage(y,0,0,f,h),p.toDataURL("image/png")}catch(y){console.error("Error converting SVG to image:",y);return}}var Wa;(function(e){e.medias="medias",e.elements="elements"})(Wa||(Wa={}));var ru;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(ru||(ru={}));const Cw=(e,t)=>`<plait>${DI(JSON.stringify({type:e,data:t}))}</plait>`,xw=e=>{var n;let t=(n=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:n[1];if(t){t=TI(t);try{const r=JSON.parse(t);if(r){if(r.type===Wa.elements)return{elements:r.data};if(r.type===Wa.medias)return{medias:r.data}}}catch(r){return console.error(r),null}}return null},Z6=e=>{const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""},LE=()=>"clipboard"in navigator&&"write"in navigator.clipboard,EI=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,_E=()=>"clipboard"in navigator&&"read"in navigator.clipboard,PI=(e,t,n)=>({type:e,elements:t,text:n}),SI=(e,t)=>{const{type:n,elements:r,text:i}=e;return n===t.type?{type:n,elements:r.concat(t.elements),text:i+" "+t.text}:e},$v=(e,t)=>e?SI(e,t):t,DI=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),TI=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),AI=(e,t,n)=>{e==null||e.setData("text/html",Cw(t,n))},BI=(e,t)=>{e==null||e.setData("text/plain",t)},RI=e=>{const t=e==null?void 0:e.getData("text/html");if(t){const n=xw(t);if(n)return n}return{}},MI=e=>{if(!e)return{};const t=e==null?void 0:e.getData("text/plain");if(t){const n=xw(t);if(n)return n}return{text:t}},bI=async(e,t,n="")=>{let r=n;LE()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([Cw(e,t)],{type:"text/html"}),"text/plain":new Blob([r??JSON.stringify(t)],{type:"text/plain"})})])},OI=async()=>{if(!_E())return{};const e=await navigator.clipboard.read();let t={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const n of e){if(II(n)){const r=n.types.filter(a=>a.match(/^image\//)),o=(await Promise.all(r.map(a=>n.getType(a)))).filter(Boolean).map(a=>URL.createObjectURL(a));return{files:await Promise.all(o.map(async a=>{const f=await(await fetch(a)).blob();return new File([f],"plait-file",{type:f.type})}))}}if(n.types.includes("text/html")){const r=await Q6(await n.getType("text/html")),i=xw(r);if(i)return i;r&&r.trim()&&(t={text:Z6(r)})}if(n.types.includes("text/plain")){const r=await Q6(await n.getType("text/plain"));t={text:Z6(r)}}}return t},II=e=>e.types.find(t=>t.match(/^image\//)),Q6=e=>new Promise((t,n)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const i=r.result;t(i)}),r.addEventListener("error",()=>{n(r.error)}),r.readAsText(e)}),FI=async e=>{let t={};return e?e.files.length?{files:Array.from(e.files)}:(t=RI(e),Object.keys(t).length===0&&(t=MI(e)),t):_E()?await OI():t},kI=async(e,t)=>{if(!t)return;const{type:n,elements:r,text:i}=t;if(LE())return await bI(n,r,i);if(e){AI(e,n,r),BI(e,i);return}if(EI())return await navigator.clipboard.writeText(Cw(n,r))};function ji(e){return!!uw.get(e)}function LI(e){O.getBoardContainer(e).classList.add("selection-moving"),uw.set(e,!0),qa(e,!0)}function _I(e){O.getBoardContainer(e).classList.remove("selection-moving"),uw.delete(e),qa(e,!1)}function J6(e){const t=vm(e);return e.pointer!==ln.hand&&!t.isDisabledSelection&&!O.isReadonly(e)}function e8(e){return!!e.operations.find(t=>Gl.isSetSelectionOperation(t))}function NI(e){const t=Fv.get(e);if(t)return t.elements}function HI(e){return Fv.get(e)}function GI(e){Fv.delete(e)}function WI(e){const t=qe(e),n=on(e,t,!1),r=Ti(e,n);if(r.width>0&&r.height>0&&t.length>1){const i=su(e,R.inflate(r,fr),{stroke:vo,strokeWidth:fr,fillStyle:"solid"});i.classList.add(np,tO);const o=go(t);return o&&Es(i,R.getCenterPoint(r),o),i}return null}function $I(e,t,n){if(!e.selection)return;const r=qe(e);if(!o0.isCollapsed(e.selection)){let i=[...r];t.forEach(o=>{o.groupId?i.push(...Pw(e,o)):i.push(o)}),Nu(e,aw(i));return}if(o0.isCollapsed(e.selection)){const i=t[0],o=cc(e,i,!0);if(o.length>0){const s=As(e,o[o.length-1],!0)||[],a=r.some(f=>s.map(h=>h.id).includes(f.id));n?jI(e,t,a,s):zI(e,t,a,o)}}}function jI(e,t,n,r){const i=qe(e);let o=[...i];const s=t[0];let a=[];if(!n)a=r;else{const f=i.some(d=>d.id===s.id),h=r.filter(d=>i.includes(d));f?a=h.filter(d=>d.id!==s.id):a.push(...h,...t)}r.forEach(f=>{o.includes(f)&&o.splice(o.indexOf(f),1)}),a.length&&o.push(...a),Nu(e,aw(o))}function zI(e,t,n,r){let i=[...t];const o=NE(e,r);if(o.length>0)if(o.length>1)i=zm(e,o[o.length-2],!0);else{const s=e.getOneHitElement(t);s&&(i=[s])}else{const s=zm(e,r[r.length-1],!0);if(!n)i=s;else{const a=e.getOneHitElement(t);a&&(i=[a])}}Nu(e,aw(i))}const vm=e=>e.getPluginOptions(Gu.withSelection),VI=(e,t)=>{e.setPluginOptions(Gu.withSelection,t)},As=(e,t,n,r)=>{let i=[];const o=e.children.filter(s=>s.groupId===t.id);return n?o.forEach(s=>{yo.isGroup(s)?(r&&i.push(s),i.push(...As(e,s,n,r))):i.push(s)}):i=r?o:o.filter(s=>!yo.isGroup(s)),i},zm=(e,t,n,r)=>{const i=As(e,t,n,r),o=[];return i.forEach(s=>{hi(s,a=>{o.push(a)},()=>!0)}),o},Ew=(e,t,n)=>{const r=zm(e,t,n);return on(e,r,!1)},cc=(e,t,n,r)=>{const i=(r||e.children).find(o=>o.id===(t==null?void 0:t.groupId));if(!i)return[];{const o=[i],s=cc(e,i,n,r);return s.length&&o.push(...s),o}},a5=(e,t)=>{const n=cc(e,t,!0);return n.length?n[n.length-1]:null},Pw=(e,t)=>{const n=a5(e,t);return n?zm(e,n,!0):[t]},l5=(e,t,n)=>{const r=n!=null&&n.length?n:qe(e);return yo.isGroup(t)?Vm(e,t,n):r.map(i=>i.id).includes(t.id)},Vm=(e,t,n)=>{const r=n!=null&&n.length?n:qe(e);return As(e,t,!0).every(o=>r.map(s=>s.id).includes(o.id))},NE=(e,t,n)=>{const r=[];return t.forEach(i=>{l5(e,i,n)&&r.push(i)}),r},UI=(e,t,n)=>{const r=fc(e,t,n),i=[];return r.forEach(o=>{i.push(o);const s=As(e,o,!0,!0);i.push(...s.filter(a=>yo.isGroup(a)))}),i},HE=(e,t,n,r)=>{const i=cc(e,t,!0,r),o=NE(e,i,n);return o.length?o[o.length-1]:null},fc=(e,t,n)=>{let r=[];return(t!=null&&t.length?t:qe(e)).forEach(o=>{if(o.groupId){const s=HE(e,o,t,n);s&&!r.includes(s)&&r.push(s)}}),r},Sw=(e,t)=>{let n=[];return(t!=null&&t.length?t:qe(e)).filter(i=>!yo.isGroup(i)).forEach(i=>{i.groupId&&HE(e,i,t)||n.push(i)}),n},Dw=(e,t)=>Sw(e,t).filter(r=>e.canAddToGroup(r)),XI=(e,t)=>[...fc(e,t),...Sw(e,t)],KI=(e,t)=>{const n=qe(e).map(o=>o.id);let r=null;const i=ji(e);return t.forEach(o=>{const s=!n.includes(o.id)&&!i||i;if(o.groupId&&s){r||(r=Gt());const a=Pw(e,o),f=on(e,a,!1),h=su(e,f,{stroke:vo,strokeWidth:fr,strokeLineDash:[5]}),d=go(a);d&&Es(h,R.getCenterPoint(f),d),r.append(h)}}),r},YI=e=>({id:yn(),type:"group"}),qI=e=>e.every(t=>!t.groupId),GE=e=>e.every(t=>t.groupId&&t.groupId===e[0].groupId),ZI=(e,t)=>{const r=XI(e,t).filter(i=>e.canAddToGroup(i));return r.length>1?qI(r)||GE(r):!1},QI=(e,t,n)=>{const r=fc(e,t,n);return qe(e).length>0&&r.length>0},WE=(e,t)=>{const n=cc(e,t,!0);let r=null;if(n!=null&&n.length){for(let i=0;i<(n==null?void 0:n.length);i++)if(!Vm(e,n[i])){r=n[i];break}}return r},JI=(e,t,n)=>{const r=[...t];Nv(e,r),r.pop(),op(e,r.map(i=>({element:i,newPath:n})))},Tw=e=>{const t=e.getDeletedFragment([]);e.deleteFragment(t)},t8=(e,t,n)=>{const r=qe(e),i=on(e,r,!1),o=e.buildFragment(null,i,t);o&&kI(n,o)},Aw=(e,t,n)=>{const r=t!=null&&t.length?t:qe(e),i=on(e,r,!1),o=e.buildFragment(null,i,ru.duplicate,r),s=o&&JSON.stringify(o),a=s&&JSON.parse(s);a&&e.insertFragment({...a,text:void 0},n||[i.x+i.width/2,i.y+i.height/2],ru.duplicate)},_a=2,eF=24;function $E(e,t){return E0(e,{match:r=>e.isAlign(r)&&!t.some(i=>i.id===r.id),recursion:()=>!0,isReverse:!1}).map(r=>{const i=e.getRectangle(r);return sp(i,r.angle||0)})}function tF(e,t){return t?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function dg(e,t,n){let r=_a;return e.forEach(i=>{const o=nF(t,i,n);Math.abs(o)<Math.abs(r)&&(r=o)}),r}const nF=(e,t,n)=>{const i=Nf(t,n).map(a=>a-e),o=i.map(a=>Math.abs(a)),s=o.indexOf(Math.min(...o));return i[s]},Nf=(e,t)=>{const n=t?"x":"y",r=t?"width":"height";return[e[n],e[n]+e[r]/2,e[n]+e[r]]};function Rd(e,t){let n=1/0,r=e[0];return e.forEach(i=>{const o=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));o<n&&(n=o,r=i)}),r}const Md=(e,t,n)=>Nf(t,n).includes(e);function jE(e,t,n,r=!0,i=!0,o=!1){let s=[];const a=Nf(t,!0),f=Nf(t,!1),h=[{axis:a[0],isHorizontal:!0,pointRectangles:[]},{axis:a[1],isHorizontal:!0,pointRectangles:[]},{axis:a[2],isHorizontal:!0,pointRectangles:[]},{axis:f[0],isHorizontal:!1,pointRectangles:[]},{axis:f[1],isHorizontal:!1,pointRectangles:[]},{axis:f[2],isHorizontal:!1,pointRectangles:[]}];for(let p=0;p<n.length;p++){const v=n[p];Md(h[0].axis,v,h[0].isHorizontal)&&h[0].pointRectangles.push(v),Md(h[1].axis,v,h[1].isHorizontal)&&h[1].pointRectangles.push(v),Md(h[2].axis,v,h[2].isHorizontal)&&h[2].pointRectangles.push(v),Md(h[3].axis,v,h[3].isHorizontal)&&h[3].pointRectangles.push(v),Md(h[4].axis,v,h[4].isHorizontal)&&h[4].pointRectangles.push(v),Md(h[5].axis,v,h[5].isHorizontal)&&h[5].pointRectangles.push(v)}const d=(p,v,w)=>{const E=R.inflate(R.getBoundingRectangle([t,v]),eF);if(w){const y=[p,E.y],S=[p,E.y+E.height];s.push([y,S])}else{const y=[E.x,p],S=[E.x+E.width,p];s.push([y,S])}};if(r&&h[0].pointRectangles.length){const p=h[0].pointRectangles.length===1?h[0].pointRectangles[0]:Rd(h[0].pointRectangles,t);d(h[0].axis,p,h[0].isHorizontal)}if(r&&o&&h[1].pointRectangles.length){const p=h[1].pointRectangles.length===1?h[1].pointRectangles[0]:Rd(h[1].pointRectangles,t);d(h[1].axis,p,h[1].isHorizontal)}if(r&&h[2].pointRectangles.length){const p=h[2].pointRectangles.length===1?h[2].pointRectangles[0]:Rd(h[2].pointRectangles,t);d(h[2].axis,p,h[2].isHorizontal)}if(i&&h[3].pointRectangles.length){const p=h[3].pointRectangles.length===1?h[3].pointRectangles[0]:Rd(h[3].pointRectangles,t);d(h[3].axis,p,h[3].isHorizontal)}if(i&&o&&h[4].pointRectangles.length){const p=h[4].pointRectangles.length===1?h[4].pointRectangles[0]:Rd(h[4].pointRectangles,t);d(h[4].axis,p,h[4].isHorizontal)}if(i&&h[5].pointRectangles.length){const p=h[5].pointRectangles.length===1?h[5].pointRectangles[0]:Rd(h[5].pointRectangles,t);d(h[5].axis,p,h[5].isHorizontal)}return rF(e,s)}function rF(e,t){const n=Gt();return t.forEach(r=>{if(!r.length)return;const i=O.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:vo,strokeWidth:1,strokeLineDash:[4,4]});n.appendChild(i)}),n}function zE(e,t){const n=Gt();return t.forEach(r=>{if(!r.length)return;let i=r[0][1]===r[1][1];const o=O.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:vo,strokeWidth:1});n.appendChild(o),r.forEach(s=>{const a=tF(s,i),f=O.getRoughSVG(e).line(a[0][0],a[0][1],a[1][0],a[1][1],{stroke:vo,strokeWidth:1});n.appendChild(f)})}),n}const VE=(e,t)=>{const n=Wv(e,qe(e));let r=XE(e,n);t==="up"&&(r=r.reverse());let i=[];return r.forEach((o,s)=>{const a=o[0],f=o[o.length-1],h=t==="down"?a:f,d=iF(e,h,t);d===-1||h===d||(t==="down"&&(o=o.reverse()),i.push(...o.map(p=>({element:e.children[p],newPath:[d]}))))}),i},UE=(e,t)=>{const n=Wv(e,qe(e));let r=XE(e,n),i=[];return t==="down"&&(r=r.reverse()),r.forEach(o=>{const s=o[0],a=o[o.length-1],f=t==="down"?s:a,h=e.children[f],d=WE(e,h);let p=t==="down"?0:e.children.length-1;if(d){const v=Nv(e,As(e,d,!0,!0));p=t==="down"?e.children.indexOf(v[0]):e.children.indexOf(v[v.length-1])}t==="down"&&(o=o.reverse()),i.push(...o.map(v=>({element:e.children[v],newPath:[p]})))}),i},XE=(e,t)=>{let n=0;return t.reduce((r,i,o)=>{if(o>0){const s=e.children[i],a=e.children[t[o-1]],f=i-1===t[o-1]?!0:e.children.every((d,p)=>p>t[o-1]&&p<=i-1?yo.isGroup(d):!0);let h=!1;if(a!=null&&a.groupId||s!=null&&s.groupId&&(a==null?void 0:a.groupId)!==(s==null?void 0:s.groupId)){let d=!1,p=!1;if(a.groupId){const v=a5(e,a);d=!Vm(e,v)}if(s.groupId){const v=a5(e,s);p=!Vm(e,v)}h=d||p}(!f||h)&&(n=++n)}return(r[n]||(r[n]=[])).push(i),r},[])},iF=(e,t,n)=>{if(t===0&&n==="down"||t===e.children.length-1&&n==="up")return-1;const r=p=>!(p.isDeleted||yo.isGroup(p)),i=n==="down"?lO(e.children,p=>r(p),Math.max(0,t-1)):cO(e.children,p=>r(p),t+1),o=e.children[i];if(!o)return-1;const s=[...e.children],a=s[t],f=WE(e,a),h=cc(e,o,!0)||[];if(f&&(a==null?void 0:a.groupId)!==(o==null?void 0:o.groupId)&&!h.find(p=>p.id===f.id))return-1;if(!o.groupId)return i;let d;if(f?d=h[h.indexOf(f)-1]:d=h[h.length-1],d){let p=As(e,d,!0,!1);if(p.length)return p.sort((v,w)=>{const E=e.children.findIndex(S=>S.id===v.id),y=e.children.findIndex(S=>S.id===w.id);return E-y}),n==="down"?s.indexOf(p[0]):s.indexOf(p[p.length-1])}return i},KE=e=>c5(e)||oF(e),c5=e=>e.pointerType==="pen",oF=e=>e.pointerType==="touch",sF=(e,t)=>{const n=fc(e,t),r=Dw(e),i=[...n,...r],o=YI();if(ZI(e)){i.forEach(d=>{const p=O.findPath(e,d);Bf.setNode(e,{groupId:o.id},p)});const s=qe(e),a=fI(e,s),f=Wv(e,i);if(fO(f)||JI(e,s,[a-1]),GE(i)){const d=r[0].groupId;Bf.insertNode(e,{...o,groupId:d},[e.children.length])}else Bf.insertNode(e,o,[e.children.length])}},uF=(e,t)=>{const n=fc(e,t);QI(e)&&(n.forEach(r=>{E0(e,{match:o=>o.groupId===r.id,recursion:()=>!1}).forEach(o=>{const s=O.findPath(e,o);Bf.setNode(e,{groupId:r.groupId||void 0},s)})}),n.map(r=>{const i=O.findPath(e,r),o=e.pathRef(i);return()=>{o.current&&Bf.removeNode(e,o.current),o.unref()}}).forEach(r=>{r()}))},aF={addGroup:sF,removeGroup:uF};function YE(e,t){const n={type:"set_selection",properties:e.selection,newProperties:t};e.apply(n)}const lF={setSelection:YE,addSelectionWithTemporaryElements:qE};function qE(e,t){const n=setTimeout(()=>{YE(e,{anchor:[0,0],focus:[0,0]})},0);let r=HI(e);if(r){clearTimeout(r.timeoutId);const i=r.elements;r.elements.push(...t.filter(o=>!i.includes(o))),r.timeoutId=n}else Fv.set(e,{timeoutId:n,elements:t})}const cF=e=>{const t=UE(e,"up");op(e,t)},fF=e=>{const t=UE(e,"down");op(e,t)},hF=e=>{const t=VE(e,"up");op(e,t)},dF=e=>{const t=VE(e,"down");op(e,t)},gF={moveUp:hF,moveDown:dF,moveToTop:cF,moveToBottom:fF},pF=(e,t)=>{t.map(n=>{const r=O.findPath(e,n),i=e.pathRef(r);return()=>{i.current&&IE(e,i.current),i.unref(),Hv(e,n,!0)}}).forEach(n=>{n()})},ZE={removeElements:pF},Ve={...gO,...zO,...lF,...Bf,...aF,...gF},br=(e,t,n)=>(n||(n=0),Array.isArray(e)&&typeof e[0]=="number"?i0(e[0],e[1],t[0],t[1],n):e.map(r=>i0(r[0],r[1],t[0],t[1],n||0))),go=e=>{var n;let t=((n=e[0])==null?void 0:n.angle)||0;return e.forEach(r=>{r.angle!==t&&!n5((r.angle||0)%(Math.PI/2)-t%(Math.PI/2),0)&&(t=0)}),t},mF=e=>{if(!e.length)return!1;const t=e[0].angle;return t===void 0?!1:!e.some(n=>n.angle!==t)},vF=(e,t)=>{let n=[];for(let a=0;a<e.length;a++){const f=e[a],h=br(f,[0,0],-t);n.push(R.getRectangleByPoints(h))}const r=R.getBoundingRectangle(n),i=R.getCornerPoints(r),o=br(i,[0,0],t),s=R.getCenterPoint(R.getRectangleByPoints(o));return R.getRectangleByPoints(br(o,s,-t))},yF=(e,t,n)=>{const r=R.getCenterPoint(e),[i]=br([r],t,n),o=i[0]-r[0],s=i[1]-r[1];return{offsetX:o,offsetY:s}},f5=(e,t,n)=>{const{offsetX:r,offsetY:i}=yF(R.getRectangleByPoints(e),t,n);return e.map(o=>[o[0]+r,o[1]+i])},zu=e=>QE(e.angle),QE=e=>e&&e!==0,ec=(e,t)=>{if(zu(t)){let n=R.getRectangleByPoints(t.points);const r=R.getCenterPoint(n);return br(e,r,t.angle)}else return null},wF=(e,t)=>{if(QE(t)){let n=R.getRectangleByPoints(e);const r=R.getCenterPoint(n);return br(e,r,t)}else return null},tc=(e,t,n,r=!1)=>{if(zu(n)){let i=R.getRectangleByPoints(n.points);const o=r?Ti(e,i):i,s=R.getCenterPoint(o);return br(t,s,n.angle?-n.angle:0)}else return null},sp=(e,t)=>{if(t){const n=R.getCornerPoints(e),r=R.getCenterPoint(e);return R.getRectangleByPoints(br(n,r,t))}return e},CF=e=>{const t=Math.abs(e)%Math.PI;return t>=1/4*Math.PI&&t<=3/4*Math.PI};function h5(e){return e/180*Math.PI}function xF(e,t,n){const r=on(e,t,!1),i=R.getCenterPoint(r);t.forEach(o=>{const s=o.angle,a=f5(o.points,i,Mg(n)),f=O.findPath(e,o);Ve.setNode(e,{points:a,angle:Mg((s||0)+n)},f)})}const Mg=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,EF=(e,t,n)=>{const r=5*Math.PI/2+Math.atan2(e[1]-n[1],e[0]-n[0]),i=5*Math.PI/2+Math.atan2(t[1]-n[1],t[0]-n[0]);return Mg(i-r)},PF=e=>e==null?void 0:e.angle,Es=(e,t,n)=>{if(n===0){e.removeAttribute("transform");return}var r=t[0],i=t[1];let o=Math.cos(n),s=Math.sin(n),f="matrix("+[o,s,-s,o,r*(1-o)+i*s,i*(1-o)-r*s].join(",")+")";e.setAttribute("transform",`${f}`)};function on(e,t,n){const r=[],i=o=>{const s=e.getRectangle(o);if(s){const a=R.getCornerPoints(s),f=ec(a,o)||a;r.push(f)}else console.error("can not get rectangle of element:",o)};if(t.forEach(o=>{n?hi(o,s=>i(s),s=>e.isRecursion(s)):i(o)}),r.length>0)if(mF(t)){const o=go(t);return vF(r,o)}else{const o=r.reduce((s,a)=>s.concat(a),[]);return R.getRectangleByPoints(o)}else return{x:0,y:0,width:0,height:0}}function ys(e,t,n){const r=!n&&ym(e).get(t);return r||(n||(n=E0(e,{match:o=>!0,recursion:o=>!0})),n.find(o=>o.id===t))}function ym(e){const t=Yy.get(e);if(!t)throw new Error("can not resolve element map");return t}function E0(e,t){let n=[];const r=t.isReverse??!0;return hi(e,i=>{!O.isBoard(i)&&t.match(i)&&n.push(i)},i=>O.isBoard(i)?!0:Uf(e)(i)&&t.recursion(i),r),n}var lr;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(lr||(lr={}));const qr="#333333",JE={mode:lr.default,boardBackground:"#ffffff",textColor:qr},eP={mode:lr.colorful,boardBackground:"#ffffff",textColor:qr},tP={mode:lr.soft,boardBackground:"#f5f5f5",textColor:qr},nP={mode:lr.retro,boardBackground:"#f9f8ed",textColor:qr},rP={mode:lr.dark,boardBackground:"#141414",textColor:"#FFFFFF"},iP={mode:lr.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},SF=[JE,eP,tP,nP,rP,iP],O={isBoard(e){const t=V6.get(e);if(t!==void 0)return t;const n=typeof e.onChange=="function"&&typeof e.apply=="function";return V6.set(e,n),n},isAlive(e){return!!e5.get(e)},findPath(e,t){const n=[];let r=t;for(;;){const i=Af.get(r);if(i==null){if(O.isBoard(r))return n;break}const o=Yd.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(t)}`)},getHost(e){return Qy.get(e)},getElementLowerHost(e){var t;return(t=Ma.get(e))==null?void 0:t.lowerHost},getElementHost(e){var t;return(t=Ma.get(e))==null?void 0:t.host},getElementUpperHost(e){var t;return(t=Ma.get(e))==null?void 0:t.upperHost},getElementTopHost(e){var t;return(t=Ma.get(e))==null?void 0:t.topHost},getActiveHost(e){var t;return(t=Ma.get(e))==null?void 0:t.activeHost},getRoughSVG(e){return Zy.get(e)},getBoardContainer(e){var t;return(t=Ma.get(e))==null?void 0:t.container},getBoardContext(e){return Jy.get(e)},getRectangle(e){return on(e,e.children,!0)},getViewportContainer(e){var t;return(t=Ma.get(e))==null?void 0:t.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!qy.get(e)},getPointer(e){return e.pointer},isPointer(e,t){return e.pointer===t},isInPointer(e,t){const n=e.pointer;return t.includes(n)},getMovingPointInBoard(e){return t5.get(e)},isMovingPointInBoard(e){const t=hE.get(e),n=O.getBoardContainer(e).getBoundingClientRect();return!!(t&&rp(t[0],t[1],n)===0)},getThemeColors(e){return e.options.themeColors||SF}};var ln;(function(e){e.hand="hand",e.selection="selection"})(ln||(ln={}));const DF=e=>e.type==="set_viewport",TF=e=>e.type==="set_selection",AF=e=>e.type==="set_theme",BF=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:t,path:n}=e;if(mt.equals(t,n))return e;const r=mt.transform(n,e),i=mt.transform(mt.next(n),e);return{...e,path:r,newPath:i}}case"set_node":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}case"set_selection":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:null}:n==null?{...e,properties:null,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_viewport":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:n}:n==null?{...e,properties:t,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_theme":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}}},Gl={isSetViewportOperation:DF,isSetSelectionOperation:TF,isSetThemeOperation:AF,inverse:BF},dt={isEquals(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]},isHorizontal(e,t,n=0){return e&&t&&dt.isOverHorizontal([e,t],n)},isOverHorizontal(e,t=0){return e.every(n=>Math.abs(n[1]-e[0][1])<=t)},isVertical(e,t,n=0){return e&&t&&dt.isOverVertical([e,t],n)},isOverVertical(e,t=0){return e.every(n=>Math.abs(n[0]-e[0][0])<=t)},isAlign(e,t=0){return dt.isOverHorizontal(e,t)||dt.isOverVertical(e,t)},getOffsetX(e,t){return t[0]-e[0]},getOffsetY(e,t){return t[1]-e[1]}},O7=new WeakMap,Vr=new WeakMap,V2=new WeakMap;var nn;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(nn||(nn={}));const yo={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function RF(e){return MF(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function MF(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function bF(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const OF=(e,t)=>t;class IF{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||OF}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<r8(r,i,o)?n:r,a=r8(s,i,o),f=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);const h=a-i,d=f-i;if(h!=d){for(let v=0;v<h;v++){const w=v<o.length?o[v]:o[v]=0,E=w+v;d<=E&&E<h&&(o[v]=w+1)}const p=s.previousIndex;o[p]=d-h}}a!==f&&t(s,a,f)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!RF(t))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,bF(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new FF(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new n8),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new n8),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}}class FF{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kF{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}}class n8{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new kF,this.map.set(n,r)),r.add(t)}get(t,n){const r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function r8(e,t,n){const r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class oP{constructor(t){this.board=t,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(t,n){this.initialized=!0,this.children=t,t.forEach((r,i)=>{Yd.set(r,i),Af.set(r,n.parent);const o=I7(this.board,r,i,n.parent),s=o8(this.board,o),a=i8(this.board,s,o,n);this.instances.push(a),this.contexts.push(o)}),this.differ=new IF(LF),this.differ.diff(t)}update(t,n){if(!this.initialized){this.initialize(t,n);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:r,parent:i}=n,o=this.differ.diff(t);if(o){const s=[],a=[];let f=null;o.forEachItem(h=>{var v;Yd.set(h.item,h.currentIndex),Af.set(h.item,n.parent);const d=h.previousIndex===null?void 0:this.contexts[h.previousIndex],p=I7(r,h.item,h.currentIndex,i,d);if(h.previousIndex===null){const w=o8(r,p),E=i8(r,w,p,n);s.push(p),a.push(E)}else{const w=this.instances[h.previousIndex];w.context=p,a.push(w),s.push(p)}(h.item===this.children[0]||h.item.id===((v=this.children[0])==null?void 0:v.id))&&(f=h.currentIndex)}),o.forEachOperation(h=>{if(h.currentIndex===null){const d=this.instances[h.previousIndex];d==null||d.destroy()}h.previousIndex!==null&&h.currentIndex!==null&&uP(h.item,h.currentIndex,n,f)}),this.instances=a,this.contexts=s,this.children=t}else{const s=[];this.children.forEach((a,f)=>{Yd.set(a,f),Af.set(a,n.parent);const h=this.contexts[f],d=this.instances[f],p=I7(r,a,f,i,h);d.context=p,s.push(p)}),this.contexts=s}}destroy(){this.children.forEach((t,n)=>{this.instances[n]&&this.instances[n].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const LF=(e,t)=>t.id,i8=(e,t,n,r)=>{const i=new t;i.context=n,e.normalizeElement(n);try{i.initialize()}catch(s){jl()&&console.error("list-render-initialize",s,"context",n)}const o=i.getContainerG();return sP(n.index,o,r),i.initializeListRender(),i},o8=(e,t)=>e.drawElement(t),I7=(e,t,n,r,i)=>{var f;let o=r5(e,t);const s=i&&i.element;return s&&s!==t&&r5(e,s)&&(o=!0,WO(e,s,t)),{element:t,parent:r,board:e,selected:o,index:n,hasThemeChanged:!!((f=e.operations)!=null&&f.find(h=>h.type==="set_theme"))}},sP=(e,t,n,r=null)=>{const{parent:i,parentG:o}=n;if(O.isBoard(i))if(e>0){const s=i.children[e-1];pn.getContainerG(s,{suppressThrow:!1}).insertAdjacentElement("afterend",t)}else if(r!==null){const s=i.children[r],a=s&&pn.getContainerG(s,{suppressThrow:!0});if(s&&a)o.insertBefore(t,a);else throw new Error("fail to mount container on moving")}else o.append(t);else if(e>0){const s=i.children[e-1];pn.getElementG(s).insertAdjacentElement("afterend",t)}else if(r){const s=i.children[r],a=s&&O.findPath(n.board,s),f=a&&Vt.first(n.board,a),h=f&&pn.getContainerG(f,{suppressThrow:!1});if(h)o.insertBefore(t,h);else throw new Error("fail to mount container on moving")}else{let s=pn.getElementG(i);o.insertBefore(t,s)}},uP=(e,t,n,r)=>{const i=pn.getContainerG(e,{suppressThrow:!1});sP(t,i,n,r),e.children&&!pn.isRootElement(e)&&n.board.isExpanded(e)&&e.children.forEach((o,s)=>{uP(o,s,{...n,parent:e},null)})};class _F{get hasChildren(){return!!this.element.children}set context(t){sO(this)&&this.beforeContextChange(t);const n=this._context;if(this._context=t,this.initialized){const r=this.getElementG(),i=this.getContainerG();sg.set(this.element,r),ug.set(this.element,i),ym(this.board).set(this.element.id,this.element),ag.set(this.element,this.ref),this.updateListRender(),uO(this)&&this.onContextChanged(t,n)}else pn.isRootElement(this.element)&&this.hasChildren?(this._g=Gt(),this._containerG=Gt(),this._containerG.append(this._g)):(this._g=Gt(),this._containerG=this._g),sg.set(this.element,this._g),ug.set(this.element,this._containerG),ag.set(this.element,this.ref),ym(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(t){this.ref=t,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(pn.isRootElement(this.element))this._rootContainerG=this._containerG;else{const t=O.findPath(this.board,this.element),n=Vt.get(this.board,t.slice(0,1));this._rootContainerG=pn.getContainerG(n,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new oP(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var t;sg.get(this.element)===this._g&&sg.delete(this.element),ym(this.board).delete(this.element.id),ug.get(this.element)===this._containerG&&ug.delete(this.element),ag.get(this.element)===this.ref&&ag.set(this.element,this.ref),Hv(this.board,this.element),this.getContainerG().remove(),(t=this.listRender)==null||t.destroy()}}class NF{constructor(){this._stable=new tE,this.uploadingFiles=[]}getUploadingFile(t){return this.uploadingFiles.find(n=>n.url===t)}setUploadingFile(t){return this.uploadingFiles.push(t)}removeUploadingFile(t){this.uploadingFiles=this.uploadingFiles.filter(n=>n.url!==t.url)}onStable(){return this._stable.asObservable()}nextStable(){this._stable.next("")}}const HF={transform(e,t){const{current:n}=e;if(n==null)return;const r=mt.transform(n,t);e.current=r,r==null&&e.unref()}};function GF(e,t){const n={viewport:{zoom:1},children:e,theme:{themeColorMode:lr.default},operations:[],history:{redos:[],undos:[]},selection:null,options:t||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:t!=null&&t.readonly?ln.hand:ln.selection,undo:()=>{},redo:()=>{},apply:r=>{for(const i of n.pathRefs())HF.transform(i,r);n.operations.push(r),Ve.transform(n,r),pm.get(n)||(pm.set(n,!0),Promise.resolve().then(()=>{pm.set(n,!1),n.onChange(),n.afterChange(),n.operations=[]}))},pathRef:(r,i)=>{const o=(i==null?void 0:i.affinity)||"forward",s={current:r,affinity:o,unref(){const{current:f}=s;return n.pathRefs().delete(s),s.current=null,f}};return n.pathRefs().add(s),s},pathRefs:()=>{let r=U6.get(n);return r||(r=new Set,U6.set(n,r)),r},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>WI(n),mousedown:r=>{},mousemove:r=>{},mouseleave:r=>{},globalMousemove:r=>{},mouseup:r=>{},globalMouseup:r=>{},keyDown:r=>{},globalKeyDown:r=>{},keyUp:r=>{},dblClick:r=>{},buildFragment:(r,i,o,s)=>r,insertFragment:(r,i,o)=>{},deleteFragment:r=>{ZE.removeElements(n,r)},getDeletedFragment:r=>r,getRelatedFragment:(r,i)=>r,normalizeElement:r=>{},drawElement:r=>{throw new Error(`can not resolve plugin element component type: ${r.element.type}`)},isWithinSelection:r=>!1,isRectangleHit:r=>!1,isHit:r=>!1,isInsidePoint:r=>!1,getOneHitElement:r=>r[0],isRecursion:r=>!0,isMovable:r=>!1,getRectangle:r=>null,applyTheme:r=>{},isAlign:r=>!1,pointerDown:r=>{},pointerMove:r=>{},pointerUp:r=>{},pointerCancel:r=>{},pointerOut:r=>{},pointerLeave:r=>{},globalPointerMove:r=>{},globalPointerUp:r=>{},isImageBindingAllowed:r=>!1,canAddToGroup:r=>!0,canSetZIndex:r=>!0,isExpanded:r=>!0};return n}function WF(e){const{onChange:t,afterChange:n}=e;return e.onChange=()=>{const r=Nm.get(e);r&&r(),t()},e.afterChange=()=>{const r=Hm.get(e);r&&r(),n()},e}const s8=(e,t)=>O.isPointer(e,ln.selection)&&KE(t),u8="Space";function $F(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,keyDown:i,keyUp:o,pointerUp:s}=e;let a=!1,f=null,h=null,d=!1,p=!1;return e.pointerDown=v=>{const w=e.getPluginOptions(Gu.withHand),E=bt(e,Ot(e,v.x,v.y)),y=CE(e,E);((w==null?void 0:w.isHandMode(e,v))||O.isPointer(e,ln.hand)||s8(e,v)&&!y||p)&&ju(v)?(f={x:v.x,y:v.y},O.isPointer(e,ln.hand)||O.getBoardContainer(e).classList.add("viewport-moving")):TO(v)&&(d=!0,v.preventDefault(),f={x:v.x,y:v.y},a=!0,O.getBoardContainer(e).classList.add("viewport-moving")),h=v,t(v)},e.pointerMove=v=>{const w=e.getPluginOptions(Gu.withHand),E=cE+4;if(f&&!a&&!ji(e)&&h&&Et(h.x,h.y,v.x,v.y)>E&&!u0(e)&&(a=!0,O.getBoardContainer(e).classList.add("viewport-moving")),((w==null?void 0:w.isHandMode(e,v))||O.isPointer(e,ln.hand)||s8(e,v)||d||p)&&a&&f&&!ji(e)&&!u0(e)){const S=O.getViewportContainer(e),A=S.scrollLeft-(v.x-f.x),B=S.scrollTop-(v.y-f.y);BE(e,A,B,!1),f.x=v.x,f.y=v.y}n(v)},e.pointerUp=v=>{a||s(v)},e.globalPointerUp=v=>{f&&(f=null),a=!1,O.getBoardContainer(e).classList.remove("viewport-moving"),d=!1,r(v)},e.keyDown=v=>{v.code===u8&&(O.isPointer(e,ln.hand)||(p=!0,O.getBoardContainer(e).classList.add("viewport-moving")),v.preventDefault()),i(v)},e.keyUp=v=>{!e.options.readonly&&v.code===u8&&(p=!0,O.getBoardContainer(e).classList.remove("viewport-moving")),o(v)},e}function jF(e){const{apply:t,keyDown:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:r}=e,{redos:i}=r;if(i.length>0){const o=i[i.length-1];gs.withoutSaving(e,()=>{for(const s of o)e.apply(s)}),r.redos.pop(),r.undos.push(o)}},e.undo=()=>{const{history:r}=e,{undos:i}=r;if(i.length>0){const o=i[i.length-1];gs.withoutSaving(e,()=>{const s=o.map(Gl.inverse).reverse();for(const a of s)e.apply(a)}),r.redos.push(o),r.undos.pop()}},e.apply=r=>{const{operations:i,history:o}=e,{undos:s}=o,a=s[s.length-1],f=a&&a[a.length-1];let h=gs.isSaving(e),d=gs.isMerging(e);if(h==null&&(h=FO(r)),h){if(d||(a==null?d=!1:i.length!==0?d=!0:d=IO(r,f)),gs.isSplittingOnce(e)&&(d=!1,gs.setSplittingOnce(e,void 0)),a&&d)a.push(r);else{const p=[r];s.push(p)}for(;s.length>100;)s.shift();kO(r)&&(o.redos=[])}t(r)},e.keyDown=r=>{if(dn.isHotkey("mod+z",r)){e.undo();return}if(dn.isHotkey("mod+shift+z",r)){e.redo();return}n(r)},e}const zF=e=>{const{keyDown:t,keyUp:n,globalKeyDown:r}=e;return e.keyDown=i=>{const o=e.getPluginOptions(Gu.withSelection);if(!O.isReadonly(e)&&o.isMultipleSelection&&dn.isHotkey("mod+a",i)){i.preventDefault();let a=[];hi(e,f=>{O.isBoard(f)||a.push(f)},f=>!!(O.isBoard(f)||e.isRecursion(f)),!0),Ve.addSelectionWithTemporaryElements(e,a);return}if(!O.isReadonly(e)){if(dn.isKeyHotkey("mod+]",i)){i.preventDefault(),Ve.moveUp(e);return}if(dn.isKeyHotkey("mod+[",i)){i.preventDefault(),Ve.moveDown(e);return}if(dn.isKeyHotkey("mod+option+‘",i)){i.preventDefault(),Ve.moveToTop(e);return}if(dn.isKeyHotkey("mod+option+“",i)){i.preventDefault(),Ve.moveToBottom(e);return}}const s=qe(e);if(!O.isReadonly(e)&&s.length>0&&dn.isKeyHotkey("mod+d",i)){i.preventDefault(),Aw(e);return}!O.isReadonly(e)&&s.length>0&&(Di.isDeleteBackward(i)||Di.isDeleteForward(i))&&(i.preventDefault(),Tw(e)),t(i)},e.keyUp=i=>{n(i)},e.globalKeyDown=i=>{if(O.getMovingPointInBoard(e)||O.isMovingPointInBoard(e)){if(dn.isHotkey(["mod+=","mod++"],{byKey:!0})(i)){i.preventDefault(),Bn.updateZoom(e,e.viewport.zoom+.1);return}if(dn.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(i)){i.preventDefault(),Bn.fitViewport(e);return}if(dn.isHotkey(["mod+-","mod+shift+-"])(i)){i.preventDefault(),Bn.updateZoom(e,e.viewport.zoom-.1);return}if(dn.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(i)){i.preventDefault(),Bn.updateZoom(e,1);return}}r(i)},e};function VF(e,t,n){const r=$E(e,n),i=Gt();let o=XF(t,r);const s=YF(e,o,t,r);i.append(s);const a=qF(e,o,t,r);return o=a.snapDelta,i.append(a.snapG),{...o,snapG:i}}function UF(e,t,n){const r=Nf(e,n),i=dg(t,r[0],n),o=dg(t,r[1],n),s=dg(t,r[2],n);return[i,o,s]}function XF(e,t){let n={deltaX:0,deltaY:0};function r(i){let o=0;const s=UF(e,t,i);for(let a=0;a<s.length;a++)if(Math.abs(s[a])<_a){o=s[a];break}return o}return n.deltaX=r(!0),n.deltaY=r(!1),n}function KF(e,t){const{deltaX:n,deltaY:r}=e,{x:i,y:o,width:s,height:a}=t;return{x:i+n,y:o+r,width:s,height:a}}function YF(e,t,n,r){const i=KF(t,n);return jE(e,i,r,!0,!0,!0)}function qF(e,t,n,r){let i=t.deltaX,o=t.deltaY;const s=a8(n,r,!0),a=a8(n,r,!1),f=[...s.lines,...a.lines];return s.delta&&(i=s.delta),a.delta&&(o=a.delta),{snapDelta:{deltaX:i,deltaY:o},snapG:zE(e,f)}}function a8(e,t,n){var B,I;let r=[],i=0,o=[];const s=n?"x":"y",a=n?"width":"height",f=e[s]+e[a]/2;t.forEach(_=>{(n?ZF(_,e):QF(_,e))&&!R.isHit(_,e)&&o.push(_)}),o=[...o,e].sort((_,L)=>_[s]-L[s]);const h=[];let d=0,p,v;for(let _=0;_<o.length;_++)for(let L=_+1;L<o.length;L++){const j=o[_],z=o[L],J=z[s]-(j[s]+j[a]);let ae=1/0;(B=h[_])!=null&&B.after?h[_].after.push({distance:J,index:L}):h[_]={...h[_],after:[{distance:J,index:L}]},(I=h[L])!=null&&I.before?h[L].before.push({distance:J,index:_}):h[L]={...h[L],before:[{distance:J,index:_}]};let ne=(j[s]+j[a]+z[s])/2;ae=Math.abs(ne-f),ae<_a&&(d=(z[s]-(j[s]+j[a])-e[a])/2,i=ne-f,p=_,v=L);const Pe=z[s]-(j[s]+j[a]);ne=z[s]+z[a]+Pe+e[a]/2,ae=Math.abs(ne-f),(!d||d!==Pe)&&ae<_a&&(d=Pe,p=L,i=ne-f);const oe=z[s]-(j[s]+j[a]);ne=j[s]-oe-e[a]/2,ae=Math.abs(ne-f),!d&&ae<_a&&(d=oe,v=_,i=ne-f)}const w=o.indexOf(e);let E=[],y=[];if(p!==void 0&&(E.push(p),S(d,h[p],"before",E)),v!==void 0&&(y.push(v),S(d,h[v],"after",y)),E.length||y.length){const _=[...E.reverse(),w,...y];e[s]+=i;for(let L=1;L<_.length;L++)r.push(A(o[_[L-1]],o[_[L]]))}function S(_,L,j,z){const J=L[j],ae=h.indexOf(L);if(!(ae===0&&j==="before"||ae===h.length-1&&j==="after")){for(let ne=0;ne<J.length;ne++)if(Math.abs(J[ne].distance-_)<.1){z.push(J[ne].index),S(_,h[J[ne].index],j,z);return}}}function A(_,L){const j=s==="x"?"y":"x",z=a==="width"?"height":"width",ae=[_[j],_[j]+_[z],L[j],L[j]+L[z]].sort((oe,ce)=>oe-ce),ne=(ae[1]+ae[2])/2,Pe=3;return n?[[_.x+_.width+Pe,ne],[L.x-Pe,ne]]:[[ne,_.y+_.height+Pe],[ne,L.y-Pe]]}return{delta:i,lines:r}}function ZF(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height)}function QF(e,t){return!(e.x+e.width<t.x||e.x>t.x+t.width)}function JF(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,globalPointerMove:i,globalKeyDown:o,keyUp:s}=e;let a=0,f=0,h=!1,d,p=[],v=null,w=null,E=null,y,S,A=null;e.globalKeyDown=I=>{O.isReadonly(e)||dn.isKeyHotkey("option",I)&&(I.preventDefault(),d&&p.length&&!O.hasBeenTextEditing(e)&&(A=l8(e,p,a,f),A&&O.getElementTopHost(e).append(A))),o(I)},e.keyUp=I=>{if(!O.isReadonly(e)&&A&&d&&p.length&&!O.hasBeenTextEditing(e)){I.preventDefault();const _=d5(e,p,a,f);O.getBoardContainer(e).classList.add("element-moving"),Y6(e,_)}A==null||A.remove(),s(I)},e.pointerDown=I=>{if(O.isReadonly(e)||!O.isPointer(e,ln.selection)||!ju(I)){t(I);return}const _=bt(e,Ot(e,I.x,I.y));if(y=lc(e,_,L=>e.isMovable(L)),E=aP(e),S=y&&E.includes(y),y&&S)d=_,p=E,w=on(e,p,!0);else if(y){d=_;const L=e.getRelatedFragment([],[y]);p=[...Pw(e,y),...L],w=on(e,p,!0)}else{const L=E.length>0&&on(e,E,!1);L&&R.isPointInRectangle(L,_)&&(d=_,p=E,w=L)}t(I)},e.pointerMove=I=>{if(d&&p.length&&!O.hasBeenTextEditing(e)){h||(h=!0),v==null||v.remove(),A==null||A.remove();const _=bt(e,Ot(e,I.x,I.y));a=_[0]-d[0],f=_[1]-d[1],(Et(..._,...d)>iw||hI(e).length>0)&&(y&&!S&&E&&E.length>0&&(qE(e,[]),y=void 0,E=null,S=void 0),Ga(e,"with-moving",()=>{if(!w)return;const j={...w,x:w.x+a,y:w.y+f},z=sp(j,go(p)),J=VF(e,z,p);if(a+=J.deltaX,f+=J.deltaY,v=J.snapG,v.classList.add(aE),O.getElementTopHost(e).append(v),I.altKey)A=l8(e,p,a,f),A&&O.getElementTopHost(e).append(A);else{const ae=d5(e,p,a,f);O.getBoardContainer(e).classList.add("element-moving"),Y6(e,ae)}}))}h&&I.preventDefault(),n(I)},e.globalPointerMove=I=>{d&&(wO(e,I.x,I.y)||B(e)),i(I)},e.globalPointerUp=I=>{if(I.altKey&&p.length){const _=Bw(e,p),L=on(e,_,!1);Aw(e,_,[L.x+a,L.y+f])}h=!1,y=void 0,E=null,S=void 0,d&&B(e),r(I)};function B(I){v==null||v.remove(),A==null||A.remove(),d=null,w=null,a=0,f=0,p=[],u0(I)&&dI(I),Vr.set(I,!1),O.getBoardContainer(I).classList.remove("element-moving")}return ek(e)}function ek(e){const{keyDown:t,keyUp:n}=e;return e.keyDown=r=>{const i=qe(e);if(!O.isReadonly(e)&&i.length>0&&(Di.isArrow(r)||Di.isExtendArrow(r))){r.preventDefault();const o=!!r.shiftKey,s=[0,0],a=o?10:1;switch(!0){case(Di.isMoveUp(r)||Di.isExtendUp(r)):{s[1]=-a;break}case(Di.isMoveDown(r)||Di.isExtendDown(r)):{s[1]=a;break}case(Di.isMoveBackward(r)||Di.isExtendBackward(r)):{s[0]=-a;break}case(Di.isMoveForward(r)||Di.isExtendForward(r)):{s[0]=a;break}}const f=aP(e);Ga(e,"with-arrow-moving",()=>{d5(e,f,s[0],s[1])})}t(r)},e.keyUp=r=>{Vr.set(e,!1),n(r)},e}function aP(e){const t=qe(e),n=e.children.filter(o=>e.isMovable(o)),r=t.filter(o=>n.includes(o)),i=e.getRelatedFragment([]);return r.push(...i),r}function Bw(e,t){return[...t].filter(r=>!yo.isGroup(r)&&pn.isRootElement(r))}function d5(e,t,n,r){return Bw(e,t).map(s=>{const f=(s.points||[]).map(d=>[d[0]+n,d[1]+r]),h=Yd.get(s);return Ve.setNode(e,{points:f},[h]),Vr.set(e,!0),Vt.get(e,[h])})}function l8(e,t,n,r){let i=null;const o=[];return Bw(e,t).forEach(a=>{hi(a,f=>{o.push(f)},()=>!0)}),o.forEach(a=>{let f=e.getRectangle(a);if(f){f={x:f.x+n,y:f.y+r,width:f.width,height:f.height};const h=su(e,f,{stroke:vo,strokeWidth:1,fill:pw,fillStyle:"solid"});i||(i=Gt(),i.classList.add(aE));const d=PF(a);d&&Es(h,R.getCenterPoint(f),d),i.append(h)}}),i}const tk=e=>{const t=new Map,n=e;return n.getPluginOptions=r=>t.get(r),n.setPluginOptions=(r,i)=>{const o=n.getPluginOptions(r)||{};t.set(r,{...o,...i})},n};function nk(e){const{buildFragment:t}=e;return e.buildFragment=(n,r,i,o)=>{let s=e.getRelatedFragment(o||[]);if(s&&(o!=null&&o.length&&(s=s.filter(a=>!o.map(f=>f.id).includes(a.id))),s.length)){const a={text:"",type:Wa.elements,elements:s};n=$v(n,a)}return t(n,r,i,o)},e}function rk(e){const{pointerDown:t,pointerUp:n,pointerMove:r,globalPointerUp:i,onChange:o,afterChange:s,drawSelectionRectangle:a}=e;let f=null,h=null,d,p,v=!1,w=null,E=null;return e.pointerDown=y=>{!v&&y.shiftKey&&(v=!0),v&&!y.shiftKey&&(v=!1);const S=bt(e,Ot(e,y.x,y.y)),A=CE(e,S),B=vm(e);O.isPointer(e,ln.selection)&&ju(y)&&!A&&B.isMultipleSelection&&!B.isDisabledSelection&&(KE(y)?w=setTimeout(()=>{f=[y.x,y.y],w=null},120):f=[y.x,y.y]),E=y,t(y)},e.pointerMove=y=>{if(w&&E&&Et(E.x,E.y,y.x,y.y)>cE&&(clearTimeout(w),w=null),O.isPointer(e,ln.selection)&&f){y.preventDefault(),h=[y.x,y.y];const S=R.getRectangleByPoints([_f(e,...f),_f(e,...h)]);d==null||d.remove(),Ga(e,"with-selection",()=>{f&&h&&Ve.setSelection(e,{anchor:bt(e,Ot(e,f[0],f[1])),focus:bt(e,Ot(e,h[0],h[1]))})}),LI(e),d=su(e,S,{stroke:vo,strokeWidth:1,fill:pw,fillStyle:"solid"}),O.getActiveHost(e).append(d)}r(y)},e.pointerUp=y=>{const S=O.isPointer(e,ln.selection)||O.isPointer(e,ln.hand);if(!ju(y)||s0(e)||!S){n(y);return}const B=bt(e,Ot(e,y.x,y.y)),I={anchor:B,focus:B};Ve.setSelection(e,I),n(y)},e.globalPointerUp=y=>{f&&h&&(d==null||d.remove(),_I(e),Ve.setSelection(e,{anchor:bt(e,Ot(e,f[0],f[1])),focus:bt(e,Ot(e,h[0],h[1]))}));const S=vm(e);if(O.isFocus(e)&&!S.isPreventClearSelection){const A=y.target instanceof Node&&O.getBoardContainer(e).contains(y.target),B=y.target instanceof Node&&document.contains(y.target),I=y.target instanceof Element&&y.target.closest(`.${Ya}`);!A&&!f&&!I&&B&&Ve.setSelection(e,null)}f=null,h=null,w&&(clearTimeout(w),w=null),E=null,i(y)},e.onChange=()=>{const y=vm(e);if(y.isDisabledSelection&&y0(e),e.operations.forEach(S=>{S.type==="remove_node"&&Hv(e,S.node,!0)}),J6(e)&&e8(e))try{v||p==null||p.remove();const S=NI(e);if(S)Nu(e,[...S]);else{let B=yE(e);!y.isMultipleSelection&&B.length>1&&(B=[B[0]]);const I=B.some(L=>L.groupId),_=qe(e);if(I)$I(e,B,v);else{if(e.selection&&o0.isCollapsed(e.selection)){const L=e.getOneHitElement(B);L&&(B=[L])}if(v){const L=[..._];e.selection&&o0.isCollapsed(e.selection)?(B.forEach(j=>{L.includes(j)?L.splice(L.indexOf(j),1):L.push(j)}),Nu(e,L)):(B.forEach(j=>{L.includes(j)||L.push(j)}),Nu(e,[...L]))}else Nu(e,[...B])}}const A=qe(e);GI(e),ji(e)||(p==null||p.remove(),A.length>1&&(p=e.drawSelectionRectangle(),O.getActiveHost(e).append(p)))}catch(S){console.error(S)}o()},e.afterChange=()=>{if(J6(e)&&!e8(e))try{const y=qe(e);y.length&&y.length>1?(p==null||p.remove(),p=e.drawSelectionRectangle(),O.getActiveHost(e).append(p)):p==null||p.remove()}catch(y){console.error(y)}s()},VI(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const ik=e=>{const t=e;return t.getI18nValue=n=>(console.warn(`I18n key "${n}" is not found.`),null),t},jv=(e,t,n="")=>e.getI18nValue(t)||n;var F7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var c8;function ok(){return c8||(c8=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)t.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(F7)),F7.exports}var sk=ok();const On=uc(sk);var uk=function(e){return typeof e=="function"};function f8(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function lP(e){var t=W.useRef(e);return t.current=e,t}var ak=function(e){var t=lP(e);W.useEffect(function(){return function(){t.current()}},[])},k7,h8;function Rw(){if(h8)return k7;h8=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return k7=e,k7}var L7,d8;function lk(){if(d8)return L7;d8=1;var e=typeof vs=="object"&&vs&&vs.Object===Object&&vs;return L7=e,L7}var _7,g8;function cP(){if(g8)return _7;g8=1;var e=lk(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return _7=n,_7}var N7,p8;function ck(){if(p8)return N7;p8=1;var e=cP(),t=function(){return e.Date.now()};return N7=t,N7}var H7,m8;function fk(){if(m8)return H7;m8=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return H7=t,H7}var G7,v8;function hk(){if(v8)return G7;v8=1;var e=fk(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return G7=n,G7}var W7,y8;function fP(){if(y8)return W7;y8=1;var e=cP(),t=e.Symbol;return W7=t,W7}var $7,w8;function dk(){if(w8)return $7;w8=1;var e=fP(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(s){var a=n.call(s,i),f=s[i];try{s[i]=void 0;var h=!0}catch{}var d=r.call(s);return h&&(a?s[i]=f:delete s[i]),d}return $7=o,$7}var j7,C8;function gk(){if(C8)return j7;C8=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return j7=n,j7}var z7,x8;function pk(){if(x8)return z7;x8=1;var e=fP(),t=dk(),n=gk(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function s(a){return a==null?a===void 0?i:r:o&&o in Object(a)?t(a):n(a)}return z7=s,z7}var V7,E8;function mk(){if(E8)return V7;E8=1;function e(t){return t!=null&&typeof t=="object"}return V7=e,V7}var U7,P8;function vk(){if(P8)return U7;P8=1;var e=pk(),t=mk(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return U7=r,U7}var X7,S8;function yk(){if(S8)return X7;S8=1;var e=hk(),t=Rw(),n=vk(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function f(h){if(typeof h=="number")return h;if(n(h))return r;if(t(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=t(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=e(h);var p=o.test(h);return p||s.test(h)?a(h.slice(2),p?2:8):i.test(h)?r:+h}return X7=f,X7}var K7,D8;function hP(){if(D8)return K7;D8=1;var e=Rw(),t=ck(),n=yk(),r="Expected a function",i=Math.max,o=Math.min;function s(a,f,h){var d,p,v,w,E,y,S=0,A=!1,B=!1,I=!0;if(typeof a!="function")throw new TypeError(r);f=n(f)||0,e(h)&&(A=!!h.leading,B="maxWait"in h,v=B?i(n(h.maxWait)||0,f):v,I="trailing"in h?!!h.trailing:I);function _(ce){var me=d,ye=p;return d=p=void 0,S=ce,w=a.apply(ye,me),w}function L(ce){return S=ce,E=setTimeout(J,f),A?_(ce):w}function j(ce){var me=ce-y,ye=ce-S,Fe=f-me;return B?o(Fe,v-ye):Fe}function z(ce){var me=ce-y,ye=ce-S;return y===void 0||me>=f||me<0||B&&ye>=v}function J(){var ce=t();if(z(ce))return ae(ce);E=setTimeout(J,j(ce))}function ae(ce){return E=void 0,I&&d?_(ce):(d=p=void 0,w)}function ne(){E!==void 0&&clearTimeout(E),S=0,d=y=p=E=void 0}function Pe(){return E===void 0?w:ae(t())}function oe(){var ce=t(),me=z(ce);if(d=arguments,p=this,y=ce,me){if(E===void 0)return L(y);if(B)return clearTimeout(E),E=setTimeout(J,f),_(y)}return E===void 0&&(E=setTimeout(J,f)),w}return oe.cancel=ne,oe.flush=Pe,oe}return K7=s,K7}var wk=hP();const Ck=uc(wk);var xk=!!(typeof window<"u"&&window.document&&window.document.createElement),Y7,T8;function Ek(){if(T8)return Y7;T8=1;var e=hP(),t=Rw(),n="Expected a function";function r(i,o,s){var a=!0,f=!0;if(typeof i!="function")throw new TypeError(n);return t(s)&&(a="leading"in s?!!s.leading:a,f="trailing"in s?!!s.trailing:f),e(i,o,{leading:a,maxWait:o,trailing:f})}return Y7=r,Y7}var Pk=Ek();const Sk=uc(Pk);function dP(e,t){if(xk){if(!e)return t;var n;return uk(e)?n=e():"current"in e?n=e.current:n=e,n}}var Dk=function(e){var t=function(n,r,i){var o=W.useRef(!1),s=W.useRef([]),a=W.useRef([]),f=W.useRef();e(function(){var h,d=Array.isArray(i)?i:[i],p=d.map(function(v){return dP(v)});if(!o.current){o.current=!0,s.current=p,a.current=r,f.current=n();return}(p.length!==s.current.length||!f8(s.current,p)||!f8(a.current,r))&&((h=f.current)===null||h===void 0||h.call(f),s.current=p,a.current=r,f.current=n())}),ak(function(){var h;(h=f.current)===null||h===void 0||h.call(f),o.current=!1})};return t},Tk=Dk(W.useEffect);function Ni(e,t,n){n===void 0&&(n={});var r=n.enable,i=r===void 0?!0:r,o=lP(t);Tk(function(){if(i){var s=dP(n.target,window);if(s!=null&&s.addEventListener){var a=function(h){return o.current(h)},f=Array.isArray(e)?e:[e];return f.forEach(function(h){s.addEventListener(h,a,{capture:n.capture,once:n.once,passive:n.passive})}),function(){f.forEach(function(h){s.removeEventListener(h,a,{capture:n.capture})})}}}},[e,n.capture,n.once,n.passive,i],n.target)}const Ak=(e,t,n)=>{Ni("pointerdown",r=>{e.pointerDown(r)},{target:n}),Ni("pointermove",r=>{t5.set(e,[r.x,r.y]),e.pointerMove(r)},{target:t}),Ni("pointerleave",r=>{t5.delete(e),e.pointerLeave(r)},{target:t}),Ni("pointerup",r=>{e.pointerUp(r)},{target:t}),Ni("dblclick",r=>{O.isFocus(e)&&!O.hasBeenTextEditing(e)&&e.dblClick(r)},{target:n}),Ni("pointermove",r=>{hE.set(e,[r.x,r.y]),e.globalPointerMove(r)}),Ni("pointerup",r=>{e.globalPointerUp(r)}),Ni("keydown",r=>{e.globalKeyDown(r),O.isFocus(e)&&!O.hasBeenTextEditing(e)&&!DO(r.target)&&e.keyDown(r)}),Ni("keyup",r=>{O.isFocus(e)&&!O.hasBeenTextEditing(e)&&(e==null||e.keyUp(r))}),Ni("copy",r=>{O.isFocus(e)&&!O.hasBeenTextEditing(e)&&(r.preventDefault(),t8(e,ru.copy,r.clipboardData))}),Ni("paste",async r=>{if(O.isFocus(e)&&!O.isReadonly(e)&&!O.hasBeenTextEditing(e)){const i=O.getMovingPointInBoard(e);if(i){const o=bt(e,Ot(e,i[0],i[1])),s=await FI(r.clipboardData);e.insertFragment(s,o,ru.paste)}}}),Ni("cut",r=>{O.isFocus(e)&&!O.isReadonly(e)&&!O.hasBeenTextEditing(e)&&(r.preventDefault(),t8(e,ru.cut,r.clipboardData),Tw(e))})},Bk=(e,t)=>{Ni("scroll",r=>{if(sI(e))OE(e,!1);else{const{scrollLeft:i,scrollTop:o}=r.target;RE(e,i,o)}},{target:t}),Ni("touchstart",r=>{r.preventDefault()},{target:t,passive:!1}),Ni("wheel",r=>{if(r.metaKey||r.ctrlKey){r.preventDefault();const{deltaX:i,deltaY:o}=r,s=e.viewport.zoom,a=Math.sign(o),f=nO*100,h=Math.abs(o);let d=o;h>f&&(d=f*a);let p=s-d/100;p+=Math.log10(Math.max(1,s))*-a*Math.min(1,h/20),Bn.updateZoom(e,p,O.getMovingPointInBoard(e))}},{target:t,passive:!1});const n=W.useRef(!1);W.useEffect(()=>{const r=new ResizeObserver(()=>{if(!n.current){n.current=!0;return}yw(e),ww(e),jm(e)});return r.observe(O.getBoardContainer(e)),()=>{r&&r.disconnect()}},[])},Mw=W.createContext(null),di=()=>{const e=W.useContext(Mw);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:t}=e;return t},gP=()=>{const e=W.useContext(Mw);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:t}=e;return t},pP=({style:e,className:t,children:n,afterInit:r})=>{var E,y;const i=W.useRef(null),o=W.useRef(null),s=W.useRef(null),a=W.useRef(null),f=W.useRef(null),h=W.useRef(null),d=W.useRef(null),p=W.useRef(null),v=di(),w=gP();return W.useEffect(()=>{const S=XM.svg(i.current,{options:{roughness:0,strokeWidth:1}});Zy.set(v,S),Qy.set(v,i.current),e5.set(v,!0),Ma.set(v,{lowerHost:o.current,host:s.current,upperHost:a.current,topHost:f.current,activeHost:h.current,container:p.current,viewportContainer:d.current});const A=new NF;return Jy.set(v,A),Yy.set(v,new Map),w.initialized||(w.initialize(v.children,{board:v,parent:v,parentG:O.getElementHost(v)}),r&&r(v)),yw(v),ww(v),rI(v),()=>{Jy.delete(v),Hm.delete(v),Nm.delete(v),Ma.delete(v),e5.delete(v),Qy.delete(v),Zy.delete(v),Yy.delete(v)}},[]),Ak(v,d,i),Bk(v,d),b.jsx("div",{className:On(t,rO,`${Rk()}`,`theme-${(E=v.theme)==null?void 0:E.themeColorMode}`,`pointer-${v.pointer}`,{focused:O.isFocus(v),readonly:O.isReadonly(v),"disabled-scroll":((y=v.options)==null?void 0:y.disabledScrollOnNonFocus)&&!O.isFocus(v)}),ref:p,style:e,children:b.jsxs("div",{className:"viewport-container",ref:d,style:{width:"100%",height:"100%",overflow:"auto"},children:[b.jsxs("svg",{ref:i,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[b.jsx("g",{className:"element-lower-host",ref:o}),b.jsx("g",{className:"element-host",ref:s}),b.jsx("g",{className:"element-upper-host",ref:a}),b.jsx("g",{className:"element-top-host",ref:f})]}),b.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:b.jsx("g",{className:"active-host-g",ref:h})}),n]})})},Rk=()=>bO?"safari":OO?"chrome":MO?"firefox":"";/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function A8(e){return Object.prototype.toString.call(e)==="[object Object]"}function si(e){var t,n;return A8(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(A8(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var Mk={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=q.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},bk={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=Yt.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},Ok={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=De.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},Um=new WeakMap,Xm=new WeakMap,gg=new WeakMap,mP=new WeakMap,B8=new WeakMap,R8=new WeakMap,M8=new WeakMap,q={ancestors(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=q.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var i=e[r],o=t[r];if(i!==o)break;n.push(i)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return q.equals(r,i)&&o>s},endsAt(e,t){var n=e.length,r=e.slice(0,n),i=t.slice(0,n);return q.equals(r,i)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return q.equals(r,i)&&o<s},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,t){return q.compare(e,t)===1},isAncestor(e,t){return e.length<t.length&&q.compare(e,t)===0},isBefore(e,t){return q.compare(e,t)===-1},isChild(e,t){return e.length===t.length+1&&q.compare(e,t)===0},isCommon(e,t){return e.length<=t.length&&q.compare(e,t)===0},isDescendant(e,t){return e.length>t.length&&q.compare(e,t)===0},isParent(e,t){return e.length+1===t.length&&q.compare(e,t)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&q.equals(n,r)},levels(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=[],i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!q.isAncestor(t,e)&&!q.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:i="forward"}=n;if(e.length===0)return r;switch(t.type){case"insert_node":{var{path:o}=t;(q.equals(o,r)||q.endsBefore(o,r)||q.isAncestor(o,r))&&(r[o.length-1]+=1);break}case"remove_node":{var{path:s}=t;if(q.equals(s,r)||q.isAncestor(s,r))return null;q.endsBefore(s,r)&&(r[s.length-1]-=1);break}case"merge_node":{var{path:a,position:f}=t;q.equals(a,r)||q.endsBefore(a,r)?r[a.length-1]-=1:q.isAncestor(a,r)&&(r[a.length-1]-=1,r[a.length]+=f);break}case"split_node":{var{path:h,position:d}=t;if(q.equals(h,r)){if(i==="forward")r[r.length-1]+=1;else if(i!=="backward")return null}else q.endsBefore(h,r)?r[h.length-1]+=1:q.isAncestor(h,r)&&e[h.length]>=d&&(r[h.length-1]+=1,r[h.length]-=d);break}case"move_node":{var{path:p,newPath:v}=t;if(q.equals(p,v))return r;if(q.isAncestor(p,r)||q.equals(p,r)){var w=v.slice();return q.endsBefore(p,v)&&p.length<v.length&&(w[p.length-1]-=1),w.concat(r.slice(p.length))}else q.isSibling(p,v)&&(q.isAncestor(v,r)||q.equals(v,r))?q.endsBefore(p,r)?r[p.length-1]-=1:r[p.length-1]+=1:q.endsBefore(v,r)||q.equals(v,r)||q.isAncestor(v,r)?(q.endsBefore(p,r)&&(r[p.length-1]-=1),r[v.length-1]+=1):q.endsBefore(p,r)&&(q.equals(v,r)&&(r[v.length-1]+=1),r[p.length-1]-=1);break}}return r}};function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function Ik(e,t){if(bg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fk(e){var t=Ik(e,"string");return bg(t)==="symbol"?t:String(t)}function zi(e,t,n){return t=Fk(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ng(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var kk=(e,t,n)=>{switch(n.type){case"insert_node":{var{path:r,node:i}=n,o=$e.parent(e,r),s=r[r.length-1];if(s>o.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(o.children.splice(s,0,i),t)for(var[a,f]of De.points(t))t[f]=Yt.transform(a,n);break}case"insert_text":{var{path:h,offset:d,text:p}=n;if(p.length===0)break;var v=$e.leaf(e,h),w=v.text.slice(0,d),E=v.text.slice(d);if(v.text=w+p+E,t)for(var[y,S]of De.points(t))t[S]=Yt.transform(y,n);break}case"merge_node":{var{path:A}=n,B=$e.get(e,A),I=q.previous(A),_=$e.get(e,I),L=$e.parent(e,A),j=A[A.length-1];if(ot.isText(B)&&ot.isText(_))_.text+=B.text;else if(!ot.isText(B)&&!ot.isText(_))_.children.push(...B.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(A,"] to nodes of different interfaces: ").concat(Ur.stringify(B)," ").concat(Ur.stringify(_)));if(L.children.splice(j,1),t)for(var[z,J]of De.points(t))t[J]=Yt.transform(z,n);break}case"move_node":{var{path:ae,newPath:ne}=n;if(q.isAncestor(ae,ne))throw new Error("Cannot move a path [".concat(ae,"] to new path [").concat(ne,"] because the destination is inside itself."));var Pe=$e.get(e,ae),oe=$e.parent(e,ae),ce=ae[ae.length-1];oe.children.splice(ce,1);var me=q.transform(ae,n),ye=$e.get(e,q.parent(me)),Fe=me[me.length-1];if(ye.children.splice(Fe,0,Pe),t)for(var[Te,ge]of De.points(t))t[ge]=Yt.transform(Te,n);break}case"remove_node":{var{path:se}=n,we=se[se.length-1],X=$e.parent(e,se);if(X.children.splice(we,1),t)for(var[Ee,st]of De.points(t)){var Me=Yt.transform(Ee,n);if(t!=null&&Me!=null)t[st]=Me;else{var K=void 0,fe=void 0;for(var[Ce,Se]of $e.texts(e))if(q.compare(Se,se)===-1)K=[Ce,Se];else{fe=[Ce,Se];break}var Ke=!1;K&&fe&&(q.equals(fe[1],se)?Ke=!q.hasPrevious(fe[1]):Ke=q.common(K[1],se).length<q.common(fe[1],se).length),K&&!Ke?(Ee.path=K[1],Ee.offset=K[0].text.length):fe?(Ee.path=fe[1],Ee.offset=0):t=null}}break}case"remove_text":{var{path:Ue,offset:Bt,text:It}=n;if(It.length===0)break;var St=$e.leaf(e,Ue),lt=St.text.slice(0,Bt),yt=St.text.slice(Bt+It.length);if(St.text=lt+yt,t)for(var[wn,Rt]of De.points(t))t[Rt]=Yt.transform(wn,n);break}case"set_node":{var{path:Nn,properties:rr,newProperties:Dn}=n;if(Nn.length===0)throw new Error("Cannot set properties on the root node!");var en=$e.get(e,Nn);for(var tn in Dn){if(tn==="children"||tn==="text")throw new Error('Cannot set the "'.concat(tn,'" property of nodes!'));var Kn=Dn[tn];Kn==null?delete en[tn]:en[tn]=Kn}for(var Hn in rr)Dn.hasOwnProperty(Hn)||delete en[Hn];break}case"set_selection":{var{newProperties:Wt}=n;if(Wt==null)t=Wt;else{if(t==null){if(!De.isRange(Wt))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Ur.stringify(Wt)," when there is no current selection."));t=ng({},Wt)}for(var Sr in Wt){var vr=Wt[Sr];if(vr==null){if(Sr==="anchor"||Sr==="focus")throw new Error('Cannot remove the "'.concat(Sr,'" selection property'));delete t[Sr]}else t[Sr]=vr}}break}case"split_node":{var{path:Tn,position:yr,properties:wr}=n;if(Tn.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Tn,"] because the root node cannot be split."));var ir=$e.get(e,Tn),Vi=$e.parent(e,Tn),Ui=Tn[Tn.length-1],Xi;if(ot.isText(ir)){var qu=ir.text.slice(0,yr),Rs=ir.text.slice(yr);ir.text=qu,Xi=ng(ng({},wr),{},{text:Rs})}else{var Eo=ir.children.slice(0,yr),au=ir.children.slice(yr);ir.children=Eo,Xi=ng(ng({},wr),{},{children:au})}if(Vi.children.splice(Ui+1,0,Xi),t)for(var[Zu,pi]of De.points(t))t[pi]=Yt.transform(Zu,n);break}}return t},Lk={transform(e,t){e.children=Nd(e.children);var n=e.selection&&Nd(e.selection);try{n=kk(e,n,t)}finally{e.children=Hd(e.children),n?e.selection=Hu(n)?Hd(n):n:e.selection=null}}},_k={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},Nk={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},vP=(e,t)=>{for(var n in e){var r=e[n],i=t[n];if(si(r)&&si(i)){if(!vP(r,i))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==i[o])return!1}else if(r!==i)return!1}for(var s in t)if(e[s]===void 0&&t[s]!==void 0)return!1;return!0};function Hk(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function $a(e,t){if(e==null)return{};var n=Hk(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Gk=["anchor","focus"];function O8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var De={edges(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:i}=e;return De.isBackward(e)===n?[r,i]:[i,r]},end(e){var[,t]=De.edges(e);return t},equals(e,t){return Yt.equals(e.anchor,t.anchor)&&Yt.equals(e.focus,t.focus)},includes(e,t){if(De.isRange(t)){if(De.includes(e,t.anchor)||De.includes(e,t.focus))return!0;var[n,r]=De.edges(e),[i,o]=De.edges(t);return Yt.isBefore(n,i)&&Yt.isAfter(r,o)}var[s,a]=De.edges(e),f=!1,h=!1;return Yt.isPoint(t)?(f=Yt.compare(t,s)>=0,h=Yt.compare(t,a)<=0):(f=q.compare(t,s.path)>=0,h=q.compare(t,a.path)<=0),f&&h},intersection(e,t){var n=$a(e,Gk),[r,i]=De.edges(e),[o,s]=De.edges(t),a=Yt.isBefore(r,o)?o:r,f=Yt.isBefore(i,s)?i:s;return Yt.isBefore(f,a)?null:Wk({anchor:a,focus:f},n)},isBackward(e){var{anchor:t,focus:n}=e;return Yt.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return Yt.equals(t,n)},isExpanded(e){return!De.isCollapsed(e)},isForward(e){return!De.isBackward(e)},isRange(e){return si(e)&&Yt.isPoint(e.anchor)&&Yt.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=De.edges(e);return t},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ew(e,r=>{if(r===null)return null;var{affinity:i="inward"}=n,o,s;if(i==="inward"){var a=De.isCollapsed(r);De.isForward(r)?(o="forward",s=a?o:"backward"):(o="backward",s=a?o:"forward")}else i==="outward"?De.isForward(r)?(o="backward",s="forward"):(o="forward",s="backward"):(o=i,s=i);var f=Yt.transform(r.anchor,t,{affinity:o}),h=Yt.transform(r.focus,t,{affinity:s});if(!f||!h)return null;r.anchor=f,r.focus=h})}},I8=e=>si(e)&&$e.isNodeList(e.children)&&!F.isEditor(e),at={isAncestor(e){return si(e)&&$e.isNodeList(e.children)},isElement:I8,isElementList(e){return Array.isArray(e)&&e.every(t=>at.isElement(t))},isElementProps(e){return e.children!==void 0},isElementType:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return I8(t)&&t[r]===n},matches(e,t){for(var n in t)if(n!=="children"&&e[n]!==t[n])return!1;return!0}},$k=["children"],jk=["text"],F8=new WeakMap,$e={ancestor(e,t){var n=$e.get(e,t);if(ot.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(Ur.stringify(n)));return n},ancestors(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of q.ancestors(t,n)){var i=$e.ancestor(e,r),o=[i,r];yield o}}()},child(e,t){if(ot.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Ur.stringify(e)));var n=e.children[t];if(n==null)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(Ur.stringify(e)));return n},children(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,i=$e.ancestor(e,t),{children:o}=i,s=r?o.length-1:0;r?s>=0:s<o.length;){var a=$e.child(i,s),f=t.concat(s);yield[a,f],s=r?s-1:s+1}}()},common(e,t,n){var r=q.common(t,n),i=$e.get(e,r);return[i,r]},descendant(e,t){var n=$e.get(e,t);if(F.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(Ur.stringify(n)));return n},descendants(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of $e.nodes(e,t))r.length!==0&&(yield[n,r])}()},elements(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of $e.nodes(e,t))at.isElement(n)&&(yield[n,r])}()},extractProps(e){if(at.isAncestor(e)){var t=$a(e,$k);return t}else{var t=$a(e,jk);return t}},first(e,t){for(var n=t.slice(),r=$e.get(e,n);r&&!(ot.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(ot.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Ur.stringify(e)));var n=ew({children:e.children},r=>{var[i,o]=De.edges(t),s=$e.nodes(r,{reverse:!0,pass:v=>{var[,w]=v;return!De.includes(t,w)}});for(var[,a]of s){if(!De.includes(t,a)){var f=$e.parent(r,a),h=a[a.length-1];f.children.splice(h,1)}if(q.equals(a,o.path)){var d=$e.leaf(r,a);d.text=d.text.slice(0,o.offset)}if(q.equals(a,i.path)){var p=$e.leaf(r,a);p.text=p.text.slice(i.offset)}}F.isEditor(r)&&(r.selection=null)});return n.children},get(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(ot.isText(n)||!n.children[i])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(Ur.stringify(e)));n=n.children[i]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(ot.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(e){return ot.isText(e)||at.isElement(e)||F.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var t=F8.get(e);if(t!==void 0)return t;var n=e.every(r=>$e.isNode(r));return F8.set(e,n),n},last(e,t){for(var n=t.slice(),r=$e.get(e,n);r&&!(ot.isText(r)||r.children.length===0);){var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(e,t){var n=$e.get(e,t);if(!ot.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Ur.stringify(n)));return n},levels(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of q.levels(t,n)){var i=$e.get(e,r);yield[i,r]}}()},matches(e,t){return at.isElement(e)&&at.isElementProps(t)&&at.matches(e,t)||ot.isText(e)&&ot.isTextProps(t)&&ot.matches(e,t)},nodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=t,{from:i=[],to:o}=t,s=new Set,a=[],f=e;!(o&&(r?q.isBefore(a,o):q.isAfter(a,o)));){if(s.has(f)||(yield[f,a]),!s.has(f)&&!ot.isText(f)&&f.children.length!==0&&(n==null||n([f,a])===!1)){s.add(f);var h=r?f.children.length-1:0;q.isAncestor(a,i)&&(h=i[a.length]),a=a.concat(h),f=$e.get(e,a);continue}if(a.length===0)break;if(!r){var d=q.next(a);if($e.has(e,d)){a=d,f=$e.get(e,a);continue}}if(r&&a[a.length-1]!==0){var p=q.previous(a);a=p,f=$e.get(e,a);continue}a=q.parent(a),f=$e.get(e,a),s.add(f)}}()},parent(e,t){var n=q.parent(t),r=$e.get(e,n);if(ot.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string(e){return ot.isText(e)?e.text:e.children.map($e.string).join("")},texts(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of $e.nodes(e,t))ot.isText(n)&&(yield[n,r])}()}};function k8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Oa={isNodeOperation(e){return Oa.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!si(e))return!1;switch(e.type){case"insert_node":return q.isPath(e.path)&&$e.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&q.isPath(e.path);case"merge_node":return typeof e.position=="number"&&q.isPath(e.path)&&si(e.properties);case"move_node":return q.isPath(e.path)&&q.isPath(e.newPath);case"remove_node":return q.isPath(e.path)&&$e.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&q.isPath(e.path);case"set_node":return q.isPath(e.path)&&si(e.properties)&&si(e.newProperties);case"set_selection":return e.properties===null&&De.isRange(e.newProperties)||e.newProperties===null&&De.isRange(e.properties)||si(e.properties)&&si(e.newProperties);case"split_node":return q.isPath(e.path)&&typeof e.position=="number"&&si(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(t=>Oa.isOperation(t))},isSelectionOperation(e){return Oa.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Oa.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return qn(qn({},e),{},{type:"remove_node"});case"insert_text":return qn(qn({},e),{},{type:"remove_text"});case"merge_node":return qn(qn({},e),{},{type:"split_node",path:q.previous(e.path)});case"move_node":{var{newPath:t,path:n}=e;if(q.equals(t,n))return e;if(q.isSibling(n,t))return qn(qn({},e),{},{path:t,newPath:n});var r=q.transform(n,e),i=q.transform(q.next(n),e);return qn(qn({},e),{},{path:r,newPath:i})}case"remove_node":return qn(qn({},e),{},{type:"insert_node"});case"remove_text":return qn(qn({},e),{},{type:"insert_text"});case"set_node":{var{properties:o,newProperties:s}=e;return qn(qn({},e),{},{properties:s,newProperties:o})}case"set_selection":{var{properties:a,newProperties:f}=e;return a==null?qn(qn({},e),{},{properties:f,newProperties:null}):f==null?qn(qn({},e),{},{properties:null,newProperties:a}):qn(qn({},e),{},{properties:f,newProperties:a})}case"split_node":return qn(qn({},e),{},{type:"merge_node",path:q.next(e.path)})}}},L8=new WeakMap,zk=e=>{var t=L8.get(e);if(t!==void 0)return t;if(!si(e))return!1;var n=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||si(e.marks))&&(e.selection===null||De.isRange(e.selection))&&$e.isNodeList(e.children)&&Oa.isOperationList(e.operations);return L8.set(e,n),n},F={above(e,t){return e.above(t)},addMark(e,t,n){e.addMark(t,n)},after(e,t,n){return e.after(t,n)},before(e,t,n){return e.before(t,n)},deleteBackward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges(e,t){return e.edges(t)},elementReadOnly(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(t)},end(e,t){return e.end(t)},first(e,t){return e.first(t)},fragment(e,t){return e.fragment(t)},hasBlocks(e,t){return e.hasBlocks(t)},hasInlines(e,t){return e.hasInlines(t)},hasPath(e,t){return e.hasPath(t)},hasTexts(e,t){return e.hasTexts(t)},insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock(e,t){return e.isBlock(t)},isEdge(e,t,n){return e.isEdge(t,n)},isEditor(e){return zk(e)},isElementReadOnly(e,t){return e.isElementReadOnly(t)},isEmpty(e,t){return e.isEmpty(t)},isEnd(e,t,n){return e.isEnd(t,n)},isInline(e,t){return e.isInline(t)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,t){return e.isSelectable(t)},isStart(e,t,n){return e.isStart(t,n)},isVoid(e,t){return e.isVoid(t)},last(e,t){return e.last(t)},leaf(e,t,n){return e.leaf(t,n)},levels(e,t){return e.levels(t)},marks(e){return e.getMarks()},next(e,t){return e.next(t)},node(e,t,n){return e.node(t,n)},nodes(e,t){return e.nodes(t)},normalize(e,t){e.normalize(t)},parent(e,t,n){return e.parent(t,n)},path(e,t,n){return e.path(t,n)},pathRef(e,t,n){return e.pathRef(t,n)},pathRefs(e){return e.pathRefs()},point(e,t,n){return e.point(t,n)},pointRef(e,t,n){return e.pointRef(t,n)},pointRefs(e){return e.pointRefs()},positions(e,t){return e.positions(t)},previous(e,t){return e.previous(t)},range(e,t,n){return e.range(t,n)},rangeRef(e,t,n){return e.rangeRef(t,n)},rangeRefs(e){return e.rangeRefs()},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start(e,t){return e.start(t)},string(e,t,n){return e.string(t,n)},unhangRange(e,t,n){return e.unhangRange(t,n)},void(e,t){return e.void(t)},withoutNormalizing(e,t){e.withoutNormalizing(t)}},Vk={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(q.isPath)}};function _8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function N8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Yt={compare(e,t){var n=q.compare(e.path,t.path);return n===0?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter(e,t){return Yt.compare(e,t)===1},isBefore(e,t){return Yt.compare(e,t)===-1},equals(e,t){return e.offset===t.offset&&q.equals(e.path,t.path)},isPoint(e){return si(e)&&typeof e.offset=="number"&&q.isPath(e.path)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ew(e,r=>{if(r===null)return null;var{affinity:i="forward"}=n,{path:o,offset:s}=r;switch(t.type){case"insert_node":case"move_node":{r.path=q.transform(o,t,n);break}case"insert_text":{q.equals(t.path,o)&&(t.offset<s||t.offset===s&&i==="forward")&&(r.offset+=t.text.length);break}case"merge_node":{q.equals(t.path,o)&&(r.offset+=t.position),r.path=q.transform(o,t,n);break}case"remove_text":{q.equals(t.path,o)&&t.offset<=s&&(r.offset-=Math.min(s-t.offset,t.text.length));break}case"remove_node":{if(q.equals(t.path,o)||q.isAncestor(t.path,o))return null;r.path=q.transform(o,t,n);break}case"split_node":{if(q.equals(t.path,o)){if(t.position===s&&i==null)return null;(t.position<s||t.position===s&&i==="forward")&&(r.offset-=t.position,r.path=q.transform(o,t,N8(N8({},n),{},{affinity:"forward"})))}else r.path=q.transform(o,t,n);break}}})}},H8=void 0,Ur={setScrubber(e){H8=e},stringify(e){return JSON.stringify(e,H8)}},Uk=["text"],Xk=["anchor","focus"];function G8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ot={equals(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function i(o){var s=$a(o,Uk);return s}return vP(r?i(e):e,r?i(t):t)},isText(e){return si(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(t=>ot.isText(t))},isTextProps(e){return e.text!==void 0},matches(e,t){for(var n in t)if(n!=="text"&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[Ra({},e)];for(var r of t){var i=$a(r,Xk),[o,s]=De.edges(r),a=[],f=0,h=o.offset,d=s.offset;for(var p of n){var{length:v}=p.text,w=f;if(f+=v,h<=w&&f<=d){Object.assign(p,i),a.push(p);continue}if(h!==d&&(h===f||d===w)||h>f||d<w||d===w&&w!==0){a.push(p);continue}var E=p,y=void 0,S=void 0;if(d<f){var A=d-w;S=Ra(Ra({},E),{},{text:E.text.slice(A)}),E=Ra(Ra({},E),{},{text:E.text.slice(0,A)})}if(h>w){var B=h-w;y=Ra(Ra({},E),{},{text:E.text.slice(0,B)}),E=Ra(Ra({},E),{},{text:E.text.slice(B)})}Object.assign(E,i),y&&a.push(y),a.push(E),S&&a.push(S)}n=a}return n}},bw=e=>e.selection?e.selection:e.children.length>0?F.end(e,[]):[0],P0=(e,t)=>{var[n]=F.node(e,t);return r=>r===n},Ow=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,i=n?Jk(t):t,o=_t.None,s=_t.None,a=0,f=null,h=null;for(var d of i){var p=d.codePointAt(0);if(!p)break;var v=fL(d,p);if([o,s]=r?[s,v]:[v,o],Gd(o,_t.ZWJ)&&Gd(s,_t.ExtPict)&&(r?f=W8(t.substring(0,a)):f=W8(t.substring(0,t.length-a)),!f)||Gd(o,_t.RI)&&Gd(s,_t.RI)&&(h!==null?h=!h:r?h=!0:h=mL(t.substring(0,t.length-a)),!h)||o!==_t.None&&s!==_t.None&&dL(o,s))break;a+=d.length}return a||1},Kk=/\s/,Yk=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,qk=/['\u2018\u2019]/,Zk=function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,i=!1;t.length>0;){var o=Ow(t,n),[s,a]=Iw(t,o,n);if(Qk(s,a,n))i=!0,r+=o;else if(!i)r+=o;else break;t=a}return r},Iw=(e,t,n)=>{if(n){var r=e.length-t;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,t),e.slice(t)]},Qk=function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Kk.test(t))return!1;if(qk.test(t)){var i=Ow(n,r),[o,s]=Iw(n,i,r);if(e(o,s,r))return!0}return!Yk.test(t)},Jk=function*(t){for(var n=t.length-1,r=0;r<t.length;r++){var i=t.charAt(n-r);if(tL(i.charCodeAt(0))){var o=t.charAt(n-r-1);if(eL(o.charCodeAt(0))){yield o+i,r++;continue}}yield i}},eL=e=>e>=55296&&e<=56319,tL=e=>e>=56320&&e<=57343,_t;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(_t||(_t={}));var nL=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,rL=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,iL=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,oL=/^[\u1100-\u115F\uA960-\uA97C]$/,sL=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,uL=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,aL=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,lL=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,cL=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,fL=(e,t)=>{var n=_t.Any;return e.search(nL)!==-1&&(n|=_t.Extend),t===8205&&(n|=_t.ZWJ),t>=127462&&t<=127487&&(n|=_t.RI),e.search(rL)!==-1&&(n|=_t.Prepend),e.search(iL)!==-1&&(n|=_t.SpacingMark),e.search(oL)!==-1&&(n|=_t.L),e.search(sL)!==-1&&(n|=_t.V),e.search(uL)!==-1&&(n|=_t.T),e.search(aL)!==-1&&(n|=_t.LV),e.search(lL)!==-1&&(n|=_t.LVT),e.search(cL)!==-1&&(n|=_t.ExtPict),n};function Gd(e,t){return(e&t)!==0}var hL=[[_t.L,_t.L|_t.V|_t.LV|_t.LVT],[_t.LV|_t.V,_t.V|_t.T],[_t.LVT|_t.T,_t.T],[_t.Any,_t.Extend|_t.ZWJ],[_t.Any,_t.SpacingMark],[_t.Prepend,_t.Any],[_t.ZWJ,_t.ExtPict],[_t.RI,_t.RI]];function dL(e,t){return hL.findIndex(n=>Gd(e,n[0])&&Gd(t,n[1]))===-1}var gL=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,W8=e=>e.search(gL)!==-1,pL=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,mL=e=>{var t=e.match(pL);if(t===null)return!1;var n=t[0].length/2;return n%2===1},vL={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(e,()=>{var{voids:r=!1}=n,{at:i=bw(e)}=n;if(q.isPath(i)&&(i=F.range(e,i)),De.isRange(i))if(De.isCollapsed(i))i=i.anchor;else{var o=De.end(i);if(!r&&F.void(e,{at:o}))return;var s=De.start(i),a=F.pointRef(e,s),f=F.pointRef(e,o);Le.delete(e,{at:i,voids:r});var h=a.unref(),d=f.unref();i=h||d,Le.setSelection(e,{anchor:i,focus:i})}if(!(!r&&F.void(e,{at:i})||F.elementReadOnly(e,{at:i}))){var{path:p,offset:v}=i;t.length>0&&e.apply({type:"insert_text",path:p,offset:v,text:t})}})}};function $8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Le=U2(U2(U2(U2({},Lk),_k),Nk),vL),yL=(e,t)=>{for(var n of F.pathRefs(e))Mk.transform(n,t);for(var r of F.pointRefs(e))bk.transform(r,t);for(var i of F.rangeRefs(e))Ok.transform(i,t);var o=Um.get(e)||[],s=Xm.get(e)||new Set,a,f,h=E=>{if(E){var y=E.join(",");f.has(y)||(f.add(y),a.push(E))}};if(q.operationCanTransformPath(t)){a=[],f=new Set;for(var d of o){var p=q.transform(d,t);h(p)}}else a=o,f=s;var v=e.getDirtyPaths(t);for(var w of v)h(w);Um.set(e,a),Xm.set(e,f),Le.transform(e,t),e.operations.push(t),F.normalize(e,{operation:t}),t.type==="set_selection"&&(e.marks=null),gg.get(e)||(gg.set(e,!0),Promise.resolve().then(()=>{gg.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},wL=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=t;return q.levels(n)}case"insert_node":{var{node:r,path:i}=t,o=q.levels(i),s=ot.isText(r)?[]:Array.from($e.nodes(r),ne=>{var[,Pe]=ne;return i.concat(Pe)});return[...o,...s]}case"merge_node":{var{path:a}=t,f=q.ancestors(a),h=q.previous(a);return[...f,h]}case"move_node":{var{path:d,newPath:p}=t;if(q.equals(d,p))return[];var v=[],w=[];for(var E of q.ancestors(d)){var y=q.transform(E,t);v.push(y)}for(var S of q.ancestors(p)){var A=q.transform(S,t);w.push(A)}var B=w[w.length-1],I=p[p.length-1],_=B.concat(I);return[...v,...w,_]}case"remove_node":{var{path:L}=t,j=q.ancestors(L);return[...j]}case"split_node":{var{path:z}=t,J=q.levels(z),ae=q.next(z);return[...J,ae]}default:return[]}},CL=e=>{var{selection:t}=e;return t?$e.fragment(e,t):[]},xL=(e,t)=>{var[n,r]=t;if(!ot.isText(n)){if(at.isElement(n)&&n.children.length===0){var i={text:""};Le.insertNodes(e,i,{at:r.concat(0),voids:!0});return}for(var o=F.isEditor(n)?!1:at.isElement(n)&&(e.isInline(n)||n.children.length===0||ot.isText(n.children[0])||e.isInline(n.children[0])),s=0,a=0;a<n.children.length;a++,s++){var f=$e.get(e,r);if(!ot.isText(f)){var h=f.children[s],d=f.children[s-1],p=a===n.children.length-1,v=ot.isText(h)||at.isElement(h)&&e.isInline(h);if(v!==o)Le.removeNodes(e,{at:r.concat(s),voids:!0}),s--;else if(at.isElement(h)){if(e.isInline(h)){if(d==null||!ot.isText(d)){var w={text:""};Le.insertNodes(e,w,{at:r.concat(s),voids:!0}),s++}else if(p){var E={text:""};Le.insertNodes(e,E,{at:r.concat(s+1),voids:!0}),s++}}}else d!=null&&ot.isText(d)&&(ot.equals(h,d,{loose:!0})?(Le.mergeNodes(e,{at:r.concat(s),voids:!0}),s--):d.text===""?(Le.removeNodes(e,{at:r.concat(s-1),voids:!0}),s--):h.text===""&&(Le.removeNodes(e,{at:r.concat(s),voids:!0}),s--))}}}},EL=(e,t)=>{var{iteration:n,initialDirtyPathsLength:r}=t,i=r*42;if(n>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},PL=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:i="lowest",at:o=t.selection,match:s}=n;if(o){var a=F.path(t,o),f=i==="lowest";for(var[h,d]of F.levels(t,{at:a,voids:r,match:s,reverse:f}))if(!ot.isText(h)){if(De.isRange(o)){if(q.isAncestor(d,o.anchor.path)&&q.isAncestor(d,o.focus.path))return[h,d]}else if(!q.equals(a,d))return[h,d]}}};function j8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function z8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var SL=(e,t,n)=>{var{selection:r}=e;if(r){var i=(p,v)=>{if(!ot.isText(p))return!1;var[w,E]=F.parent(e,v);return!e.isVoid(w)||e.markableVoid(w)},o=De.isExpanded(r),s=!1;if(!o){var[a,f]=F.node(e,r);if(a&&i(a,f)){var[h]=F.parent(e,f);s=h&&e.markableVoid(h)}}if(o||s)Le.setNodes(e,{[t]:n},{match:i,split:!0,voids:!0});else{var d=z8(z8({},F.marks(e)||{}),{},{[t]:n});e.marks=d,gg.get(e)||e.onChange()}}};function V8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var DL=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.point(t,n,{edge:"end"}),o=F.end(t,[]),s={anchor:i,focus:o},{distance:a=1}=r,f=0,h;for(var d of F.positions(t,U8(U8({},r),{},{at:s}))){if(f>a)break;f!==0&&(h=d),f++}return h};function X8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var TL=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.start(t,[]),o=F.point(t,n,{edge:"start"}),s={anchor:i,focus:o},{distance:a=1}=r,f=0,h;for(var d of F.positions(t,K8(K8({},r),{},{at:s,reverse:!0}))){if(f>a)break;f!==0&&(h=d),f++}return h},AL=(e,t)=>{var{selection:n}=e;n&&De.isCollapsed(n)&&Le.delete(e,{unit:t,reverse:!0})},BL=(e,t)=>{var{selection:n}=e;n&&De.isCollapsed(n)&&Le.delete(e,{unit:t})},RL=function(t){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t;r&&De.isExpanded(r)&&Le.delete(t,{reverse:n==="backward"})},ML=(e,t)=>[F.start(e,t),F.end(e,t)];function Y8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function q8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var bL=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return F.above(t,q8(q8({},n),{},{match:r=>at.isElement(r)&&F.isElementReadOnly(t,r)}))},OL=(e,t)=>F.point(e,t,{edge:"end"}),IL=(e,t)=>{var n=F.path(e,t,{edge:"start"});return F.node(e,n)},FL=(e,t)=>{var n=F.range(e,t);return $e.fragment(e,n)};function Z8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var kL=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return F.above(t,Q8(Q8({},n),{},{match:r=>at.isElement(r)&&F.isVoid(t,r)}))},LL=(e,t)=>t.children.some(n=>at.isElement(n)&&F.isBlock(e,n)),_L=(e,t)=>t.children.some(n=>ot.isText(n)||F.isInline(e,n)),NL=(e,t)=>$e.has(e,t),HL=(e,t)=>t.children.every(n=>ot.isText(n)),GL=e=>{Le.splitNodes(e,{always:!0})},WL=(e,t,n)=>{Le.insertNodes(e,t,n)},$L=e=>{Le.splitNodes(e,{always:!0})};function J8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var zL=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i,marks:o}=t;if(i){if(o){var s=jL({text:n},o);Le.insertNodes(t,s,{at:r.at,voids:r.voids})}else Le.insertText(t,n,r);t.marks=null}},VL=(e,t)=>!e.isInline(t),UL=(e,t,n)=>F.isStart(e,t,n)||F.isEnd(e,t,n),XL=(e,t)=>{var{children:n}=t,[r]=n;return n.length===0||n.length===1&&ot.isText(r)&&r.text===""&&!e.isVoid(t)},KL=(e,t,n)=>{var r=F.end(e,n);return Yt.equals(t,r)},YL=e=>{var t=mP.get(e);return t===void 0?!0:t},qL=(e,t,n)=>{if(t.offset!==0)return!1;var r=F.start(e,n);return Yt.equals(t,r)},ZL=(e,t)=>{var n=F.path(e,t,{edge:"end"});return F.node(e,n)},QL=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.path(t,n,r),o=$e.leaf(t,i);return[o,i]};function JL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,reverse:r=!1,voids:i=!1}=t,{match:o}=t;if(o==null&&(o=()=>!0),!!n){var s=[],a=F.path(e,n);for(var[f,h]of $e.levels(e,a))if(o(f,h)&&(s.push([f,h]),!i&&at.isElement(f)&&F.isVoid(e,f)))break;r&&s.reverse(),yield*s}}()}var e_=["text"],t_=["text"],n_=function(t){var{marks:n,selection:r}=t;if(!r)return null;var{anchor:i,focus:o}=r;if(n)return n;if(De.isExpanded(r)){var s=F.isEnd(t,i,i.path);if(s){var a=F.after(t,i);a&&(i=a)}var[f]=F.nodes(t,{match:ot.isText,at:{anchor:i,focus:o}});if(f){var[h]=f,d=$a(h,e_);return d}else return{}}var{path:p}=i,[v]=F.leaf(t,p);if(i.offset===0){var w=F.previous(t,{at:p,match:ot.isText}),E=F.above(t,{match:_=>at.isElement(_)&&F.isVoid(t,_)&&t.markableVoid(_)});if(!E){var y=F.above(t,{match:_=>at.isElement(_)&&F.isBlock(t,_)});if(w&&y){var[S,A]=w,[,B]=y;q.isAncestor(B,A)&&(v=S)}}}var I=$a(v,t_);return I},r_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var a=F.after(t,s,{voids:i});if(a){var[,f]=F.last(t,[]),h=[a.path,f];if(q.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(o==null)if(q.isPath(s)){var[d]=F.parent(t,s);o=v=>d.children.includes(v)}else o=()=>!0;var[p]=F.nodes(t,{at:h,match:o,mode:r,voids:i});return p}}},i_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.path(t,n,r),o=$e.get(t,i);return[o,i]};function o_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,mode:r="all",universal:i=!1,reverse:o=!1,voids:s=!1,ignoreNonSelectable:a=!1}=t,{match:f}=t;if(f||(f=()=>!0),!!n){var h,d;if(Vk.isSpan(n))h=n[0],d=n[1];else{var p=F.path(e,n,{edge:"start"}),v=F.path(e,n,{edge:"end"});h=o?v:p,d=o?p:v}var w=$e.nodes(e,{reverse:o,from:h,to:d,pass:_=>{var[L]=_;return at.isElement(L)?!!(!s&&(F.isVoid(e,L)||F.isElementReadOnly(e,L))||a&&!F.isSelectable(e,L)):!1}}),E=[],y;for(var[S,A]of w)if(!(a&&at.isElement(S)&&!F.isSelectable(e,S))){var B=y&&q.compare(A,y[1])===0;if(!(r==="highest"&&B)){if(!f(S,A)){if(i&&!B&&ot.isText(S))return;continue}if(r==="lowest"&&B){y=[S,A];continue}var I=r==="lowest"?y:[S,A];I&&(i?E.push(I):yield I),y=[S,A]}}r==="lowest"&&y&&(i?E.push(y):yield y),i&&(yield*E)}}()}var s_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:i}=n,o=d=>Um.get(d)||[],s=d=>Xm.get(d)||new Set,a=d=>{var p=o(d).pop(),v=p.join(",");return s(d).delete(v),p};if(F.isNormalizing(t)){if(r){var f=Array.from($e.nodes(t),d=>{var[,p]=d;return p}),h=new Set(f.map(d=>d.join(",")));Um.set(t,f),Xm.set(t,h)}o(t).length!==0&&F.withoutNormalizing(t,()=>{for(var d of o(t))if($e.has(t,d)){var p=F.node(t,d),[v,w]=p;at.isElement(v)&&v.children.length===0&&t.normalizeNode(p,{operation:i})}for(var E=o(t),y=E.length,S=0;E.length!==0;){if(!t.shouldNormalize({dirtyPaths:E,iteration:S,initialDirtyPathsLength:y,operation:i}))return;var A=a(t);if($e.has(t,A)){var B=F.node(t,A);t.normalizeNode(B,{operation:i})}S++,E=o(t)}})}},u_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=F.path(t,n,r),o=q.parent(i),s=F.node(t,o);return s},a_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,f=F.pathRefs(t);return f.delete(o),o.current=null,a}},s=F.pathRefs(t);return s.add(o),o},l_=e=>{var t=B8.get(e);return t||(t=new Set,B8.set(e,t)),t},c_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:i,edge:o}=r;if(q.isPath(n)){if(o==="start"){var[,s]=$e.first(t,n);n=s}else if(o==="end"){var[,a]=$e.last(t,n);n=a}}return De.isRange(n)&&(o==="start"?n=De.start(n):o==="end"?n=De.end(n):n=q.common(n.anchor.path,n.focus.path)),Yt.isPoint(n)&&(n=n.path),i!=null&&(n=n.slice(0,i)),n},f_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,f=F.pointRefs(t);return f.delete(o),o.current=null,a}},s=F.pointRefs(t);return s.add(o),o},h_=e=>{var t=R8.get(e);return t||(t=new Set,R8.set(e,t)),t},d_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:i="start"}=r;if(q.isPath(n)){var o;if(i==="end"){var[,s]=$e.last(t,n);o=s}else{var[,a]=$e.first(t,n);o=a}var f=$e.get(t,o);if(!ot.isText(f))throw new Error("Cannot get the ".concat(i," point in the node at path [").concat(n,"] because it has no ").concat(i," text node."));return{path:o,offset:i==="end"?f.text.length:0}}if(De.isRange(n)){var[h,d]=De.edges(n);return i==="start"?h:d}return n};function g_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,unit:r="offset",reverse:i=!1,voids:o=!1,ignoreNonSelectable:s=!1}=t;if(!n)return;var a=F.range(e,n),[f,h]=De.edges(a),d=i?h:f,p=!1,v="",w=0,E=0,y=0;for(var[S,A]of F.nodes(e,{at:n,reverse:i,voids:o,ignoreNonSelectable:s})){if(at.isElement(S)){if(!o&&(e.isVoid(S)||e.isElementReadOnly(S))){yield F.start(e,A);continue}if(e.isInline(S))continue;if(F.hasInlines(e,S)){var B=q.isAncestor(A,h.path)?h:F.end(e,A),I=q.isAncestor(A,f.path)?f:F.start(e,A);v=F.string(e,{anchor:I,focus:B},{voids:o}),p=!0}}if(ot.isText(S)){var _=q.equals(A,d.path);for(_?(E=i?d.offset:S.text.length-d.offset,y=d.offset):(E=S.text.length,y=i?E:0),(_||p||r==="offset")&&(yield{path:A,offset:y},p=!1);;){if(w===0){if(v==="")break;w=L(v,r,i),v=Iw(v,w,i)[1]}if(y=i?y-w:y+w,E=E-w,E<0){w=-E;break}w=0,yield{path:A,offset:y}}}}function L(j,z,J){return z==="character"?Ow(j,J):z==="word"?Zk(j,J):z==="line"||z==="block"?j.length:1}}()}var p_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var a=F.before(t,s,{voids:i});if(a){var[,f]=F.first(t,[]),h=[a.path,f];if(q.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(o==null)if(q.isPath(s)){var[d]=F.parent(t,s);o=v=>d.children.includes(v)}else o=()=>!0;var[p]=F.nodes(t,{reverse:!0,at:h,match:o,mode:r,voids:i});return p}}},m_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,f=F.rangeRefs(t);return f.delete(o),o.current=null,a}},s=F.rangeRefs(t);return s.add(o),o},v_=e=>{var t=M8.get(e);return t||(t=new Set,M8.set(e,t)),t},y_=(e,t,n)=>{if(De.isRange(t)&&!n)return t;var r=F.start(e,t),i=F.end(e,n||t);return{anchor:r,focus:i}};function e9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function w_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e9(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var C_=(e,t)=>{var{selection:n}=e;if(n){var r=(d,p)=>{if(!ot.isText(d))return!1;var[v,w]=F.parent(e,p);return!e.isVoid(v)||e.markableVoid(v)},i=De.isExpanded(n),o=!1;if(!i){var[s,a]=F.node(e,n);if(s&&r(s,a)){var[f]=F.parent(e,a);o=f&&e.markableVoid(f)}}if(i||o)Le.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var h=w_({},F.marks(e)||{});delete h[t],e.marks=h,gg.get(e)||e.onChange()}}},x_=(e,t)=>{mP.set(e,t)},E_=(e,t)=>F.point(e,t,{edge:"start"}),P_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,o=F.range(t,n),[s,a]=De.edges(o),f="";for(var[h,d]of F.nodes(t,{at:o,match:ot.isText,voids:i})){var p=h.text;q.equals(d,a.path)&&(p=p.slice(0,a.offset)),q.equals(d,s.path)&&(p=p.slice(s.offset)),f+=p}return f},S_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,[o,s]=De.edges(n);if(o.offset!==0||s.offset!==0||De.isCollapsed(n)||q.hasPrevious(s.path))return n;var a=F.above(t,{at:s,match:E=>at.isElement(E)&&F.isBlock(t,E),voids:i}),f=a?a[1]:[],h=F.start(t,o),d={anchor:h,focus:s},p=!0;for(var[v,w]of F.nodes(t,{at:d,match:ot.isText,reverse:!0,voids:i})){if(p){p=!1;continue}if(v.text!==""||q.isBefore(w,f)){s={path:w,offset:v.text.length};break}}return{anchor:o,focus:s}},D_=(e,t)=>{var n=F.isNormalizing(e);F.setNormalizing(e,!1);try{t()}finally{F.setNormalizing(e,n)}F.normalize(e)},T_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var r,i,{reverse:o=!1,unit:s="character",distance:a=1,voids:f=!1}=n,{at:h=t.selection,hanging:d=!1}=n;if(h){var p=!1;if(De.isRange(h)&&De.isCollapsed(h)&&(p=!0,h=h.anchor),Yt.isPoint(h)){var v=F.void(t,{at:h,mode:"highest"});if(!f&&v){var[,w]=v;h=w}else{var E={unit:s,distance:a},y=o?F.before(t,h,E)||F.start(t,[]):F.after(t,h,E)||F.end(t,[]);h={anchor:h,focus:y},d=!0}}if(q.isPath(h)){Le.removeNodes(t,{at:h,voids:f});return}if(!De.isCollapsed(h)){if(!d){var[,S]=De.edges(h),A=F.end(t,[]);Yt.equals(S,A)||(h=F.unhangRange(t,h,{voids:f}))}var[B,I]=De.edges(h),_=F.above(t,{match:lt=>at.isElement(lt)&&F.isBlock(t,lt),at:B,voids:f}),L=F.above(t,{match:lt=>at.isElement(lt)&&F.isBlock(t,lt),at:I,voids:f}),j=_&&L&&!q.equals(_[1],L[1]),z=q.equals(B.path,I.path),J=f?null:(r=F.void(t,{at:B,mode:"highest"}))!==null&&r!==void 0?r:F.elementReadOnly(t,{at:B,mode:"highest"}),ae=f?null:(i=F.void(t,{at:I,mode:"highest"}))!==null&&i!==void 0?i:F.elementReadOnly(t,{at:I,mode:"highest"});if(J){var ne=F.before(t,B);ne&&_&&q.isAncestor(_[1],ne.path)&&(B=ne)}if(ae){var Pe=F.after(t,I);Pe&&L&&q.isAncestor(L[1],Pe.path)&&(I=Pe)}var oe=[],ce;for(var me of F.nodes(t,{at:h,voids:f})){var[ye,Fe]=me;ce&&q.compare(Fe,ce)===0||(!f&&at.isElement(ye)&&(F.isVoid(t,ye)||F.isElementReadOnly(t,ye))||!q.isCommon(Fe,B.path)&&!q.isCommon(Fe,I.path))&&(oe.push(me),ce=Fe)}var Te=Array.from(oe,lt=>{var[,yt]=lt;return F.pathRef(t,yt)}),ge=F.pointRef(t,B),se=F.pointRef(t,I),we="";if(!z&&!J){var X=ge.current,[Ee]=F.leaf(t,X),{path:st}=X,{offset:Me}=B,K=Ee.text.slice(Me);K.length>0&&(t.apply({type:"remove_text",path:st,offset:Me,text:K}),we=K)}if(Te.reverse().map(lt=>lt.unref()).filter(lt=>lt!==null).forEach(lt=>Le.removeNodes(t,{at:lt,voids:f})),!ae){var fe=se.current,[Ce]=F.leaf(t,fe),{path:Se}=fe,Ke=z?B.offset:0,Ue=Ce.text.slice(Ke,I.offset);Ue.length>0&&(t.apply({type:"remove_text",path:Se,offset:Ke,text:Ue}),we=Ue)}!z&&j&&se.current&&ge.current&&Le.mergeNodes(t,{at:se.current,hanging:!0,voids:f}),p&&o&&s==="character"&&we.length>1&&we.match(/[\u0E00-\u0E7F]+/)&&Le.insertText(t,we.slice(0,we.length-a));var Bt=ge.unref(),It=se.unref(),St=o?Bt||It:It||Bt;n.at==null&&St&&Le.select(t,St)}}})},A_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1}=r,{at:s=bw(t)}=r;if(n.length){if(De.isRange(s))if(i||(s=F.unhangRange(t,s,{voids:o})),De.isCollapsed(s))s=s.anchor;else{var[,a]=De.edges(s);if(!o&&F.void(t,{at:a}))return;var f=F.pointRef(t,a);Le.delete(t,{at:s}),s=f.unref()}else q.isPath(s)&&(s=F.start(t,s));if(!(!o&&F.void(t,{at:s}))){var h=F.above(t,{at:s,match:Me=>at.isElement(Me)&&F.isInline(t,Me),mode:"highest",voids:o});if(h){var[,d]=h;if(F.isEnd(t,s,d)){var p=F.after(t,d);s=p}else if(F.isStart(t,s,d)){var v=F.before(t,d);s=v}}var w=F.above(t,{match:Me=>at.isElement(Me)&&F.isBlock(t,Me),at:s,voids:o}),[,E]=w,y=F.isStart(t,s,E),S=F.isEnd(t,s,E),A=y&&S,B=!y||y&&S,I=!S,[,_]=$e.first({children:n},[]),[,L]=$e.last({children:n},[]),j=[],z=Me=>{var[K,fe]=Me,Ce=fe.length===0;return Ce?!1:A?!0:!(B&&q.isAncestor(fe,_)&&at.isElement(K)&&!t.isVoid(K)&&!t.isInline(K)||I&&q.isAncestor(fe,L)&&at.isElement(K)&&!t.isVoid(K)&&!t.isInline(K))};for(var J of $e.nodes({children:n},{pass:z}))z(J)&&j.push(J);var ae=[],ne=[],Pe=[],oe=!0,ce=!1;for(var[me]of j)at.isElement(me)&&!t.isInline(me)?(oe=!1,ce=!0,ne.push(me)):oe?ae.push(me):Pe.push(me);var[ye]=F.nodes(t,{at:s,match:Me=>ot.isText(Me)||F.isInline(t,Me),mode:"highest",voids:o}),[,Fe]=ye,Te=F.isStart(t,s,Fe),ge=F.isEnd(t,s,Fe),se=F.pathRef(t,S&&!Pe.length?q.next(E):E),we=F.pathRef(t,ge?q.next(Fe):Fe);Le.splitNodes(t,{at:s,match:Me=>ce?at.isElement(Me)&&F.isBlock(t,Me):ot.isText(Me)||F.isInline(t,Me),mode:ce?"lowest":"highest",always:ce&&(!y||ae.length>0)&&(!S||Pe.length>0),voids:o});var X=F.pathRef(t,!Te||Te&&ge?q.next(Fe):Fe);if(Le.insertNodes(t,ae,{at:X.current,match:Me=>ot.isText(Me)||F.isInline(t,Me),mode:"highest",voids:o}),A&&!ae.length&&ne.length&&!Pe.length&&Le.delete(t,{at:E,voids:o}),Le.insertNodes(t,ne,{at:se.current,match:Me=>at.isElement(Me)&&F.isBlock(t,Me),mode:"lowest",voids:o}),Le.insertNodes(t,Pe,{at:we.current,match:Me=>ot.isText(Me)||F.isInline(t,Me),mode:"highest",voids:o}),!r.at){var Ee;if(Pe.length>0&&we.current?Ee=q.previous(we.current):ne.length>0&&se.current?Ee=q.previous(se.current):X.current&&(Ee=q.previous(X.current)),Ee){var st=F.end(t,Ee);Le.select(t,st)}}X.unref(),se.unref(),we.unref()}}})},B_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:i}=t;if(i){if(r==="anchor")Le.select(t,i.anchor);else if(r==="focus")Le.select(t,i.focus);else if(r==="start"){var[o]=De.edges(i);Le.select(t,o)}else if(r==="end"){var[,s]=De.edges(i);Le.select(t,s)}}else return},R_=e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},M_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t,{distance:i=1,unit:o="character",reverse:s=!1}=n,{edge:a=null}=n;if(r){a==="start"&&(a=De.isBackward(r)?"focus":"anchor"),a==="end"&&(a=De.isBackward(r)?"anchor":"focus");var{anchor:f,focus:h}=r,d={distance:i,unit:o,ignoreNonSelectable:!0},p={};if(a==null||a==="anchor"){var v=s?F.before(t,f,d):F.after(t,f,d);v&&(p.anchor=v)}if(a==null||a==="focus"){var w=s?F.before(t,h,d):F.after(t,h,d);w&&(p.focus=w)}Le.setSelection(t,p)}},b_=(e,t)=>{var{selection:n}=e;if(t=F.range(e,t),n){Le.setSelection(e,t);return}if(!De.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Ur.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})};function t9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t9(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var O_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i}=t,{edge:o="both"}=r;if(i){o==="start"&&(o=De.isBackward(i)?"focus":"anchor"),o==="end"&&(o=De.isBackward(i)?"anchor":"focus");var{anchor:s,focus:a}=i,f=o==="anchor"?s:a;Le.setSelection(t,{[o==="anchor"?"anchor":"focus"]:n9(n9({},f),n)})}},I_=(e,t)=>{var{selection:n}=e,r={},i={};if(n){for(var o in t)(o==="anchor"&&t.anchor!=null&&!Yt.equals(t.anchor,n.anchor)||o==="focus"&&t.focus!=null&&!Yt.equals(t.focus,n.focus)||o!=="anchor"&&o!=="focus"&&t[o]!==n[o])&&(r[o]=n[o],i[o]=t[o]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:i})}},F_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest"}=r,{at:a,match:f,select:h}=r;if($e.isNode(n)&&(n=[n]),n.length!==0){var[d]=n;if(a||(a=bw(t),h!==!1&&(h=!0)),h==null&&(h=!1),De.isRange(a))if(i||(a=F.unhangRange(t,a,{voids:o})),De.isCollapsed(a))a=a.anchor;else{var[,p]=De.edges(a),v=F.pointRef(t,p);Le.delete(t,{at:a}),a=v.unref()}if(Yt.isPoint(a)){f==null&&(ot.isText(d)?f=z=>ot.isText(z):t.isInline(d)?f=z=>ot.isText(z)||F.isInline(t,z):f=z=>at.isElement(z)&&F.isBlock(t,z));var[w]=F.nodes(t,{at:a.path,match:f,mode:s,voids:o});if(w){var[,E]=w,y=F.pathRef(t,E),S=F.isEnd(t,a,E);Le.splitNodes(t,{at:a,match:f,mode:s,voids:o});var A=y.unref();a=S?q.next(A):A}else return}var B=q.parent(a),I=a[a.length-1];if(!(!o&&F.void(t,{at:B}))){for(var _ of n){var L=B.concat(I);I++,t.apply({type:"insert_node",path:L,node:_}),a=q.next(a)}if(a=q.previous(a),h){var j=F.end(t,a);j&&Le.select(t,j)}}}})},k_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{at:r=t.selection,mode:i="lowest",voids:o=!1}=n,{match:s}=n;if(s==null&&(s=q.isPath(r)?P0(t,r):_=>at.isElement(_)&&F.isBlock(t,_)),!!r){var a=F.nodes(t,{at:r,match:s,mode:i,voids:o}),f=Array.from(a,_=>{var[,L]=_;return F.pathRef(t,L)});for(var h of f){var d=h.unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var p=F.node(t,q.parent(d)),[v,w]=p,E=d[d.length-1],{length:y}=v.children;if(y===1){var S=q.next(w);Le.moveNodes(t,{at:d,to:S,voids:o}),Le.removeNodes(t,{at:w,voids:o})}else if(E===0)Le.moveNodes(t,{at:d,to:w,voids:o});else if(E===y-1){var A=q.next(w);Le.moveNodes(t,{at:d,to:A,voids:o})}else{var B=q.next(d),I=q.next(w);Le.splitNodes(t,{at:B,voids:o}),Le.moveNodes(t,{at:d,to:I,voids:o})}}}})},L_=["text"],__=["children"],yP=(e,t)=>{if(at.isElement(t)){var n=t;return F.isVoid(e,t)?!0:n.children.length===1?yP(e,n.children[0]):!1}else return!F.isEditor(t)},N_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{match:r,at:i=t.selection}=n,{hanging:o=!1,voids:s=!1,mode:a="lowest"}=n;if(i){if(r==null)if(q.isPath(i)){var[f]=F.parent(t,i);r=ne=>f.children.includes(ne)}else r=ne=>at.isElement(ne)&&F.isBlock(t,ne);if(!o&&De.isRange(i)&&(i=F.unhangRange(t,i,{voids:s})),De.isRange(i))if(De.isCollapsed(i))i=i.anchor;else{var[,h]=De.edges(i),d=F.pointRef(t,h);Le.delete(t,{at:i}),i=d.unref(),n.at==null&&Le.select(t,i)}var[p]=F.nodes(t,{at:i,match:r,voids:s,mode:a}),v=F.previous(t,{at:i,match:r,voids:s,mode:a});if(!(!p||!v)){var[w,E]=p,[y,S]=v;if(!(E.length===0||S.length===0)){var A=q.next(S),B=q.common(E,S),I=q.isSibling(E,S),_=Array.from(F.levels(t,{at:E}),ne=>{var[Pe]=ne;return Pe}).slice(B.length).slice(0,-1),L=F.above(t,{at:E,mode:"highest",match:ne=>_.includes(ne)&&yP(t,ne)}),j=L&&F.pathRef(t,L[1]),z,J;if(ot.isText(w)&&ot.isText(y)){var ae=$a(w,L_);J=y.text.length,z=ae}else if(at.isElement(w)&&at.isElement(y)){var ae=$a(w,__);J=y.children.length,z=ae}else throw new Error("Cannot merge the node at path [".concat(E,"] with the previous sibling because it is not the same kind: ").concat(Ur.stringify(w)," ").concat(Ur.stringify(y)));I||Le.moveNodes(t,{at:E,to:A,voids:s}),j&&Le.removeNodes(t,{at:j.current,voids:s}),at.isElement(y)&&F.isEmpty(t,y)||ot.isText(y)&&y.text===""&&S[S.length-1]!==0?Le.removeNodes(t,{at:S,voids:s}):t.apply({type:"merge_node",path:A,position:J,properties:z}),j&&j.unref()}}}})},H_=(e,t)=>{F.withoutNormalizing(e,()=>{var{to:n,at:r=e.selection,mode:i="lowest",voids:o=!1}=t,{match:s}=t;if(r){s==null&&(s=q.isPath(r)?P0(e,r):w=>at.isElement(w)&&F.isBlock(e,w));var a=F.pathRef(e,n),f=F.nodes(e,{at:r,match:s,mode:i,voids:o}),h=Array.from(f,w=>{var[,E]=w;return F.pathRef(e,E)});for(var d of h){var p=d.unref(),v=a.current;p.length!==0&&e.apply({type:"move_node",path:p,newPath:v}),a.current&&q.isSibling(v,p)&&q.isAfter(v,p)&&(a.current=q.next(a.current))}a.unref()}})},G_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{hanging:r=!1,voids:i=!1,mode:o="lowest"}=n,{at:s=t.selection,match:a}=n;if(s){a==null&&(a=q.isPath(s)?P0(t,s):w=>at.isElement(w)&&F.isBlock(t,w)),!r&&De.isRange(s)&&(s=F.unhangRange(t,s,{voids:i}));var f=F.nodes(t,{at:s,match:a,mode:o,voids:i}),h=Array.from(f,w=>{var[,E]=w;return F.pathRef(t,E)});for(var d of h){var p=d.unref();if(p){var[v]=F.node(t,p);t.apply({type:"remove_node",path:p,node:v})}}}})},W_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(t,()=>{var{match:i,at:o=t.selection,compare:s,merge:a}=r,{hanging:f=!1,mode:h="lowest",split:d=!1,voids:p=!1}=r;if(o){if(i==null&&(i=q.isPath(o)?P0(t,o):J=>at.isElement(J)&&F.isBlock(t,J)),!f&&De.isRange(o)&&(o=F.unhangRange(t,o,{voids:p})),d&&De.isRange(o)){if(De.isCollapsed(o)&&F.leaf(t,o.anchor)[0].text.length>0)return;var v=F.rangeRef(t,o,{affinity:"inward"}),[w,E]=De.edges(o),y=h==="lowest"?"lowest":"highest",S=F.isEnd(t,E,E.path);Le.splitNodes(t,{at:E,match:i,mode:y,voids:p,always:!S});var A=F.isStart(t,w,w.path);Le.splitNodes(t,{at:w,match:i,mode:y,voids:p,always:!A}),o=v.unref(),r.at==null&&Le.select(t,o)}s||(s=(J,ae)=>J!==ae);for(var[B,I]of F.nodes(t,{at:o,match:i,mode:h,voids:p})){var _={},L={};if(I.length!==0){var j=!1;for(var z in n)z==="children"||z==="text"||s(n[z],B[z])&&(j=!0,B.hasOwnProperty(z)&&(_[z]=B[z]),a?n[z]!=null&&(L[z]=a(B[z],n[z])):n[z]!=null&&(L[z]=n[z]));j&&t.apply({type:"set_node",path:I,properties:_,newProperties:L})}}}})},$_=(e,t)=>{if(De.isCollapsed(t))return t.anchor;var[,n]=De.edges(t),r=F.pointRef(e,n);return Le.delete(e,{at:t}),r.unref()},j_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection,height:a=0,always:f=!1}=n;if(o==null&&(o=se=>at.isElement(se)&&F.isBlock(t,se)),De.isRange(s)&&(s=$_(t,s)),q.isPath(s)){var h=s,d=F.point(t,h),[p]=F.parent(t,h);o=se=>se===p,a=d.path.length-h.length+1,s=d,f=!0}if(s){var v=F.pointRef(t,s,{affinity:"backward"}),w;try{var[E]=F.nodes(t,{at:s,match:o,mode:r,voids:i});if(!E)return;var y=F.void(t,{at:s,mode:"highest"}),S=0;if(!i&&y){var[A,B]=y;if(at.isElement(A)&&t.isInline(A)){var I=F.after(t,B);if(!I){var _={text:""},L=q.next(B);Le.insertNodes(t,_,{at:L,voids:i}),I=F.point(t,L)}s=I,f=!0}var j=s.path.length-B.length;a=j+1,f=!0}w=F.pointRef(t,s);var z=s.path.length-a,[,J]=E,ae=s.path.slice(0,z),ne=a===0?s.offset:s.path[z]+S;for(var[Pe,oe]of F.levels(t,{at:ae,reverse:!0,voids:i})){var ce=!1;if(oe.length<J.length||oe.length===0||!i&&at.isElement(Pe)&&F.isVoid(t,Pe))break;var me=v.current,ye=F.isEnd(t,me,oe);if(f||!v||!F.isEdge(t,me,oe)){ce=!0;var Fe=$e.extractProps(Pe);t.apply({type:"split_node",path:oe,position:ne,properties:Fe})}ne=oe[oe.length-1]+(ce||ye?1:0)}if(n.at==null){var Te=w.current||F.end(t,[]);Le.select(t,Te)}}finally{var ge;v.unref(),(ge=w)===null||ge===void 0||ge.unref()}}})},z_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var i={};for(var o of n)i[o]=null;Le.setNodes(t,i,r)},V_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F.withoutNormalizing(t,()=>{var{mode:r="lowest",split:i=!1,voids:o=!1}=n,{at:s=t.selection,match:a}=n;if(s){a==null&&(a=q.isPath(s)?P0(t,s):w=>at.isElement(w)&&F.isBlock(t,w)),q.isPath(s)&&(s=F.range(t,s));var f=De.isRange(s)?F.rangeRef(t,s):null,h=F.nodes(t,{at:s,match:a,mode:r,voids:o}),d=Array.from(h,w=>{var[,E]=w;return F.pathRef(t,E)}).reverse(),p=function(){var E=v.unref(),[y]=F.node(t,E),S=F.range(t,E);i&&f&&(S=De.intersection(f.current,S)),Le.liftNodes(t,{at:S,match:A=>at.isAncestor(y)&&y.children.includes(A),voids:o})};for(var v of d)p();f&&f.unref()}})};function r9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function i9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r9(Object(n),!0).forEach(function(r){zi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var U_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};F.withoutNormalizing(t,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{match:a,at:f=t.selection}=r;if(f){if(a==null&&(q.isPath(f)?a=P0(t,f):t.isInline(n)?a=S=>at.isElement(S)&&F.isInline(t,S)||ot.isText(S):a=S=>at.isElement(S)&&F.isBlock(t,S)),o&&De.isRange(f)){var[h,d]=De.edges(f),p=F.rangeRef(t,f,{affinity:"inward"});Le.splitNodes(t,{at:d,match:a,voids:s}),Le.splitNodes(t,{at:h,match:a,voids:s}),f=p.unref(),r.at==null&&Le.select(t,f)}var v=Array.from(F.nodes(t,{at:f,match:t.isInline(n)?S=>at.isElement(S)&&F.isBlock(t,S):S=>F.isEditor(S),mode:"lowest",voids:s})),w=function(){var A=De.isRange(f)?De.intersection(f,F.range(t,y)):f;if(!A)return 0;var B=Array.from(F.nodes(t,{at:A,match:a,mode:i,voids:s}));if(B.length>0){var[I]=B,_=B[B.length-1],[,L]=I,[,j]=_;if(L.length===0&&j.length===0)return 0;var z=q.equals(L,j)?q.parent(L):q.common(L,j),J=F.range(t,L,j),ae=F.node(t,z),[ne]=ae,Pe=z.length+1,oe=q.next(j.slice(0,Pe)),ce=i9(i9({},n),{},{children:[]});Le.insertNodes(t,ce,{at:oe,voids:s}),Le.moveNodes(t,{at:J,match:me=>at.isAncestor(ne)&&ne.children.includes(me),to:oe.concat(0),voids:s})}},E;for(var[,y]of v)E=w()}})},X_=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return yL(e,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return SL(e,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return AL(e,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return BL(e,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return RL(e,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return CL(e,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return GL(e,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $L(e,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return A_(e,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return WL(e,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return zL(e,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xL(e,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return C_(e,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return wL(e,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return EL(e,...r)},above:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return PL(e,...r)},after:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return DL(e,...r)},before:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return TL(e,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return B_(e,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return T_(e,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return R_(e,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ML(e,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return bL(e,...r)},end:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return OL(e,...r)},first:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return IL(e,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return FL(e,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return n_(e,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return LL(e,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _L(e,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return NL(e,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return HL(e,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return F_(e,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return VL(e,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return UL(e,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return XL(e,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return KL(e,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return YL(e,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qL(e,...r)},last:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ZL(e,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return QL(e,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return JL(e,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return k_(e,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return N_(e,...r)},move:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return M_(e,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return H_(e,...r)},next:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r_(e,...r)},node:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return i_(e,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return o_(e,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return s_(e,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return u_(e,...r)},path:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return c_(e,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a_(e,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return l_(e,...r)},point:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return d_(e,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return f_(e,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return h_(e,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return g_(e,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p_(e,...r)},range:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return y_(e,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return m_(e,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return v_(e,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return G_(e,...r)},select:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return b_(e,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return W_(e,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return x_(e,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return O_(e,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return I_(e,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return j_(e,...r)},start:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return E_(e,...r)},string:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return P_(e,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return S_(e,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return z_(e,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return V_(e,...r)},void:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return kL(e,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return D_(e,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return U_(e,...r)}};return e},q7,o9;function K_(){if(o9)return q7;o9=1,q7=i;var e="֑-߿יִ-﷽ﹰ-ﻼ",t="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",n=new RegExp("^[^"+t+"]*["+e+"]"),r=new RegExp("^[^"+e+"]*["+t+"]");function i(o){return o=String(o||""),n.test(o)?"rtl":r.test(o)?"ltr":"neutral"}return q7}var Y_=K_();const wP=uc(Y_),s9=e=>typeof e=="object"&&e!=null&&e.nodeType===1,u9=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",X2=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return u9(n.overflowY,t)||u9(n.overflowX,t)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(e)}return!1},K2=(e,t,n,r,i,o,s,a)=>o<e&&s>t||o>e&&s<t?0:o<=e&&a<=n||s>=t&&a>=n?o-e-r:s>t&&a<n||o<e&&a>n?s-t+i:0,q_=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},a9=(e,t)=>{var n,r,i,o;if(typeof document>"u")return[];const{scrollMode:s,block:a,inline:f,boundary:h,skipOverflowHiddenElements:d}=t,p=typeof h=="function"?h:Fe=>Fe!==h;if(!s9(e))throw new TypeError("Invalid target");const v=document.scrollingElement||document.documentElement,w=[];let E=e;for(;s9(E)&&p(E);){if(E=q_(E),E===v){w.push(E);break}E!=null&&E===document.body&&X2(E)&&!X2(document.documentElement)||E!=null&&X2(E,d)&&w.push(E)}const y=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,S=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:A,scrollY:B}=window,{height:I,width:_,top:L,right:j,bottom:z,left:J}=e.getBoundingClientRect(),{top:ae,right:ne,bottom:Pe,left:oe}=(Fe=>{const Te=window.getComputedStyle(Fe);return{top:parseFloat(Te.scrollMarginTop)||0,right:parseFloat(Te.scrollMarginRight)||0,bottom:parseFloat(Te.scrollMarginBottom)||0,left:parseFloat(Te.scrollMarginLeft)||0}})(e);let ce=a==="start"||a==="nearest"?L-ae:a==="end"?z+Pe:L+I/2-ae+Pe,me=f==="center"?J+_/2-oe+ne:f==="end"?j+ne:J-oe;const ye=[];for(let Fe=0;Fe<w.length;Fe++){const Te=w[Fe],{height:ge,width:se,top:we,right:X,bottom:Ee,left:st}=Te.getBoundingClientRect();if(s==="if-needed"&&L>=0&&J>=0&&z<=S&&j<=y&&(Te===v&&!X2(Te)||L>=we&&z<=Ee&&J>=st&&j<=X))return ye;const Me=getComputedStyle(Te),K=parseInt(Me.borderLeftWidth,10),fe=parseInt(Me.borderTopWidth,10),Ce=parseInt(Me.borderRightWidth,10),Se=parseInt(Me.borderBottomWidth,10);let Ke=0,Ue=0;const Bt="offsetWidth"in Te?Te.offsetWidth-Te.clientWidth-K-Ce:0,It="offsetHeight"in Te?Te.offsetHeight-Te.clientHeight-fe-Se:0,St="offsetWidth"in Te?Te.offsetWidth===0?0:se/Te.offsetWidth:0,lt="offsetHeight"in Te?Te.offsetHeight===0?0:ge/Te.offsetHeight:0;if(v===Te)Ke=a==="start"?ce:a==="end"?ce-S:a==="nearest"?K2(B,B+S,S,fe,Se,B+ce,B+ce+I,I):ce-S/2,Ue=f==="start"?me:f==="center"?me-y/2:f==="end"?me-y:K2(A,A+y,y,K,Ce,A+me,A+me+_,_),Ke=Math.max(0,Ke+B),Ue=Math.max(0,Ue+A);else{Ke=a==="start"?ce-we-fe:a==="end"?ce-Ee+Se+It:a==="nearest"?K2(we,Ee,ge,fe,Se+It,ce,ce+I,I):ce-(we+ge/2)+It/2,Ue=f==="start"?me-st-K:f==="center"?me-(st+se/2)+Bt/2:f==="end"?me-X+Ce+Bt:K2(st,X,se,K,Ce+Bt,me,me+_,_);const{scrollLeft:yt,scrollTop:wn}=Te;Ke=lt===0?0:Math.max(0,Math.min(wn+Ke/lt,Te.scrollHeight-ge/lt+It)),Ue=St===0?0:Math.max(0,Math.min(yt+Ue/St,Te.scrollWidth-se/St+Bt)),ce+=wn-Ke,me+=yt-Ue}ye.push({el:Te,top:Ke,left:Ue})}return ye},Z_=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function Q_(e,t){if(!e.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((i=>typeof i=="object"&&typeof i.behavior=="function")(t))return t.behavior(a9(e,t));const r=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:i,top:o,left:s}of a9(e,Z_(t))){const a=o-n.top+n.bottom,f=s-n.left+n.right;i.scroll({top:a,left:f,behavior:r})}}var Rf=[],J_=function(){return Rf.some(function(e){return e.activeTargets.length>0})},eN=function(){return Rf.some(function(e){return e.skippedTargets.length>0})},l9="ResizeObserver loop completed with undelivered notifications.",tN=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:l9}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=l9),window.dispatchEvent(e)},Og;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Og||(Og={}));var Mf=function(e){return Object.freeze(e)},nN=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,Mf(this)}return e}(),CP=function(){function e(t,n,r,i){return this.x=t,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Mf(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,i=t.top,o=t.right,s=t.bottom,a=t.left,f=t.width,h=t.height;return{x:n,y:r,top:i,right:o,bottom:s,left:a,width:f,height:h}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Fw=function(e){return e instanceof SVGElement&&"getBBox"in e},xP=function(e){if(Fw(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||e.getClientRects().length)},c9=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},rN=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},pg=typeof window<"u"?window:{},Y2=new WeakMap,f9=/auto|scroll/,iN=/^tb|vertical/,oN=/msie|trident/i.test(pg.navigator&&pg.navigator.userAgent),Iu=function(e){return parseFloat(e||"0")},qd=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new nN((n?t:e)||0,(n?e:t)||0)},h9=Mf({devicePixelContentBoxSize:qd(),borderBoxSize:qd(),contentBoxSize:qd(),contentRect:new CP(0,0,0,0)}),EP=function(e,t){if(t===void 0&&(t=!1),Y2.has(e)&&!t)return Y2.get(e);if(xP(e))return Y2.set(e,h9),h9;var n=getComputedStyle(e),r=Fw(e)&&e.ownerSVGElement&&e.getBBox(),i=!oN&&n.boxSizing==="border-box",o=iN.test(n.writingMode||""),s=!r&&f9.test(n.overflowY||""),a=!r&&f9.test(n.overflowX||""),f=r?0:Iu(n.paddingTop),h=r?0:Iu(n.paddingRight),d=r?0:Iu(n.paddingBottom),p=r?0:Iu(n.paddingLeft),v=r?0:Iu(n.borderTopWidth),w=r?0:Iu(n.borderRightWidth),E=r?0:Iu(n.borderBottomWidth),y=r?0:Iu(n.borderLeftWidth),S=p+h,A=f+d,B=y+w,I=v+E,_=a?e.offsetHeight-I-e.clientHeight:0,L=s?e.offsetWidth-B-e.clientWidth:0,j=i?S+B:0,z=i?A+I:0,J=r?r.width:Iu(n.width)-j-L,ae=r?r.height:Iu(n.height)-z-_,ne=J+S+L+B,Pe=ae+A+_+I,oe=Mf({devicePixelContentBoxSize:qd(Math.round(J*devicePixelRatio),Math.round(ae*devicePixelRatio),o),borderBoxSize:qd(ne,Pe,o),contentBoxSize:qd(J,ae,o),contentRect:new CP(p,f,J,ae)});return Y2.set(e,oe),oe},PP=function(e,t,n){var r=EP(e,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case Og.DEVICE_PIXEL_CONTENT_BOX:return s;case Og.BORDER_BOX:return i;default:return o}},sN=function(){function e(t){var n=EP(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=Mf([n.borderBoxSize]),this.contentBoxSize=Mf([n.contentBoxSize]),this.devicePixelContentBoxSize=Mf([n.devicePixelContentBoxSize])}return e}(),SP=function(e){if(xP(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},uN=function(){var e=1/0,t=[];Rf.forEach(function(s){if(s.activeTargets.length!==0){var a=[];s.activeTargets.forEach(function(h){var d=new sN(h.target),p=SP(h.target);a.push(d),h.lastReportedSize=PP(h.target,h.observedBox),p<e&&(e=p)}),t.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var i=r[n];i()}return e},d9=function(e){Rf.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(SP(i.target)>e?n.activeTargets.push(i):n.skippedTargets.push(i))})})},aN=function(){var e=0;for(d9(e);J_();)e=uN(),d9(e);return eN()&&tN(),e>0},Z7,DP=[],lN=function(){return DP.splice(0).forEach(function(e){return e()})},cN=function(e){if(!Z7){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return lN()}).observe(n,r),Z7=function(){n.textContent="".concat(t?t--:t++)}}DP.push(e),Z7()},fN=function(e){cN(function(){requestAnimationFrame(e)})},wm=0,hN=function(){return!!wm},dN=250,gN={attributes:!0,characterData:!0,childList:!0,subtree:!0},g9=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],p9=function(e){return e===void 0&&(e=0),Date.now()+e},Q7=!1,pN=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=dN),!Q7){Q7=!0;var r=p9(t);fN(function(){var i=!1;try{i=aN()}finally{if(Q7=!1,t=r-p9(),!hN())return;i?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,gN)};document.body?n():pg.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),g9.forEach(function(n){return pg.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),g9.forEach(function(n){return pg.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),g5=new pN,m9=function(e){!wm&&e>0&&g5.start(),wm+=e,!wm&&g5.stop()},mN=function(e){return!Fw(e)&&!rN(e)&&getComputedStyle(e).display==="inline"},vN=function(){function e(t,n){this.target=t,this.observedBox=n||Og.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=PP(this.target,this.observedBox,!0);return mN(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),yN=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),q2=new WeakMap,v9=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Z2=function(){function e(){}return e.connect=function(t,n){var r=new yN(t,n);q2.set(t,r)},e.observe=function(t,n,r){var i=q2.get(t),o=i.observationTargets.length===0;v9(i.observationTargets,n)<0&&(o&&Rf.push(i),i.observationTargets.push(new vN(n,r&&r.box)),m9(1),g5.schedule())},e.unobserve=function(t,n){var r=q2.get(t),i=v9(r.observationTargets,n),o=r.observationTargets.length===1;i>=0&&(o&&Rf.splice(Rf.indexOf(r),1),r.observationTargets.splice(i,1),m9(-1))},e.disconnect=function(t){var n=this,r=q2.get(t);r.observationTargets.slice().forEach(function(i){return n.unobserve(t,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),wN=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Z2.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!c9(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Z2.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!c9(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Z2.unobserve(this,t)},e.prototype.disconnect=function(){Z2.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),kw=Lx();const CN=uc(kw);function xN(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function a0(e,t){if(e==null)return{};var n=xN(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function EN(e,t){if(Ig(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ig(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PN(e){var t=EN(e,"string");return Ig(t)==="symbol"?t:String(t)}function Ps(e,t,n){return t=PN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lw=W.createContext(null),hc=()=>{var e=W.useContext(Lw);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},J7,ey,TP=parseInt(Pt.version.split(".")[0],10),AP=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,y9=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Gi=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Wd=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),wf=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),SN=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),BP=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),DN=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),TN=Gi&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),AN=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),BN=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),RN=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Cm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w9=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((J7=navigator.userAgent.match(/Version\/(\d+)/))!==null&&J7!==void 0&&J7[1]?parseInt((ey=navigator.userAgent.match(/Version\/(\d+)/))===null||ey===void 0?void 0:ey[1],10)<17:!1),Hl=(!DN||!TN)&&!SN&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",_w=new WeakMap,Nw=new WeakMap,RP=new WeakMap,xm=new WeakMap,p5=new WeakMap,Fg=new WeakMap,bf=new WeakMap,Km=new WeakMap,zv=new WeakMap,m5=new WeakMap,Vl=new WeakMap,Pf=new WeakMap,mg=new WeakMap,v5=new WeakMap,Hw=new WeakMap,tu=new WeakMap,Ia=new WeakMap,fo=new WeakMap,Wl=new WeakMap,$l=new WeakMap,MP=new WeakMap,l0=Symbol("placeholder"),bP=Symbol("mark-placeholder"),MN=globalThis.Text,Gw=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,bN=e=>nc(e)&&e.nodeType===8,ms=e=>nc(e)&&e.nodeType===1,nc=e=>{var t=Gw(e);return!!t&&e instanceof t.Node},y5=e=>{var t=e&&e.anchorNode&&Gw(e.anchorNode);return!!t&&e instanceof t.Selection},OP=e=>nc(e)&&e.nodeType===3,ON=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,IN=e=>{var[t,n]=e;if(ms(t)&&t.childNodes.length){var r=n===t.childNodes.length,i=r?n-1:n;for([t,i]=IP(t,i,r?"backward":"forward"),r=i<n;ms(t)&&t.childNodes.length;){var o=r?t.childNodes.length-1:0;t=kN(t,o,r?"backward":"forward")}n=r&&t.textContent!=null?t.textContent.length:0}return[t,n]},FN=e=>{for(var t=e&&e.parentNode;t;){if(t.toString()==="[object ShadowRoot]")return!0;t=t.parentNode}return!1},IP=(e,t,n)=>{for(var{childNodes:r}=e,i=r[t],o=t,s=!1,a=!1;(bN(i)||ms(i)&&i.childNodes.length===0||ms(i)&&i.getAttribute("contenteditable")==="false")&&!(s&&a);){if(o>=r.length){s=!0,o=t-1,n="backward";continue}if(o<0){a=!0,o=t+1,n="forward";continue}i=r[o],t=o,o+=n==="forward"?1:-1}return[i,t]},kN=(e,t,n)=>{var[r]=IP(e,t,n);return r},FP=e=>{var t="";if(OP(e)&&e.nodeValue)return e.nodeValue;if(ms(e)){for(var n of Array.from(e.childNodes))t+=FP(n);var r=getComputedStyle(e).getPropertyValue("display");(r==="block"||r==="list"||e.tagName==="BR")&&(t+=`
`)}return t},LN=/data-slate-fragment="(.+?)"/m,_N=e=>{var t=e.getData("text/html"),[,n]=t.match(LN)||[];return n},Ww=(e,t,n)=>{var{target:r}=t;if(ms(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:i}=Ae.getWindow(e);if(i.contains(r))return Ae.hasDOMNode(e,r,{editable:!0});var o=n.find(s=>{var{addedNodes:a,removedNodes:f}=s;for(var h of a)if(h===r||h.contains(r))return!0;for(var d of f)if(d===r||d.contains(r))return!0});return!o||o===t?!1:Ww(e,o,n)},NN=()=>{for(var e=document.activeElement;(t=e)!==null&&t!==void 0&&t.shadowRoot&&(n=e.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var t,n,r;e=(r=e)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return e},HN=0;class GN{constructor(){Ps(this,"id",void 0),this.id="".concat(HN++)}}var Ae={androidPendingDiffs:e=>fo.get(e),androidScheduleFlush:e=>{var t;(t=Hw.get(e))===null||t===void 0||t()},blur:e=>{var t=Ae.toDOMNode(e,e),n=Ae.findDocumentOrShadowRoot(e);Vl.set(e,!1),n.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,n=Ae.findDocumentOrShadowRoot(e),r=n.getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&Le.deselect(e)},findDocumentOrShadowRoot:e=>{var t=Ae.toDOMNode(e,e),n=t.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:n,clientY:r,target:i}=t;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o=Ae.toSlateNode(e,t.target),s=Ae.findPath(e,o);if(at.isElement(o)&&F.isVoid(e,o)){var a=i.getBoundingClientRect(),f=e.isInline(o)?n-a.left<a.left+a.width-n:r-a.top<a.top+a.height-r,h=F.point(e,s,{edge:f?"start":"end"}),d=f?F.before(e,h):F.after(e,h);if(d){var p=F.range(e,d);return p}}var v,{document:w}=Ae.getWindow(e);if(w.caretRangeFromPoint)v=w.caretRangeFromPoint(n,r);else{var E=w.caretPositionFromPoint(n,r);E&&(v=w.createRange(),v.setStart(E.offsetNode,E.offset),v.setEnd(E.offsetNode,E.offset))}if(!v)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var y=Ae.toSlateRange(e,v,{exactMatch:!1,suppressThrow:!1});return y},findKey:(e,t)=>{var n=Km.get(t);return n||(n=new GN,Km.set(t,n)),n},findPath:(e,t)=>{for(var n=[],r=t;;){var i=Nw.get(r);if(i==null){if(F.isEditor(r))return n;break}var o=_w.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error("Unable to find the path for Slate node: ".concat(Ur.stringify(t)))},focus:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Vl.get(t)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(t.operations.length>0){setTimeout(()=>{Ae.focus(t,{retries:n.retries-1})},10);return}var r=Ae.toDOMNode(t,t),i=Ae.findDocumentOrShadowRoot(t);if(i.activeElement!==r){if(t.selection&&i instanceof Document){var o=i.getSelection(),s=Ae.toDOMRange(t,t.selection);o==null||o.removeAllRanges(),o==null||o.addRange(s)}t.selection||(Le.select(t,F.start(t,[])),t.onChange()),Vl.set(t,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var t=RP.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=r,o=Ae.toDOMNode(t,t),s;try{s=ms(n)?n:n.parentElement}catch(a){if(a instanceof Error&&!a.message.includes('Permission denied to access property "nodeType"'))throw a}return s?s.closest("[data-slate-editor]")===o&&(!i||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===o||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,t)=>nc(t)&&Ae.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:n,focus:r}=t;return F.hasPath(e,n.path)&&F.hasPath(e,r.path)},hasSelectableTarget:(e,t)=>Ae.hasEditableTarget(e,t)||Ae.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>nc(t)&&Ae.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!Pf.get(e),isFocused:e=>!!Vl.get(e),isReadOnly:e=>!!m5.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(m5.get(e))return!1;var n=Ae.hasTarget(e,t)&&Ae.toSlateNode(e,t);return at.isElement(n)&&F.isVoid(e,n)},setFragmentData:(e,t,n)=>e.setFragmentData(t,n),toDOMNode:(e,t)=>{var n=zv.get(e),r=F.isEditor(t)?xm.get(e):n==null?void 0:n.get(Ae.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Ur.stringify(t)));return r},toDOMPoint:(e,t)=>{var[n]=F.node(e,t.path),r=Ae.toDOMNode(e,n),i;F.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o="[data-slate-string], [data-slate-zero-width]",s=Array.from(r.querySelectorAll(o)),a=0,f=0;f<s.length;f++){var h=s[f],d=h.childNodes[0];if(!(d==null||d.textContent==null)){var{length:p}=d.textContent,v=h.getAttribute("data-slate-length"),w=v==null?p:parseInt(v,10),E=a+w,y=s[f+1];if(t.offset===E&&y!==null&&y!==void 0&&y.hasAttribute("data-slate-mark-placeholder")){var S,A=y.childNodes[0];i=[A instanceof MN?A:y,(S=y.textContent)!==null&&S!==void 0&&S.startsWith("\uFEFF")?1:0];break}if(t.offset<=E){var B=Math.min(p,Math.max(0,t.offset-a));i=[d,B];break}a=E}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Ur.stringify(t)));return i},toDOMRange:(e,t)=>{var{anchor:n,focus:r}=t,i=De.isBackward(t),o=Ae.toDOMPoint(e,n),s=De.isCollapsed(t)?o:Ae.toDOMPoint(e,r),a=Ae.getWindow(e),f=a.document.createRange(),[h,d]=i?s:o,[p,v]=i?o:s,w=ms(h)?h:h.parentElement,E=!!w.getAttribute("data-slate-zero-width"),y=ms(p)?p:p.parentElement,S=!!y.getAttribute("data-slate-zero-width");return f.setStart(h,E?1:d),f.setEnd(p,S?1:v),f},toSlateNode:(e,t)=>{var n=ms(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?Fg.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(e,t,n)=>{var{exactMatch:r,suppressThrow:i}=n,[o,s]=r?t:IN(t),a=o.parentNode,f=null,h=0;if(a){var d,p,v=Ae.toDOMNode(e,e),w=a.closest('[data-slate-void="true"]'),E=w&&v.contains(w)?w:null,y=a.closest("[data-slate-leaf]"),S=null;if(y){if(f=y.closest('[data-slate-node="text"]'),f){var A=Ae.getWindow(e),B=A.document.createRange();B.setStart(f,0),B.setEnd(o,s);var I=B.cloneContents(),_=[...Array.prototype.slice.call(I.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(I.querySelectorAll("[contenteditable=false]"))];_.forEach(me=>{if(Gi&&!r&&me.hasAttribute("data-slate-zero-width")&&me.textContent.length>0&&me.textContext!=="\uFEFF"){me.textContent.startsWith("\uFEFF")&&(me.textContent=me.textContent.slice(1));return}me.parentNode.removeChild(me)}),h=I.textContent.length,S=f}}else if(E){for(var L=E.querySelectorAll("[data-slate-leaf]"),j=0;j<L.length;j++){var z=L[j];if(Ae.hasDOMNode(e,z)){y=z;break}}y?(f=y.closest('[data-slate-node="text"]'),S=y,h=S.textContent.length,S.querySelectorAll("[data-slate-zero-width]").forEach(me=>{h-=me.textContent.length})):h=1}S&&h===S.textContent.length&&Gi&&S.getAttribute("data-slate-zero-width")==="z"&&(d=S.textContent)!==null&&d!==void 0&&d.startsWith("\uFEFF")&&(a.hasAttribute("data-slate-zero-width")||Wd&&(p=S.textContent)!==null&&p!==void 0&&p.endsWith(`

`))&&h--}if(Gi&&!f&&!r){var J=a.hasAttribute("data-slate-node")?a:a.closest("[data-slate-node]");if(J&&Ae.hasDOMNode(e,J,{editable:!0})){var ae=Ae.toSlateNode(e,J),{path:ne,offset:Pe}=F.start(e,Ae.findPath(e,ae));return J.querySelector("[data-slate-leaf]")||(Pe=s),{path:ne,offset:Pe}}}if(!f){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var oe=Ae.toSlateNode(e,f),ce=Ae.findPath(e,oe);return{path:ce,offset:h}},toSlateRange:(e,t,n)=>{var r,{exactMatch:i,suppressThrow:o}=n,s=y5(t)?t.anchorNode:t.startContainer,a,f,h,d,p;if(s)if(y5(t)){if(Wd&&t.rangeCount>1){h=t.focusNode;var v=t.getRangeAt(0),w=t.getRangeAt(t.rangeCount-1);if(h instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement&&w.startContainer instanceof HTMLTableRowElement){let j=function(z){return z.childElementCount>0?j(z.children[0]):z};var E=v.startContainer,y=w.startContainer,S=j(E.children[v.startOffset]),A=j(y.children[w.startOffset]);d=0,A.childNodes.length>0?a=A.childNodes[0]:a=A,S.childNodes.length>0?h=S.childNodes[0]:h=S,A instanceof HTMLElement?f=A.innerHTML.length:f=0}else v.startContainer===h?(a=w.endContainer,f=w.endOffset,d=v.startOffset):(a=v.startContainer,f=v.endOffset,d=w.startOffset)}else a=t.anchorNode,f=t.anchorOffset,h=t.focusNode,d=t.focusOffset;BP&&FN(a)||Wd?p=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:p=t.isCollapsed}else a=t.startContainer,f=t.startOffset,h=t.endContainer,d=t.endOffset,p=t.collapsed;if(a==null||h==null||f==null||d==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));if(Wd&&(r=h.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&d===h.textContent.length&&d--,"getAttribute"in h&&h.getAttribute("contenteditable")==="false"&&h.getAttribute("data-slate-void")!=="true"){var B;h=a,d=((B=a.textContent)===null||B===void 0?void 0:B.length)||0}var I=Ae.toSlatePoint(e,[a,f],{exactMatch:i,suppressThrow:o});if(!I)return null;var _=p?I:Ae.toSlatePoint(e,[h,d],{exactMatch:i,suppressThrow:o});if(!_)return null;var L={anchor:I,focus:_};return De.isExpanded(L)&&De.isForward(L)&&ms(h)&&F.void(e,{at:L.focus,mode:"highest"})&&(L=F.unhangRange(e,L,{voids:!0})),L}};function WN(e,t){var{path:n,diff:r}=t;if(!F.hasPath(e,n))return!1;var i=$e.get(e,n);if(!ot.isText(i))return!1;if(r.start!==i.text.length||r.text.length===0)return i.text.slice(r.start,r.start+r.text.length)===r.text;var o=q.next(n);if(!F.hasPath(e,o))return!1;var s=$e.get(e,o);return ot.isText(s)&&s.text.startsWith(r.text)}function kP(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((i,o)=>i.slice(0,o.start)+o.text+i.slice(o.end),e)}function $N(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}function jN(e,t,n){for(var r=Math.min(e.length,t.length,n),i=0;i<r;i++)if(e.charAt(e.length-i-1)!==t.charAt(t.length-i-1))return i;return r}function LP(e,t){var{start:n,end:r,text:i}=t,o=e.slice(n,r),s=$N(o,i),a=Math.min(o.length-s,i.length-s),f=jN(o,i,a),h={start:n+s,end:r-f,text:i.slice(s,i.length-f)};return h.start===h.end&&h.text.length===0?null:h}function zN(e,t,n){var r=Math.min(t.start,n.start),i=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),o=kP(e,t,n),s=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-i),a=o.slice(r,s),f=Math.max(t.end,n.end-t.text.length+(t.end-t.start));return LP(e,{start:r,end:f,text:a})}function VN(e){var{path:t,diff:n}=e;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function w5(e,t){var{path:n,offset:r}=t;if(!F.hasPath(e,n))return null;var i=$e.get(e,n);if(!ot.isText(i))return null;var o=F.above(e,{match:a=>at.isElement(a)&&F.isBlock(e,a),at:n});if(!o)return null;for(;r>i.text.length;){var s=F.next(e,{at:n,match:ot.isText});if(!s||!q.isDescendant(s[1],o[1]))return null;r-=i.text.length,i=s[0],n=s[1]}return{path:n,offset:r}}function C9(e,t){var n=w5(e,t.anchor);if(!n)return null;if(De.isCollapsed(t))return{anchor:n,focus:n};var r=w5(e,t.focus);return r?{anchor:n,focus:r}:null}function C5(e,t,n){var r=fo.get(e),i=r==null?void 0:r.find(d=>{var{path:p}=d;return q.equals(p,t.path)});if(!i||t.offset<=i.diff.start)return Yt.transform(t,n,{affinity:"backward"});var{diff:o}=i;if(t.offset<=o.start+o.text.length){var s={path:t.path,offset:o.start},a=Yt.transform(s,n,{affinity:"backward"});return a?{path:a.path,offset:a.offset+t.offset-o.start}:null}var f={path:t.path,offset:t.offset-o.text.length+o.end-o.start},h=Yt.transform(f,n,{affinity:"backward"});return h?n.type==="split_node"&&q.equals(n.path,t.path)&&f.offset<n.position&&o.start<n.position?h:{path:h.path,offset:h.offset+o.text.length-o.end+o.start}:null}function x9(e,t,n){var r=C5(e,t.anchor,n);if(!r)return null;if(De.isCollapsed(t))return{anchor:r,focus:r};var i=C5(e,t.focus,n);return i?{anchor:r,focus:i}:null}function UN(e,t){var{path:n,diff:r,id:i}=e;switch(t.type){case"insert_text":return!q.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:i,path:n};case"remove_text":return!q.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:i,path:n};case"split_node":return!q.equals(t.path,n)||t.position>=r.end?{diff:r,id:i,path:q.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:i,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:i,path:q.transform(n,t,{affinity:"forward"})};case"merge_node":return q.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:i,path:q.transform(n,t)}:{diff:r,id:i,path:q.transform(n,t)}}var o=q.transform(n,t);return o?{diff:r,path:o,id:i}:null}function E9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E9(Object(n),!0).forEach(function(r){Ps(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var XN=25,KN=200,YN=function(){},qN=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function ZN(e){var{editor:t,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=e,i=!1,o=null,s=null,a=null,f=0,h=!1,d=()=>{var oe=$l.get(t);if($l.delete(t),oe){var{selection:ce}=t,me=C9(t,oe);me&&(!ce||!De.equals(me,ce))&&Le.select(t,me)}},p=()=>{var oe=Wl.get(t);if(Wl.delete(t),!!oe){if(oe.at){var ce=Yt.isPoint(oe.at)?w5(t,oe.at):C9(t,oe.at);if(!ce)return;var me=F.range(t,ce);(!t.selection||!De.equals(t.selection,me))&&Le.select(t,ce)}oe.run()}},v=()=>{if(s&&(clearTimeout(s),s=null),a&&(clearTimeout(a),a=null),!_()&&!I()){d();return}i||(i=!0,setTimeout(()=>i=!1)),I()&&(i="action");var oe=t.selection&&F.rangeRef(t,t.selection,{affinity:"forward"});Ia.set(t,t.marks),YN("flush",Wl.get(t),fo.get(t));for(var ce=_(),me;me=(ye=fo.get(t))===null||ye===void 0?void 0:ye[0];){var ye,Fe,Te=tu.get(t);Te!==void 0&&(tu.delete(t),t.marks=Te),Te&&h===!1&&(h=null);var ge=VN(me);(!t.selection||!De.equals(t.selection,ge))&&Le.select(t,ge),me.diff.text?F.insertText(t,me.diff.text):F.deleteFragment(t),fo.set(t,(Fe=fo.get(t))===null||Fe===void 0?void 0:Fe.filter(X=>{var{id:Ee}=X;return Ee!==me.id})),WN(t,me)||(ce=!1,Wl.delete(t),Ia.delete(t),i="action",$l.delete(t),n.cancel(),r.cancel(),oe==null||oe.unref())}var se=oe==null?void 0:oe.unref();if(se&&!$l.get(t)&&(!t.selection||!De.equals(se,t.selection))&&Le.select(t,se),I()){p();return}ce&&n(),n.flush(),r.flush(),d();var we=Ia.get(t);Ia.delete(t),we!==void 0&&(t.marks=we,t.onChange())},w=oe=>{o&&clearTimeout(o),o=setTimeout(()=>{Pf.set(t,!1),v()},XN)},E=oe=>{Pf.set(t,!0),o&&(clearTimeout(o),o=null)},y=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,me=p5.get(t);if(me){if(_()||ce){me.style.display="none";return}me.style.removeProperty("display")}},S=(oe,ce)=>{var me,ye=(me=fo.get(t))!==null&&me!==void 0?me:[];fo.set(t,ye);var Fe=$e.leaf(t,oe),Te=ye.findIndex(we=>q.equals(we.path,oe));if(Te<0){var ge=LP(Fe.text,ce);ge&&ye.push({path:oe,diff:ce,id:f++}),y();return}var se=zN(Fe.text,ye[Te].diff,ce);if(!se){ye.splice(Te,1),y();return}ye[Te]=Q2(Q2({},ye[Te]),{},{diff:se})},A=function(ce){var{at:me}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};h=!1,$l.delete(t),n.cancel(),r.cancel(),I()&&v(),Wl.set(t,{at:me,run:ce}),a=setTimeout(v)},B=oe=>{var ce;s&&(clearTimeout(s),s=null);var{inputType:me}=oe,ye=null,Fe=oe.dataTransfer||oe.data||void 0;h!==!1&&me!=="insertText"&&me!=="insertCompositionText"&&(h=!1);var[Te]=oe.getTargetRanges();Te&&(ye=Ae.toSlateRange(t,Te,{exactMatch:!1,suppressThrow:!0}));var ge=Ae.getWindow(t),se=ge.getSelection();if(!ye&&se&&(Te=se,ye=Ae.toSlateRange(t,se,{exactMatch:!1,suppressThrow:!0})),ye=(ce=ye)!==null&&ce!==void 0?ce:t.selection,!!ye){var we=!0;if(me.startsWith("delete")){if(De.isExpanded(ye)){var[X,Ee]=De.edges(ye),st=$e.leaf(t,X.path);if(st.text.length===X.offset&&Ee.offset===0){var Me=F.next(t,{at:X.path,match:ot.isText});Me&&q.equals(Me[1],Ee.path)&&(ye={anchor:Ee,focus:Ee})}}var K=me.endsWith("Backward")?"backward":"forward",[fe,Ce]=De.edges(ye),[Se,Ke]=F.leaf(t,fe.path),Ue={text:"",start:fe.offset,end:Ce.offset},Bt=fo.get(t),It=Bt==null?void 0:Bt.find(Tn=>q.equals(Tn.path,Ke)),St=It?[It.diff,Ue]:[Ue],lt=kP(Se.text,...St);if(lt.length===0&&(we=!1),De.isExpanded(ye)){if(we&&q.equals(ye.anchor.path,ye.focus.path)){var yt={path:ye.anchor.path,offset:fe.offset},wn=F.range(t,yt,yt);return z(wn),S(ye.anchor.path,{text:"",end:Ce.offset,start:fe.offset})}return A(()=>F.deleteFragment(t,{direction:K}),{at:ye})}}switch(me){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return A(()=>F.deleteFragment(t),{at:ye});case"deleteContent":case"deleteContentForward":{var{anchor:Rt}=ye;if(we&&De.isCollapsed(ye)){var Nn=$e.leaf(t,Rt.path);if(Rt.offset<Nn.text.length)return S(Rt.path,{text:"",start:Rt.offset,end:Rt.offset+1})}return A(()=>F.deleteForward(t),{at:ye})}case"deleteContentBackward":{var rr,{anchor:Dn}=ye,en=y5(Te)?Te.isCollapsed:!!((rr=Te)!==null&&rr!==void 0&&rr.collapsed);return we&&en&&De.isCollapsed(ye)&&Dn.offset>0?S(Dn.path,{text:"",start:Dn.offset-1,end:Dn.offset}):A(()=>F.deleteBackward(t),{at:ye})}case"deleteEntireSoftLine":return A(()=>{F.deleteBackward(t,{unit:"line"}),F.deleteForward(t,{unit:"line"})},{at:ye});case"deleteHardLineBackward":return A(()=>F.deleteBackward(t,{unit:"block"}),{at:ye});case"deleteSoftLineBackward":return A(()=>F.deleteBackward(t,{unit:"line"}),{at:ye});case"deleteHardLineForward":return A(()=>F.deleteForward(t,{unit:"block"}),{at:ye});case"deleteSoftLineForward":return A(()=>F.deleteForward(t,{unit:"line"}),{at:ye});case"deleteWordBackward":return A(()=>F.deleteBackward(t,{unit:"word"}),{at:ye});case"deleteWordForward":return A(()=>F.deleteForward(t,{unit:"word"}),{at:ye});case"insertLineBreak":return A(()=>F.insertSoftBreak(t),{at:ye});case"insertParagraph":return A(()=>F.insertBreak(t),{at:ye});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(qN(Fe))return A(()=>Ae.insertData(t,Fe),{at:ye});var tn=Fe??"";if(tu.get(t)&&(tn=tn.replace("\uFEFF","")),me==="insertText"&&/.*\n.*\n$/.test(tn)&&(tn=tn.slice(0,-1)),tn.includes(`
`))return A(()=>{var Tn=tn.split(`
`);Tn.forEach((yr,wr)=>{yr&&F.insertText(t,yr),wr!==Tn.length-1&&F.insertSoftBreak(t)})},{at:ye});if(q.equals(ye.anchor.path,ye.focus.path)){var[Kn,Hn]=De.edges(ye),Wt={start:Kn.offset,end:Hn.offset,text:tn};if(tn&&h&&me==="insertCompositionText"){var Sr=h.start+h.text.search(/\S|$/),vr=Wt.start+Wt.text.search(/\S|$/);vr===Sr+1&&Wt.end===h.start+h.text.length?(Wt.start-=1,h=null,ne()):h=!1}else me==="insertText"?h===null?h=Wt:h&&De.isCollapsed(ye)&&h.end+h.text.length===Kn.offset?h=Q2(Q2({},h),{},{text:h.text+tn}):h=!1:h=!1;if(we){S(Kn.path,Wt);return}}return A(()=>F.insertText(t,tn),{at:ye})}}}},I=()=>!!Wl.get(t),_=()=>{var oe;return!!((oe=fo.get(t))!==null&&oe!==void 0&&oe.length)},L=()=>I()||_(),j=()=>i,z=oe=>{$l.set(t,oe),s&&(clearTimeout(s),s=null);var{selection:ce}=t;if(oe){var me=!ce||!q.equals(ce.anchor.path,oe.anchor.path),ye=!ce||!q.equals(ce.anchor.path.slice(0,-1),oe.anchor.path.slice(0,-1));(me&&h||ye)&&(h=!1),(me||_())&&(s=setTimeout(v,KN))}},J=()=>{(I()||!_())&&v()},ae=oe=>{_()||(y(!0),setTimeout(y))},ne=()=>{I()||(a=setTimeout(v))},Pe=oe=>{if(!(_()||I())&&oe.some(me=>Ww(t,me,oe))){var ce;(ce=MP.get(t))===null||ce===void 0||ce()}};return{flush:v,scheduleFlush:ne,hasPendingDiffs:_,hasPendingAction:I,hasPendingChanges:L,isFlushing:j,handleUserSelect:z,handleCompositionEnd:w,handleCompositionStart:E,handleDOMBeforeInput:B,handleKeyDown:ae,handleDomMutations:Pe,handleInput:J}}function QN(){var e=W.useRef(!1);return W.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var kg=Cm?W.useLayoutEffect:W.useEffect;function JN(e,t,n){var[r]=W.useState(()=>new MutationObserver(t));kg(()=>{r.takeRecords()}),W.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,n),()=>r.disconnect()},[r,e,n])}var eH=["node"];function P9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P9(Object(n),!0).forEach(function(r){Ps(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var nH={subtree:!0,childList:!0,characterData:!0},rH=Gi?e=>{var{node:t}=e,n=a0(e,eH);if(!Gi)return null;var r=hc(),i=QN(),[o]=W.useState(()=>ZN(tH({editor:r},n)));return JN(t,o.handleDomMutations,nH),Hw.set(r,o.scheduleFlush),i&&o.flush(),o}:()=>null,iH=["anchor","focus"],oH=["anchor","focus"],sH=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n]),_P=(e,t)=>{var n=a0(e,iH),r=a0(t,oH);return e[l0]===t[l0]&&sH(n,r)},uH=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(!De.equals(r,i)||!_P(r,i))return!1}return!0},aH=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.anchor.offset!==i.anchor.offset||r.focus.offset!==i.focus.offset||!_P(r,i))return!1}return!0};function S9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S9(Object(n),!0).forEach(function(r){Ps(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var cH=e=>{var{isLast:t,leaf:n,parent:r,text:i}=e,o=hc(),s=Ae.findPath(o,i),a=q.parent(s),f=!!n[bP];return o.isVoid(r)?Pt.createElement(ty,{length:$e.string(r).length}):n.text===""&&r.children[r.children.length-1]===i&&!o.isInline(r)&&F.string(o,a)===""?Pt.createElement(ty,{isLineBreak:!0,isMarkPlaceholder:f}):n.text===""?Pt.createElement(ty,{isMarkPlaceholder:f}):t&&n.text.slice(-1)===`
`?Pt.createElement(D9,{isTrailing:!0,text:n.text}):Pt.createElement(D9,{text:n.text})},D9=e=>{var{text:t,isTrailing:n=!1}=e,r=W.useRef(null),i=()=>"".concat(t??"").concat(n?`
`:""),[o]=W.useState(i);return kg(()=>{var s=i();r.current&&r.current.textContent!==s&&(r.current.textContent=s)}),Pt.createElement(fH,{ref:r},o)},fH=W.memo(W.forwardRef((e,t)=>Pt.createElement("span",{"data-slate-string":!0,ref:t},e.children))),ty=e=>{var{length:t=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=e,i={"data-slate-zero-width":n?"n":"z","data-slate-length":t};return r&&(i["data-slate-mark-placeholder"]=!0),Pt.createElement("span",lH({},i),!(Gi||AP)||!n?"\uFEFF":null,n?Pt.createElement("br",null):null)};function T9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T9(Object(n),!0).forEach(function(r){Ps(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var hH=Gi?300:0;function dH(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}function A9(e){e.current&&(clearTimeout(e.current),e.current=null)}var gH=e=>{var{leaf:t,isLast:n,text:r,parent:i,renderPlaceholder:o,renderLeaf:s=B=>Pt.createElement(mH,NP({},B))}=e,a=hc(),f=W.useRef(null),h=W.useRef(null),[d,p]=W.useState(!1),v=W.useRef(null),w=W.useCallback(B=>{if(dH(f,B==null),B==null){var I;p5.delete(a),(I=t.onPlaceholderResize)===null||I===void 0||I.call(t,null)}else{if(p5.set(a,B),!f.current){var _=window.ResizeObserver||wN;f.current=new _(()=>{var L;(L=t.onPlaceholderResize)===null||L===void 0||L.call(t,B)})}f.current.observe(B),h.current=B}},[h,t,a]),E=Pt.createElement(cH,{isLast:n,leaf:t,parent:i,text:r}),y=!!t[l0];if(W.useEffect(()=>(y?v.current||(v.current=setTimeout(()=>{p(!0),v.current=null},hH)):(A9(v),p(!1)),()=>A9(v)),[y,p]),y&&d){var S={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:wf?"inherit":void 0},contentEditable:!1,ref:w}};E=Pt.createElement(Pt.Fragment,null,o(S),E)}var A={"data-slate-leaf":!0};return s({attributes:A,children:E,leaf:t,text:r})},pH=Pt.memo(gH,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&ot.equals(t.leaf,e.leaf)&&t.leaf[l0]===e.leaf[l0]),mH=e=>{var{attributes:t,children:n}=e;return Pt.createElement("span",NP({},t),n)},vH=e=>{for(var{decorations:t,isLast:n,parent:r,renderPlaceholder:i,renderLeaf:o,text:s}=e,a=hc(),f=W.useRef(null),h=ot.decorations(s,t),d=Ae.findKey(a,s),p=[],v=0;v<h.length;v++){var w=h[v];p.push(Pt.createElement(pH,{isLast:n&&v===h.length-1,key:"".concat(d.id,"-").concat(v),renderPlaceholder:i,leaf:w,text:s,parent:r,renderLeaf:o}))}var E=W.useCallback(y=>{var S=zv.get(a);y?(S==null||S.set(d,y),bf.set(s,y),Fg.set(y,s)):(S==null||S.delete(d),bf.delete(s),f.current&&Fg.delete(f.current)),f.current=y},[f,a,d,s]);return Pt.createElement("span",{"data-slate-node":"text",ref:E},p)},HP=Pt.memo(vH,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&aH(t.decorations,e.decorations));function B9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function x5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B9(Object(n),!0).forEach(function(r){Ps(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var yH=e=>{var{decorations:t,element:n,renderElement:r=B=>Pt.createElement(CH,x5({},B)),renderPlaceholder:i,renderLeaf:o,selection:s}=e,a=hc(),f=PH(),h=a.isInline(n),d=Ae.findKey(a,n),p=W.useCallback(B=>{var I=zv.get(a);B?(I==null||I.set(d,B),bf.set(n,B),Fg.set(B,n)):(I==null||I.delete(d),bf.delete(n))},[a,d,n]),v=WP({decorations:t,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}),w={"data-slate-node":"element",ref:p};if(h&&(w["data-slate-inline"]=!0),!h&&F.hasInlines(a,n)){var E=$e.string(n),y=wP(E);y==="rtl"&&(w.dir=y)}if(F.isVoid(a,n)){w["data-slate-void"]=!0,!f&&h&&(w.contentEditable=!1);var S=h?"span":"div",[[A]]=$e.texts(n);v=Pt.createElement(S,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Pt.createElement(HP,{renderPlaceholder:i,decorations:[],isLast:!1,parent:n,text:A})),_w.set(A,0),Nw.set(A,n)}return r({attributes:w,children:v,element:n})},wH=Pt.memo(yH,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&uH(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&De.equals(e.selection,t.selection))),CH=e=>{var{attributes:t,children:n,element:r}=e,i=hc(),o=i.isInline(r)?"span":"div";return Pt.createElement(o,x5(x5({},t),{},{style:{position:"relative"}}),n)},GP=W.createContext(()=>[]),xH=()=>W.useContext(GP),EH=W.createContext(!1),WP=e=>{for(var{decorations:t,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}=e,a=xH(),f=hc(),h=Ae.findPath(f,n),d=[],p=at.isElement(n)&&!f.isInline(n)&&F.hasInlines(f,n),v=0;v<n.children.length;v++){var w=h.concat(v),E=n.children[v],y=Ae.findKey(f,E),S=F.range(f,w),A=s&&De.intersection(S,s),B=a([E,w]);for(var I of t){var _=De.intersection(I,S);_&&B.push(_)}at.isElement(E)?d.push(Pt.createElement(EH.Provider,{key:"provider-".concat(y.id),value:!!A},Pt.createElement(wH,{decorations:B,element:E,key:y.id,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:A}))):d.push(Pt.createElement(HP,{decorations:B,key:y.id,isLast:p&&v===n.children.length-1,parent:n,renderPlaceholder:i,renderLeaf:o,text:E})),_w.set(E,v),Nw.set(E,n)}return d},$P=W.createContext(!1),PH=()=>W.useContext($P),jP=W.createContext(null),SH=()=>{var e=W.useContext(jP);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t};function DH(){var e=hc(),t=W.useRef(!1),n=W.useRef(0),r=W.useCallback(()=>{if(!t.current){t.current=!0;var i=Ae.getWindow(e);i.cancelAnimationFrame(n.current),n.current=i.requestAnimationFrame(()=>{t.current=!1})}},[e]);return W.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:t,onUserInput:r}}var TH=3,AH={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},BH={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},RH={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Zn=e=>{var t=AH[e],n=BH[e],r=RH[e],i=t&&dn.isHotkey(t),o=n&&dn.isHotkey(n),s=r&&dn.isHotkey(r);return a=>!!(i&&i(a)||y9&&o&&o(a)||!y9&&s&&s(a))},nr={isBold:Zn("bold"),isCompose:Zn("compose"),isMoveBackward:Zn("moveBackward"),isMoveForward:Zn("moveForward"),isDeleteBackward:Zn("deleteBackward"),isDeleteForward:Zn("deleteForward"),isDeleteLineBackward:Zn("deleteLineBackward"),isDeleteLineForward:Zn("deleteLineForward"),isDeleteWordBackward:Zn("deleteWordBackward"),isDeleteWordForward:Zn("deleteWordForward"),isExtendBackward:Zn("extendBackward"),isExtendForward:Zn("extendForward"),isExtendLineBackward:Zn("extendLineBackward"),isExtendLineForward:Zn("extendLineForward"),isItalic:Zn("italic"),isMoveLineBackward:Zn("moveLineBackward"),isMoveLineForward:Zn("moveLineForward"),isMoveWordBackward:Zn("moveWordBackward"),isMoveWordForward:Zn("moveWordForward"),isRedo:Zn("redo"),isSoftBreak:Zn("insertSoftBreak"),isSplitBlock:Zn("splitBlock"),isTransposeCharacter:Zn("transposeCharacter"),isUndo:Zn("undo")},MH=(e,t)=>{var n=[],r=()=>{n=[]},i=s=>{if(t.current){var a=s.filter(f=>Ww(e,f,s));n.push(...a)}};function o(){n.length>0&&(n.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(a=>{s.target.insertBefore(a,s.nextSibling)}),s.addedNodes.forEach(a=>{s.target.removeChild(a)}))}),r())}return{registerMutations:i,restoreDOM:o,clear:r}},bH={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class zP extends W.Component{constructor(){super(...arguments),Ps(this,"context",null),Ps(this,"manager",null),Ps(this,"mutationObserver",null)}observe(){var t,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(t=this.mutationObserver)===null||t===void 0||t.observe(n.current,bH)}componentDidMount(){var{receivedUserInput:t}=this.props,n=this.context;this.manager=MH(n,t),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var t,n,r,i=(t=this.mutationObserver)===null||t===void 0?void 0:t.takeRecords();if(i!=null&&i.length){var o;(o=this.manager)===null||o===void 0||o.registerMutations(i)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var t;(t=this.manager)===null||t===void 0||t.clear(),this.observe()}componentWillUnmount(){var t;(t=this.mutationObserver)===null||t===void 0||t.disconnect()}render(){return this.props.children}}Ps(zP,"contextType",Lw);var OH=Gi?zP:e=>{var{children:t}=e;return Pt.createElement(Pt.Fragment,null,t)},IH=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],FH=["text"];function R9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R9(Object(n),!0).forEach(function(r){Ps(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var kH=e=>Pt.createElement(Pt.Fragment,null,WP(e)),LH=e=>{var t=W.useCallback(K=>Pt.createElement(_H,Lu({},K)),[]),{autoFocus:n,decorate:r=NH,onDOMBeforeInput:i,placeholder:o,readOnly:s=!1,renderElement:a,renderLeaf:f,renderPlaceholder:h=t,scrollSelectionIntoView:d=HH,style:p={},as:v="div",disableDefaultStyles:w=!1}=e,E=a0(e,IH),y=SH(),[S,A]=W.useState(!1),B=W.useRef(null),I=W.useRef([]),[_,L]=W.useState(),j=W.useRef(!1),{onUserInput:z,receivedUserInput:J}=DH(),[,ae]=W.useReducer(K=>K+1,0);MP.set(y,ae),m5.set(y,s);var ne=W.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);W.useEffect(()=>{B.current&&n&&B.current.focus()},[n]);var Pe=W.useRef(),oe=W.useMemo(()=>Sk(()=>{var K=Ae.toDOMNode(y,y),fe=K.getRootNode();if(w9&&!j.current&&wf&&fe instanceof ShadowRoot){j.current=!0;var Ce=NN();Ce?document.execCommand("indent"):Le.deselect(y),j.current=!1;return}var Se=Pe.current;if((Gi||!Ae.isComposing(y))&&(!ne.isUpdatingSelection||Se!=null&&Se.isFlushing())&&!ne.isDraggingInternally){var Ke=Ae.findDocumentOrShadowRoot(y),{activeElement:Ue}=Ke,Bt=Ae.toDOMNode(y,y),It=Ke.getSelection();if(Ue===Bt?(ne.latestElement=Ue,Vl.set(y,!0)):Vl.delete(y),!It)return Le.deselect(y);var{anchorNode:St,focusNode:lt}=It,yt=Ae.hasEditableTarget(y,St)||Ae.isTargetInsideNonReadonlyVoid(y,St),wn=Ae.hasEditableTarget(y,lt)||Ae.isTargetInsideNonReadonlyVoid(y,lt);if(yt&&wn){var Rt=Ae.toSlateRange(y,It,{exactMatch:!1,suppressThrow:!0});Rt&&(!Ae.isComposing(y)&&!(Se!=null&&Se.hasPendingChanges())&&!(Se!=null&&Se.isFlushing())?Le.select(y,Rt):Se==null||Se.handleUserSelect(Rt))}s&&(!yt||!wn)&&Le.deselect(y)}},100),[y,s,ne]),ce=W.useMemo(()=>Ck(oe,0),[oe]);Pe.current=rH({node:B,onDOMSelectionChange:oe,scheduleOnDOMSelectionChange:ce}),kg(()=>{var K,fe,Ce;B.current&&(Ce=Gw(B.current))?(RP.set(y,Ce),xm.set(y,B.current),bf.set(y,B.current),Fg.set(B.current,y)):bf.delete(y);var{selection:Se}=y,Ke=Ae.findDocumentOrShadowRoot(y),Ue=Ke.getSelection();if(!(!Ue||!Ae.isFocused(y)||(K=Pe.current)!==null&&K!==void 0&&K.hasPendingAction())){var Bt=yt=>{var wn=Ue.type!=="None";if(!(!Se&&!wn)){var Rt=Ue.focusNode,Nn;if(Wd&&Ue.rangeCount>1){var rr=Ue.getRangeAt(0),Dn=Ue.getRangeAt(Ue.rangeCount-1);rr.startContainer===Rt?Nn=Dn.endContainer:Nn=rr.startContainer}else Nn=Ue.anchorNode;var en=xm.get(y),tn=!1;if(en.contains(Nn)&&en.contains(Rt)&&(tn=!0),wn&&tn&&Se&&!yt){var Kn=Ae.toSlateRange(y,Ue,{exactMatch:!0,suppressThrow:!0});if(Kn&&De.equals(Kn,Se)){var Hn;if(!ne.hasMarkPlaceholder||(Hn=Nn)!==null&&Hn!==void 0&&(Hn=Hn.parentElement)!==null&&Hn!==void 0&&Hn.hasAttribute("data-slate-mark-placeholder"))return}}if(Se&&!Ae.hasRange(y,Se)){y.selection=Ae.toSlateRange(y,Ue,{exactMatch:!1,suppressThrow:!0});return}ne.isUpdatingSelection=!0;var Wt=Se&&Ae.toDOMRange(y,Se);return Wt?(Ae.isComposing(y)&&!Gi?Ue.collapseToEnd():De.isBackward(Se)?Ue.setBaseAndExtent(Wt.endContainer,Wt.endOffset,Wt.startContainer,Wt.startOffset):Ue.setBaseAndExtent(Wt.startContainer,Wt.startOffset,Wt.endContainer,Wt.endOffset),d(y,Wt)):Ue.removeAllRanges(),Wt}};Ue.rangeCount<=1&&Bt();var It=((fe=Pe.current)===null||fe===void 0?void 0:fe.isFlushing())==="action";if(!Gi||!It){setTimeout(()=>{ne.isUpdatingSelection=!1});return}var St=null,lt=requestAnimationFrame(()=>{if(It){var yt=wn=>{try{var Rt=Ae.toDOMNode(y,y);Rt.focus(),Bt(wn)}catch{}};yt(),St=setTimeout(()=>{yt(!0),ne.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(lt),St&&clearTimeout(St)}}});var me=W.useCallback(K=>{var fe=Ae.toDOMNode(y,y),Ce=fe.getRootNode();if(w9&&j!==null&&j!==void 0&&j.current&&wf&&Ce instanceof ShadowRoot){var Se=K.getTargetRanges(),Ke=Se[0],Ue=new window.Range;Ue.setStart(Ke.startContainer,Ke.startOffset),Ue.setEnd(Ke.endContainer,Ke.endOffset);var Bt=Ae.toSlateRange(y,Ue,{exactMatch:!1,suppressThrow:!1});Le.select(y,Bt),K.preventDefault(),K.stopImmediatePropagation();return}if(z(),!s&&Ae.hasEditableTarget(y,K.target)&&!GH(K,i)){var It;if(Pe.current)return Pe.current.handleDOMBeforeInput(K);ce.flush(),oe.flush();var{selection:St}=y,{inputType:lt}=K,yt=K.dataTransfer||K.data||void 0,wn=lt==="insertCompositionText"||lt==="deleteCompositionText";if(wn&&Ae.isComposing(y))return;var Rt=!1;if(lt==="insertText"&&St&&De.isCollapsed(St)&&K.data&&K.data.length===1&&/[a-z ]/i.test(K.data)&&St.anchor.offset!==0){var Nn,rr;Rt=!0,y.marks&&(Rt=!1);var{anchor:Dn}=St,[en,tn]=Ae.toDOMPoint(y,Dn),Kn=(Nn=en.parentElement)===null||Nn===void 0?void 0:Nn.closest("a"),Hn=Ae.getWindow(y);if(Rt&&Kn&&Ae.hasDOMNode(y,Kn)){var Wt,Sr=Hn==null?void 0:Hn.document.createTreeWalker(Kn,NodeFilter.SHOW_TEXT).lastChild();Sr===en&&((Wt=Sr.textContent)===null||Wt===void 0?void 0:Wt.length)===tn&&(Rt=!1)}if(Rt&&en.parentElement&&(Hn==null||(rr=Hn.getComputedStyle(en.parentElement))===null||rr===void 0?void 0:rr.whiteSpace)==="pre"){var vr=F.above(y,{at:Dn.path,match:Ui=>at.isElement(Ui)&&F.isBlock(y,Ui)});vr&&$e.string(vr[0]).includes("	")&&(Rt=!1)}}if(!lt.startsWith("delete")||lt.startsWith("deleteBy")){var[Tn]=K.getTargetRanges();if(Tn){var yr=Ae.toSlateRange(y,Tn,{exactMatch:!1,suppressThrow:!1});if(!St||!De.equals(St,yr)){Rt=!1;var wr=!wn&&y.selection&&F.rangeRef(y,y.selection);Le.select(y,yr),wr&&mg.set(y,wr)}}}if(wn)return;if(Rt||K.preventDefault(),St&&De.isExpanded(St)&&lt.startsWith("delete")){var ir=lt.endsWith("Backward")?"backward":"forward";F.deleteFragment(y,{direction:ir});return}switch(lt){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{F.deleteFragment(y);break}case"deleteContent":case"deleteContentForward":{F.deleteForward(y);break}case"deleteContentBackward":{F.deleteBackward(y);break}case"deleteEntireSoftLine":{F.deleteBackward(y,{unit:"line"}),F.deleteForward(y,{unit:"line"});break}case"deleteHardLineBackward":{F.deleteBackward(y,{unit:"block"});break}case"deleteSoftLineBackward":{F.deleteBackward(y,{unit:"line"});break}case"deleteHardLineForward":{F.deleteForward(y,{unit:"block"});break}case"deleteSoftLineForward":{F.deleteForward(y,{unit:"line"});break}case"deleteWordBackward":{F.deleteBackward(y,{unit:"word"});break}case"deleteWordForward":{F.deleteForward(y,{unit:"word"});break}case"insertLineBreak":F.insertSoftBreak(y);break;case"insertParagraph":{F.insertBreak(y);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{lt==="insertFromComposition"&&Ae.isComposing(y)&&(A(!1),Pf.set(y,!1)),(yt==null?void 0:yt.constructor.name)==="DataTransfer"?Ae.insertData(y,yt):typeof yt=="string"&&(Rt?I.current.push(()=>F.insertText(y,yt)):F.insertText(y,yt));break}}var Vi=(It=mg.get(y))===null||It===void 0?void 0:It.unref();mg.delete(y),Vi&&(!y.selection||!De.equals(y.selection,Vi))&&Le.select(y,Vi)}},[y,oe,z,i,s,ce]),ye=W.useCallback(K=>{K==null?(oe.cancel(),ce.cancel(),xm.delete(y),bf.delete(y),B.current&&Hl&&B.current.removeEventListener("beforeinput",me)):Hl&&K.addEventListener("beforeinput",me),B.current=K},[oe,ce,y,me]);kg(()=>{var K=Ae.getWindow(y);return K.document.addEventListener("selectionchange",ce),()=>{K.document.removeEventListener("selectionchange",ce)}},[ce]);var Fe=r([y,[]]),Te=o&&y.children.length===1&&Array.from($e.texts(y)).length===1&&$e.string(y)===""&&!S,ge=W.useCallback(K=>{if(K&&Te){var fe;L((fe=K.getBoundingClientRect())===null||fe===void 0?void 0:fe.height)}else L(void 0)},[Te]);if(Te){var se=F.start(y,[]);Fe.push({[l0]:!0,placeholder:o,onPlaceholderResize:ge,anchor:se,focus:se})}var{marks:we}=y;if(ne.hasMarkPlaceholder=!1,y.selection&&De.isCollapsed(y.selection)&&we){var{anchor:X}=y.selection,Ee=$e.leaf(y,X.path),st=a0(Ee,FH);if(!ot.equals(Ee,we,{loose:!0})){ne.hasMarkPlaceholder=!0;var Me=Object.fromEntries(Object.keys(st).map(K=>[K,null]));Fe.push(Lu(Lu(Lu({[bP]:!0},Me),we),{},{anchor:X,focus:X}))}}return W.useEffect(()=>{setTimeout(()=>{var{selection:K}=y;if(K){var{anchor:fe}=K,Ce=$e.leaf(y,fe.path);if(we&&!ot.equals(Ce,we,{loose:!0})){tu.set(y,we);return}}tu.delete(y)})}),Pt.createElement($P.Provider,{value:s},Pt.createElement(GP.Provider,{value:r},Pt.createElement(OH,{node:B,receivedUserInput:J},Pt.createElement(v,Lu(Lu({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},E),{},{spellCheck:Hl||!Cm?E.spellCheck:!1,autoCorrect:Hl||!Cm?E.autoCorrect:"false",autoCapitalize:Hl||!Cm?E.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:ye,style:Lu(Lu({},w?{}:Lu({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},_?{minHeight:_}:{})),p),onBeforeInput:W.useCallback(K=>{if(!Hl&&!s&&!_i(K,E.onBeforeInput)&&Ae.hasSelectableTarget(y,K.target)&&(K.preventDefault(),!Ae.isComposing(y))){var fe=K.data;F.insertText(y,fe)}},[E.onBeforeInput,y,s]),onInput:W.useCallback(K=>{if(!_i(K,E.onInput)){if(Pe.current){Pe.current.handleInput();return}for(var fe of I.current)fe();I.current=[]}},[E.onInput]),onBlur:W.useCallback(K=>{if(!(s||ne.isUpdatingSelection||!Ae.hasSelectableTarget(y,K.target)||_i(K,E.onBlur))){var fe=Ae.findDocumentOrShadowRoot(y);if(ne.latestElement!==fe.activeElement){var{relatedTarget:Ce}=K,Se=Ae.toDOMNode(y,y);if(Ce!==Se&&!(ms(Ce)&&Ce.hasAttribute("data-slate-spacer"))){if(Ce!=null&&nc(Ce)&&Ae.hasDOMNode(y,Ce)){var Ke=Ae.toSlateNode(y,Ce);if(at.isElement(Ke)&&!y.isVoid(Ke))return}if(wf){var Ue=fe.getSelection();Ue==null||Ue.removeAllRanges()}Vl.delete(y)}}}},[s,ne.isUpdatingSelection,ne.latestElement,y,E.onBlur]),onClick:W.useCallback(K=>{if(Ae.hasTarget(y,K.target)&&!_i(K,E.onClick)&&nc(K.target)){var fe=Ae.toSlateNode(y,K.target),Ce=Ae.findPath(y,fe);if(!F.hasPath(y,Ce)||$e.get(y,Ce)!==fe)return;if(K.detail===TH&&Ce.length>=1){var Se=Ce;if(!(at.isElement(fe)&&F.isBlock(y,fe))){var Ke,Ue=F.above(y,{match:Rt=>at.isElement(Rt)&&F.isBlock(y,Rt),at:Ce});Se=(Ke=Ue==null?void 0:Ue[1])!==null&&Ke!==void 0?Ke:Ce.slice(0,1)}var Bt=F.range(y,Se);Le.select(y,Bt);return}if(s)return;var It=F.start(y,Ce),St=F.end(y,Ce),lt=F.void(y,{at:It}),yt=F.void(y,{at:St});if(lt&&yt&&q.equals(lt[1],yt[1])){var wn=F.range(y,It);Le.select(y,wn)}}},[y,E.onClick,s]),onCompositionEnd:W.useCallback(K=>{if(Ae.hasSelectableTarget(y,K.target)){var fe;if(Ae.isComposing(y)&&Promise.resolve().then(()=>{A(!1),Pf.set(y,!1)}),(fe=Pe.current)===null||fe===void 0||fe.handleCompositionEnd(K),_i(K,E.onCompositionEnd)||Gi)return;if(!wf&&!AN&&!AP&&!RN&&!BN&&K.data){var Ce=tu.get(y);tu.delete(y),Ce!==void 0&&(Ia.set(y,y.marks),y.marks=Ce),F.insertText(y,K.data);var Se=Ia.get(y);Ia.delete(y),Se!==void 0&&(y.marks=Se)}}},[E.onCompositionEnd,y]),onCompositionUpdate:W.useCallback(K=>{Ae.hasSelectableTarget(y,K.target)&&!_i(K,E.onCompositionUpdate)&&(Ae.isComposing(y)||(A(!0),Pf.set(y,!0)))},[E.onCompositionUpdate,y]),onCompositionStart:W.useCallback(K=>{if(Ae.hasSelectableTarget(y,K.target)){var fe;if((fe=Pe.current)===null||fe===void 0||fe.handleCompositionStart(K),_i(K,E.onCompositionStart)||Gi)return;A(!0);var{selection:Ce}=y;if(Ce&&De.isExpanded(Ce)){F.deleteFragment(y);return}}},[E.onCompositionStart,y]),onCopy:W.useCallback(K=>{Ae.hasSelectableTarget(y,K.target)&&!_i(K,E.onCopy)&&!M9(K)&&(K.preventDefault(),Ae.setFragmentData(y,K.clipboardData,"copy"))},[E.onCopy,y]),onCut:W.useCallback(K=>{if(!s&&Ae.hasSelectableTarget(y,K.target)&&!_i(K,E.onCut)&&!M9(K)){K.preventDefault(),Ae.setFragmentData(y,K.clipboardData,"cut");var{selection:fe}=y;if(fe)if(De.isExpanded(fe))F.deleteFragment(y);else{var Ce=$e.parent(y,fe.anchor.path);F.isVoid(y,Ce)&&Le.delete(y)}}},[s,y,E.onCut]),onDragOver:W.useCallback(K=>{if(Ae.hasTarget(y,K.target)&&!_i(K,E.onDragOver)){var fe=Ae.toSlateNode(y,K.target);at.isElement(fe)&&F.isVoid(y,fe)&&K.preventDefault()}},[E.onDragOver,y]),onDragStart:W.useCallback(K=>{if(!s&&Ae.hasTarget(y,K.target)&&!_i(K,E.onDragStart)){var fe=Ae.toSlateNode(y,K.target),Ce=Ae.findPath(y,fe),Se=at.isElement(fe)&&F.isVoid(y,fe)||F.void(y,{at:Ce,voids:!0});if(Se){var Ke=F.range(y,Ce);Le.select(y,Ke)}ne.isDraggingInternally=!0,Ae.setFragmentData(y,K.dataTransfer,"drag")}},[s,y,E.onDragStart,ne]),onDrop:W.useCallback(K=>{if(!s&&Ae.hasTarget(y,K.target)&&!_i(K,E.onDrop)){K.preventDefault();var fe=y.selection,Ce=Ae.findEventRange(y,K),Se=K.dataTransfer;Le.select(y,Ce),ne.isDraggingInternally&&fe&&!De.equals(fe,Ce)&&!F.void(y,{at:Ce,voids:!0})&&Le.delete(y,{at:fe}),Ae.insertData(y,Se),Ae.isFocused(y)||Ae.focus(y)}ne.isDraggingInternally=!1},[s,y,E.onDrop,ne]),onDragEnd:W.useCallback(K=>{!s&&ne.isDraggingInternally&&E.onDragEnd&&Ae.hasTarget(y,K.target)&&E.onDragEnd(K),ne.isDraggingInternally=!1},[s,ne,E,y]),onFocus:W.useCallback(K=>{if(!s&&!ne.isUpdatingSelection&&Ae.hasEditableTarget(y,K.target)&&!_i(K,E.onFocus)){var fe=Ae.toDOMNode(y,y),Ce=Ae.findDocumentOrShadowRoot(y);if(ne.latestElement=Ce.activeElement,Wd&&K.target!==fe){fe.focus();return}Vl.set(y,!0)}},[s,ne,y,E.onFocus]),onKeyDown:W.useCallback(K=>{if(!s&&Ae.hasEditableTarget(y,K.target)){var fe;(fe=Pe.current)===null||fe===void 0||fe.handleKeyDown(K);var{nativeEvent:Ce}=K;if(Ae.isComposing(y)&&Ce.isComposing===!1&&(Pf.set(y,!1),A(!1)),_i(K,E.onKeyDown)||Ae.isComposing(y))return;var{selection:Se}=y,Ke=y.children[Se!==null?Se.focus.path[0]:0],Ue=wP($e.string(Ke))==="rtl";if(nr.isRedo(Ce)){K.preventDefault();var Bt=y;typeof Bt.redo=="function"&&Bt.redo();return}if(nr.isUndo(Ce)){K.preventDefault();var It=y;typeof It.undo=="function"&&It.undo();return}if(nr.isMoveLineBackward(Ce)){K.preventDefault(),Le.move(y,{unit:"line",reverse:!0});return}if(nr.isMoveLineForward(Ce)){K.preventDefault(),Le.move(y,{unit:"line"});return}if(nr.isExtendLineBackward(Ce)){K.preventDefault(),Le.move(y,{unit:"line",edge:"focus",reverse:!0});return}if(nr.isExtendLineForward(Ce)){K.preventDefault(),Le.move(y,{unit:"line",edge:"focus"});return}if(nr.isMoveBackward(Ce)){K.preventDefault(),Se&&De.isCollapsed(Se)?Le.move(y,{reverse:!Ue}):Le.collapse(y,{edge:Ue?"end":"start"});return}if(nr.isMoveForward(Ce)){K.preventDefault(),Se&&De.isCollapsed(Se)?Le.move(y,{reverse:Ue}):Le.collapse(y,{edge:Ue?"start":"end"});return}if(nr.isMoveWordBackward(Ce)){K.preventDefault(),Se&&De.isExpanded(Se)&&Le.collapse(y,{edge:"focus"}),Le.move(y,{unit:"word",reverse:!Ue});return}if(nr.isMoveWordForward(Ce)){K.preventDefault(),Se&&De.isExpanded(Se)&&Le.collapse(y,{edge:"focus"}),Le.move(y,{unit:"word",reverse:Ue});return}if(Hl){if((BP||wf)&&Se&&(nr.isDeleteBackward(Ce)||nr.isDeleteForward(Ce))&&De.isCollapsed(Se)){var St=$e.parent(y,Se.anchor.path);if(at.isElement(St)&&F.isVoid(y,St)&&(F.isInline(y,St)||F.isBlock(y,St))){K.preventDefault(),F.deleteBackward(y,{unit:"block"});return}}}else{if(nr.isBold(Ce)||nr.isItalic(Ce)||nr.isTransposeCharacter(Ce)){K.preventDefault();return}if(nr.isSoftBreak(Ce)){K.preventDefault(),F.insertSoftBreak(y);return}if(nr.isSplitBlock(Ce)){K.preventDefault(),F.insertBreak(y);return}if(nr.isDeleteBackward(Ce)){K.preventDefault(),Se&&De.isExpanded(Se)?F.deleteFragment(y,{direction:"backward"}):F.deleteBackward(y);return}if(nr.isDeleteForward(Ce)){K.preventDefault(),Se&&De.isExpanded(Se)?F.deleteFragment(y,{direction:"forward"}):F.deleteForward(y);return}if(nr.isDeleteLineBackward(Ce)){K.preventDefault(),Se&&De.isExpanded(Se)?F.deleteFragment(y,{direction:"backward"}):F.deleteBackward(y,{unit:"line"});return}if(nr.isDeleteLineForward(Ce)){K.preventDefault(),Se&&De.isExpanded(Se)?F.deleteFragment(y,{direction:"forward"}):F.deleteForward(y,{unit:"line"});return}if(nr.isDeleteWordBackward(Ce)){K.preventDefault(),Se&&De.isExpanded(Se)?F.deleteFragment(y,{direction:"backward"}):F.deleteBackward(y,{unit:"word"});return}if(nr.isDeleteWordForward(Ce)){K.preventDefault(),Se&&De.isExpanded(Se)?F.deleteFragment(y,{direction:"forward"}):F.deleteForward(y,{unit:"word"});return}}}},[s,y,E.onKeyDown]),onPaste:W.useCallback(K=>{!s&&Ae.hasEditableTarget(y,K.target)&&!_i(K,E.onPaste)&&(!Hl||ON(K.nativeEvent)||wf)&&(K.preventDefault(),Ae.insertData(y,K.clipboardData))},[s,y,E.onPaste])}),Pt.createElement(kH,{decorations:Fe,node:y,renderElement:a,renderPlaceholder:h,renderLeaf:f,selection:y.selection})))))},_H=e=>{var{attributes:t,children:n}=e;return Pt.createElement("span",Lu({},t),n,Gi&&Pt.createElement("br",null))},NH=()=>[],HH=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&De.isCollapsed(e.selection))){var n=t.startContainer.parentElement;n.getBoundingClientRect=t.getBoundingClientRect.bind(t),Q_(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},_i=(e,t)=>{if(!t)return!1;var n=t(e);return n??(e.isDefaultPrevented()||e.isPropagationStopped())},M9=e=>nc(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),GH=(e,t)=>{if(!t)return!1;var n=t(e);return n??e.defaultPrevented},WH=W.createContext(!1),$H=W.createContext({});function jH(e){var t=W.useRef([]).current,n=W.useRef({editor:e}).current,r=W.useCallback(o=>{n.editor=o,t.forEach(s=>s(o))},[t,n]),i=W.useMemo(()=>({getSlate:()=>n.editor,addEventListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1)})}),[t,n]);return{selectorContext:i,onChange:r}}var zH=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],VH=e=>{var{editor:t,children:n,onChange:r,onSelectionChange:i,onValueChange:o,initialValue:s}=e,a=a0(e,zH),[f,h]=Pt.useState(()=>{if(!$e.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Ur.stringify(s)));if(!F.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(Ur.stringify(t)));return t.children=s,Object.assign(t,a),{v:0,editor:t}}),{selectorContext:d,onChange:p}=jH(t),v=W.useCallback(y=>{var S;switch(r&&r(t.children),y==null||(S=y.operation)===null||S===void 0?void 0:S.type){case"set_selection":i==null||i(t.selection);break;default:o==null||o(t.children)}h(A=>({v:A.v+1,editor:t})),p(t)},[t,p,r,i,o]);W.useEffect(()=>(v5.set(t,v),()=>{v5.set(t,()=>{})}),[t,v]);var[w,E]=W.useState(Ae.isFocused(t));return W.useEffect(()=>{E(Ae.isFocused(t))},[t]),kg(()=>{var y=()=>E(Ae.isFocused(t));return TP>=17?(document.addEventListener("focusin",y),document.addEventListener("focusout",y),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",y)}):(document.addEventListener("focus",y,!0),document.addEventListener("blur",y,!0),()=>{document.removeEventListener("focus",y,!0),document.removeEventListener("blur",y,!0)})},[]),Pt.createElement($H.Provider,{value:d},Pt.createElement(jP.Provider,{value:f},Pt.createElement(Lw.Provider,{value:f.editor},Pt.createElement(WH.Provider,{value:w},n))))},b9=(e,t)=>{var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},O9=(e,t,n)=>{var r=Ae.toDOMRange(e,t).getBoundingClientRect(),i=Ae.toDOMRange(e,n).getBoundingClientRect();return b9(r,i)&&b9(i,r)},UH=(e,t)=>{var n=F.range(e,De.end(t)),r=Array.from(F.positions(e,{at:t})),i=0,o=r.length,s=Math.floor(o/2);if(O9(e,F.range(e,r[i]),n))return F.range(e,r[i],n);if(r.length<2)return F.range(e,r[r.length-1],n);for(;s!==r.length&&s!==i;)O9(e,F.range(e,r[s]),n)?o=s:i=s,s=Math.floor((i+o)/2);return F.range(e,r[o],n)};function I9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function F9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I9(Object(n),!0).forEach(function(r){Ps(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var XH=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=t,{apply:i,onChange:o,deleteBackward:s,addMark:a,removeMark:f}=r;return zv.set(r,new WeakMap),r.addMark=(h,d)=>{var p,v;(p=Hw.get(r))===null||p===void 0||p(),!tu.get(r)&&(v=fo.get(r))!==null&&v!==void 0&&v.length&&tu.set(r,null),Ia.delete(r),a(h,d)},r.removeMark=h=>{var d;!tu.get(r)&&(d=fo.get(r))!==null&&d!==void 0&&d.length&&tu.set(r,null),Ia.delete(r),f(h)},r.deleteBackward=h=>{if(h!=="line")return s(h);if(r.selection&&De.isCollapsed(r.selection)){var d=F.above(r,{match:E=>at.isElement(E)&&F.isBlock(r,E),at:r.selection});if(d){var[,p]=d,v=F.range(r,p,r.selection.anchor),w=UH(r,v);De.isCollapsed(w)||Le.delete(r,{at:w})}}},r.apply=h=>{var d=[],p=[],v=fo.get(r);if(v!=null&&v.length){var w=v.map(me=>UN(me,h)).filter(Boolean);fo.set(r,w)}var E=$l.get(r);E&&$l.set(r,x9(r,E,h));var y=Wl.get(r);if(y!=null&&y.at){var S=Yt.isPoint(y==null?void 0:y.at)?C5(r,y.at,h):x9(r,y.at,h);Wl.set(r,S?F9(F9({},y),{},{at:S}):null)}switch(h.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...bd(r,h.path));break}case"set_selection":{var A;(A=mg.get(r))===null||A===void 0||A.unref(),mg.delete(r);break}case"insert_node":case"remove_node":{d.push(...bd(r,q.parent(h.path)));break}case"merge_node":{var B=q.previous(h.path);d.push(...bd(r,B));break}case"move_node":{var I=q.common(q.parent(h.path),q.parent(h.newPath));d.push(...bd(r,I));var _;q.isBefore(h.path,h.newPath)?(d.push(...bd(r,q.parent(h.path))),_=h.newPath):(d.push(...bd(r,q.parent(h.newPath))),_=h.path);var L=$e.get(t,q.parent(_)),j=Ae.findKey(r,L),z=F.pathRef(r,q.parent(_));p.push([z,j]);break}}i(h);for(var[J,ae]of d){var[ne]=F.node(r,J);Km.set(ne,ae)}for(var[Pe,oe]of p)if(Pe.current){var[ce]=F.node(r,Pe.current);Km.set(ce,oe)}},r.setFragmentData=h=>{var{selection:d}=r;if(d){var[p,v]=De.edges(d),w=F.void(r,{at:p.path}),E=F.void(r,{at:v.path});if(!(De.isCollapsed(d)&&!w)){var y=Ae.toDOMRange(r,d),S=y.cloneContents(),A=S.childNodes[0];if(S.childNodes.forEach(ne=>{ne.textContent&&ne.textContent.trim()!==""&&(A=ne)}),E){var[B]=E,I=y.cloneRange(),_=Ae.toDOMNode(r,B);I.setEndAfter(_),S=I.cloneContents()}if(w&&(A=S.querySelector("[data-slate-spacer]")),Array.from(S.querySelectorAll("[data-slate-zero-width]")).forEach(ne=>{var Pe=ne.getAttribute("data-slate-zero-width")==="n";ne.textContent=Pe?`
`:""}),OP(A)){var L=A.ownerDocument.createElement("span");L.style.whiteSpace="pre",L.appendChild(A),S.appendChild(L),A=L}var j=r.getFragment(),z=JSON.stringify(j),J=window.btoa(encodeURIComponent(z));A.setAttribute("data-slate-fragment",J),h.setData("application/".concat(n),J);var ae=S.ownerDocument.createElement("div");return ae.appendChild(S),ae.setAttribute("hidden","true"),S.ownerDocument.body.appendChild(ae),h.setData("text/html",ae.innerHTML),h.setData("text/plain",FP(ae)),S.ownerDocument.body.removeChild(ae),h}}},r.insertData=h=>{r.insertFragmentData(h)||r.insertTextData(h)},r.insertFragmentData=h=>{var d=h.getData("application/".concat(n))||_N(h);if(d){var p=decodeURIComponent(window.atob(d)),v=JSON.parse(p);return r.insertFragment(v),!0}return!1},r.insertTextData=h=>{var d=h.getData("text/plain");if(d){var p=d.split(/\r\n|\r|\n/),v=!1;for(var w of p)v&&Le.splitNodes(r,{always:!0}),r.insertText(w),v=!0;return!0}return!1},r.onChange=h=>{var d=TP<18?CN.unstable_batchedUpdates:p=>p();d(()=>{var p=v5.get(r);p&&p(h),o(h)})},r},bd=(e,t)=>{var n=[];for(var[r,i]of F.levels(e,{at:t})){var o=Ae.findKey(e,r);n.push([i,o])}return n},KH={isHistory(e){return si(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||Oa.isOperationList(e.redos[0].operations))&&(e.undos.length===0||Oa.isOperationList(e.undos[0].operations))}},ny=new WeakMap,ry=new WeakMap,$d={isHistoryEditor(e){return KH.isHistory(e.history)&&F.isEditor(e)},isMerging(e){return ry.get(e)},isSaving(e){return ny.get(e)},redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var n=$d.isMerging(e);ry.set(e,!1),t(),ry.set(e,n)},withoutSaving(e,t){var n=$d.isSaving(e);ny.set(e,!1),t(),ny.set(e,n)}},YH=e=>{var t=e,{apply:n}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:r}=t,{redos:i}=r;if(i.length>0){var o=i[i.length-1];o.selectionBefore&&Le.setSelection(t,o.selectionBefore),$d.withoutSaving(t,()=>{F.withoutNormalizing(t,()=>{for(var s of o.operations)t.apply(s)})}),r.redos.pop(),t.writeHistory("undos",o)}},t.undo=()=>{var{history:r}=t,{undos:i}=r;if(i.length>0){var o=i[i.length-1];$d.withoutSaving(t,()=>{F.withoutNormalizing(t,()=>{var s=o.operations.map(Oa.inverse).reverse();for(var a of s)t.apply(a);o.selectionBefore&&Le.setSelection(t,o.selectionBefore)})}),t.writeHistory("redos",o),r.undos.pop()}},t.apply=r=>{var{operations:i,history:o}=t,{undos:s}=o,a=s[s.length-1],f=a&&a.operations[a.operations.length-1],h=$d.isSaving(t),d=$d.isMerging(t);if(h==null&&(h=ZH(r)),h){if(d==null&&(a==null?d=!1:i.length!==0?d=!0:d=qH(r,f)),a&&d)a.operations.push(r);else{var p={operations:[r],selectionBefore:t.selection};t.writeHistory("undos",p)}for(;s.length>100;)s.shift();o.redos=[]}n(r)},t.writeHistory=(r,i)=>{t.history[r].push(i)},t},qH=(e,t)=>!!(t&&e.type==="insert_text"&&t.type==="insert_text"&&e.offset===t.offset+t.text.length&&q.equals(e.path,t.path)||t&&e.type==="remove_text"&&t.type==="remove_text"&&e.offset+e.text.length===t.offset&&q.equals(e.path,t.path)),ZH=(e,t)=>e.type!=="set_selection";const QH=e=>{const t=e,{insertData:n}=t;return t.insertBreak=()=>{e.insertText(`
`)},t.insertSoftBreak=()=>{e.insertText(`
`)},t.insertData=r=>{let i=r.getData("text/plain");if(!r.getData("application/x-slate-fragment")&&i){i.endsWith(`
`)&&(i=i.substring(0,i.length-1)),i=i.trim().replace(/\t+/g," "),t.insertText(i);return}n(r)},t},k9=e=>{const{text:t,readonly:n,onChange:r,onComposition:i,afterInit:o}=e,s=W.useCallback(d=>b.jsx(JH,{...d}),[]),a=W.useCallback(d=>b.jsx(eG,{...d}),[]),f=[t],h=W.useMemo(()=>{const d=QH(YH(XH(X_())));return o&&o(d),d},[]);return W.useEffect(()=>{t!==h.children[0]&&(h.children=[t],h.onChange())},[t,h]),b.jsx(VH,{editor:h,initialValue:f,onChange:d=>{r&&r({newText:h.children[0],operations:h.operations})},children:b.jsx(LH,{className:"slate-editable-container plait-text-container",renderElement:s,renderLeaf:a,readOnly:n===void 0?!0:n,onCompositionStart:d=>{i&&i(d)},onCompositionUpdate:d=>{i&&i(d)},onCompositionEnd:d=>{i&&i(d)}})})},JH=e=>{const{attributes:t,children:n,element:r}={...e},i={textAlign:r.align};return b.jsx("div",{style:i,...t,children:n})},eG=({children:e,leaf:t,attributes:n})=>{const r=t;return r.bold&&(e=b.jsx("strong",{children:e})),r.code&&(e=b.jsx("code",{children:e})),r.italic&&(e=b.jsx("em",{children:e})),r.underlined&&(e=b.jsx("u",{children:e})),b.jsx("span",{style:{color:r.color,fontSize:r["font-size"]||r.fontSize},...n,children:e})},tG=e=>{const t=e;return t.renderText=(n,r)=>{const i=Av.createRoot(n);let o;const s=b.jsx(k9,{...r,afterInit:h=>{o=h,r.afterInit&&r.afterInit(h)}});i.render(s);let a={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:h=>{if(!(h&&a&&!Object.keys(h).every(v=>h[v]===a[v])))return;const p=Ae.isReadOnly(o);a={...a,...h},i.render(b.jsx(k9,{...a})),p===!0&&a.readonly===!1?setTimeout(()=>{Ae.focus(o)},0):p===!1&&a.readonly===!0&&(Ae.blur(o),Ae.deselect(o))}}},t},S0="#6698FF",ws=9,E5="plait-text-plugin-key",VP=30,nG="transparent",Ym=20,vg=18,yg="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",UP="none";var L9;(function(e){e.image="image"})(L9||(L9={}));const XP=["png","jpeg","gif","bmp"];var P5;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(P5||(P5={}));var Ss;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(Ss||(Ss={}));class xo{constructor(t,n){this.board=t,this.options=n}processDrawing(t,n,r){var i,o;if(this.canDraw&&this.canDraw(t,r)){const s=this.draw(t,r);if(s){this.g&&n.contains(this.g)?this.g.replaceWith(s):(this.g&&this.g.remove(),(i=this.options)!=null&&i.prepend?n.prepend(s):n.appendChild(s)),this.g=s;const a=this.board.getRectangle(t);if(!a)return;let f=R.getCenterPoint(a);if((o=this.options)!=null&&o.active){const d=Ti(this.board,a);f=R.getCenterPoint(d)}let h;yo.isGroup(t)?h=go(As(this.board,t,!0)):h=t.angle,h&&Es(s,f,h)}else this.destroy();rG(this)&&this.afterDraw(t)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function rG(e){return!!e.afterDraw}const KP=(e,t)=>{const n={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},r=Kf(O.getRoughSVG(e),t,ws,n);return r.classList.add(iO),r};function iG(e,t){return Kf(O.getRoughSVG(e),t,ws,{stroke:"#FFFFFF",strokeWidth:1,fill:`${S0}`,fillStyle:"solid"})}function _9(e,t){return Kf(O.getRoughSVG(e),t,ws,{stroke:`${S0}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const mf=6,N9=(e,t)=>{const n={stroke:qr,strokeWidth:1,fillStyle:"solid"},r=[t.x-Ym-vg/2,t.y+t.height+Ym+vg/2],i=O.getRoughSVG(e),o=Gt(),s=i.path(`M ${r[0]+mf} ${r[1]} A ${mf} ${mf}, 0, 1, 0, ${r[0]} ${r[1]+mf}`,n),a=i.polygon([[r[0],r[1]+mf-2],[r[0],r[1]+mf+2],[r[0]+4.5,r[1]+mf]],{...n,fill:qr});return Xt(a,"round"),o.append(s,a),o},up=(e,t)=>new qm(e,{...t,active:!0}),U4=class U4 extends xo{constructor(t,n){super(t,{...n,active:!0}),this.board=t,this.options=n,this.hasResizeHandle=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Gt(),i=Ti(this.board,this.options.getRectangle(t)),o=this.options.getStrokeWidth()*this.board.viewport.zoom,s=R.inflate(i,o),a=su(this.board,s,{stroke:S0,strokeWidth:fr});return r.append(a),a.classList.add(np),a.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,R.getCornerPoints(s).forEach(f=>{const h=KP(this.board,f);r.append(h)})):this.hasResizeHandle=!1,r}};U4.key="active-generator";let qm=U4;const Zm=e=>`${e}`,Qm=e=>Number(e),oG=(e,t)=>{let r=(S5(e,Zm(t))?t-4:t)+2;return r>=4&&(r=r-4),S5(e,Zm(t))?r+4:r},H9=e=>{switch(e){case 0:case 2:return eu.nwse;case 1:case 3:return eu.nesw;case 4:case 6:return eu.ns;case 5:case 7:return eu.ew;default:return null}},sG=(e,t)=>{const n=M7.indexOf(e);if(n>=0){const r=Math.round(t/(Math.PI/4));e=M7[(n+r)%M7.length]}return e},YP=(e,t)=>{const n=R.getCornerPoints(e),r=n.map((o,s)=>({rectangle:{x:o[0]-t/2,y:o[1]-t/2,width:t,height:t},handle:Zm(s),cursorClass:H9(s)})),i=uG(n,t/2);return r.push(...i.map((o,s)=>({rectangle:o,handle:Zm(s+4),cursorClass:H9(s+4)}))),r},G9=(e,t)=>t<=3?R.getCornerPoints(e)[t]:R.getEdgeCenterPoints(e)[t-4],uG=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){let i=R.getRectangleByPoints([e[r],e[(r+1)%4]]);const o=new Array(2).fill(0);o[(r+1)%2]=t/2,i=R.expand(i,o[0],o[1]),n.push(i)}return n},Vv=new WeakMap,jd=e=>!!Vv.get(e),aG=(e,t)=>jd(e)&&t(Vv.get(e)),lG=(e,t,n)=>{O.getBoardContainer(e).classList.add(`${n}-resizing`),Vv.set(e,t),qa(e,!0)},cG=(e,t)=>{O.getBoardContainer(e).classList.remove(`${t}-resizing`),Vv.delete(e),qa(e,!1)},S5=(e,t)=>Qm(t)>=4,Em=(e,t)=>!S5(e,t),$w=(e,t,n,r,i)=>{const o=br([r],n,i)[0],s=br([R.getCenterPoint(t)],n,i)[0],a=R.getPoints(t),f=R.getCenterPoint(e),h=br([s],o,-i)[0],d=br(a,f,i);return br(d,h,-i)},fG=e=>{const t=e.points;return t&&t.length>1},Uv=(e,t)=>{if(O.hasBeenTextEditing(e)||ji(e))return!1;const n=qe(e);return n.length===1&&n[0]===t&&fG(t)};function Vn(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(n*n+r*r);if(i===0)throw new Error("Points must not be the same for a unit vector calculation.");const o=n/i,s=r/i;return[o,s]}function zd(e,t,n){const r=Math.hypot(t[0],t[1]);return[e[0]+t[0]/r*n,e[1]+t[1]/r*n]}function W9(e,t,n,r){return r?[e[0]+n,e[1]+n/t[0]*t[1]]:[e[0]+n/t[1]*t[0],e[1]+n]}function $9(e){const t=e[0],r=e[1],i=-t;return[r,i]}function Lg(e,t){if(!t)return e;const n=e[0],r=e[1],i=n*Math.cos(t)-r*Math.sin(t),o=n*Math.sin(t)+r*Math.cos(t);return[i,o]}function qP(e,t,n){const r=Et(e[0],e[1],t[0],t[1]),i=Et(e[0],e[1],n[0],n[1]),o=Et(t[0],t[1],n[0],n[1]);return Math.abs(r+i-o)<.1}const hG=(e,t,n)=>{const r=[],i=[Math.min(t[0],n[0]),Math.max(t[0],n[0])],o=[Math.min(t[1],n[1]),Math.max(t[1],n[1])],s=Vn(t,n);if(e[0]>=i[0]&&e[0]<=i[1]){const a=W9(t,s,e[0]-t[0],!0);r.push(a)}else if(e[1]>=o[0]&&e[1]<=o[1]){const a=W9(t,s,e[1]-t[1],!1);r.push(a)}return r};function ZP(e,t){const r=QP(e)*t;let i=0;for(let o=0;o<e.length-1;o++){const[s,a]=e[o],[f,h]=e[o+1],d=Et(s,a,f,h);if(i+d>=r){const v=(r-i)/d,w=s+(f-s)*v,E=a+(h-a)*v;return[w,E]}i+=d}return e[e.length-1]}function QP(e){let t=0;for(let n=0;n<e.length-1;n++){const[r,i]=e[n],[o,s]=e[n+1];t+=Et(r,i,o,s)}return t}function JP(e,t){const n=QP(e);let r=0;for(let i=0;i<e.length-1;i++){if(qP(t,e[i],e[i+1]))return r+=Et(t[0],t[1],e[i][0],e[i][1]),r/n;r+=Et(e[i][0],e[i][1],e[i+1][0],e[i+1][1])}throw new Error("Cannot get ratio by point")}const c0=e=>{const t=[];return e.forEach(n=>{t.findIndex(i=>dt.isEquals(n,i))===-1&&t.push(n)}),t};function ba(e){if(e.length<=2)return e;let t=[e[0]];for(let n=1;n<e.length-1;n++){const r=e[n-1],i=e[n],o=e[n+1];!(dt.isOverHorizontal([r,i,o])||dt.isOverVertical([r,i,o]))&&t.push(i)}return t.push(e[e.length-1]),t}const _g=(e,t,n)=>{const r=Et(...e,...t),i=dt.isEquals(e,t),o=i?1:(t[1]-e[1])/r,s=i?1:(t[0]-e[0])/r;return[e[0]+n*s,e[1]+n*o]},dG={[nn.left]:{x:-1,y:0},[nn.right]:{x:1,y:0},[nn.top]:{x:0,y:-1},[nn.bottom]:{x:0,y:1}};function gG(e){switch(e){case nn.left:return nn.right;case nn.right:return nn.left;case nn.top:return nn.bottom;case nn.bottom:return nn.top}}function eS(e){if(e[0]===0)return nn.left;if(e[0]===1)return nn.right;if(e[1]===0)return nn.top;if(e[1]===1)return nn.bottom}function Ld(e){const t=e[0],n=e[1];if(t===0&&n===0)return null;if(t===0)return n>0?nn.bottom:nn.top;if(n===0)return t>0?nn.right:nn.left;const r=Math.atan2(n,t);return r>-Math.PI/4&&r<=Math.PI/4?nn.right:r>Math.PI/4&&r<=3*Math.PI/4?nn.bottom:r>-3*Math.PI/4&&r<=-Math.PI/4?nn.top:nn.left}function Hf(e){return dG[e]}function f0(e){return e===0?e:e/Math.abs(e)}const pG=(e,t,n,r,i)=>{const o=Hf(t),s=Hf(r),a=[e[0]+o.x*i,e[1]+o.y*i],f=[n[0]+s.x*i,n[1]+s.y*i],h=mG(a,t,f),d=h.x!==0?"x":"y",p=h[d];let v=[],w,E;const[y,S]=vG({sourceX:e[0],sourceY:e[1],targetX:n[0],targetY:n[1]});if(o[d]*s[d]===-1){w=y,E=S;const A=[[w,a[1]],[w,f[1]]],B=[[a[0],E],[f[0],E]];o[d]===p?v=d==="x"?A:B:v=d==="x"?B:A}else{const A=[[a[0],f[1]]],B=[[f[0],a[1]]];d==="x"?v=o.x===p?B:A:v=o.y===p?A:B;let I;if(t!==r){const _=d==="x"?1:0,L=o[d]===s[d==="x"?"y":"x"],j=a[_]>f[_],z=a[_]<f[_];I=o[d]===1&&(!L&&j||L&&z)||o[d]!==1&&(!L&&z||L&&j),I&&(v=d==="x"?A:B)}}return[e,a,...v,f,n]},mG=(e,t=nn.bottom,n)=>t===nn.left||t===nn.right?e[0]<n[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<n[1]?{x:0,y:1}:{x:0,y:-1};function vG({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function jw(e){const t=e.ctrlKey||e.metaKey,n=dn.isKeyHotkey("alt",e),r=dn.isKeyHotkey("shift",e),i=e.key.includes("CapsLock"),o=e.key.includes("Tab"),s=e.key.includes("Escape"),a=e.key.startsWith("F"),f=!!e.key.includes("Arrow");return i||t||n||f||r||o||s||a}const yG=e=>dn.isKeyHotkey("mod+/",e),wG=e=>e.key==="Tab",CG=e=>e.key==="Enter",zw=e=>e.code==="Space",Vw=e=>Di.isDeleteBackward(e)||Di.isDeleteForward(e);var Cs;(function(e){e.dnd="dnd",e.drawing="drawing"})(Cs||(Cs={}));const tS=new WeakMap,nS=e=>tS.get(e),Ul=(e,t)=>{tS.set(e,t)},Xv=e=>nS(e)===Cs.dnd,D0=e=>nS(e)===Cs.drawing,T0=e=>{const t=pn.getElementRef(e);return(t==null?void 0:t.getTextManages())||[]},Yf=e=>{const t=T0(e)[0];return t||console.warn("can not find textManage"),t},qf=e=>T0(e).map(t=>t.editor),Uw=e=>{const t=qf(e)[0];return t||console.warn("can not find textManage"),t},xG=e=>{const t=qe(e);let n=null;return t.forEach(r=>{const i=qf(r);!n&&i&&i.length>0&&(n=i[0])}),n},rS=e=>e.map(t=>{try{const n=qf(t);return n.length?n.map(r=>{const i=$e.texts(r);return Array.from(i).reduce((o,s)=>o+=s[0].text,"")}).join(" "):""}catch{return""}}).filter(t=>t).join(" "),iS=(e,t)=>{const n=t||qe(e);if(n.length){const r=[];n.forEach(o=>{r.push(...T0(o))});const i=r.find(o=>o.isEditing);return i?[i.editor]:r.map(o=>o.editor)}},Za=(e,t,n)=>{n=n||{};const r=typeof e=="string"?{children:[{text:e,...n}]}:e;return t&&(r.align=t),r},j9=e=>e===14?20:e===18?25:e*1.5,oS=async(e,t,n,r)=>{let i=0,o=0;await EG(t,n).then(h=>{i=h.width,o=h.height});let s=null;const a=URL.createObjectURL(t);O.getBoardContext(e).setUploadingFile({url:a,file:t}),s={url:a,width:i,height:o},r(s)};function EG(e,t){return new Promise((n,r)=>{const i=new Image;i.src=URL.createObjectURL(e),i.onload=function(){const o=t,s=t*i.naturalHeight/i.naturalWidth;n(i.naturalWidth>t?{width:o,height:s}:{width:i.naturalWidth,height:i.naturalHeight})}})}const Xw=new WeakMap,No=e=>Xw.get(e),sS=(e,t)=>{Xw.set(e,t)},PG=e=>{Xw.delete(e)};class SG{constructor(){this.list=[]}enqueue(t){this.list.push(t),this.list=this.list.sort((n,r)=>n.priority-r.priority)}dequeue(){return this.list.shift()}}class DG{constructor(t){this.graph=t,this.cameFrom=new Map}heuristic(t,n){return Math.abs(t[0]-n[0])+Math.abs(t[1]-n[1])}search(t,n,r){const i=new SG,o=this.graph.get(t);this.cameFrom=new Map;const s=new Map;for(s.set(o,0),i.enqueue({node:o,priority:0});i.list.length>0;){var a=i.dequeue();if(!a)throw new Error("can't find current");const f=a.node.data;if(f[0]===n[0]&&f[1]===n[1])break;a.node.adjacentNodes.forEach(h=>{let d=s.get(a.node)+this.heuristic(h.data,a.node.data);const p=this.cameFrom.get(a.node),v=p?p.data:r,w=v[0]===(a==null?void 0:a.node.data[0])&&v[0]===h.data[0],E=v[1]===(a==null?void 0:a.node.data[1])&&v[1]===h.data[1];if(!w&&!E&&(d=d+1),!s.has(h)||s.get(h)&&d<s.get(h)){s.set(h,d);const y=d+this.heuristic(h.data,n);i.enqueue({node:h,priority:y}),this.cameFrom.set(h,a.node)}})}}getRoute(t,n){const r=[];let i=n;for(;i[0]!==t[0]||i[1]!==t[1];){const o=this.graph.get(i),s=this.cameFrom.get(o);r.unshift(s.data),i=s.data}return r}}class TG{constructor(t){this.data=t,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class AG{constructor(){this.index={}}add(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();i in this.index||(this.index[i]={}),o in this.index[i]||(this.index[i][o]=new TG(t))}connect(t,n){const r=this.get(t),i=this.get(n);if(!r||!i)throw new Error("A point was not found");r.adjacentNodes.push(i)}has(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]}get(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]?this.index[i][o]:null}}const uS=v0("debug:plait:elbow-line-routing"),aS=(e,t)=>{const{nextSourcePoint:n,nextTargetPoint:r}=e,i=RG(e),o=MG(i),s=new DG(o);s.search(n,r,e.sourcePoint);let a=s.getRoute(n,r);a=[e.sourcePoint,...a,r,e.targetPoint];const f=R.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),h=R.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),d=f?void 0:R.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),p=h?void 0:R.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return a=BG(a,{centerX:d,centerY:p,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},t),a},BG=(e,t,n)=>{const{sourceRectangle:r,targetRectangle:i,centerX:o,centerY:s}=t;if(n&&uS.clear(),o!==void 0){const a=V9(e,o,!0),f=a.pointOfHit&&z9(e,{parallelPaths:a.parallelPaths,pointOfHit:a.pointOfHit,sourceRectangle:r,targetRectangle:i},n);f&&(e=f)}if(s!==void 0){const a=V9(e,s,!1),f=a.pointOfHit&&z9(e,{parallelPaths:a.parallelPaths,pointOfHit:a.pointOfHit,sourceRectangle:r,targetRectangle:i},n);f&&(e=f)}return e},z9=(e,t,n)=>{const{parallelPaths:r,pointOfHit:i,sourceRectangle:o,targetRectangle:s}=t;let a=null;return r.forEach(f=>{const h=[i,f[0],f[1]],d=R.getRectangleByPoints(h);if(!R.isHit(d,o)&&!R.isHit(d,s)){const p=R.getCornerPointsByPoints(h);n&&uS.drawRectangle(n,d);const v=[],w=[];e.forEach((_,L)=>{const j=p.findIndex(z=>dt.isEquals(_,z));j!==-1&&(v.push(L),w.push(j))});const E=[...e],y=p.find((_,L)=>!w.includes(L)),S=Math.abs(v[0]-v[v.length-1])+1;E.splice(v[0]+1,S-2,y);const A=ba([...e]).length-1;ba([...E]).length-1<=A&&(a=E)}return null}),a},V9=(e,t,n)=>{const r=[];let i=null,o=null;const s=n?0:1;for(let a=0;a<e.length;a++){const f=e[a-1],h=e[a];i===null&&f&&f[s]===h[s]&&(i=f),i!==null&&f[s]!==h[s]&&(r.push([i,f]),i=null),h[s]===t&&(o=h)}return i&&r.push([i,e[e.length-1]]),{pointOfHit:o,parallelPaths:r}},RG=e=>{const{nextSourcePoint:t,nextTargetPoint:n,sourceOuterRectangle:r,targetOuterRectangle:i}=e,o=[],s=[];let a=[];[r,i].forEach(d=>{o.push(d.x,d.x+d.width/2,d.x+d.width),s.push(d.y,d.y+d.height/2,d.y+d.height)});const f=[r.x,r.x+r.width,i.x,i.x+i.width].sort((d,p)=>d-p);o.push((f[1]+f[2])/2,t[0],n[0]);const h=[r.y,r.y+r.height,i.y,i.y+i.height].sort((d,p)=>d-p);s.push((h[1]+h[2])/2,t[1],n[1]);for(let d=0;d<o.length;d++)for(let p=0;p<s.length;p++){const v=[o[d],s[p]],w=R.isPointInRectangle(r,v),E=R.isPointInRectangle(i,v);!w&&!E&&a.push(v)}return a=c0(a).filter(d=>{const p=R.isPointInRectangle(r,d),v=R.isPointInRectangle(i,d);return!p&&!v}),a},MG=e=>{const t=new AG,n=[],r=[];e.forEach(o=>{const s=o[0],a=o[1];n.indexOf(s)<0&&n.push(s),r.indexOf(a)<0&&r.push(a),t.add(o)}),n.sort((o,s)=>o-s),r.sort((o,s)=>o-s);const i=o=>t.has(o);for(let o=0;o<n.length;o++)for(let s=0;s<r.length;s++){const a=[n[o],r[s]];if(i(a)){if(o>0){const f=[n[o-1],r[s]];i(f)&&(t.connect(f,a),t.connect(a,f))}if(s>0){const f=[n[o],r[s-1]];i(f)&&(t.connect(f,a),t.connect(a,f))}}}return t},bG=(e,t)=>{const n=VP;let r=new Array(4).fill(n),i=new Array(4).fill(n);const o=e.x-(t.x+t.width),s=t.x-(e.x+e.width);if(o>0&&o<n*2){const h=o/2;r[3]=h,i[1]=h}if(s>0&&s<n*2){const h=s/2;i[3]=h,r[1]=h}const a=e.y-(t.y+t.height),f=t.y-(e.y+e.height);if(a>0&&a<n*2){const h=a/2;r[0]=h,i[2]=h}if(f>0&&f<n*2){const h=f/2;r[2]=h,i[0]=h}return{sourceOffset:r,targetOffset:i}},U9=(e,t,n)=>{switch(n){case nn.top:return[e[0],t.y];case nn.bottom:return[e[0],t.y+t.height];case nn.right:return[t.x+t.width,e[1]];default:return[t.x,e[1]]}},OG=(e,t)=>{const{sourceOffset:n,targetOffset:r}=bG(e,t),i=R.expand(e,n[3],n[0],n[1],n[2]),o=R.expand(t,r[3],r[0],r[1],r[2]);return{sourceOuterRectangle:i,targetOuterRectangle:o}},IG=e=>{const{sourcePoint:t,nextSourcePoint:n,sourceRectangle:r,sourceOuterRectangle:i,targetPoint:o,nextTargetPoint:s,targetRectangle:a,targetOuterRectangle:f}=e;return R.isPointInRectangle(a,t)||R.isPointInRectangle(f,n)||R.isPointInRectangle(i,s)||R.isPointInRectangle(r,o)},Pm=new Map,Kw=(e,t,n)=>{let r=Pm.has(e)?Pm.get(e):{};r[t]=n,Pm.set(e,r)},Kv=e=>Pm.get(e),lS=new WeakMap,FG=(e,t)=>{O.getBoardContainer(e).classList.add("draw-elements-rotating"),lS.set(e,t),qa(e,!0)},kG=e=>{O.getBoardContainer(e).classList.remove("draw-elements-rotating"),lS.delete(e),qa(e,!1)},X9=(e,t)=>{const n=e.getRectangle(t);return n?n.width*n.height:0},LG=(e,t,n="asc")=>t.sort((r,i)=>{const o=X9(e,r),s=X9(e,i);return n==="asc"?o-s:s-o}),_G=e=>e&&e!==UP&&e!==nG,dc=(e,t)=>{switch(e){case Ss.dashed:return[8,8+t];case Ss.dotted:return[2,4+t];default:return}},cS=(e,t,n,r)=>t.map(i=>{const o=r&&r(i);if(o)return o;if(i.points){const s=i.points.map(a=>[a[0]-n[0],a[1]-n[1]]);return{...i,points:s}}return i}),fS=(e,t,n,r)=>{const i={};t.forEach(o=>{i[o.id]=yn()}),t.forEach(o=>{o.id=i[o.id],r&&r(o,i),o.points&&(o.points=o.points.map(s=>[n[0]+s[0],n[1]+s[1]])),Ve.insertNode(e,o,[e.children.length])}),Ve.addSelectionWithTemporaryElements(e,t)},NG="foreign-object-image",X4=class X4 extends xo{constructor(t,n){super(t,n),this.board=t,this.options=n,this.isFocus=!1}canDraw(t){return!!this.options.getImageItem(t)}draw(t){this.element=t;const n=Gt(),r=this.options.getRectangle(t);this.foreignObject=gw(r.x,r.y,r.width,r.height),this.foreignObject.classList.add(NG),n.append(this.foreignObject);const i={board:this.board,imageItem:this.options.getImageItem(t),element:t,getRectangle:()=>this.options.getRectangle(t)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,i),this.activeGenerator=up(this.board,{getStrokeWidth:()=>(qe(this.board).length===1&&!ji(this.board),fr),getStrokeOpacity:()=>{const o=qe(this.board);return o.length===1&&!ji(this.board)||!o.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const o=Uv(this.board,this.element);return!!No(this.board)||o}}),n}updateImage(t,n,r){if(this.element=r,n!==r&&this.imageComponentRef){const s={imageItem:this.options.getImageItem(r),element:r,getRectangle:()=>this.options.getRectangle(r)};this.imageComponentRef.update(s)}const i=this.options.getRectangle(r);hg(this.g,i.width,i.height,i.x,i.y),i&&r.angle!==void 0&&Es(this.g,R.getCenterPoint(i),r.angle);const o=O.getActiveHost(this.board);this.activeGenerator.processDrawing(r,o,{selected:this.isFocus})}setFocus(t,n){this.isFocus=n;const r=O.getActiveHost(this.board);this.activeGenerator.processDrawing(t,r,{selected:n});const i={isFocus:n};this.imageComponentRef.update(i)}destroy(){var t,n;super.destroy(),(t=this.imageComponentRef)==null||t.destroy(),(n=this.activeGenerator)==null||n.destroy()}};X4.key="image-generator";let ja=X4;const ap=(e,t,n)=>{qe(e).forEach(i=>{if(n!=null&&n.match&&!(n!=null&&n.match(i)))return;const o=O.findPath(e,i),s=n!=null&&n.getMemorizeKey?n==null?void 0:n.getMemorizeKey(i):"";for(let a in t)s&&Kw(s,a,t[a]);n!=null&&n.callback?n.callback(i,o):Ve.setNode(e,t,o)})},HG=(e,t,n)=>{ap(e,{strokeStyle:t},n)},GG=(e,t,n)=>{ap(e,{fill:t},n)},WG=(e,t,n)=>{ap(e,{strokeColor:t},n)},$G=(e,t,n)=>{ap(e,{strokeWidth:t},n)},Ku={setFillColor:GG,setStrokeStyle:HG,setProperty:ap,setStrokeWidth:$G,setStrokeColor:WG},Gf=(e,t=!1)=>{let n=e[0],r=e[1];if(t){const s=Math.abs(n[0]-r[0]),a=Math.abs(n[1]-r[1]),f=Math.max(a,s);r=[n[0]+(r[0]>n[0]?f:-f),n[1]+(r[1]>n[1]?f:-f)]}const i=[Math.min(n[0],r[0]),Math.min(n[1],r[1])];let o=[Math.max(n[0],r[0]),Math.max(n[1],r[1])];return[i,o]},K9=(e,t)=>!O.isReadonly(e)&&!O.hasBeenTextEditing(e)&&O.isPointer(e,ln.selection),Zf=(e,t)=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s=null,a=null,f=null;e.pointerDown=d=>{if(!t.canResize()||!K9(e)||!ju(d)){n(d);return}const p=bt(e,Ot(e,d.x,d.y));if(o=t.hitTest(p),o){o.cursorClass&&O.getBoardContainer(e).classList.add(`${o.cursorClass}`),a=[d.x,d.y],s={path:Array.isArray(o.element)?o.element.map(w=>O.findPath(e,w)):O.findPath(e,o.element),element:o.element,handle:o.handle,handleIndex:o.handleIndex,rectangle:o.rectangle,options:o.options};return}n(d)},e.pointerMove=d=>{if(!t.canResize()||!K9(e)){h(),r(d);return}if(a&&o&&!jd(e)){const p=[d.x,d.y];Et(a[0],a[1],p[0],p[1])>iw&&(lG(e,s,t.key),Vr.set(e,!0),t.beforeResize&&t.beforeResize(s))}if(!jd(e)&&!s0(e)){const p=bt(e,Ot(e,d.x,d.y));Ga(e,t.key+"-common-resize-hit-test",()=>{const v=t.hitTest(p);v?(f&&v.cursorClass!==f.cursorClass&&O.getBoardContainer(e).classList.remove(`${f.cursorClass}`),f=v,f.cursorClass&&O.getBoardContainer(e).classList.add(`${f.cursorClass}`)):h()})}else if(a&&jd(e)){d.preventDefault();const p=bt(e,Ot(e,d.x,d.y));Ga(e,"with-common-resize",()=>{a&&s&&t.onResize(s,{startPoint:bt(e,Ot(e,a[0],a[1])),endPoint:p,isShift:!!d.shiftKey})});return}r(d)},e.globalPointerUp=d=>{i(d),(jd(e)||o)&&(t.afterResize&&t.afterResize(s),cG(e,t.key),a=null,o=null,s=null,Vr.set(e,!1))};const h=()=>{f&&(f.cursorClass&&O.getBoardContainer(e).classList.remove(`${f.cursorClass}`),f=null)};return e};class jG extends xo{canDraw(t){return!0}draw(t,n){const r={stroke:"",strokeWidth:fr,strokeLineDash:[5]};let i={x:0,y:0,width:0,height:0};return n&&(r.stroke="#999",i=Ew(this.board,t,!0)),su(this.board,i,r)}}class zG{constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(t,n){this.generatorMap.set(t,n)}getGenerator(t){return this.generatorMap.get(t)}initializeTextManage(t){this.textManages=[],Array.isArray(t)?this.textManages.push(...t):this.textManages.push(t)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(t=>{t.destroy()}),this.textManages=[]}}class gc extends _F{constructor(t=new zG){super(t)}}class VG extends gc{constructor(){super()}initializeGenerator(){this.activeGenerator=up(this.board,{getRectangle:t=>Ew(this.board,t),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!ji(this.board)}),this.groupGenerator=new jG(this.board)}initialize(){super.initialize(),this.initializeGenerator();const t=O.getBoardContext(this.board);this.onStableSubscription=t.onStable().subscribe(()=>{const n=As(this.board,this.element,!1,!0),r=n.some(i=>l5(this.board,i))&&!n.every(i=>l5(this.board,i));this.groupGenerator.processDrawing(this.element,this.getElementG(),r)})}onContextChanged(t,n){}destroy(){var t;super.destroy(),(t=this.onStableSubscription)==null||t.unsubscribe()}}function hS(e){let t,n;const{drawElement:r,pointerMove:i,globalPointerUp:o,insertFragment:s,getDeletedFragment:a,deleteFragment:f,getRelatedFragment:h,getRectangle:d,keyDown:p}=e;return e.drawElement=v=>yo.isGroup(v.element)?VG:r(v),e.pointerMove=v=>{Ga(e,"with-group",()=>{t==null||t.remove();const w=bt(e,Ot(e,v.x,v.y));let E={anchor:w,focus:w};e.selection&&!o0.isCollapsed(e.selection)&&(E=e.selection);const y=O.getPointer(e);if(!jd(e)&&!u0(e)&&y===ln.selection){const S=yE(e,E);S.length&&(t=KI(e,S),t&&O.getElementTopHost(e).append(t))}}),i(v)},e.globalPointerUp=v=>{t==null||t.remove(),t=null,o(v)},e.getRelatedFragment=(v,w)=>{const E=UI(e,v,w);return h([...v,...E],w)},e.insertFragment=(v,w,E)=>{var A,B;let y=[];if((A=v==null?void 0:v.elements)!=null&&A.length){y=new Array((B=v==null?void 0:v.elements)==null?void 0:B.length);const I=fc(e,v==null?void 0:v.elements);Sw(e,v==null?void 0:v.elements).forEach(L=>{const j=v.elements.map(z=>z.id).indexOf(L.id);y.splice(j,1,L.groupId?Jm(L,void 0):L)}),I.length&&I.forEach(L=>{const j=v.elements.map(J=>J.id).indexOf(L.id),z={...Jm(L,void 0),id:yn()};y.splice(j,1,z),dS(L,v.elements,z.id,y)}),v.elements=y}s(v,w,E),(y==null?void 0:y.filter(I=>yo.isGroup(I))).forEach(I=>{Ve.insertNode(e,I,[e.children.length])})},e.getDeletedFragment=v=>(n=UG(e),n&&n.length&&v.push(...n),a(v)),e.deleteFragment=v=>{n!=null&&n.length&&KG(e,n),f(v),n=null},e.getRectangle=v=>yo.isGroup(v)?Ew(e,v,!0):d(v),e.keyDown=v=>{if(!O.isReadonly(e)){if(dn.isKeyHotkey("mod+g",v)){v.preventDefault(),Ve.addGroup(e);return}if(dn.isKeyHotkey("mod+shift+g",v)){v.preventDefault(),Ve.removeGroup(e);return}}p(v)},e}const Jm=(e,t)=>({...e,groupId:t}),dS=(e,t,n,r)=>{const i=t.filter(o=>o.groupId===e.id);return i.length&&i.forEach(o=>{const s=t.map(a=>a.id).indexOf(o.id);if(yo.isGroup(o)){const a={...Jm(o,n),id:yn()};r.splice(s,1,a),dS(o,t,a.id,r)}else r.splice(s,1,Jm(o,n))}),r},UG=e=>{const n=[...e.getRelatedFragment([])],r=fc(e),i=Dw(e),o=[...r,...i];return o.forEach(s=>{const a=cc(e,s,!0);if(a.length){const h=As(e,a[0],!1,!0).filter(d=>![...o,...n].map(p=>p.id).includes(d.id));if((h.length===1||h.length===0)&&(n.includes(a[0])||n.push(a[0]),h.length===1&&a.length>1)){const d=XG(e,a.slice(1,a.length),[...o,...n]);let p=a.length;d&&(p=a.findIndex(v=>v.id===d.id)),[...a.slice(1,p)].forEach(v=>{n.includes(v)||n.push(v)})}}}),n},XG=(e,t,n)=>{let r=null;for(let i=0;i<t.length;i++)if(As(e,t[i],!1,!0).filter(a=>!n.map(f=>f.id).includes(a.id)).length>0){r=t[i];break}return r},KG=(e,t)=>{const n=Dw(e),r=fc(e),i=n.filter(o=>o.groupId);[...r,...i].forEach(o=>{const s=cc(e,o,!0);if(s.length){const f=As(e,s[0],!1,!0).filter(h=>h.id!==o.id);if(f.length===1){const h=t.map(d=>d.id);if(s.some(d=>h.includes(d.id))){const d=s.find(v=>!h.includes(v.id)),p=O.findPath(e,f[0]);Ve.setNode(e,{groupId:(d==null?void 0:d.id)||void 0},p)}}}})};function Yv(e,t,n=1e4){const i=document.createElement("canvas").getContext("2d"),o=$e.texts(e),s=[[]];for(const h of o){const[d]=h;$e.string(d).split(`
`).forEach((w,E)=>{const y={...d,text:w};if(E===0)s[s.length-1].push(y);else{const S=[];S.push(y),s.push(S)}})}let a=0,f=0;return s.forEach((h,d)=>{let p=0,v=j9(t.fontSize);if(h.forEach((w,E)=>{const y=YG(w,{fontFamily:t.fontFamily,fontSize:t.fontSize});i.font=y,p+=i.measureText(w.text).width;const S=E===h.length-1;if(w["font-size"]&&(S||w.text!=="")){const A=j9(parseFloat(w["font-size"]));A>v&&(v=A)}}),p<=n)p>a&&(a=p),f+=v;else{a=n;const w=Math.ceil(p/n);f+=v*w}}),{width:a,height:f}}const YG=(e,t)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||t.fontSize}px ${t.fontFamily} `;class lp{constructor(t,n){this.board=t,this.options=n,this.isEditing=!1,this.getSize=(r,i)=>{const o=window.getComputedStyle(this.foreignObject.children[0]),s=o.fontFamily,a=parseFloat(o.fontSize),f=r||this.editor.children[0];return Yv(f,{fontSize:a,fontFamily:s},i||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(t){const n=this.options.getRectangle();this.g=Gt(),this.foreignObject=gw(n.x,n.y,n.width,n.height),this.g.append(this.foreignObject),this.g.classList.add("text");const r={board:this.board,text:t,textPlugins:this.options.textPlugins,onChange:i=>{if(i.operations.some(o=>!Oa.isSelectionOperation(o))){const{width:o,height:s}=this.getSize();this.options.onChange&&this.options.onChange({...i,width:o,height:s}),Vr.set(this.board,!0)}},afterInit:i=>{this.editor=i},onComposition:i=>{if(i.type==="compositionend")return;const o=qG(this.editor,i.data);if(o){const s=this.getSize(o.children[0]);this.options.onChange&&this.options.onChange({...s}),Vr.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,r)}updateRectangleWidth(t){AO(this.g,t)}updateAngle(t,n=0){Es(this.g,t,n)}updateRectangle(t){const{x:n,y:r,width:i,height:o}=t||this.options.getRectangle();hg(this.g,i,o,n,r)}updateText(t){const n={text:t};this.textComponentRef.update(n)}edit(t,n){this.isEditing=!0,qy.set(this.board,!0);const r={readonly:!1};this.textComponentRef.update(r),Le.select(this.editor,[0]);const i=Lf(document,"mousedown").subscribe(a=>{const f=bt(this.board,Ot(this.board,a.x,a.y)),h=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),d=R.isHit(R.getRectangleByPoints([f,f]),h),p=a.target.closest(".plait-board-attached");!d&&!p&&Jb(0).subscribe(()=>{s()})}),o=Lf(document,"keydown").subscribe(a=>{if(!a.isComposing&&(a.key==="Escape"||a.key==="Tab"||n&&n(a))){a.preventDefault(),a.stopPropagation(),s();return}}),s=()=>{if(this.isEditing){this.updateRectangle(),i.unsubscribe(),o.unsubscribe(),qy.set(this.board,!1),Vr.set(this.board,!1),t&&t();const a={readonly:!0};this.textComponentRef.update(a),this.isEditing=!1,this.exitCallback=void 0}};return this.exitCallback=s,s}destroy(){var t,n;(t=this.g)==null||t.remove(),(n=this.textComponentRef)==null||n.destroy(),this.exitCallback&&this.exitCallback()}}const qG=(e,t)=>{if(e.selection&&De.isCollapsed(e.selection)){const[n,r]=F.node(e,e.selection),i=e.selection.anchor.offset,s={children:[JSON.parse(JSON.stringify(e.children[0]))]},a=n.text.slice(0,i+1)+t+n.text.slice(i+1),f=$e.get(s,r);return f.text=a,s}return null},ZG=e=>{const t=e;return t.renderText=(n,r)=>{throw new Error("No implementation for renderText method.")},t};var fi;(function(e){e.left="left",e.center="center",e.right="right"})(fi||(fi={}));const QG=e=>{const t=e;return t.renderImage=(n,r)=>{throw new Error("No implementation for renderImage method.")},t},JG=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e,o=[];let s=!1;return e.pointerDown=a=>{const f=[a.clientX,a.clientY];o.length<2&&(e.viewport.zoom,o.push({pointerId:a.pointerId,lastPoint:f,currentPoint:f,hasMoved:!1})),t(a)},e.pointerMove=a=>{const f=[a.clientX,a.clientY];if(o.length>=2){const h=o.find(d=>d.pointerId===a.pointerId);if(h&&(h.currentPoint=f,h.hasMoved=!0,o.length===2&&o.every(d=>d.hasMoved))){const[d,p]=o,v=K6(...d.lastPoint,...p.lastPoint),w=K6(...d.currentPoint,...p.currentPoint),E=w[0]-v[0],y=w[1]-v[1],S=O.getBoardContainer(e).getBoundingClientRect(),A=S.width/2,B=S.height/2,I=e.viewport.zoom,_=x0(e);let L=_[0]+A/I-E/I,j=_[1]+B/I-y/I,z=[L-S.width/2/I,j-S.height/2/I],J=I;const ae=Et(...d.lastPoint,...p.lastPoint),Pe=Et(...d.currentPoint,...p.currentPoint)/ae,oe=[d.currentPoint[0]-d.lastPoint[0],d.currentPoint[1]-d.lastPoint[1]],ce=[p.currentPoint[0]-p.lastPoint[0],p.currentPoint[1]-p.lastPoint[1]],me=oe[0]*ce[0]+oe[1]*ce[1],ye=Math.sqrt(oe[0]*oe[0]+oe[1]*oe[1]),Fe=Math.sqrt(ce[0]*ce[0]+ce[1]*ce[1]),Te=me/(ye*Fe||1);if(Te<-.7||Te<=.8&&s&&Pe>=.01?s=!0:s=!1,s){J=Math.min(Math.max(e.viewport.zoom*Pe,sE),uE);const se=O.getBoardContainer(e).getBoundingClientRect(),we=w[0]-se.x,X=w[1]-se.y;L=z[0]+we/I,j=z[1]+X/I,z=[L-we/J,j-X/J]}Bn.updateViewport(e,z,J),o.forEach(ge=>{ge.lastPoint=ge.currentPoint,ge.hasMoved=!1})}return}n(a)},e.pointerUp=a=>{const f=o.findIndex(h=>h.pointerId===a.pointerId);f!==-1&&o.splice(f,1),r(a)},e.globalPointerUp=a=>{const f=o.findIndex(h=>h.pointerId===a.pointerId);f!==-1&&o.splice(f,1),i(a)},e},gS=({value:e,children:t,options:n,plugins:r,viewport:i,theme:o,onChange:s,onSelectionChange:a,onValueChange:f,onViewportChange:h,onThemeChange:d})=>{const[p,v]=W.useState(()=>{const A=eW(e,n,r,i,o),B=tW(A);return{v:0,board:A,listRender:B}}),{board:w,listRender:E}=p,y=W.useCallback(()=>{if(s){const L={children:w.children,operations:w.operations,viewport:w.viewport,selection:w.selection,theme:w.theme};s(L)}const A=w.operations.some(L=>Gl.isSetSelectionOperation(L)),B=w.operations.some(L=>Gl.isSetViewportOperation(L)),I=w.operations.some(L=>Gl.isSetThemeOperation(L)),_=w.operations.length>0&&!w.operations.every(L=>Gl.isSetSelectionOperation(L)||Gl.isSetViewportOperation(L)||Gl.isSetThemeOperation(L));f&&_&&f(w.children),a&&A&&a(w.selection),h&&B&&h(w.viewport),d&&I&&d(w.theme.themeColorMode),v(L=>({v:L.v+1,board:w,listRender:E}))},[w,s,a,f]);W.useEffect(()=>(Nm.set(w,()=>{if(w.operations.length&&w.operations.every(_=>_.type==="set_selection")){E.update(w.children,{board:w,parent:w,parentG:O.getElementHost(w)});return}const B=w.operations.length&&w.operations.some(_=>_.type==="set_viewport");if(B&&oI(w)){bE(w,!1),E.update(w.children,{board:w,parent:w,parentG:O.getElementHost(w)});return}E.update(w.children,{board:w,parent:w,parentG:O.getElementHost(w)}),B?ww(w):nI(w),jm(w),qe(w).forEach(_=>{pn.getElementRef(_).updateActiveSection()})}),Hm.set(w,()=>{y()}),()=>{Nm.delete(w),Hm.delete(w)}),[w]);const S=W.useRef(!0);return W.useEffect(()=>{if(S.current){S.current=!1;return}e!==p.board.children&&!pm.get(w)&&(w.children=e,E.update(w.children,{board:w,parent:w,parentG:O.getElementHost(w)}),Bn.fitViewport(w))},[e]),b.jsx(Mw.Provider,{value:p,children:t})},eW=(e,t,n,r,i)=>{let o=nk(zF($F(jF(rk(JF(WF(ik(tk(tG(QG(ZG(GF(e,t)))))))))))));return n.forEach(s=>{o=s(o)}),JG(o),r&&(o.viewport=r),i&&(o.theme=i),o},tW=e=>new oP(e),D5={isActive(e,t){const n=$e.get(e,Y9);if(n){const{align:r}=n;return r===t}return!1},setAlign(e,t){const n={align:t};Le.setNodes(e,n,{at:Y9})}},Y9=[0];var ui;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(ui||(ui={}));const q9=[ui.bold,ui.color,ui.italic,ui.strike,ui.underline,ui.fontSize];var ev;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(ev||(ev={}));ui.bold,ui.italic,ui.underline,ui.strike;const qv=14,Wu={getMarks(e){const t={};let n=[];e.selection?n=e.selection:e.children&&e.children.length>0&&(n={anchor:F.start(e,[0]),focus:F.end(e,[0])});const r=F.nodes(e,{match:ot.isText,at:n});for(const i of r){const[o]=i,{text:s,...a}=o;Object.assign(t,a)}for(const i in t)q9.includes(i)||delete t[i];return t},getMarksByElement(e){const t={},n=$e.texts(e);for(const r of n){const[i]=r,{text:o,...s}=i;Object.assign(t,s)}for(const r in t)q9.includes(r)||delete t[r];return t},isMarkActive(e,t){var i,o;if(!(e!=null&&e.selection))return;const n=$e.get(e,(o=(i=e==null?void 0:e.selection)==null?void 0:i.anchor)==null?void 0:o.path);if(!ot.isText(n))return!1;const r=Wu.getMarks(e);return!!(r&&r[t])},toggleMark(e,t){iy(e),Wu.isMarkActive(e,t)?F.removeMark(e,t):F.addMark(e,t,!0)},setFontSizeMark(e,t,n=qv){iy(e),Number(t)===n?F.removeMark(e,ui.fontSize):F.addMark(e,ui.fontSize,Number(t))},setColorMark(e,t,n=qr){iy(e),t===n||t===null||t===void 0?F.removeMark(e,"color"):F.addMark(e,"color",t)}};function iy(e){e.selection||Le.select(e,[0])}const pS=20,mS=e=>{const n=qf(e)[0];return!n||n.children.length===0?{}:Wu.getMarks(n)},nW=(e,t,n)=>{let r;if(n!=null&&n.length)r=n;else{const i=qe(e);if(i.length){const o=xG(e);if(!o)return;const s=Wu.getMarks(o),a=i.filter(f=>qf(f).some(d=>Wu.getMarks(d)[t]===s[t]));r=iS(e,a)}}r&&r.length&&r.forEach(i=>{Wu.toggleMark(i,t)})},rW=(e,t,n,r)=>{const i=Yw(e,r);if(i&&i.length){const o=qe(e);i.forEach(s=>{let a;if(typeof n=="function"){const f=o.find(h=>qf(h).includes(s));a=n(f)}else a=n;Wu.setFontSizeMark(s,t,a)})}},iW=(e,t,n,r)=>{const i=Yw(e,r);i&&i.length&&i.forEach(o=>{n&&Le.select(o,n),t==="transparent"?F.removeMark(o,ui.color):Wu.setColorMark(o,t)})},oW=(e,t,n)=>{const r=Yw(e,n);r&&r.length&&r.forEach(i=>D5.setAlign(i,t))},Yw=(e,t)=>{let n;return t!=null&&t.length?n=t:n=iS(e),n},tv={setTextAlign:oW,setTextColor:iW,setFontSize:rW,setTextMarks:nW};var gt;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})(gt||(gt={}));var ht;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(ht||(ht={}));var ut;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(ut||(ut={}));var Xo;(function(e){e.name="name",e.content="content"})(Xo||(Xo={}));var po;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(po||(po={}));var nu;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(nu||(nu={}));var h0;(function(e){e.table="table"})(h0||(h0={}));const Ng={isTable:e=>e.type==="table",isVerticalText:e=>{var t;return((t=e.text)==null?void 0:t.direction)==="vertical"}},vS="plait-draw-plugin-key";var nv;(function(e){e.lineText="line-text",e.geometryText="geometry-text"})(nv||(nv={}));const rt={rectangleAndText:4},Zv={strokeWidth:2,fill:UP},sW={selectionStrokeWidth:fr},Hg={width:100,height:100,strokeColor:qr,strokeWidth:2},Z9={width:120,height:50},uW={width:138,height:80},Q9={width:100,height:80},aW={width:120,height:100},Qv={height:20,text:"文本"},yS={defaultTextMaxWidth:34*14},oy={width:44,height:44},Fu={width:120,height:60},lW={width:70,height:80},cW={width:80,height:80},fW={width:140,height:70},hW={width:124,height:60},wS={width:120,height:70},sy={width:160,height:100},T5={width:120,height:80},dW={width:117,height:59},gW={width:47,height:33},pW={width:68,height:100},mW={width:300,height:240},vW={width:210,height:150,texts:[{id:Xo.name,text:"包名",align:fi.left},{id:Xo.content,text:"",align:fi.left}]},yW={width:18,height:80},J2={width:120,height:60},wW={width:200,height:150},J9={width:40,height:40},CW={width:20,height:20},xW={width:70,height:56},EW={width:120,height:56},PW={width:70,height:34},SW={width:400,height:280,texts:[{id:Xo.name,text:"Opt | Alt | Loop",align:fi.left},{id:Xo.content,text:"[Condition]",align:fi.left}]},DW={width:230,height:180,texts:[{text:"Class",align:fi.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:fi.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:fi.left}]},TW={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:fi.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:fi.left}]},CS={[gt.pentagonArrow]:Z9,[gt.processArrow]:Z9,[gt.cloud]:aW,[gt.twoWayArrow]:uW,[gt.leftArrow]:Q9,[gt.rightArrow]:Q9},xS={[ht.connector]:oy,[ht.process]:Fu,[ht.decision]:fW,[ht.data]:hW,[ht.terminal]:Fu,[ht.manualInput]:dW,[ht.preparation]:Fu,[ht.manualLoop]:Fu,[ht.merge]:gW,[ht.delay]:Fu,[ht.storedData]:Fu,[ht.or]:oy,[ht.summingJunction]:oy,[ht.predefinedProcess]:Fu,[ht.offPage]:Fu,[ht.document]:wS,[ht.multiDocument]:T5,[ht.database]:lW,[ht.hardDisk]:Fu,[ht.internalStorage]:cW,[ht.noteCurlyLeft]:sy,[ht.noteCurlyRight]:sy,[ht.noteSquare]:sy,[ht.display]:Fu},ES={[ut.actor]:pW,[ut.useCase]:wS,[ut.container]:mW,[ut.note]:J2,[ut.package]:vW,[ut.combinedFragment]:SW,[ut.class]:DW,[ut.interface]:TW,[ut.activation]:yW,[ut.object]:J2,[ut.deletion]:J9,[ut.activityClass]:J2,[ut.simpleClass]:J2,[ut.component]:T5,[ut.template]:T5,[ut.componentBox]:wW,[ut.port]:CW,[ut.branchMerge]:J9,[ut.assembly]:EW,[ut.providedInterface]:PW,[ut.requiredInterface]:xW},AW={[ut.package]:Object.keys(Xo),[ut.combinedFragment]:Object.keys(Xo)},rv=10,BW=6,RW=8,PS=[ht.or,ht.summingJunction,ut.activation,ut.deletion,ut.port,ut.branchMerge,ut.assembly,ut.providedInterface,ut.requiredInterface],MW=[ut.package,ut.combinedFragment],bW=[ht.noteCurlyLeft,ht.noteCurlyRight,ht.noteSquare,ut.requiredInterface,ut.deletion],qw=()=>[...Object.keys(gt),...Object.keys(ht),...Object.keys(ut)],SS=()=>Object.keys(nu),OW=()=>Object.keys(ht),IW=()=>Object.keys(ut),FW=()=>Object.keys(_n),kW=()=>Object.keys(lv),LW=1e3,DS={[lr.default]:{strokeColor:qr,fill:"#FFFFFF"},[lr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[lr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[lr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[lr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[lr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},rg=42,_W={width:580,height:524},NW={width:524,height:580},HW={width:580,height:524},GW={width:524,height:580},TS={[nu.swimlaneHorizontal]:GW,[nu.swimlaneVertical]:HW,[nu.swimlaneHorizontalWithHeader]:NW,[nu.swimlaneVerticalWithHeader]:_W},iv=5,AS={strokeWidth:2},WW=4,$W=6,jW=.6,zW=.8,VW=10,Vd=3,UW="文本",pc=e=>he.isImage(e)?gt.rectangle:he.isTable(e)?h0.table:e.shape,XW=6,uy=new WeakMap,A0=e=>{let t="";switch(!0){case he.isText(e):{t=Ho.text;break}case he.isBasicShape(e):{t=Ho.basicShape;break}case he.isFlowchart(e):{t=Ho.flowchart;break}case he.isArrowLine(e):{t=Ho.arrowLine;break}case he.isUML(e):t=Ho.UML}return t},BS=()=>({...Kv(Ho.arrowLine)}),mc=e=>{let t="";he.isBasicShape({shape:e})?t=e===gt.text?Ho.text:Ho.basicShape:he.isUML({shape:e})?t=Ho.UML:t=Ho.flowchart;const n={...Kv(t)},r={...n.text};return delete n.text,{textProperties:r,geometryProperties:n}},Zw=(e,t)=>{var o;const n=A0(e);let r=((o=Kv(n))==null?void 0:o.text)||{};const i=t.find(s=>s.type==="set_node");if(i){const{properties:s,newProperties:a}=i;for(const f in a){const h=a[f];h==null?delete r[f]:r[f]=h}for(const f in s)a.hasOwnProperty(f)||delete r[f];Kw(n,"text",r)}},KW=(e,t)=>{const n=uy.has(e)?uy.get(e):[],r=n.indexOf(t);t===gt.text||r===0||(r!==-1?n.splice(r,1):n.length===XW&&n.pop(),n.unshift(t),uy.set(e,n))},Gg=new WeakMap,eC=(e,t,n,r)=>{const i=Gg.get(e);return Gg.set(e,{...i,[QS(t,n)]:r})},wg=(e,t,n)=>Gg.get(e)[QS(t,n)],tC=(e,t)=>{const n=Gg.get(e);delete n[t],Gg.set(e,n)};class Qw{get shape(){return this.element.shape||this.element.type}constructor(t,n,r,i){this.board=t,this.texts=r,this.element=n,this.options=i}initialize(){const t=(this.board.getPluginOptions(E5)||{}).textPlugins;this.textManages=this.texts.map(r=>{const i=this.createTextManage(r,t);return eC(this.board,this.element,r,i),i}),pn.getElementRef(this.element).initializeTextManage(this.textManages)}draw(t){const n=R.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(r=>{const i=wg(this.board,this.element,r);r.text&&i&&(i.draw(r.text),t.append(i.g),(this.element.angle||this.element.angle===0)&&i.updateAngle(n,this.element.angle))})}update(t,n,r,i){this.element=t;const o=R.getCenterPoint(this.board.getRectangle(this.element)),s=(this.board.getPluginOptions(E5)||{}).textPlugins,a=n.filter(f=>!r.find(h=>h.id===f.id));a.length&&a.forEach(f=>{const h=wg(this.board,t,f),d=this.textManages.findIndex(p=>p===h);d>-1&&f.text&&f.textHeight&&this.textManages.splice(d,1),h==null||h.destroy(),tC(this.board,f.id)}),r.forEach(f=>{if(f.text){let h=wg(this.board,this.element,f);h?(h.updateText(f.text),h.updateRectangle()):(h=this.createTextManage(f,s),eC(this.board,t,f,h),h.draw(f.text),i.append(h.g),this.textManages.push(h)),(this.element.angle||this.element.angle===0)&&h.updateAngle(o,this.element.angle)}})}createTextManage(t,n){return new lp(this.board,{getRectangle:()=>this.getRectangle(t),onChange:i=>this.options.onChange(this.element,i,t),getMaxWidth:()=>this.getMaxWidth(t),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,t):this.getRectangle(t),textPlugins:n})}getRectangle(t){const n=gi(this.shape).getTextRectangle;return n?n(this.element,t):Pr(this.element)}getMaxWidth(t){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(t).width}destroy(){pn.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(n=>{tC(this.board,n.id)})}}const A5=e=>{const t=qe(e);return t&&t.length===1&&he.isElementByTable(t[0])},YW=(e,t)=>(t!=null&&t.length?t:qe(e)).filter(r=>he.isElementByTable(r)),Jw=new WeakMap;function Ud(e){return Jw.get(e)}function RS(e,t){return Jw.set(e,t)}function nC(e){return Jw.delete(e)}function cp(e,t){const n=e==null?void 0:e.buildTable(t);if(!n||!n.points||!n.columns||!n.rows)throw new Error("can not get table cells points");const r=R.getRectangleByPoints(n.points),i=n.columns.length,o=n.rows.length,s=rC(n.columns,r.width,i,!0),a=rC(n.rows,r.height,o,!1);return n.cells.map(h=>{const d=n.rows.findIndex(B=>B.id===h.rowId),p=n.columns.findIndex(B=>B.id===h.columnId);let v=r.x;for(let B=0;B<p;B++)v+=s[B];let w=r.y;for(let B=0;B<d;B++)w+=a[B];const E=iC(h,s,p,!0),y=v+E,S=iC(h,a,d,!1),A=w+S;return{...h,points:[[v,w],[y,A]]}})}function Qf(e,t,n){try{const r=cp(e,t),i=r&&t.cells.findIndex(o=>o.id===n);return r[i]}catch{throw new Error("can not get table cell points")}}function rC(e,t,n,r){const i=[],o=r?"width":"height";let s=t;e.forEach((h,d)=>{h[o]&&(i[d]=h[o],s-=h[o])});const a=n-i.filter(h=>!!h).length,f=a>0?s/a:0;for(let h=0;h<n;h++)i[h]||(i[h]=f);return i}function iC(e,t,n,r){const i=r?e.colspan||1:e.rowspan||1;let o=0;for(let s=0;s<i;s++){const a=n+s;o+=t[a]}return o}function oC(e,t,n){const r=e.buildTable(t),i=cp(e,r),o=R.getRectangleByPoints([n,n]),s=i.find(a=>{const f=R.getRectangleByPoints(a.points);return R.isHit(o,f)});return s?r.cells.find(a=>a.id===s.id):null}function sC(e,t){const n=MS(e,t);n&&n.edit()}function MS(e,t){return wg(e,void 0,t)}const bS=(e,t,n,r)=>{const i=e.columns.map(s=>s.id===t?{...s,width:n}:s),o=[e.points[0],[e.points[1][0]+r,e.points[1][1]]];return{columns:i,points:o}},OS=(e,t,n,r)=>{const i=e.rows.map(s=>s.id===t?{...s,height:n}:s),o=[e.points[0],[e.points[1][0],e.points[1][1]+r]];return{rows:i,points:o}};function qW(e,t,n,r){const i=`${r}Id`;e.forEach(o=>{o[i]===t&&(o[i]=n)})}function uC(e,t){e[`${t}s`].forEach(n=>{const r=yn();qW(e.cells,n.id,r,t),n.id=r})}function ZW(e){e.forEach(t=>{const n=yn();t.id=n})}function IS(e){return e.text&&e.textHeight}function QW(e,t,n){const r=cp(e,t),i=n.map(o=>r.find(a=>a.id===o.id).points);return R.getRectangleByPoints(i)}const ay=(e,t,n=null)=>{const r={id:yn(),rowId:e,columnId:t};return n!==null&&(r.textHeight=pS,r.text={children:[{text:n}],align:fi.center}),r},B0=(e,t)=>{const n=X$(e.theme.themeColorMode);return t.strokeColor||n},Jv=(e,t)=>{const n=he.isFlowchart(t)&&fp(t)?K$(e.theme.themeColorMode):Zv.fill;return t.fill||n},e3=(e,t)=>t.strokeStyle||Ss.solid,JW="debug:plait:line-mirror",em=v0(JW),e4=(e,t)=>{const n=[...t];return dt.isVertical(n,e,Vd)&&(n[0]=e[0]),dt.isHorizontal(n,e,Vd)&&(n[1]=e[1]),n};function e$(e,t,n,r){const i={previous:null,next:null},o=e[r],s=e[r+1],a=dt.isHorizontal(o,s),f=dt.isVertical(o,s),h=e[r-1]??e[0],d=e[r-2]??t;(a&&dt.isHorizontal(d,h)||f&&dt.isVertical(d,h))&&(i.previous=h);const p=e[r+2]??e[e.length-1],v=e[r+3]??n;return(a&&dt.isHorizontal(p,v)||f&&dt.isVertical(p,v))&&(i.next=p),i}function t$(e,t,n,r){let i=e,o=t;if(dt.isHorizontal(e,t)){const s=dt.getOffsetY(n.startPoint,n.endPoint);let a=e[1]+s;r.previous&&Math.abs(r.previous[1]-a)<Vd?a=r.previous[1]:r.next&&Math.abs(r.next[1]-a)<Vd&&(a=r.next[1]),i=[e[0],a],o=[t[0],a]}if(dt.isVertical(e,t)){const s=dt.getOffsetX(n.startPoint,n.endPoint);let a=e[0]+s;r.previous&&Math.abs(r.previous[0]-a)<Vd?a=r.previous[0]:r.next&&Math.abs(r.next[0]-a)<Vd&&(a=r.next[0]),i=[a,e[1]],o=[a,t[1]]}return[i,o]}function FS(e,t,n,r,i){let o=null,s=null;const a=r[i],f=r[i+1];if(!a||!f)return{index:o,deleteCount:s};const h=n.slice(1,-1),d=h.findIndex(v=>dt.isEquals(v,a)),p=h.findIndex(v=>dt.isEquals(v,f));if(Math.max(d,p)>-1){if(d>-1&&p>-1)return{index:d,deleteCount:2};if(d>-1&&p===-1)return d<h.length-1&&dt.isAlign([h[d],h[d+1],a,f])?{index:d,deleteCount:2}:{index:d,deleteCount:1};if(d===-1&&p>-1)return p>0&&dt.isAlign([h[p],h[p-1],a,f])?{index:p-1,deleteCount:2}:{index:p,deleteCount:1}}else for(let v=0;v<h.length-1;v++){const w=h[v],E=h[v+1];if(dt.isAlign([w,E,a,f])){o=v,s=2;break}if(dt.isAlign([w,E,a])){o=Math.min(v+1,h.length-1),s=1;break}if(dt.isAlign([w,E,f])){o=Math.max(v-1,0),s=1;break}}if(o===null)if(s=0,h.length>0){const v=gp(e,t),w=pp(e,t,v),E=c0(aS(w,e)),y=ba(E.slice(1,E.length-1)),S=[r[0],...h,r[r.length-1]],A=kS(e,S,y,w);for(let B=i-1;B>=0;B--){const I=A.slice(1,-1).findIndex(_=>dt.isEquals(_,r[B]));if(I>-1){o=I+1;break}}o===null&&(o=0,dt.isAlign(r)&&(s=h.length))}else o=0;return{index:o,deleteCount:s}}function kS(e,t,n,r){for(let i=1;i<t.length-2;i++)n$(e,i,t,n,r);return t}const n$=(e,t,n,r,i)=>{const o=n[t-1],s=n[t],a=n[t+1],f=n[t+2],h=[o,s],d=[a,f],p=dt.isAlign(h),v=dt.isAlign(d);let w=!1,E=!1;if(!p||!v){const y=B5(r,h[0],h[1]),S=B5(r,d[0],d[1]),A=y.length>0&&S.length>0;w=!p&&!A,E=!v&&!A}if(w||E){const y=[s,a],S=i$(y,r),A=o$(e,y,S,i.sourceRectangle,i.targetRectangle);if(A.length===1){const B=A[0];w&&n.splice(t,1,B[0]),E&&n.splice(t+1,1,B[1])}else{const I=dt.isHorizontal(s,a)?0:1;if(w){const _=[s[0],s[1]];_[I]=o[I],n.splice(t,1,_)}if(E){const _=[a[0],a[1]];_[I]=f[I],n.splice(t+1,1,_)}}}};function r$(e,t,n,r,i){const{deleteCount:o}=FS(e,t,n,r,i);return o!==null&&o>1}function B5(e,t,n){let r=[],i=-1,o=-1;for(let s=0;s<e.length;s++)if(dt.isAlign([e[s],t])&&(i=s),i>-1&&dt.isAlign([e[s],n])){o=s;break}return i>-1&&o>-1&&(r=e.slice(i,o+1)),r}function i$(e,t){const n=dt.isHorizontal(e[0],e[1]),r=[];for(let i=0;i<t.length-1;i++){const o=t[i],s=t[i+1],a=dt.isHorizontal(o,s,.1);n&&a&&r.push([o,s]),!n&&!a&&r.push([o,s])}return r}function o$(e,t,n,r,i){em.isDebug()&&em.clear();const o=[];for(let s=0;s<n.length;s++){const a=n[s],f=[t[0][0],t[0][1]],h=[t[1][0],t[1][1]],p=dt.isHorizontal(f,h)?0:1;f[p]=a[0][p],h[p]=a[1][p];const v=R.getRectangleByPoints([f,h,...a]);!R.isHit(v,r)&&!R.isHit(v,i)&&(o.push([f,h]),em.isDebug()&&em.drawPolygon(e,R.getCornerPoints(v)))}return o}const LS=e=>e.length===1?!0:e.some((t,n)=>{const r=e[n-1],i=e[n+1],o=r&&[r,t],s=i&&[t,i],a=o&&dt.isAlign(o),f=s&&dt.isAlign(s);return n===0?!f:n===e.length-1?!a:!a&&!f}),aC=20,s$=(e,t,n)=>{const r=Gt();if(Yr.isSourceMark(e,zr.none)&&Yr.isTargetMark(e,zr.none))return null;const i=$t(e),o=i*i/3;if(t.length===1&&(t=[t[0],[t[0][0]+.1,t[0][1]]]),!Yr.isSourceMark(e,zr.none)){const s=_g(t[0],t[1],aC+o),a=lC(e,{marker:e.source.marker,source:s,target:t[0],isSource:!0},n);a&&r.appendChild(a)}if(!Yr.isTargetMark(e,zr.none)){const s=_g(t[t.length-1],t[t.length-2],aC+o),a=lC(e,{marker:e.target.marker,source:s,target:t[t.length-1],isSource:!1},n);a&&r.appendChild(a)}return r},lC=(e,t,n)=>{const{marker:r,target:i,source:o,isSource:s}=t;let a;switch(r){case zr.openTriangle:{a=c$(e,o,i,n);break}case zr.solidTriangle:{a=l$(o,i,n);break}case zr.arrow:{a=a$(e,o,i,n);break}case zr.sharpArrow:{a=u$(o,i,n);break}case zr.oneSideUp:{a=cC(o,i,s?"down":"up",n);break}case zr.oneSideDown:{a=cC(o,i,s?"up":"down",n);break}case zr.hollowTriangle:{a=h$(o,i,n);break}case zr.singleSlash:{a=f$(o,i,s,n);break}}return a},u$=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=C0(e,t,20),s=Gt(),a=dw();let f=`M${o[0]},${o[1]}A25,25,20,0,1,${i[0]},${i[1]}L${r[0]},${r[1]}Z`;return a.setAttribute("d",f),a.setAttribute("stroke",`${n==null?void 0:n.stroke}`),a.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),a.setAttribute("fill",`${n==null?void 0:n.stroke}`),s.appendChild(a),s},a$=(e,t,n,r)=>{const i=Vn(t,n),o=$t(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],a=Et(...t,...s),f=[s[0]-(a*3/5+o)/2*i[0],s[1]-(a*3/5+o)/2*i[1]],{pointLeft:h,pointRight:d}=C0(t,s,30),p=Uo([h,s,d,f],{...r,fill:r.stroke},!0);return p.querySelector("path").setAttribute("stroke-linejoin","round"),p},l$=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=C0(e,r,30);return Uo([i,r,o],{...n,fill:n.stroke},!0)},c$=(e,t,n,r)=>{const i=Vn(t,n),o=$t(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],{pointLeft:a,pointRight:f}=C0(t,s,40);return Uo([a,s,f],r)},cC=(e,t,n,r)=>{const{pointLeft:i,pointRight:o}=C0(e,t,40);return Uo([n==="up"?o:i,t],r)},f$=(e,t,n,r)=>{const i=Et(...e,...t),o=_g(t,e,i/2),s=n?120:60,a=i0(...e,...o,s*Math.PI/180),f=i0(...t,...o,s*Math.PI/180);return Uo([a,f],r)},h$=(e,t,n)=>{const{pointLeft:r,pointRight:i}=C0(e,t,30);return Uo([r,i,t],{...n,fill:"white"},!0)};class _S extends xo{canDraw(t){return!0}draw(t){let n;return n=g$(this.board,t),n}}const d$=(e,t,n,r,i,o)=>({id:yn(),type:"arrow-line",shape:e,source:n,texts:i||[],target:r,opacity:1,points:t,...o}),Wi=(e,t)=>{switch(t.shape){case _n.elbow:return n3(e,t);case _n.curve:return NS(e,t);default:{const n=Yr.getPoints(e,t),r=gp(e,t);return n[0]=r.source.point,n[n.length-1]=r.target.point,n}}},NS=(e,t)=>{if(t.points.length===2){const n=gp(e,t),{source:r,target:i}=n,o=n.source.boundElement,s=n.target.boundElement;let a=[r.point];const h=12+Et(...r.point,...i.point)/3;if(o&&a.push(zd(r.point,r.vector,h)),s&&a.push(zd(i.point,i.vector,h)),o&&!s||!o&&s){a.push(i.point);const p=y$(a);return ci(p)}return!o&&!s&&(a.push(zd(r.point,r.vector,h)),a.push(zd(i.point,i.vector,h))),a.push(i.point),ci(a)}else{let n=Yr.getPoints(e,t);n=c0(n);const r=ip(n);return ci(r)}},g$=(e,t)=>{const n=$t(t),r=B0(e,t),i=e3(e,t),o=dc(i,n),s={stroke:r,strokeWidth:n,strokeLineDash:o},a=Gt();let f=Wi(e,t),h;t.shape===_n.curve?h=O.getRoughSVG(e).curve(f,s):h=Uo(f,s);const d=yn();h.setAttribute("mask",`url(#${d})`),t.strokeStyle===Ss.dotted&&Xt(h,"round"),a.appendChild(h);const{mask:p,maskTargetFillRect:v}=w$(e,t,d);a.appendChild(p),h.appendChild(v);const w=s$(t,f,{stroke:r,strokeWidth:n});return w&&a.appendChild(w),a},Wg=(e,t,n)=>{const r=s4(e,n,t),i=r.connectorPoint||r.edgePoint;return p$(i,n)},p$=(e,t)=>{let n=R.getRectangleByPoints(t.points);return[(e[0]-n.x)/n.width,(e[1]-n.y)/n.height]},m$=(e,t)=>{const n=R.getRectangleByPoints(t.points),r=pc(t);return gi(r).getConnectorPoints(n).find(o=>Et(...o,...e)<=RW)},t4=(e,t,n)=>{const r=t.texts[n],i=Wi(e,t),o=ZP(i,r.position);return{x:o[0]-r.width/2,y:o[1]-r.height/2,width:r.width,height:r.height}},v$=e=>E0(e,{match:t=>he.isArrowLine(t),recursion:t=>he.isDrawElement(t)}),y$=e=>{const t=[],n=e.length/3;for(let r=0;r<n;r++){const i=e[r],o=e[r+1],s=e[r+2],a=Et(...i,...o),f=Et(...s,...o),h=_g(i,o,a*2/3),d=_g(s,o,f*2/3);t.push(i,h,d,s)}return t},HS=(e,t,n,r,i,o)=>{const s=o4(e,r),a=s?Wg(e,r,s):void 0,f=i?Wg(e,n,i):void 0,h=s?s.id:void 0,d=new _S(e),p=BS();let v,w;v=p.source,w=p.target,v&&delete p.source,w&&delete p.target;const E=d$(t,[n,r],{marker:v||zr.none,connection:f,boundId:i==null?void 0:i.id},{marker:w||zr.arrow,connection:a,boundId:h},[],{strokeWidth:AS.strokeWidth,...p}),S=Wi(e,E)[0];return E.points[1]=e4(S,r),d.processDrawing(E,o),O.getElementTopHost(e).append(o),E};function w$(e,t,n){const r=xO();r.setAttribute("id",n);const i=Wi(e,t);let o=R.getRectangleByPoints(i);o=R.getOutlineRectangle(o,-30);const s=b7(o,{fill:"white"});r.appendChild(s),t.texts.forEach((h,d)=>{let p=t4(e,t,d);p=R.inflate(p,WW*2);const v=b7(p,{fill:"black"});r.appendChild(v)});const f=b7(o);return f.setAttribute("opacity","0"),f.setAttribute("fill","none"),{mask:r,maskTargetFillRect:f}}const n4=(e,t,n)=>{const r=t.texts;if(!r.length)return-1;const i=Wi(e,t);return r.findIndex(o=>{const s=ZP(i,o.position),a={x:s[0]-o.width/2,y:s[1]-o.height/2,width:o.width,height:o.height};return R.isHit(a,R.getRectangleByPoints([n,n]))})},r4=e=>MW.includes(e),Na=e=>he.isGeometry(e)&&r4(e.shape),C$=e=>AW[e],x$=(e,t,n={})=>{const r=yn(),i=E$(e);return{id:r,type:"geometry",shape:e,angle:0,opacity:1,texts:i,points:t,...n}},E$=e=>{var a;const n={...mc(e).textProperties},r=n==null?void 0:n.align,i=(n==null?void 0:n.textHeight)||Qv.height;n==null||delete n.align,n==null||delete n.textHeight;const o=((a=l4(e))==null?void 0:a.texts)||[];return(C$(e)||[]).map(f=>{const h=o==null?void 0:o.find(d=>(d==null?void 0:d.key)===f);return{id:f,text:Za((h==null?void 0:h.text)||"",r||(h==null?void 0:h.align)||fi.center,n),textHeight:i}})},P$=(e,t)=>{const n=gi(e.shape),r=R.getRectangleByPoints([t,t]);let i;return n.getTextRectangle&&(i=e.texts.find(o=>{const s=n.getTextRectangle(e,{id:o.id});return R.isHit(r,s)})),i};class GS extends xo{canDraw(t){return!0}draw(t){let n;return n=T$(this.board,t),n}}const Yl=(e,t)=>{switch(t.shape){case zg.straight:return t.points;case zg.curve:{if(t.points.length===2)return ci(t.points);{let n=t.points;const r=ip(n);return ci(r)}}default:return null}},S$=(e,t,n)=>({id:yn(),type:"vector-line",shape:e,opacity:1,points:t,...n}),D$=(e,t,n,r,i)=>{const o=new GS(e),s=BS(),a=S$(t,[...n,r],{strokeWidth:AS.strokeWidth,...s}),f=n[n.length-1];return a.points[a.points.length-1]=e4(f,r),o.processDrawing(a,i),O.getElementTopHost(e).append(i),a},T$=(e,t)=>{const n=$t(t),r=B0(e,t),i=e3(e,t),o=dc(i,n),s=Jv(e,t),a={stroke:r,strokeWidth:n,strokeLineDash:o,fill:s},f=Gt();let h=Yl(e,t);const d=Uo(h,a),p=yn();return d.setAttribute("mask",`url(#${p})`),t.strokeStyle===Ss.dotted&&Xt(d,"round"),f.appendChild(d),f},R0=e=>{const t=[];for(let n=0;n<e.length;n++){let r=n==e.length-1?0:n+1;t.push([(e[n][0]+e[r][0])/2,(e[n][1]+e[r][1])/2])}return t},WS=(e,t)=>{const n=[];for(let r=1;r<=e.length;r++){let i=e[r-1],o=r===e.length?e[0]:e[r];const s=hG(t,i,o);n.push(...s)}return n},Zr=(e,t)=>{for(let n=1;n<=e.length;n++){let r=e[n-1],i=n===e.length?e[0]:e[n];if(qP(t,r,i))return[r,i]}return null};function R5(e){const t=e.width/7,n=e.height/3.2,r=t/8.5,i=n/20,o=[e.x+t,e.y+n],s=[{rx:r,ry:i*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*2,endY:e.y+n/2},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*4.2,endY:e.y+n/2.2},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*5.8,endY:e.y+n},{rx:r,ry:i*1.3,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*6,endY:e.y+n*2.2},{rx:r,ry:i*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*5,endY:e.y+n*2.8},{rx:r,ry:i/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*2.8,endY:e.y+n*2.8},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n*2.2},{rx:r,ry:i*1.42,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n}];return{startPoint:o,arcCommands:s}}const $S={draw(e,t,n){const r=O.getRoughSVG(e),{startPoint:i,arcCommands:o}=R5(t),s=`M ${i[0]} ${i[1]} `+o.map(f=>`A ${f.rx} ${f.ry} ${f.xAxisRotation} ${f.largeArcFlag} ${f.sweepFlag} ${f.endX} ${f.endY}`).join(`
`)+" Z",a=r.path(s,{...n,fillStyle:"solid"});return CO(a,"round"),a},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,arcCommands:r}=R5(e);let i=1/0,o=t,s=n;for(const a of r){const f=_v(t,s,a),h=Et(t[0],t[1],f[0],f[1]);h<i&&(i=h,o=f),s=[a.endX,a.endY]}return o},getEdgeByConnectionPoint(e,t){const n=$S.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2,o=i/1.5;return{height:r,width:o>0?o:0,x:t.x+rt.rectangleAndText+n+i/6,y:t.y+t.height/6+(t.height*4/6-r)/2}}},jS=(e,t,n)=>n4(e,t,n)!==-1,$g=(e,t)=>pE(t,e)<=ow,zS=(e,t,n)=>{const r=Wi(e,t);return jS(e,t,n)||$g(r,n)},VS=(e,t,n)=>{const r=Yl(e,t);return hp(t.points)&&Jl(n,r)||$g(r,n)},A$=(e,t)=>{const n=gi(e.shape);if(Na(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return ov(t,R.getCornerPoints(o),e.angle)});{const r=n.getTextRectangle?n.getTextRectangle(e):Pr(e);return ov(t,R.getCornerPoints(r),e.angle)}},US=(e,t)=>{const n=gi(e.shape);if(Na(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return R.isPointInRectangle(o,t)});{const r=n.getTextRectangle?n.getTextRectangle(e):Pr(e);return R.isPointInRectangle(r,t)}},XS=e=>{if(!i4(e))return!0;const t=Uw(e);return F.isEmpty(t,t.children[0])},B$=(e,t,n)=>{const r=R.getRectangleByPoints([n.anchor,n.focus]);if(he.isGeometry(t)){const i=fC(e,r,t);return i||!XS(t)&&A$(t,r)}if(he.isImage(t))return fC(e,r,t);if(he.isArrowLine(t)){const i=Wi(e,t);return Gm(i,r)}if(he.isVectorLine(t)){const i=Yl(e,t);return Gm(i,r)}return null},fC=(e,t,n)=>{const r=R.getRectangleByPoints(n.points);return ov(t,R.getCornerPoints(r),n.angle)},ov=(e,t,n)=>{let r=wF(t,n)||t;return Gm(r,e)},KS=(e,t)=>{let n=YS(e,t),r=t.length;n&&(r=t.indexOf(n)+1);const i=t.slice(0,r),o=M$(i);return o?o[0]:LG(e,i,"asc")[0]},YS=(e,t)=>{let n=null;for(let r=0;r<t.length;r++){const i=t[r];if(t3(e,i)||fp(i)){const o=Jv(e,i);if(_G(o)){n=i;break}}}return n},R$=(e,t)=>YS(e,[t])!==null,M$=e=>{const t=e.filter(n=>he.isText(n)||he.isLine(n)||e.filter(r=>he.isImage(r)));return t.length?t:null},b$="debug:plait:hit:shape:edge:sample-points",Od=v0(b$),O$=[gt.cloud],I$=(e,t,n,r=!0)=>{const i=e.getRectangle(t);if(n=tc(e,n,t)||n,he.isGeometry(t)&&i){if(Od.isDebug()&&O$.includes(t.shape)){Od.clear();const{startPoint:a,arcCommands:f}=R5(i),h=[a,...f.map(w=>[w.endX,w.endY])];Od.drawCircles(e,h,5,!1);let d=1/0,p=n,v=a;for(const w of f){const E=_v(n,v,w),y=Et(n[0],n[1],E[0],E[1]),{center:S}=mE(v,w);Od.drawCircles(e,[S],8,!1,{fill:"yellow"}),y<d&&(d=y,p=E),v=[w.endX,w.endY]}Od.drawCircles(e,[n],12,!1,{fill:"black",stroke:"black"}),Od.drawCircles(e,[p],12,!1,{fill:"green",stroke:"green"})}if(qS(e,t,n,ow))return!0;const o=gi(pc(t));if(he.isText(t)){const a=Pr(t);return R.isPointInRectangle(a,n)}return r&&XS(t)&&!R$(e,t)?!1:US(t,n)||o.isInsidePoint(i,n)}if(he.isImage(t)){const o=R.getRectangleByPoints(t.points);return R.isPointInRectangle(o,n)}return he.isArrowLine(t)?zS(e,t,n):he.isVectorLine(t)?VS(e,t,n):null},qS=(e,t,n,r)=>{const i=JS(t,n);return Et(i[0],i[1],n[0],n[1])<=r},F$=(e,t,n,r)=>{const i=R.inflate(R.getRectangleByPoints(t.points),r);return gi(pc(t)).isInsidePoint(i,n)},k$=(e,t,n)=>{const r=e.getRectangle(t);if(n=tc(e,n,t)||n,he.isGeometry(t)&&!he.isGeometryByTable(t)){const i=gi(pc(t)),o=i.isInsidePoint(r,n);if(o)return o;if(i.getTextRectangle){const s=US(t,n);if(s)return s}}if(he.isImage(t)){const i=R.getRectangleByPoints(t.points);return R.isPointInRectangle(i,n)}return he.isArrowLine(t)?zS(e,t,n):he.isVectorLine(t)?VS(e,t,n):null},Pr=e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}},$t=e=>he.isText(e)?0:e.strokeWidth||Zv.strokeWidth,rc=(e,t)=>{KW(e,t.shape),Ve.insertNode(e,t,[e.children.length]),y0(e),Xf(e,t),Bn.updatePointerType(e,ln.selection)},i4=e=>he.isText(e)?!0:he.isImage(e)?!1:he.isGeometry(e)?f4(e):he.isArrowLine(e)?qf(e).length>0:he.isElementByTable(e)?e.cells.some(t=>IS(t)):!0,L$=e=>e.some(t=>i4(t)),fp=e=>he.isDrawElement(e)?he.isText(e)||he.isArrowLine(e)||he.isImage(e)?!1:he.isVectorLine(e)?hp(e.points):he.isGeometry(e)?Z$(e):!0:!1,t3=(e,t)=>he.isCustomGeometryElement(e,t)&&hp(t.points),o4=(e,t)=>{let n=ZS(e,t);if(n){const r=s4(e,n,t);if(r.isHitConnector||r.isHitEdge)return n}return null},s4=(e,t,n)=>{const r=tc(e,n,t)||n,i=m$(r,t),o=JS(t,r);return{isHitEdge:qS(e,t,r,BW),isHitConnector:!!i,connectorPoint:i,edgePoint:o}},ZS=(e,t,n=rv)=>{let r=null;return _$(e,i=>{r===null&&F$(e,i,tc(e,t,i)||t,n*2)&&(r=i)}),r},_$=(e,t)=>{hi(e,n=>{!O.isBoard(n)&&he.isShapeElement(n)&&t(n)},Uf(e),!0)},hC=(e,t,n,r,i)=>gi(n).draw(e,t,r,i),N$=(e,t,n={hasMask:!0,hasConnector:!0})=>{const r=Gt(),i=R.getRectangleByPoints(t.points),o=R.inflate(i,Ky),s=pc(t);let a;he.isElementByTable(t)&&(a={element:t});const f=hC(e,o,s,{stroke:vo,strokeWidth:Ky},a);if(r.appendChild(f),n.hasMask){const h=hC(e,o,s,{stroke:vo,strokeWidth:0,fill:fp(t)?pw:Zv.fill,fillStyle:"solid"},a);r.appendChild(h)}return n.hasConnector&&gi(s).getConnectorPoints(i).forEach(d=>{const p=Kf(O.getRoughSVG(e),d,8,{stroke:vo,strokeWidth:fr,fill:"#FFF",fillStyle:"solid"});r.appendChild(p)}),r},QS=(e,t)=>e&&Na(e)?`${e.id}-${t.id}`:t.id,hp=e=>{const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]},jg=e=>jv(e,nv.geometryText,Qv.text),H$=(e,t,n)=>{const r=mc(t),i={id:yn(),type:"geometry",angle:0,opacity:1,points:n,strokeWidth:Hg.strokeWidth,...r.geometryProperties};let o,s;return t===ut.class?(o=[{id:yn(),height:30},{id:yn()},{id:yn()}],s=[{id:yn()}]):(o=[{id:yn(),height:50},{id:yn()}],s=[{id:yn()}]),{...i,shape:t,rows:o,columns:s,cells:G$(e,o,s,t)}},G$=(e,t,n,r)=>{var f;const i=mc(r),o=t.length*n.length,s=((f=l4(r))==null?void 0:f.texts)||[],a=s.map(h=>dp(e,h.text||jg(e),i.textProperties["font-size"]).height);return new Array(o).fill("").map((h,d)=>{const p=Math.floor(d/n.length),v=d%n.length;return{id:yn(),rowId:t[p].id,columnId:n[v].id,textHeight:a[d],text:{children:[{text:s[d].text}],align:s[d].align}}})},u4=(e,t,n,r={},i={})=>PS.includes(e)?$$(e,t,r):W$(e,t,n,r,i),W$=(e,t,n,r={},i={})=>{let o={},s=fi.center,a=Qv.height;return e===gt.text&&(o={autoSize:!0},s=void 0),i={...i},i!=null&&i.align&&(s=i==null?void 0:i.align),i!=null&&i.textHeight&&(a=i==null?void 0:i.textHeight),i==null||delete i.align,i==null||delete i.textHeight,{id:yn(),type:"geometry",shape:e,angle:0,opacity:1,textHeight:a,text:Za(n,s,i),points:t,...o,...r}},$$=(e,t,n={})=>({id:yn(),type:"geometry",shape:e,angle:0,opacity:1,points:t,...n}),j$=(e,t,n,r)=>gi(n).draw(e,t,r),JS=(e,t)=>{const n=R.getRectangleByPoints(e.points),r=pc(e);return gi(r).getNearestPoint(n,t)},z$=e=>xS[e],V$=e=>CS[e]||Hg,U$=e=>ES[e],a4=(e,t,n=!1)=>{const r=(12+ws/2)*2,i=R.getRectangleByPoints(t.points),o=Ti(e,i),s=n?o:i;return R.getEdgeCenterPoints(R.inflate(s,r))},eD=(e,t)=>t.findIndex(n=>{const r=R.getRectangleByPoints([e]);let i=R.getRectangleByPoints([n]);return i=R.inflate(i,ws),R.isHit(r,i)}),X$=e=>DS[e].strokeColor,K$=e=>DS[e].fill,dp=(e,t,n)=>{n=n?Number(n):qv;const r=Yv(Za(t),{fontSize:n,fontFamily:yg});return{width:r.width+rt.rectangleAndText*2,height:r.height}},tD=(e,t)=>{const n=l4(e);return R.getPoints(R.getRectangleByCenterPoint(t,n.width,n.height))},l4=e=>{const t=OW().includes(e),n=IW().includes(e);return t?z$(e):n?U$(e):V$(e)},c4=(e,t,n,r)=>{const i=mc(gt.text);return r=r||R.getRectangleByPoints(t).height,u4(gt.text,t,n,i.geometryProperties,{...i.textProperties,textHeight:r})},sv=(e,t,n)=>{const r=mc(n),i=dp(e,Qv.text,r.textProperties["font-size"]).height;return he.isUMLClassOrInterface({shape:n})?H$(e,n,t):r4(n)?x$(n,t,{strokeWidth:Hg.strokeWidth,...r.geometryProperties}):u4(n,t,"",{strokeWidth:Hg.strokeWidth,...r.geometryProperties},{...r.textProperties,textHeight:i})},ly=(e,t,n)=>{const r=n?wg(e,t,n):Yf(t);r&&r.edit(()=>{})},f4=e=>q$(e)||Na(e),Y$=e=>!PS.includes(e)&&!r4(e),q$=e=>he.isGeometry(e)&&Y$(e.shape),Z$=e=>!bW.includes(e.shape),Q$=e=>e.source.boundId&&e.source.boundId===e.target.boundId,h4=(e,t)=>IG(t)&&!Q$(e),n3=(e,t)=>{const n=gp(e,t),r=pp(e,t,n);if(h4(t,r))return ba(pG(n.source.point,n.source.direction,n.target.point,n.target.direction,VP));const i=c0(aS(r,e)),o=i.slice(1,i.length-1);if(t.points.length===2)return ba(i);{const s=ba(o),f=c0(Yr.getPoints(e,t)).slice(1,-1);if(LS(f))return ba(i);const h=[s[0],...f,s[s.length-1]],d=kS(e,h,s,r),p=[i[0]];for(let w=0;w<d.length-1;w++){let E=d[w],y=d[w+1];if(dt.isAlign([E,y]))p.push(E);else{const A=B5(s,E,y);A.length?(p.push(E),p.push(...A)):(p.push(E),console.log("unknown data points"))}}return p.push(i[i.length-2],i[i.length-1]),ba(p)}},nD=(e,t)=>{const n=pp(e,t);return[n.nextSourcePoint,n.nextTargetPoint]},J$=(e,t,n)=>{let r=t.source.boundId?ys(e,t.source.boundId):void 0,i=t.target.boundId?ys(e,t.target.boundId):void 0;if(!r){const h=n.source;r=dC(h.point,h.vector)}if(!i){const h=n.target;i=dC(h.point,h.vector)}let o=R.getRectangleByPoints(r.points);const s=ec(R.getCornerPoints(o),r)||R.getCornerPoints(o);o=R.getRectangleByPoints(s),o=R.inflate(o,$t(r)*2);let a=R.getRectangleByPoints(i.points);const f=ec(R.getCornerPoints(a),i)||R.getCornerPoints(a);return a=R.getRectangleByPoints(f),a=R.inflate(a,$t(i)*2),{sourceRectangle:o,targetRectangle:a}},dC=(e,t)=>{const n=zd(e,t,-25),r=R.getPoints(R.getRectangleByCenterPoint(n,50,50));return u4(gt.rectangle,r,"")};function rD(e,t,n){let r=n??n3(e,t);const[i,o]=nD(e,t);return r.splice(0,1,i),r.splice(-1,1,o),c0(r)}const uv=(e,t)=>(t!=null&&t.length?t:qe(e)).filter(r=>he.isDrawElement(r)),d4=e=>qe(e).filter(n=>he.isArrowLine(n)),iD=e=>qe(e).filter(n=>he.isVectorLine(n)),ej=e=>{const t=qe(e);return t&&t.length===1&&he.isSwimlane(t[0])},tj=e=>{const t=qe(e);return t&&t.length===1&&he.isLine(t[0])},oD=(e,t,n)=>{const r=sv(e,t,n);return rc(e,r),r},nj=(e,t,n)=>{const r=mc(gt.text),i=dp(e,n,r.textProperties["font-size"]),o=[t,[t[0]+i.width,t[1]+i.height]],s=c4(e,o,n);rc(e,s)},rj=(e,t,n,r)=>{const i=Gf(t),o=Vt.get(e,r),s={points:i,textHeight:n};he.isText(o)&&o.autoSize&&(s.autoSize=!1),Ve.setNode(e,s,r)},ij=(e,t)=>{const n=qe(e),r=[];n.forEach(i=>{if(he.isGeometry(i)&&!he.isText(i)){const o=O.findPath(e,i);Ve.setNode(e,{shape:t},o),Vz(e,{...i,shape:t},r)}}),r.length&&r.forEach(i=>{$i.resizeArrowLine(e,i.property,i.path)})},sD=(e,t,n,r)=>{let i=t.points,o=t.autoSize;const s=rt.rectangleAndText;if(o){const a=n<iv?iv:n,f=Uw(t);if(D5.isActive(f,fi.right))i=[[i[1][0]-(a+s*2),i[0][1]],[i[1][0],i[0][1]+r]];else if(D5.isActive(f,fi.center)){const h=Math.abs(i[0][0]-i[1][0]),d=(a-h)/2;i=[[i[0][0]-d-s,i[0][1]],[i[1][0]+d+s,i[0][1]+r]]}else i=[i[0],[i[0][0]+a+s*2,i[0][1]+r]];zu(t)&&(i=$w(R.getRectangleByPoints(t.points),R.getRectangleByPoints(i),R.getCenterPoint(R.getRectangleByPoints(t.points)),R.getCenterPoint(R.getRectangleByPoints(i)),t.angle))}return{points:i}},oj=(e,t,n,r,i)=>{const o={text:n,textHeight:i,...sD(e,t,r,i)},s=e.children.findIndex(a=>a===t);Ve.setNode(e,o,[s])},sj=(e,t,n,r)=>{if(t.autoSize){const i={textHeight:r,...sD(e,t,n,r)},o=dt.isEquals(t.points[0],i.points[0])&&dt.isEquals(t.points[1],i.points[1]),s=Math.round(r)===Math.round(t.textHeight);if(!o||!s){const a=e.children.findIndex(f=>f===t);Ve.setNode(e,i,[a])}}},uj=(e,t,n)=>{const{width:r,height:i,url:o}=t,s=O.getBoardContainer(e).clientWidth,a=O.getBoardContainer(e).clientHeight,f=bt(e,Ot(e,s/2,a/2)),h=n?[n,[n[0]+r,n[1]+i]]:[[f[0]-r/2,f[1]-i/2],[f[0]+r/2,f[1]+i/2]],d={id:yn(),type:"image",points:h,url:o};Ve.insertNode(e,d,[e.children.length]),Ve.addSelectionWithTemporaryElements(e,[d])},uD=(e,t,n)=>{Ve.setNode(e,t,n)},aj=(e,t,n)=>{const r=O.findPath(e,t);Ve.setNode(e,{texts:n},r)},lj=(e,t,n)=>{var s;const r=O.findPath(e,t),o=[...(s=t.texts)!=null&&s.length?[...t.texts]:[]];o.splice(n,1),Ve.setNode(e,{texts:o},r)},cj=(e,t,n)=>{Kw(Ho.arrowLine,t,n),d4(e).forEach(i=>{const o=O.findPath(e,i);let s=t===xs.source?i.source:i.target;s={...s,marker:n},Ve.setNode(e,{[t]:s},o)})},fj=(e,t)=>{d4(e).map(r=>{const i={...t};if(r.shape===t.shape)return;const o=O.findPath(e,r);Ve.setNode(e,i,o)})},hj=(e,t,n,r)=>{const i=Yr.getPoints(e,t),o=n===xs.source?i[0]:i[i.length-1],s=Wg(e,o,r);if(s){let a=t.source,f=t.target;n===xs.source?a={...a,boundId:r.id,connection:s}:f={...f,boundId:r.id,connection:s};const h=O.findPath(e,t);uD(e,{source:a,target:f},h)}};function dj(e){const t={...e};return he.isHorizontalSwimlane(e)?(t.cells=e.cells.map((n,r)=>(r===0&&e.header&&(n={...e.cells[0],rowspan:e.rows.length}),n.text&&n.textHeight&&!n.text.direction&&(n={...n,text:{...n.text,direction:"vertical"}}),n)),t):(e.header&&(t.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),t)}const aD=(e,t)=>{const n=TS[e];return R.getPoints(R.getRectangleByCenterPoint(t,n.width,n.height))},av=(e,t)=>{const n=mj(e),r=vj(e),i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=gC(r,"row",n,o),a=gC(r,"column",n,i);return{id:yn(),type:"swimlane",shape:r,points:t,rows:s,columns:a,header:n,cells:gj(r,s,a,n)}},gC=(e,t,n,r)=>{const i=s=>new Array(s).fill("").map(()=>({id:yn()}));let o=i(3);if(t==="row"&&e===po.swimlaneVertical||t==="column"&&e===po.swimlaneHorizontal){o=n?o:i(2);const s=t==="row"?"height":"width";let a=rg;r<rg*o.length&&(a=Math.min(r/o.length/rg*rg,rg)),o=o.map((f,h)=>h===0||h===1&&n?{...f,[s]:a}:f)}return o},gj=(e,t,n,r)=>{let i=[],o=0;r&&(i=[ay(t[0].id,n[0].id,"New Swimlane")],o=1);const s=new Array(6).fill("").map((a,f)=>{if(f<3){const p=e===po.swimlaneVertical?t[o].id:t[f].id,v=e===po.swimlaneVertical?n[f].id:n[o].id;return ay(p,v,r?"Lane":"New Swimlane")}const h=e===po.swimlaneVertical?t[o+1].id:t[f-3].id,d=e===po.swimlaneVertical?n[f-3].id:n[o+1].id;return ay(h,d)});return[...i,...s]},pj=e=>he.isHorizontalSwimlane(e)?e.rows.length:he.isVerticalSwimlane(e)?e.columns.length:0,mj=e=>[nu.swimlaneHorizontalWithHeader,nu.swimlaneVerticalWithHeader].includes(e),vj=e=>[nu.swimlaneHorizontalWithHeader,nu.swimlaneHorizontal].includes(e)?po.swimlaneHorizontal:po.swimlaneVertical,lD=e=>O.isInPointer(e,SS()),yj=(e,t,n)=>{if(n>0&&he.isSwimlane(t)){const r=pj(t);if(he.isHorizontalSwimlane(t))if(n>r)cD(e,t,t.rows.length,n-r);else{const i=t.rows.length-(r-n);hD(e,t,i,r-n)}if(he.isVerticalSwimlane(t))if(n>r)fD(e,t,t.columns.length,n-r);else{const i=t.columns.length-(r-n);dD(e,t,i,r-n)}}},cD=(e,t,n,r=1)=>{if(he.isHorizontalSwimlane(t)){const i=[...t.rows],o=[];for(let d=0;d<r;d++)o.push({id:yn()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(d=>{s.push(...gD(t,d.id,"column"))});const a=Qf(e,t,t.cells[t.cells.length-1].id).points,f=R.getRectangleByPoints(a).height,h=[t.points[0],[t.points[1][0],t.points[1][1]+f*r]];r3(e,t,t.columns,i,s,h)}},fD=(e,t,n,r=1)=>{if(he.isVerticalSwimlane(t)){const i=[...t.columns],o=[];for(let d=0;d<r;d++)o.push({id:yn()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(d=>{s.push(...gD(t,d.id,"row"))});const a=Qf(e,t,t.cells[t.cells.length-1].id).points,f=R.getRectangleByPoints(a).width,h=[t.points[0],[t.points[1][0]+f*r,t.points[1][1]]];r3(e,t,i,t.rows,s,h)}},hD=(e,t,n,r=1)=>{if(he.isHorizontalSwimlane(t)){if(r>t.rows.length)return;const i=[...t.rows];if(i.splice(n,r),i.length===0){const o=O.findPath(e,t);Ve.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let h=n;h<r+n;h++){const d=t.rows[h];s.push(d),o=o.filter(p=>p.rowId!==d.id)}let a=0;s.forEach(h=>{if(h.height)a+=h.height;else{const d=t.cells.find(v=>v.rowId===h.id),p=Qf(e,t,d.id).points;a+=R.getRectangleByPoints(p).height}});const f=[t.points[0],[t.points[1][0],t.points[1][1]-a]];r3(e,t,t.columns,i,o,f)}}},dD=(e,t,n,r=1)=>{if(he.isVerticalSwimlane(t)){if(r>t.columns.length)return;const i=[...t.columns];if(i.splice(n,r),i.length===0){const o=O.findPath(e,t);Ve.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let h=n;h<r+n;h++){const d=t.columns[h];s.push(d),o=o.filter(p=>p.columnId!==d.id)}let a=0;s.forEach(h=>{if(h.width)a+=h.width;else{const d=t.cells.find(v=>v.columnId===h.id),p=Qf(e,t,d.id).points;a+=R.getRectangleByPoints(p).width}});const f=[t.points[0],[t.points[1][0]-a,t.points[1][1]]];r3(e,t,i,t.rows,o,f)}}},gD=(e,t,n)=>{const r=e[`${n}s`].map(i=>({id:yn(),rowId:n==="row"?i.id:t,columnId:n==="row"?t:i.id}));return e.header&&r.shift(),r[0]={...r[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:fi.center,direction:n==="row"?void 0:"vertical"},textHeight:20},r},r3=(e,t,n,r,i,o)=>{const s=O.findPath(e,t);Ve.setNode(e,{columns:n,rows:r,cells:i,points:o},s)},wj=(e,t,n)=>{var s;const i={texts:(s=t.texts)==null?void 0:s.map(a=>a.id===n.id?{...a,...n}:a)},o=e.children.findIndex(a=>a===t);Ve.setNode(e,i,[o])},Cj=(e,t,n,r,i)=>{const o=Vt.get(e,t),s=Qf(e,o,n),a=o.cells.findIndex(y=>y.id===s.id);let f=[...o.rows],h=[...o.columns],d=[...o.cells],p=[...o.points];const{width:v,height:w}=R.getRectangleByPoints(s.points),E=rt.rectangleAndText;if(Ng.isVerticalText(s)){const y=o.columns.findIndex(S=>S.id===s.columnId);if(i>v){const S=i+E*2,A=S-v,B=bS(o,o.columns[y].id,S,A);p=B.points,h=B.columns}}else{const y=o.rows.findIndex(B=>B.id===s.rowId),A=o.rows[y].height??Math.max(w,s.textHeight||0);if(i>A){const B=i+E*2,I=B-A,_=OS(o,o.rows[y].id,B,I);p=_.points,f=_.rows}}d[a]={...d[a],textHeight:i,text:r},Ve.setNode(e,{rows:f,columns:h,cells:d,points:p},t)},xj=(e,t,n,r)=>{const i=Ud(t);let o=t.cells;i!=null&&i.length?o=t.cells.map(s=>i.map(a=>a.id).includes(s.id)?pC(s,n):s):o=t.cells.map(s=>s.text&&s.textHeight?pC(s,n):s),Ve.setNode(e,{cells:o},r)},pC=(e,t)=>{const n={...e};return t?n.fill=t:delete n.fill,n},Ej=(e,t)=>{iD(e).map(r=>{if(r.shape===t.shape)return;const i=O.findPath(e,r);Ve.setNode(e,{...t},i)})},Pj=(e,t,n,r)=>{const o=SS().includes(n);let s=xS[n]||CS[n]||ES[n]||Hg;o&&(s=TS[n]);const a=Ld(r);if(a){let f=0;[nn.left,nn.right].includes(a)?f=-s.width/2:f=-s.height/2;const h=zd(t,r,f),d=R.getPoints(R.getRectangleByCenterPoint(h,s.width,s.height));if(o){const p=av(n,d);return rc(e,p),p}return oD(e,d,n)}return null},$i={setText:oj,setDrawTexts:wj,insertGeometry:oD,resizeGeometry:rj,insertText:nj,setTextSize:sj,resizeArrowLine:uD,setArrowLineTexts:aj,removeArrowLineText:lj,setArrowLineMark:cj,setArrowLineShape:fj,setVectorLineShape:Ej,insertImage:uj,connectArrowLineToDraw:hj,switchGeometryShape:ij,setTableText:Cj,addSwimlaneRow:cD,addSwimlaneColumn:fD,removeSwimlaneRow:hD,removeSwimlaneColumn:dD,updateSwimlaneCount:yj,setTableFill:xj,insertDrawByVector:Pj},M5=(e,t,n,r=0)=>{const i=R.getCenterPoint(t),o=YP(t,ws);if(r){const s=br([n],i,-r)[0];let a=o.find(f=>R.isHit(R.getRectangleByPoints([s,s]),f.rectangle));return a&&(a.cursorClass=sG(a.cursorClass,r)),a}else return o.find(s=>R.isHit(R.getRectangleByPoints([n,n]),s.rectangle))},Sj=e=>({x:e.x-Ym-vg,y:e.y+e.height+Ym,width:vg,height:vg}),Dj="debug:plait:resize-for-rotation",ps=v0(Dj);function Tj(e){const{afterChange:t,drawSelectionRectangle:n}=e;let r,i,o=!1,s=null;const a=()=>{const h=qe(e);return h.length>=1&&h.every(d=>(he.isDrawElement(d)||he.isCustomGeometryElement(e,d)&&d.points.length>1)&&!tj(e)&&!ej(e))};return Zf(e,{key:"draw-elements",canResize:a,hitTest:h=>{const d=qe(e),p=on(e,d,!1),v=go(d),w=M5(e,p,h,v);return w?{element:[...d],rectangle:p,handle:w.handle,cursorClass:w.cursorClass}:null},onResize:(h,d)=>{r==null||r.remove(),ps.isDebug()&&ps.clear();const p=Em(e,h.handle),v=d.isShift||h.element.length===1&&he.isImage(h.element[0]),w=R.getCenterPoint(h.rectangle),E=Qm(h.handle),{originPoint:y,handlePoint:S}=b5(e,E,h.rectangle),A=go(h.element);let B;if(A){B={angle:A,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[L,j]=br([d.startPoint,d.endPoint],w,-B.angle);d.startPoint=L,d.endPoint=j}const I=pD(e,h,d,{originPoint:y,handlePoint:S},v,p),_=i3(e,h.element,I);if(s=_.activePoints,r=_.snapG,O.getElementTopHost(e).append(r),B){const L=R.getPoints(h.rectangle),j=L.map(Pe=>Fa(Pe,y,_.xZoom,_.yZoom)),z=R.getRectangleByPoints(j);ps.isDebug()&&ps.drawRectangle(e,z,{stroke:"blue"});const J=R.getCenterPoint(z),ae=$w(R.getRectangleByPoints(L),R.getRectangleByPoints(j),w,J,B.angle),ne=R.getCenterPoint(R.getRectangleByPoints(ae));B=Object.assign(B,{offsetX:ne[0]-J[0],offsetY:ne[1]-J[1],newCenterPoint:ne}),ps.isDebug()&&ps.drawRectangle(e,ae)}h.element.forEach(L=>{const j=O.findPath(e,L);let z;if(B){z=f5(L.points,w,-B.angle).map(ne=>Fa(ne,y,_.xZoom,_.yZoom));const ae=z.map(ne=>[ne[0]+B.offsetX,ne[1]+B.offsetY]);z=f5(ae,B.newCenterPoint,B.angle)}else zu(L)&&(o=!0),zu(L)&&CF(L.angle)?z=Aj(e,L.points,y,_.xZoom,_.yZoom):z=L.points.map(J=>Fa(J,y,_.xZoom,_.yZoom));if(he.isGeometry(L))if(he.isGeometry(L)&&f4(L)){const{height:J}=Yf(L).getSize();$i.resizeGeometry(e,z,J,j)}else z=Gf(z),Ve.setNode(e,{points:z},j);else if(he.isLine(L)||he.isCustomGeometryElement(e,L)||he.isVectorLine(L))Ve.setNode(e,{points:z},j);else if(he.isImage(L))if(v)Ve.setNode(e,{points:z},j);else{const J=R.getRectangleByPoints(L.points),ae=R.getCenterPoint(J),ne=Fa(ae,y,_.xZoom,_.yZoom),Pe=R.getRectangleByCenterPoint(ne,J.width,J.height);Ve.setNode(e,{points:R.getPoints(Pe)},j)}})},afterResize:h=>{if(r==null||r.remove(),r=null,o){o=!1,s=null;const d=qe(e);Ve.addSelectionWithTemporaryElements(e,d)}}}),e.afterChange=()=>{t(),i&&(i.remove(),i=null);const h=qe(e);a()&&!ji(e)&&h.length>1&&(i=Bj(e,s,o),O.getActiveHost(e).append(i))},e.drawSelectionRectangle=()=>{if(o){const h=R.getRectangleByPoints(s),d=Ti(e,h);return su(e,R.inflate(d,fr),{stroke:vo,strokeWidth:fr})}return n()},e}const b5=(e,t,n)=>{const r=oG(e,t),i=G9(n,r),o=G9(n,t);return{originPoint:i,handlePoint:o}},g4=(e,t,n,r,i)=>{const[o,s]=e;let a=0,f=0;if(r)if(i)a=dt.getOffsetX(o,s)/(n[0]-t[0]),f=a;else{let h=dt.getOffsetX(o,s),d=dt.getOffsetY(o,s);a=h/(n[0]-t[0]),f=d/(n[1]-t[1])}else{const h=dt.isHorizontal(t,n,.1)||!1;let d=h?dt.getOffsetX(o,s):dt.getOffsetY(o,s),p=h?n[0]-t[0]:n[1]-t[1];const v=d/p;i?(a=v,f=v):h?a=v:f=v}return{xZoom:a,yZoom:f}},Fa=(e,t,n,r)=>{const i=(e[0]-t[0])*n,o=(e[1]-t[1])*r;return[e[0]+i,e[1]+o]},Aj=(e,t,n,r,i)=>{const o=R.getRectangleByPoints(t);ps.isDebug()&&ps.drawRectangle(e,o,{stroke:"black"});let s=t;s=br(s,R.getCenterPoint(o),1/2*Math.PI),ps.isDebug()&&ps.drawRectangle(e,s,{stroke:"blue"}),s=s.map(f=>Fa(f,n,r,i)),ps.isDebug()&&ps.drawRectangle(e,s);const a=R.getRectangleByPoints(s);return br(s,R.getCenterPoint(a),-.5*Math.PI)},Bj=(e,t,n)=>{const r=Gt(),i=qe(e),o=n?R.getRectangleByPoints(t):on(e,i,!1),s=Ti(e,o);let a=R.getCornerPoints(s);const f=go(i);if(f){const h=R.getCenterPoint(s);a=br(a,h,f)}return a.forEach(h=>{const d=KP(e,h);r.append(d)}),r},Rj="debug:plait:point-for-geometry",mC=v0(Rj),tm=10;function pD(e,t,n,r,i,o){const{originPoint:s,handlePoint:a}=r,f=[n.startPoint,n.endPoint],{xZoom:h,yZoom:d}=g4(f,s,a,o,i);let p,v=[];if(Array.isArray(t.element)){p=t.element;const I=on(e,t.element,!1);v=R.getPoints(I)}else p=[t.element],v=t.element.points;const w=v.map(I=>Fa(I,s,h,d)),E=R.getRectangleByPoints(w),y=sp(E,go(p)),S=Fa(a,s,h,d),[A,B]=Vn(s,S);return{resizePoints:f,resizeOriginPoint:v,activeRectangle:y,originPoint:s,handlePoint:a,directionFactors:[f0(A),f0(B)],isAspectRatio:i,isFromCorner:o}}function i3(e,t,n){const r=Gt(),i=$E(e,t);let o=Oj(i,n);o.deltaX===0&&o.deltaY===0&&(o=Mj(i,n));const s=go(t),a=bj(o,n,s),f=Fj(e,a.activePoints,i,n,s),h=Ij(e,a.activePoints,i,n,s);return r.append(f,h),{...a,...o,snapG:r}}function Mj(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i,directionFactors:o}=t,s=o[0]!==0||r,a=o[1]!==0||r;if(s){const f=Nf(i,!0),h=o[0]===-1?f[0]:f[2],d=dg(e,h,!0);if(Math.abs(d)<_a&&(n.deltaX=d,n.deltaX!==0&&r))return n.deltaY=n.deltaX/(i.width/i.height),n}if(a){const f=Nf(i,!1),h=o[1]===-1?f[0]:f[2],d=dg(e,h,!1);if(Math.abs(d)<_a&&(n.deltaY=d,n.deltaY!==0&&r))return n.deltaX=n.deltaY*(i.width/i.height),n}return n}function bj(e,t,n){const{deltaX:r,deltaY:i}=e,{resizePoints:o,isCreate:s}=t,a=[o[0],[o[1][0]+r,o[1][1]+i]];let f=a,h=0,d=0;if(!s){const{originPoint:p,handlePoint:v,isFromCorner:w,isAspectRatio:E,resizeOriginPoint:y}=t,S=g4(a,p,v,w,E);h=S.xZoom,d=S.yZoom,f=y.map(A=>Fa(A,p,h,d)),n&&(f=$w(R.getRectangleByPoints(y),R.getRectangleByPoints(f),R.getCenterPoint(R.getRectangleByPoints(y)),R.getCenterPoint(R.getRectangleByPoints(f)),n))}return{xZoom:h,yZoom:d,activePoints:f}}function Oj(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i}=t,o=e.find(a=>Math.abs(a.width-i.width)<_a);if(o){const a=o.width-i.width;if(n.deltaX=a*t.directionFactors[0],r){const f=a/(i.width/i.height);return n.deltaY=f*t.directionFactors[1],n}}const s=e.find(a=>Math.abs(a.height-i.height)<_a);if(s){const a=s.height-i.height;if(n.deltaY=a*t.directionFactors[1],r){const f=a*(i.width/i.height);return n.deltaX=f*t.directionFactors[0],n}}return n}function nm(e,t){return t?[[e.x,e.y-tm],[e.x+e.width,e.y-tm]]:[[e.x-tm,e.y],[e.x-tm,e.y+e.height]]}function Ij(e,t,n,r,i){mC.isDebug()&&mC.clear();const o=R.getRectangleByPoints(t),s=sp(o,i),{isAspectRatio:a,directionFactors:f}=r,h=f[0]!==0||a,d=f[1]!==0||a;return jE(e,s,n,h,d)}function Fj(e,t,n,r,i){let o=[],s=[];const a=r.directionFactors[0]!==0||r.isAspectRatio,f=r.directionFactors[1]!==0||r.isAspectRatio,h=R.getRectangleByPoints(t),d=sp(h,i);for(let v of n)d.width===v.width&&a&&o.push(nm(v,!0)),d.height===v.height&&f&&s.push(nm(v,!1));o.length&&a&&o.push(nm(d,!0)),s.length&&f&&s.push(nm(d,!1));const p=[...o,...s];return zE(e,p)}function mD(e,t){const n=[],r=t.shape,i=10;if(r===_n.straight){const o=he.isArrowLine(t)?Yr.getPoints(e,t):t.points;for(let s=0;s<o.length-1;s++)Et(...o[s],...o[s+1])<i||n.push([(o[s][0]+o[s+1][0])/2,(o[s][1]+o[s+1][1])/2])}if(r===_n.curve){const o=he.isArrowLine(t)?Yr.getPoints(e,t):t.points,s=he.isArrowLine(t)?NS(e,t):Yl(e,t);if(o.length===2){const f=s.length-1,h=Math.round((0+f)/2);n.push(s[h])}else for(let a=0;a<o.length-1;a++){const f=s.findIndex(v=>v[0]===o[a][0]&&v[1]===o[a][1]),h=s.findIndex(v=>v[0]===o[a+1][0]&&v[1]===o[a+1][1]),d=Math.round((f+h)/2);Et(...o[a],...o[a+1])<i||n.push(s[d])}}if(r===_n.elbow){const o=n3(e,t),s=pp(e,t);if(!h4(t,s)){const[a,f]=nD(e,t);for(let h=0;h<o.length-1;h++){if(h==0&&dt.isEquals(o[h+1],a)||h===o.length-2&&dt.isEquals(o[o.length-2],f))continue;const[d,p]=o[h],[v,w]=o[h+1],E=[(d+v)/2,(p+w)/2];n.push(E)}}}return n}const kj=(e,t,n)=>cS(e,t,n,r=>{if(he.isArrowLine(r)){let i={...r.source},o={...r.target},s=[...r.points];return r.source.boundId&&(s[0]=Xl(ys(e,r.source.boundId),r.source.connection),ys(e,r.source.boundId,t)||(delete i.boundId,delete i.connection)),r.target.boundId&&(s[s.length-1]=Xl(ys(e,r.target.boundId),r.target.connection),ys(e,r.target.boundId,t)||(delete o.boundId,delete o.connection)),s=s.map(a=>[a[0]-n[0],a[1]-n[1]]),{...r,points:s,source:i,target:o}}}),Lj=(e,t,n)=>{fS(e,t,n,(r,i)=>{he.isArrowLine(r)&&(r.source.boundId&&t.find(s=>[r.source.boundId,i[r.source.boundId]].includes(s.id))&&(r.source.boundId=i[r.source.boundId]),r.target.boundId&&t.find(s=>[r.target.boundId,i[r.target.boundId]].includes(s.id))&&(r.target.boundId=i[r.target.boundId])),he.isElementByTable(r)&&(uC(r,"row"),uC(r,"column"),ZW(r.cells))})},lg=3/4,_j={draw(e,t,n){const r=ig(t),o=O.getRoughSVG(e).polygon(r,{...n,fillStyle:"solid"});return Xt(o,"round"),o},isInsidePoint(e,t){const n=ig(e);return Jl(t,n)},getCornerPoints(e){return ig(e)},getNearestPoint(e,t){return In(t,ig(e))},getEdgeByConnectionPoint(e,t){const n=ig(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height*lg-r)/2}}},ig=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*lg],[e.x+e.width*3/5,e.y+e.height*lg],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*lg],[e.x,e.y+e.height*lg]];function Ir(e){const t=e.getPolygonPoints,n={draw(r,i,o){const s=t(i),f=O.getRoughSVG(r).polygon(s,{...o,fillStyle:"solid"});return Xt(f,"round"),f},isInsidePoint(r,i){const o=t(r);return Jl(i,o)},getCornerPoints(r){return t(r)},getNearestPoint(r,i){return In(i,t(r))},getNearestCrossingPoint(r,i){const o=t(r),s=WS(o,i);let a=s[0],f=Et(i[0],i[1],a[0],a[1]);return s.filter((h,d)=>d>0).forEach(h=>{let d=Et(i[0],i[1],h[0],h[1]);d<f&&(f=d,a=h)}),a},getEdgeByConnectionPoint(r,i){const o=t(r),s=R.getConnectionPoint(r,i);return Zr(o,s)},getConnectorPoints(r){return e.getConnectorPoints?e.getConnectorPoints(r):t(r)}};return e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const Nj=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],Hj=Ir({getPolygonPoints:Nj,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),cy=Ir({getPolygonPoints:R.getEdgeCenterPoints,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Pr(e);return t.width=t.width/2,t.x+=t.width/2,t}});function p4(e){const t={draw(n,r,i){const o=[r.x+r.width/2,r.y+r.height/2],a=O.getRoughSVG(n).ellipse(o[0],o[1],r.width,r.height,{...i,fillStyle:"solid"});return Xt(a,"round"),a},isInsidePoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return Ha(r,i,n.width/2,n.height/2)},getCornerPoints(n){return R.getEdgeCenterPoints(n)},getNearestPoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return Ai(r,i,n.width/2,n.height/2)},getTangentVectorByConnectionPoint(n,r){const i=R.getConnectionPoint(n,r),o=[n.x+n.width/2,n.y+n.height/2],s=[i[0]-o[0],-(i[1]-o[1])],a=n.width/2,f=n.height/2,h=Uu(s[0],s[1],a,f);return Xu(s[0],s[1],h)},getConnectorPoints(n){return R.getEdgeCenterPoints(n)},getTextRectangle(n){const r=Pr(n),i=r.width;return r.width=r.width*3/4,r.x+=i/8,r}};return e!=null&&e.draw&&(t.draw=e.draw),e!=null&&e.getTextRectangle&&(t.getTextRectangle=e.getTextRectangle),t}const fy=p4(),Gj=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],Wj=Ir({getPolygonPoints:Gj,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),$j=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],jj=Ir({getPolygonPoints:$j,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width*(1-.32),t.x+=n*.32,t}}),zj=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],Vj=Ir({getPolygonPoints:zj,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),vC=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],yC=Ir({getPolygonPoints:vC,getConnectorPoints:e=>{const t=vC(e);return R0(t)},getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),Uj=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],Xj=Ir({getPolygonPoints:Uj,getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2,o=i*3/5;return{height:r,width:o>0?o:0,x:t.x+rt.rectangleAndText+n+i/5,y:t.y+t.height/5+(t.height*4/5-r)/2}}}),Kj=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},Yj=Ir({getPolygonPoints:Kj,getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=Pr(e),r=t.width>t.height/2+20;return n.width=r?t.width-t.height/2:n.width,n}}),qj=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(t?e.height/2:e.width),e.y+e.height/2]]},Zj=Ir({getPolygonPoints:qj,getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=Pr(e),r=t.width>t.height+20;return n.width=r?t.width-t.height:n.width,n.x=r?t.x+t.height/2:n.x,n}}),Qj=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],Jj=Ir({getPolygonPoints:Qj,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Pr(e);return t.width=t.width*.68,t}}),rn={draw(e,t,n){return su(e,t,{...n,fillStyle:"solid"})},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},ez={draw(e,t,n){return w0(O.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,Zd(t))},isInsidePoint(e,t){return cw(t,e,Zd(e))},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return vD(t,e,Zd(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},Zd=e=>Math.min(e.width*.1,e.height*.1);function vD(e,t,n){const{x:r,y:i,width:o,height:s}=t,a=R.getCornerPoints(t);let f=In(e,a),h=null;return e[0]>=r&&e[0]<=r+n&&e[1]>=i&&e[1]<=i+n&&(h=[r+n,i+n]),e[0]>=r&&e[0]<=r+n&&e[1]>=i+s&&e[1]<=i+s-n&&(h=[r+n,i+s-n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i&&e[1]<=i+n&&(h=[r+o-n,i+n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i+s-n&&e[1]<=i+s&&(h=[r+o-n,i+s-n]),h&&(f=Ai(e,h,n,n)),f}const Sf=3/4,tz={draw(e,t,n){const r=O.getRoughSVG(e),i=t.x,o=t.y,s=t.x+t.width,a=t.y+t.height*Sf,f=Zd(t),h=[i+f,o],d=[s-f,o],p=[s,o+f],v=[s,a-f],w=[s-f,a],E=[i+f,a],y=[i,a-f],S=[i,o+f],A=[i+t.width/4,a],B=[i+t.width/4,t.y+t.height],I=[i+t.width/2,a],_=r.path(`M${d[0]} ${d[1]} A ${f} ${f}, 0, 0, 1, ${p[0]} ${p[1]} L ${v[0]} ${v[1]} A ${f} ${f}, 0, 0, 1, ${w[0]} ${w[1]} L    ${I[0]} ${I[1]}  ${B[0]} ${B[1]}   ${A[0]} ${A[1]}   ${E[0]} ${E[1]} A ${f} ${f}, 0, 0, 1, ${y[0]} ${y[1]} L ${S[0]} ${S[1]} A ${f} ${f}, 0, 0, 1, ${h[0]} ${h[1]} Z`,{...n,fillStyle:"solid"});return Xt(_,"round"),_},isInsidePoint(e,t){const n=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,Jl(t,n)||cw(t,e,Zd(e))},getCornerPoints(e){return hy(e)},getNearestPoint(e,t){return In(t,hy(e))},getEdgeByConnectionPoint(e,t){const n=hy(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*Sf],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height*Sf-r)/2}}},hy=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Sf],[e.x+e.width/2,e.y+e.height*Sf],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*Sf],[e.x,e.y+e.height*Sf]],wC=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],nz=Ir({getPolygonPoints:wC,getConnectorPoints(e){const t=wC(e);return R0(t)},getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),CC=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],rz=Ir({getPolygonPoints:CC,getConnectorPoints(e){const t=CC(e);return[...R0(t),...t]},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+rt.rectangleAndText+n+i/6,y:t.y+t.height*3/5+(t.height*2/5-r)/2}}}),iz=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],oz=Ir({getPolygonPoints:iz,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),xC=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],sz=Ir({getPolygonPoints:xC,getConnectorPoints:e=>{const t=xC(e);return[t[1],t[3],t[5],t[7],t[9]]},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2,o=i/2;return{height:r,width:o>0?o:0,x:t.x+rt.rectangleAndText+n+i/4,y:t.y+t.height*1/6+(t.height*4/5-r)/2}}}),uz={draw(e,t,n){return w0(O.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,rm(t))},isInsidePoint(e,t){return cw(t,e,rm(e))},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return az(t,e,rm(e))},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t),r=rm(e),i=yD(e,r,n);if(i){const o=[n[0]-i[0],-(n[1]-i[1])],s=r,a=r,f=Uu(o[0],o[1],s,a);return Xu(o[0],o[1],f)}return null},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},rm=e=>Math.min(e.width/2,e.height/2);function az(e,t,n){let r=null,i=yD(t,n,e);if(i)r=Ai(e,i,n,n);else{const o=R.getCornerPoints(t);r=In(e,o)}return r}function yD(e,t,n){const{x:r,y:i,width:o,height:s}=e;let a=null;return n[0]>=r&&n[0]<=r+t&&n[1]>=i&&n[1]<=i+t&&(a=[r+t,i+t]),n[0]>=r&&n[0]<=r+t&&n[1]>=i+s-t&&n[1]<=i+s&&(a=[r+t,i+s-t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i&&n[1]<=i+t&&(a=[r+o-t,i+t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i+s-t&&n[1]<=i+s&&(a=[r+o-t,i+s-t]),a}const EC=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],lz=Ir({getPolygonPoints:EC,getConnectorPoints:e=>{const t=EC(e);return R0(t)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+t.height/4+(t.height*3/4-r)/2}}}),cz=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],fz=Ir({getPolygonPoints:cz,getConnectorPoints:e=>R.getEdgeCenterPoints(e),getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width*2/3,t.x+=n/6,t}}),PC=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],hz=Ir({getPolygonPoints:PC,getConnectorPoints:e=>{const t=PC(e);return R0(t)},getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),SC=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],dz=Ir({getPolygonPoints:SC,getConnectorPoints:e=>{const t=SC(e);return[...R0(t),...t]},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+rt.rectangleAndText+n+i/6,y:t.y+(t.height*2/3-r)/2}}}),gz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y} L${t.x+t.width*3/4} ${t.y} A  ${t.width/4} ${t.height/2}, 0, 0, 1,${t.x+t.width*3/4} ${t.y+t.height} L${t.x} ${t.y+t.height} Z`,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]),r=R.isHit({...e,width:e.width*3/4},n),i=Ha(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return r||i},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const n=In(t,rn.getCornerPoints(e));return n[0]>e.x+e.width*3/4?Ai(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/4,s=e.height/2,a=Uu(i[0],i[1],o,s);return Xu(i[0],i[1],a)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},pz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x+t.width/10} ${t.y} L${t.x+t.width} ${t.y} A  ${t.width/10} ${t.height/2}, 0, 0, 0,${t.x+t.width} ${t.y+t.height} L${t.x+t.width/10} ${t.y+t.height}A  ${t.width/10} ${t.height/2}, 0, 0, 1,${t.x+t.width/10} ${t.y}`,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]),r=R.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},n),i=Ha(t,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),o=!Ha(t,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return r&&o||i},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const n=In(t,rn.getCornerPoints(e));if(n[0]<e.x+e.width/10){const r=[e.x+e.width/10,e.y+e.height/2],i=Ai(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width*9/10){const r=[e.x+e.width,e.y+e.height/2],i=Ai(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t);let r=[e.x+e.width/10,e.y+e.height/2],i=e.width/10,o=e.height/2;const s=n[0]>e.x+e.width*9/10&&n[1]>e.y;s&&(r=[e.x+e.width,e.y+e.height/2]);const a=[n[0]-r[0],-(n[1]-r[1])],f=Uu(a[0],a[1],i,o),h=Xu(a[0],a[1],f);return s?h.map(d=>-d):h},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=Pr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}},mz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.06} ${t.y} L${t.x+t.width*.06} ${t.y+t.height} M${t.x+t.width-t.width*.06} ${t.y} L${t.x+t.width-t.width*.06} ${t.y+t.height}`,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},vz=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],yz=Ir({getPolygonPoints:vz,getConnectorPoints:e=>R.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-t.height/2-r)/2}}}),wz=p4({draw(e,t,n){const r=O.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],a=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${t.x} ${t.y+t.height/2}
        L${t.x+t.width} ${t.y+t.height/2}
        M${t.x+t.width/2} ${t.y}
        L${t.x+t.width/2} ${t.y+t.height}
        `,{...n,fillStyle:"solid"});return Xt(a,"round"),a}}),Cz=p4({draw(e,t,n){const r=O.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],a=[t.x+t.width/2,t.y+t.height/2],f=X6([t.x,t.y],[t.x+t.width,t.y+t.height],a[0],a[1],i,o),h=X6([t.x+t.width,t.y],[t.x,t.y+t.height],a[0],a[1],i,o),d=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${f[0][0]} ${f[0][1]}
        L${f[1][0]} ${f[1][1]}
        M${h[0][0]} ${h[0][1]}
        L${h[1][0]} ${h[1][1]}
        `,{...n,fillStyle:"solid"});return Xt(d,"round"),d}}),xz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9}
            Q${t.x+t.width-t.width/4} ${t.y+t.height-t.height/9*3}, ${t.x+t.width/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}           
            `,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){let n=In(t,rn.getCornerPoints(e)),r=ip([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(r=ci(r),n[1]>e.y+e.height-e.height/9){if(n[0]===e.x+e.width/2)return n[1]=e.y+e.height-e.height/9,n;n=In(t,r,!1)}return n},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t);return n[0]>e.x&&n[0]<e.x+e.width/4?Vn([e.x+e.width/4,e.y+e.height],n):n[0]>e.x+e.width/4&&n[0]<e.x+e.width/4*3?Vn([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):n[0]>e.x+e.width/4*3?Vn([e.x+e.width,e.y+e.height-e.height/9],n):Vn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},DC=e=>{const t=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let n=ip([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return n=ci(n),[...t,...n]},Ez={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y+10} H${t.x+5} V${t.y+5} H${t.x+10} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9-10-3} L${t.x+t.width-5} ${t.y+t.height-t.height/9-10-3-4} V${t.y+t.height-t.height/9-5-3}
                 L${t.x+t.width-10} ${t.y+t.height-t.height/9-5-3-4} V${t.y+t.height-t.height/9}
                
             Q${t.x+t.width-10-(t.width-10)/4} ${t.y+t.height-t.height/9*3}, ${t.x+(t.width-10)/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}
              
                M${t.x+5} ${t.y+10} H${t.x+t.width-10} V${t.y+t.height-t.height/9} 
                    
                M${t.x+10} ${t.y+5} H${t.x+t.width-5} V${t.y+t.height-t.height/9-10-3}
            `,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,DC(e),!1)},getConnectorPoints(e){let t=ip([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);t=ci(t);const n=In([e.x+e.width/2,e.y+e.height],t);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[n[0],n[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,t){const n=WS(DC(e),t);let r=n[0],i=Et(t[0],t[1],r[0],r[1]);return n.filter((o,s)=>s>0).forEach(o=>{let s=Et(t[0],t[1],o[0],o[1]);s<i&&(i=s,r=o)}),r},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t);if(n[0]>e.x&&n[0]<e.x+(e.width-10)/4)return Vn([e.x+(e.width-10)/4,e.y+e.height],n);if(n[0]>e.x+(e.width-10)/4&&n[0]<e.x+(e.width-10)/4*3)return Vn([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(n[0]>e.x+(e.width-10)/4*3&&n[0]<e.x+e.width-10)return Vn([e.x+(e.width-10),e.y+e.height-e.height/9],n);const r=eS(t)||nn.bottom,i=Hf(r);return[i.x,i.y]},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i-10:0,x:t.x+rt.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},Pz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y+t.height*.15}  
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x+t.width} ${t.y+t.height*.15} 
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x} ${t.y+t.height*.15} 
            V${t.y+t.height-t.height*.15}
            A${t.width/2} ${t.height*.15}, 0, 0, 0, ${t.x+t.width} ${t.y+t.height-t.height*.15}
            V${t.y+t.height*.15}`,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]),r=R.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},n),i=Ha(t,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),o=Ha(t,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return r||i||o},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const n=In(t,rn.getCornerPoints(e));if(n[1]<e.y+e.height*.15){const r=[e.x+e.width/2,e.y+e.height*.15],i=Ai(t,r,e.width/2,e.height*.15);return i[1]>r[1]&&(i[1]=r[1]*2-i[1]),i}if(n[1]>e.y+e.height-e.height*.15){const r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=Ai(t,r,e.width/2,e.height*.15);return i[1]<r[1]&&(i[1]=r[0]*2-i[1]),i}return n},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t);let r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=e.width/2,o=e.height*.15;n[1]<e.y+e.height*.15&&n[0]>e.x&&(r=[e.x+e.width/2,e.y+e.height*.15]);const a=[n[0]-r[0],-(n[1]-r[1])],f=Uu(a[0],a[1],i,o);return Xu(a[0],a[1],f)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+t.height*.3+(t.height-t.height*.45-r)/2}}},Sz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x+t.width-t.width*.15} ${t.y}  
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y+t.height} 
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y} 
            H${t.x+t.width*.15}
            A${t.width*.15} ${t.height/2}, 0, 0, 0, ${t.x+t.width*.15} ${t.y+t.height}
            H${t.x+t.width-t.width*.15}`,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]),r=R.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},n),i=Ha(t,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),o=Ha(t,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return r||i||o},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const n=In(t,rn.getCornerPoints(e));if(n[0]<e.x+e.width*.15){const r=[e.x+e.width*.15,e.y+e.height/2],i=Ai(t,r,e.width*.15,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width-e.width*.15){const r=[e.x+e.width-e.width*.15,e.y+e.height/2],i=Ai(t,r,e.width*.15,e.height/2);return i[0]<r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t);let r=[e.x+e.width*.15,e.y+e.height/2],i=e.width*.15,o=e.height/2;n[0]>e.x+e.width-e.width*.15&&n[1]>e.y&&(r=[e.x+e.width-e.width*.15,e.y+e.height/2]);const a=[n[0]-r[0],-(n[1]-r[1])],f=Uu(a[0],a[1],i,o);return Xu(a[0],a[1],f)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-t.width*.45-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.15+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},Dz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y} h${t.width} v${t.height} h${-t.width} v${-t.height}
            M${t.x} ${t.y+t.height/10} h${t.width}
            M${t.x+t.width/10} ${t.y} v${t.height}
            `,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-t.width*.1-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.1+rt.rectangleAndText+n,y:t.y+t.height*.1+(t.height-t.height*.1-r)/2}}};function TC(e){const t=e.width*.09,n=e.x+e.width,r=e.y+e.height/2;return{startPoint:[n,e.y],upperCurve:{controlPoint1:[n-t,e.y],controlPoint2:[n,r],endPoint:[n-t,r]},lowerCurve:{controlPoint1:[n,r],controlPoint2:[n-t,e.y+e.height],endPoint:[n,e.y+e.height]}}}const Tz={draw(e,t,n){const r=O.getRoughSVG(e),{startPoint:i,upperCurve:o,lowerCurve:s}=TC(t),a=[`M${i[0]} ${i[1]}`,`C${o.controlPoint1[0]} ${o.controlPoint1[1]},
            ${o.controlPoint2[0]} ${o.controlPoint2[1]},
            ${o.endPoint[0]} ${o.endPoint[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`].join(" "),f=r.path(a,{...n,fillStyle:"solid",fill:"transparent"});return Xt(f,"round"),f},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:i}=TC(e),o=ci([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),s=ci([r.endPoint,i.controlPoint1,i.controlPoint2,i.endPoint],.001),a=[...o,...s];let f=1/0,h=t;for(const d of a){const p=Et(t[0],t[1],d[0],d[1]);p<f&&(f=p,h=[...d])}return h},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-t.width*.09-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function AC(e){const t=e.width*.09,n=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+t,e.y],controlPoint2:[e.x,n],endPoint:[e.x+t,n]},lowerCurve:{controlPoint1:[e.x,n],controlPoint2:[e.x+t,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const Az={draw(e,t,n){const r=O.getRoughSVG(e),{startPoint:i,upperCurve:o,lowerCurve:s}=AC(t),a=[`M${i[0]} ${i[1]}`,`C${o.controlPoint1[0]} ${o.controlPoint1[1]},
            ${o.controlPoint2[0]} ${o.controlPoint2[1]},
            ${o.endPoint[0]} ${o.endPoint[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`].join(" "),f=r.path(a,{...n,fillStyle:"solid",fill:"transparent"});return Xt(f,"round"),f},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:i}=AC(e),o=ci([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),s=ci([r.endPoint,i.controlPoint1,i.controlPoint2,i.endPoint],.001),a=[...o,...s];let f=1/0,h=[...t];for(const d of a){const p=Et(t[0],t[1],d[0],d[1]);p<f&&(f=p,h=[...d])}return h},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-t.width*.09-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.09+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},Bz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x+t.width*.075} ${t.y+t.height} H${t.x} V${t.y} H${t.x+t.width*.075}
           `,{...n,fillStyle:"solid",fill:"transparent"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},Rz=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],Mz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x+t.width*.15} ${t.y} 
            H${t.x+t.width-t.width*.1} 
            A ${t.width*.1} ${t.height/2}, 0, 0, 1,${t.x+t.width-t.width*.1} ${t.y+t.height}
            H${t.x+t.width*.15}
            L${t.x} ${t.y+t.height/2}
            Z
            `,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],r=Jl(t,n),i=Ha(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return r||i},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const n=In(t,Rz(e));return n[0]>e.x+e.width-e.width*.1?Ai(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t),r=[e.x+e.width-e.width*.1,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.1,s=e.height/2,a=Uu(i[0],i[1],o,s);return Xu(i[0],i[1],a)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-n*2-t.width*.25;return{width:i>0?i:0,height:r,x:t.x+n+t.width*.15,y:t.y+(t.height-r)/2}}},_d={draw(e,t,n,r){const i=Gt();try{const o=cp(e,{...r==null?void 0:r.element});if(o){const s=O.getRoughSVG(e),{x:a,y:f,width:h,height:d}=t,p=z2(s,[a,f],[a+h,f],n),v=z2(s,[a,f],[a,f+d],n);i.append(p,v),o.forEach(w=>{const E=R.getRectangleByPoints(w.points),{x:y,y:S,width:A,height:B}=E,I=su(e,{x:y+fr,y:S+fr,width:A-fr*2,height:B-fr*2},{fill:w.fill,fillStyle:"solid",strokeWidth:0}),_=z2(s,[y+A,S],[y+A,S+B],n),L=z2(s,[y,S+B],[y+A,S+B],n);i.append(I,_,L)}),Xt(i,"round")}}catch(o){console.error(o)}return i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return vD(t,e,Zd(e))},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e,t){try{if(t&&t.id){const n=Qf(t==null?void 0:t.board,e,t.id);if(n)return Ng.isVerticalText(n)?bz(n):wD(n)}}catch(n){console.error(n)}return{x:0,y:0,width:0,height:0}}};function bz(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight||0,i=t.height-rt.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x-i/2+t.width/2,y:t.y+(t.height-r)/2}}function wD(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight||0,i=t.width-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}function BC(e){const t=e.x+e.width/2,n={width:e.width/3/2,height:e.height/4/2};return e.y+e.height/4/2,{headArcCommand:{rx:n.width,ry:n.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:t,endY:e.y},bodyLine:[[t,e.y+e.height/4],[t,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const Oz={draw(e,t,n){const r=O.getRoughSVG(e),{headArcCommand:i,bodyLine:o,armsLine:s,leftLegLine:a,rightLegLine:f}=BC(t),h=[`M${o[0][0]} ${o[0][1]}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${i.endX} ${i.endY}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${o[0][0]} ${o[0][1]}`,`V${o[1][1]}`,`M${s[0][0]} ${s[0][1]} H${s[1][0]}`,`M${a[0][0]} ${a[0][1]} L${a[1][0]} ${a[1][1]}`,`M${f[0][0]} ${f[0][1]} L${f[1][0]} ${f[1][1]}`].join(" "),d=r.path(h,{...n,fillStyle:"solid"});return Xt(d,"round"),d},getNearestPoint(e,t){const{headArcCommand:n,bodyLine:r,armsLine:i,leftLegLine:o,rightLegLine:s}=BC(e),a=[e.x+e.width/2,e.y+e.height/4/2],f=Ai(t,a,n.rx,n.ry),h=Et(...t,...f),p=lw(t,[r,i,o,s]),v=Et(...t,...p);return h<v?f:p},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t);if(n[1]>=e.y&&n[1]<=e.y+e.height/4){const r=[e.x+e.width/2,e.y+e.height/4/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/2,s=e.height/2,a=Uu(i[0],i[1],o,s);return Xu(i[0],i[1],a)}return n[1]>=e.y+e.height/4&&n[1]<e.y+e.height/4*3?n[0]<e.x+e.width/2?Lg(Vn([e.x,e.y+e.height/2],n),-(Math.PI/2)):Lg(Vn([e.x+e.width,e.y+e.height/2],n),-(Math.PI/2)):n[1]>=e.y+e.height/4*3?n[0]<e.x+e.width/2?Vn(n,[e.x+e.width/12,e.y+e.height]):Vn([e.x+e.width/12*11,e.y+e.height],n):Vn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=e.textHeight,r=t.width+40;return{height:n,width:r>0?r:0,x:t.x-20,y:t.y+t.height+4}}},Iz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+40} ${t.y} L${t.x+40} ${t.y+t.height} `,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=40-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function RC(e){const n=e.width*.7,r=e.x+e.width*.8;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+n,e.y],cornerPoint:[r,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[r,e.y+25]}}}const Fz={draw(e,t,n){const r=O.getRoughSVG(e),{points:i}=RC(t),o=[`M${i.leftTop[0]} ${i.leftTop[1]}`,`V${i.topStart[1]}`,`H${i.topEnd[0]}`,`L${i.cornerPoint[0]} ${i.cornerPoint[1]}`,`H${i.rightTop[0]}`,`V${i.rightBottom[1]}`,`H${i.leftBottom[0]}`,`V${i.leftMiddle[1]}`,`H${i.middlePoint[0]}`].join(" "),s=r.path(o,{...n,fillStyle:"solid"});return Xt(s,"round"),s},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const{points:n}=RC(e),r=[[n.topStart,n.leftTop],[n.leftTop,n.leftBottom],[n.leftBottom,n.rightBottom],[n.rightBottom,n.rightTop],[n.topStart,n.topEnd],[n.topEnd,n.cornerPoint],[n.cornerPoint,n.rightTop],[n.leftMiddle,n.middlePoint]];return lw(t,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t);return n[0]>e.x+e.width*.7&&n[1]<e.y+25?Vn([e.x+e.width*.7,e.y],n):Vn([e.x+e.width*.8,e.y+25],n)},getTextRectangle(e,t){var o,s;const n=R.getRectangleByPoints(e.points),r=$t(e),i=(s=(o=e.texts)==null?void 0:o.find(a=>a.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===Xo.name){const a=n.width*.7-rt.rectangleAndText-r;return{height:i,width:a>0?a:0,x:n.x+rt.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===Xo.content){const a=n.width-rt.rectangleAndText*2-r*2;return{height:i,width:a>0?a:0,x:n.x+rt.rectangleAndText+r,y:n.y+25+(n.height-25-i)/2}}return n}},kz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y+25} 
            V${t.y}
            H${t.x+t.width} 
            V${t.y+t.height}
            H${t.x}
            V${t.y+25}
            H${t.x+t.width/3-8}
            L${t.x+t.width/3} ${t.y+16}
            V${t.y}
            `,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e,t){var o,s;const n=R.getRectangleByPoints(e.points),r=$t(e),i=(s=(o=e.texts)==null?void 0:o.find(a=>a.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===Xo.name){const a=n.width/3-8-rt.rectangleAndText-r;return{height:i,width:a>0?a:0,x:n.x+rt.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===Xo.content){const a=n.width-rt.rectangleAndText*2-r*2;return{height:i,width:a>0?a:0,x:n.x+rt.rectangleAndText+r,y:n.y+25+rt.rectangleAndText+r}}return n}};function MC(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const Lz={draw(e,t,n){const r=O.getRoughSVG(e),i=MC(t),o=r.path(i.map(([s,a])=>`M${s[0]} ${s[1]} L${a[0]} ${a[1]}`).join(" "),{...n,fillStyle:"solid",strokeWidth:4});return Xt(o,"round"),o},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const n=MC(e);let r=1/0,i=t;return n.forEach(o=>{const s=Lv(t,o),a=Et(t[0],t[1],s[0],s[1]);a<r&&(r=a,i=s)}),i},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},_z={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.125} ${t.y} L${t.x+t.width*.125} ${t.y+t.height} M${t.x+t.width-t.width*.125} ${t.y} L${t.x+t.width-t.width*.125} ${t.y+t.height}`,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2-t.width*.125*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n+t.width*.125,y:t.y+(t.height-r)/2}}},Nz={draw(e,t,n){const i=O.getRoughSVG(e).path(`M${t.x} ${t.y} 
            h${t.width-16}
            v16
            h16
            v${t.height-16}
            h${-t.width}
            Z
            M${t.x+t.width-16} ${t.y} 
            A16 16, 0,0,1, ${t.x+t.width} ${t.y+16}
            `,{...n,fillStyle:"solid"});return Xt(i,"round"),i},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const n=In(t,rn.getCornerPoints(e));return n[0]>e.x+e.width-16&&n[1]<e.y+16?Ai(t,[e.x+e.width-16,e.y+16],16,16):n},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=Uu(i[0],i[1],16,16);return Xu(i[0],i[1],o)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n-15;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function bC(e){const t=e.y+e.height/2,n=e.x+e.width*.3,r=e.width*.13,i=e.height*.285,o=n+r,s=e.width*.233;return{startPoint:[e.x,t],line1:[[e.x,t],[n,t]],circleArcCommand:{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:n,endY:t},verticalArcCommand:{rx:s,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:o,endY:e.y+e.height},line2:[[o+s,t],[e.x+e.width,t]]}}const Hz={draw(e,t,n){const r=O.getRoughSVG(e),{startPoint:i,line1:o,circleArcCommand:s,verticalArcCommand:a,line2:f}=bC(t),h=[`M${i[0]} ${i[1]}`,`H${o[1][0]}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${o[1][0]+s.rx*2} ${s.endY}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${s.endX} ${s.endY}`,`M${a.endX} ${t.y}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${a.endX} ${a.endY}`,`M${f[0][0]} ${f[0][1]} H${f[1][0]}`].join(" "),d=r.path(h,{...n,fillStyle:"solid"});return Xt(d,"round"),d},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getNearestPoint(e,t){const{line1:n,line2:r,circleArcCommand:i,verticalArcCommand:o}=bC(e),s=In(t,[...n,...r]),a=Et(...t,...s),f=[n[1][0]+i.rx,n[1][1]],h=Ai(t,f,i.rx,i.ry),d=Et(...t,...h),p=[o.endX,e.y],v=_v(t,p,o),w=Et(...t,...v),E=Math.min(a,d,w);return E===a?s:E===d?h:v},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t);return n[0]>e.x+e.width*.43&&n[1]<e.y+e.height/2?Lg(Vn(n,[e.x,e.y+e.height/2]),-Math.PI):n[0]>e.x+e.width*.43&&n[1]>e.y+e.height/2?Vn(n,[e.x,e.y+e.height/2]):Vn(n,[e.x,e.y+e.height/2])}};function OC(e){const t=e.width*.39,n=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:t,ry:n,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+e.width*.41,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const Gz={draw(e,t,n){const r=O.getRoughSVG(e),{startPoint:i,leftArcCommand:o,line:s}=OC(t),a=[`M${i[0]} ${i[1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`M${s.startX} ${s.startY} H${s.endX}`].join(" "),f=r.path(a,{...n,fillStyle:"solid",fill:"transparent"});return Xt(f,"round"),f},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,leftArcCommand:r,line:i}=OC(e);let o=1/0,s=t;const a=_v(t,n,r),f=Et(t[0],t[1],a[0],a[1]);f<o&&(o=f,s=a);const h=[i.startX,i.startY],d=[i.endX,i.endY],p=Lv(t,[h,d]),v=Et(t[0],t[1],p[0],p[1]);return v<o&&(o=v,s=p),s},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)}},IC=.54;function FC(e){const t=e.y+e.height/2,n=e.width*(1-IC)/2,r=e.height/2,i=[e.x,t],o=e.x+e.width*IC;return{startPoint:i,line:{startX:i[0],startY:t,endX:o,endY:t},arcCommands:[{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:t},{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:o,endY:t}]}}const Wz={draw(e,t,n){const r=O.getRoughSVG(e),{startPoint:i,line:o,arcCommands:s}=FC(t),a=[`M${i[0]} ${i[1]}`,`H${o.endX}`,...s.map(h=>`A${h.rx} ${h.ry} ${h.xAxisRotation} ${h.largeArcFlag} ${h.sweepFlag} ${h.endX} ${h.endY}`)].join(" "),f=r.path(a,{...n,fillStyle:"solid"});return Xt(f,"round"),f},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getNearestPoint(e,t){const{line:n,arcCommands:r}=FC(e),i=[n.startX,n.startY],o=[n.endX,n.endY],s=In(t,[i,o]),a=Et(...t,...s),f=[e.x+3*e.width/4,n.startY],h=Ai(t,f,r[0].rx,r[0].ry),d=Et(...t,...h);return a<d?s:h},getTangentVectorByConnectionPoint(e,t){const n=R.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2];if(n[0]>e.x+e.width*.54){const i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.46/2,s=e.height/2,a=Uu(i[0],i[1],o,s);return Xu(i[0],i[1],a)}return Vn(n,[e.x,e.y+e.height/2])}};function im(e){const t=e.x+12,n=e.width>70?24:e.width*.2,r=e.height-28-e.height*.35>1?14:e.height*.175,i=e.y+e.height*.175,o=e.y+e.height-e.height*.175-r;return{boxSize:{width:n,height:r},points:{mainStart:[t,e.y],topBoxStart:[t,i],topBoxEnd:[t,i+r],bottomBoxStart:[t,o],bottomBoxEnd:[t,o+r],mainEnd:[t,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const CD={draw(e,t,n){const r=O.getRoughSVG(e),{boxSize:i,points:o}=im(t),s=[`M${o.mainStart[0]} ${o.mainStart[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.mainEnd[0]}`,`M${o.topBoxStart[0]} ${o.topBoxStart[1]}`,`h${i.width/2} v${i.height} h${-i.width} v${-i.height} h${i.width/2}`,`M${o.bottomBoxStart[0]} ${o.bottomBoxStart[1]}`,`h${i.width/2} v${i.height} h${-i.width} v${-i.height} h${i.width/2}`,`M${o.mainStart[0]} ${o.mainStart[1]}`,`V${o.topBoxStart[1]}`,`M${o.topBoxEnd[0]} ${o.topBoxEnd[1]}`,`V${o.bottomBoxStart[1]}`,`M${o.bottomBoxEnd[0]} ${o.bottomBoxEnd[1]}`,`V${o.mainEnd[1]}`].join(" "),a=r.path(s,{...n,fillStyle:"solid"});return Xt(a,"round"),a},getNearestPoint(e,t){const{boxSize:n,points:r}=im(e),i=[[r.mainStart,[r.rightTop[0],r.mainStart[1]]],[[r.rightTop[0],r.mainStart[1]],r.rightBottom],[r.rightBottom,[r.mainEnd[0],r.rightBottom[1]]],[[r.mainEnd[0],r.rightBottom[1]],r.mainStart],[r.topBoxStart,[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]],[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]],r.topBoxStart],[r.bottomBoxStart,[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]],[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]],r.bottomBoxStart],[r.mainStart,r.topBoxStart],[r.topBoxEnd,r.bottomBoxStart],[r.bottomBoxEnd,r.mainEnd]];return lw(t,i)},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getTangentVectorByConnectionPoint(e,t){const{points:n}=im(e),r=R.getConnectionPoint(e,t);return Vn(n.mainStart,r)},getConnectorPoints(e){const{points:t}=im(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[t.mainStart[0],e.y+e.height/2]]},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-24-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+24+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},$z={draw(e,t,n){const r=O.getRoughSVG(e),i=t.width-45*2-18>1?45:t.width*.25,o=t.height-30-8*2>1?30:t.height*.2,s={x:t.x+t.width-18-i,y:t.y+8,width:i,height:o},a=r.path(`M${t.x} ${t.y} 
            H${t.x+t.width} 
            V${t.y+t.height} 
            H${t.x} Z

            `,{...n,fillStyle:"solid"}),f=CD.draw(e,s,n);return a.append(f),Xt(a,"round"),a},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-45*2-18>1?45:t.width*.25,o=t.width-18-i-rt.rectangleAndText-n*2;return{height:r,width:o>0?o:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},jz={draw(e,t,n){const r=O.getRoughSVG(e);return w0(r,t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,t){const n=R.getRectangleByPoints([t,t]);return R.isHit(e,n)},getCornerPoints(e){return R.getCornerPoints(e)},getNearestPoint(e,t){return In(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=R.getConnectionPoint(e,t);return Zr(n,r)},getConnectorPoints(e){return R.getEdgeCenterPoints(e)},getTextRectangle(e){const t=R.getRectangleByPoints(e.points),n=$t(e),r=e.textHeight,i=t.width-rt.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+rt.rectangleAndText+n,y:t.y+(t.height-r)/2}}},zz={[gt.rectangle]:rn,[gt.diamond]:cy,[gt.ellipse]:fy,[gt.parallelogram]:yC,[gt.roundRectangle]:ez,[gt.text]:rn,[gt.triangle]:rz,[gt.leftArrow]:jj,[gt.trapezoid]:nz,[gt.rightArrow]:Jj,[gt.cross]:Hj,[gt.star]:sz,[gt.pentagon]:Xj,[gt.hexagon]:Wj,[gt.octagon]:Vj,[gt.pentagonArrow]:Yj,[gt.processArrow]:Zj,[gt.twoWayArrow]:oz,[gt.comment]:_j,[gt.roundComment]:tz,[gt.cloud]:$S,[ht.process]:rn,[ht.decision]:cy,[ht.connector]:fy,[ht.data]:yC,[ht.terminal]:uz,[ht.database]:Pz,[ht.hardDisk]:Sz,[ht.internalStorage]:Dz,[ht.manualInput]:lz,[ht.preparation]:fz,[ht.manualLoop]:hz,[ht.merge]:dz,[ht.delay]:gz,[ht.storedData]:pz,[ht.or]:wz,[ht.summingJunction]:Cz,[ht.predefinedProcess]:mz,[ht.offPage]:yz,[ht.document]:xz,[ht.multiDocument]:Ez,[ht.noteCurlyLeft]:Tz,[ht.noteCurlyRight]:Az,[ht.noteSquare]:Bz,[ht.display]:Mz,[po.swimlaneHorizontal]:_d,[po.swimlaneVertical]:_d,[h0.table]:_d,[ut.actor]:Oz,[ut.useCase]:fy,[ut.container]:Iz,[ut.note]:Nz,[ut.package]:Fz,[ut.combinedFragment]:kz,[ut.class]:_d,[ut.interface]:_d,[ut.activation]:rn,[ut.object]:rn,[ut.deletion]:Lz,[ut.activityClass]:_z,[ut.simpleClass]:rn,[ut.component]:CD,[ut.componentBox]:$z,[ut.template]:jz,[ut.port]:rn,[ut.branchMerge]:cy,[ut.assembly]:Hz,[ut.requiredInterface]:Gz,[ut.providedInterface]:Wz},gi=e=>zz[e],gp=(e,t)=>{const n=$t(t),r=t.source.boundId?ys(e,t.source.boundId):void 0,i=t.target.boundId?ys(e,t.target.boundId):void 0;let o=r?Xl(r,t.source.connection):t.points[0],s=i?Xl(i,t.target.connection):t.points[t.points.length-1],a=Ld([s[0]-o[0],s[1]-o[1]])||nn.right,f=gG(a);const h=Hf(a),d=Hf(f),p={key:xs.source,point:o,direction:a,vector:[h.x,h.y]},v={key:xs.target,point:s,direction:f,vector:[d.x,d.y]};if(r){const w=Yr.isSourceMarkOrTargetMark(t,zr.none,xs.source)?0:n,E=kC(r,t.source.connection);if(p.vector=E,p.boundElement=r,zu(r)){const y=Ld(Lg(E,r.angle));a=y||a}else{const y=Ld(E);a=y||a}p.direction=a,o=Xl(r,t.source.connection,a,w),p.point=ec(o,r)||o}if(i){const w=Yr.isSourceMarkOrTargetMark(t,zr.none,xs.target)?0:n,E=kC(i,t.target.connection);if(v.vector=E,v.boundElement=i,zu(i)){const y=Ld(Lg(E,i.angle));f=y||f}else{const y=Ld(E);f=y||f}v.direction=f,s=Xl(i,t.target.connection,f,w),v.point=ec(s,i)||s}return{source:p,target:v}},Xl=(e,t,n,r)=>{const i=R.getRectangleByPoints(e.points);if(n&&r){const o=Hf(n),s=R.getConnectionPoint(i,t);return[s[0]+o.x*r,s[1]+o.y*r]}else return R.getConnectionPoint(i,t)},kC=(e,t)=>{const n=R.getRectangleByPoints(e.points),r=pc(e),i=gi(r);let o=[0,0];const s=eS(t);if(s&&e.shape!==gt.ellipse){const a=Hf(s);return[a.x,a.y]}if(i.getEdgeByConnectionPoint){const a=i.getEdgeByConnectionPoint(n,t);if(a){const f=[a[1][0]-a[0][0],a[1][1]-a[0][1]];return $9(f)}}if(i.getTangentVectorByConnectionPoint){const a=i.getTangentVectorByConnectionPoint(n,t);if(a)return $9(a)}return o},pp=(e,t,n)=>{n=n??gp(e,t);const{sourceRectangle:r,targetRectangle:i}=J$(e,t,n),{sourceOuterRectangle:o,targetOuterRectangle:s}=OG(r,i),a=n.source.point,f=n.target.point,h=U9(a,o,n.source.direction),d=U9(f,s,n.target.direction);return{sourcePoint:a,nextSourcePoint:h,sourceRectangle:r,sourceOuterRectangle:o,targetPoint:f,nextTargetPoint:d,targetRectangle:i,targetOuterRectangle:s}},Vz=(e,t,n)=>{const r=E0(e,{match:i=>he.isArrowLine(i)?i.source.boundId===i.id||i.target.boundId===i.id:!1,recursion:i=>!0});r.length&&r.forEach(i=>{const o=i.source.boundId===t.id,s=o?"source":"target",a={...i[s]},f=Wi(e,i),h=o?f[0]:f[f.length-1];a.connection=Wg(e,h,t);const d=O.findPath(e,i),p=n.findIndex(v=>mt.equals(v.path,d));p===-1?n.push({property:{[s]:a},path:d}):n[p].property={...n[p].property,[s]:a}})};var zr;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(zr||(zr={}));var _n;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(_n||(_n={}));var xs;(function(e){e.source="source",e.target="target"})(xs||(xs={}));const Yr={isSourceMarkOrTargetMark(e,t,n){return n===xs.source?e.source.marker===t:e.target.marker===t},isSourceMark(e,t){return Yr.isSourceMarkOrTargetMark(e,t,xs.source)},isTargetMark(e,t){return Yr.isSourceMarkOrTargetMark(e,t,xs.target)},isBoundElementOfSource(e,t){return e.source.boundId===t.id},isBoundElementOfTarget(e,t){return e.target.boundId===t.id},getPoints(e,t){let n;if(t.source.boundId){const o=ys(e,t.source.boundId),s=Xl(o,t.source.connection);n=ec(s,o)||s}else n=t.points[0];let r;if(t.target.boundId){const o=ys(e,t.target.boundId),s=Xl(o,t.target.connection);r=ec(s,o)||s}else r=t.points[t.points.length-1];const i=t.points.length>2?t.points.slice(1,t.points.length-1):[];return[n,...i,r]}};var Ho;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(Ho||(Ho={}));var lv;(function(e){e.vectorLine="vectorLine"})(lv||(lv={}));var zg;(function(e){e.straight="straight",e.curve="curve"})(zg||(zg={}));const he={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>he.isArrowLine(e)||he.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===gt.text,isImage:e=>e.type==="image",isTable:e=>Ng.isTable(e),isDrawElement:e=>!!(he.isGeometry(e)||he.isLine(e)||he.isImage(e)||he.isTable(e)||he.isSwimlane(e)),isCustomGeometryElement:(e,t)=>{const n=e.getPluginOptions(vS);return!!((n==null?void 0:n.customGeometryTypes)||[]).includes(t.type)},isShapeElement:e=>he.isImage(e)||he.isGeometry(e)||he.isTable(e)||he.isSwimlane(e),isBasicShape:e=>Object.keys(gt).includes(e.shape),isFlowchart:e=>Object.keys(ht).includes(e.shape),isUML:e=>Object.keys(ut).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>he.isSwimlane(e)&&e.shape===po.swimlaneVertical,isHorizontalSwimlane:e=>he.isSwimlane(e)&&e.shape===po.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(ut).includes(e.shape)&&[ut.class,ut.interface].includes(e.shape),isGeometryByTable:e=>he.isUMLClassOrInterface(e),isElementByTable:e=>he.isTable(e)||he.isSwimlane(e)||he.isGeometryByTable(e)};class xD extends xo{canDraw(t,n){return!0}draw(t,n){const r=R.getRectangleByPoints(t.points),i=t.shape;if(i===gt.text)return;const o=Jv(this.board,t),s=$t(t),a=B0(this.board,t),f=e3(this.board,t),h=dc(f,s);return j$(this.board,R.inflate(r,-s),i,{stroke:a,strokeWidth:s,fill:o,strokeLineDash:h})}}const K4=class K4 extends xo{constructor(t){super(t,{active:!0}),this.board=t,this.hoverElement=null}canDraw(t,n){const r=qe(this.board);return!!(n.selected&&r.length===1&&!ji(this.board))}draw(t,n){return this.autoCompleteG=Gt(),a4(this.board,t,!0).forEach((i,o)=>{const s=Kf(O.getRoughSVG(this.board),i,$W,{stroke:"none",fill:dE(S0,jW),fillStyle:"solid"});s.classList.add(`line-auto-complete-${o}`),this.autoCompleteG.appendChild(s)}),this.autoCompleteG}removeAutoCompleteG(t){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${t}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};K4.key="line-auto-complete-generator";let za=K4;class Uz extends Qw{get textManage(){return this.textManages[0]}constructor(t,n,r,i){super(t,n,[{id:n.id,text:r,textHeight:n.textHeight}],i)}update(t,n,r,i){Na(t)||super.update(t,[{text:n,id:t.id,textHeight:t.textHeight}],[{text:r,id:t.id,textHeight:t.textHeight}],i)}}class LC extends gc{constructor(){super()}initializeGenerator(){this.activeGenerator=up(this.board,{getStrokeWidth:()=>(qe(this.board).length===1&&!ji(this.board),fr),getStrokeOpacity:()=>qe(this.board).length===1&&!ji(this.board)?1:.5,getRectangle:t=>R.getRectangleByPoints(t.points),hasResizeHandle:()=>Uv(this.board,this.element)}),this.lineAutoCompleteGenerator=new za(this.board),this.shapeGenerator=new xD(this.board),f4(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(za.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(qm.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(n.element,t.element)):(!(t.selected===n.selected)||t.selected)&&(this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}))}updateText(t,n){Na(this.element)?this.textGenerator.update(this.element,t.texts,n.texts,this.getElementG()):this.textGenerator.update(this.element,t.text,n.text,this.getElementG())}initializeTextManage(){const t=(n,r,i)=>{r.newText?Na(n)?$i.setDrawTexts(this.board,n,{id:i.id,text:r.newText,textHeight:r.height}):$i.setText(this.board,n,r.newText,r.width,r.height):$i.setTextSize(this.board,n,r.width,r.height),r.operations&&Zw(n,r.operations)};Na(this.element)?this.textGenerator=new Qw(this.board,this.element,this.element.texts,{onChange:t}):this.textGenerator=new Uz(this.board,this.element,this.element.text,{onChange:t,getMaxWidth:()=>{var i;let n=Pr(this.element).width;const r=gi(this.element.shape).getTextRectangle;return r&&(n=r(this.element).width),(i=this.element)!=null&&i.autoSize?yS.defaultTextMaxWidth:n}}),this.textGenerator.initialize()}destroy(){var t;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(t=this.textGenerator)==null||t.destroy()}}var Xr;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(Xr||(Xr={}));const ED=(e,t,n)=>{let r=he.isArrowLine(t)?Yr.getPoints(e,t):t.points;const i=O5(r,n);if(i!==-1){const a=i;if(i===0)return{handle:Xr.source,handleIndex:a};if(i===r.length-1)return{handle:Xr.target,handleIndex:a};if(t.shape!==_n.elbow)return{handleIndex:a}}const o=mD(e,t),s=O5(o,n);if(s!==-1)return{handle:Xr.addHandle,handleIndex:s}};function O5(e,t){const n=e.map(i=>({x:i[0]-ws/2,y:i[1]-ws/2,width:ws,height:ws})),r=n.find(i=>R.isHit(R.getRectangleByPoints([t,t]),i));return r?n.indexOf(r):-1}class PD extends xo{constructor(t,n={active:!0}){super(t,n),this.board=t,this.onlySelectedCurrentLine=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Gt(),i=qe(this.board);if(this.onlySelectedCurrentLine=i.length===1,this.onlySelectedCurrentLine){r.classList.add(np);const o=he.isArrowLine(t)?Yr.getPoints(this.board,t):t.points;let s=[...o],a=[];t.shape===_n.elbow&&(s=o.slice(0,1).concat(o.slice(-1)),a=rD(this.board,t,n.linePoints)),s.map(p=>Rg(this.board,p)).forEach(p=>{const v=_9(this.board,p);r.appendChild(v)});const d=mD(this.board,t).map(p=>Rg(this.board,p));if(!O.hasBeenTextEditing(this.board))for(let p=0;p<d.length;p++){const v=d[p];if(t.shape===_n.elbow&&a.length){const E=O5(d,v);if(r$(this.board,t,[...o],a,E)){const S=_9(this.board,v);r.appendChild(S);continue}}const w=iG(this.board,v);r.appendChild(w)}}else{const o=this.board.getRectangle(t);if(o){const s=Ti(this.board,o);let a="0.5";(s.height===0||s.width===0)&&(a="0.8");const f=su(this.board,s,{stroke:S0,strokeWidth:sW.selectionStrokeWidth});f.style.opacity=a,r.appendChild(f)}}return r}needUpdate(){return qe(this.board).length===1!==this.onlySelectedCurrentLine}}const Xz="debug:plait:line-turning",_C=v0(Xz);class Kz extends gc{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new _S(this.board),this.activeGenerator=new PD(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=Wi(this.board,this.element);this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const n=Wi(this.board,this.element);this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:n})},_C.isDebug()&&_C.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const t={};if(this.element.source.boundId){const n=ys(this.board,this.element.source.boundId);n&&(t.source=n)}if(this.element.target.boundId){const n=ys(this.board,this.element.target.boundId);n&&(t.target=n)}return t}onContextChanged(t,n){const r=this.getBoundedElements(),i=r.source!==this.boundedElements.source||r.target!==this.boundedElements.target;this.boundedElements=r;const o=Wi(this.board,this.element);if(t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateText(n.element.texts,t.element.texts),this.updateTextRectangle()):(t.selected!==n.selected||this.activeGenerator.needUpdate()||t.selected)&&this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:o}),i){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateTextRectangle();return}}initializeTextManages(){var t;if((t=this.element.texts)!=null&&t.length){const n=[];this.element.texts.forEach((r,i)=>{const o=this.createTextManage(r,i);n.push(o)}),this.getRef().initializeTextManage(n)}}drawText(){var t;(t=this.element.texts)!=null&&t.length&&this.getRef().getTextManages().forEach((n,r)=>{n.draw(this.element.texts[r].text),this.getElementG().append(n.g)})}createTextManage(t,n){return new lp(this.board,{getRectangle:()=>t4(this.board,this.element,n),onChange:r=>{const i=O.findPath(this.board,this.element),s=[...Vt.get(this.board,i).texts],a=r.width<iv?iv:r.width;s.splice(n,1,{text:r.newText?r.newText:this.element.texts[n].text,position:this.element.texts[n].position,width:a,height:r.height}),$i.setArrowLineTexts(this.board,this.element,s),r.operations&&Zw(this.element,r.operations)},getMaxWidth:()=>yS.defaultTextMaxWidth,textPlugins:[]})}updateText(t,n){if(t===n)return;const r=t.length,i=n.length,o=this.getRef().getTextManages();if(i===r)for(let s=0;s<r;s++)t[s].text!==n[s].text&&o[s].updateText(n[s].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(n=>{n.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class Yz extends gc{constructor(){super()}initializeGenerator(){this.shapeGenerator=new GS(this.board),this.activeGenerator=new PD(this.board),this.getRef().updateActiveSection=()=>{const t=Yl(this.board,this.element);this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:t})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=Yl(this.board,this.element);this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize()}onContextChanged(t,n){const r=Yl(this.board,this.element);t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:r})):(t.selected!==n.selected||this.activeGenerator.needUpdate()||t.selected)&&this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected,linePoints:r})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const qz=e=>{const{keyDown:t,dblClick:n}=e;return e.keyDown=r=>{const i=qe(e),o=i.length===1,s=i[0];if(!O.isReadonly(e)&&!jw(r)&&!Vw(r)&&!zw(r)&&o&&he.isGeometry(s)){r.preventDefault(),ly(e,s);return}t(r)},e.dblClick=r=>{if(r.preventDefault(),!O.isReadonly(e)){const i=bt(e,Ot(e,r.x,r.y)),o=lc(e,i,void 0,!1);if(o&&he.isGeometry(o)&&i4(o))if(Na(o)){const s=P$(o,i)||o.texts.find(a=>a.id.includes(Xo.content))||o.texts[0];ly(e,o,s)}else ly(e,o)}n(r)},e};class o3 extends xo{canDraw(t,n){return!0}draw(t,n){const r=R.getRectangleByPoints(t.points),i=$t(t),o=B0(this.board,t),s=e3(this.board,t),a=dc(s,i);return gi(h0.table).draw(this.board,r,{strokeWidth:i,stroke:o,strokeLineDash:a},{element:t})}}const NC=e=>{const t=qw();return O.isInPointer(e,t)&&Xv(e)},dy=e=>{const t=qw();return O.isInPointer(e,t)&&D0(e)},SD=(e,t)=>he.isUMLClassOrInterface({shape:t})?new o3(e):new xD(e),Zz=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null,s=null;return e.pointerMove=a=>{i==null||i.remove(),i=Gt();const f=qw(),d=O.isInPointer(e,f)&&Xv(e),p=bt(e,Ot(e,a.x,a.y)),v=O.getPointer(e),w=SD(e,v);if(d){const E=mc(v);if(v===gt.text){const y=dp(e,jg(e),E.textProperties["font-size"]),S=R.getPoints(R.getRectangleByCenterPoint(p,y.width,y.height));if(o=c4(e,S,jg(e)),s)s.textManage.updateRectangle(),s.g.append(s.textManage.g);else{const A=new lp(e,{getRectangle:()=>Pr(o)});A.draw(o.text),s={g:Gt(),textManage:A},O.getHost(e).append(s.g),s.g.append(A.g)}}else{const y=tD(v,p);o=sv(e,y,v),w.processDrawing(o,i),O.getElementTopHost(e).append(i)}}t(a)},e.pointerUp=a=>{NC(e)&&o||r(a)},e.globalPointerUp=a=>{NC(e)&&o&&(rc(e,o),s==null||s.textManage.destroy(),s==null||s.g.remove(),s=null),o=null,i==null||i.remove(),i=null,n(a)},e},Qz=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,a=null,f=null,h=!1,d;return e.keyDown=p=>{h=dn.isKeyHotkey("shift",p),i(p)},e.keyUp=p=>{h=!1,o(p)},e.pointerDown=p=>{if(!O.isReadonly(e)&&dy(e)){const v=bt(e,Ot(e,p.x,p.y));s=v;const w=O.getPointer(e);if(w===gt.text){const E=mc(w),y=dp(e,jg(e),E.textProperties["font-size"]),S=R.getPoints(R.getRectangleByCenterPoint(v,y.width,y.height)),A=c4(e,S,jg(e));rc(e,A),s=null}}t(p)},e.pointerMove=p=>{a==null||a.remove(),a=Gt();const v=bt(e,Ot(e,p.x,p.y)),w=O.getPointer(e),E=SD(e,w);if(d==null||d.remove(),s&&dy(e)){let y=Gf([s,v],h);const S=R.getRectangleByPoints(y),[A,B]=Vn(s,v),I=i3(e,[],{resizePoints:y,activeRectangle:S,directionFactors:[f0(A),f0(B)],isAspectRatio:h,isFromCorner:!0,isCreate:!0});d=I.snapG,O.getElementTopHost(e).append(d),y=Gf(I.activePoints,h),f=sv(e,y,w),E.processDrawing(f,a),O.getElementTopHost(e).append(a)}n(p)},e.pointerUp=p=>{if(dy(e)&&s){const v=bt(e,Ot(e,p.x,p.y)),{width:w,height:E}=R.getRectangleByPoints([s,v]);if(Math.hypot(w,E)<8){const y=O.getPointer(e);if(y!==gt.text){const S=tD(y,v);f=sv(e,S,y)}}f&&rc(e,f),d==null||d.remove(),a==null||a.remove(),a=null,s=null,f=null;return}r(p)},e},Jz=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=uv(t);if(s.length){const a=s.filter(E=>he.isGeometry(E)),f=s.filter(E=>he.isArrowLine(E)),h=s.filter(E=>he.isVectorLine(E)),d=s.filter(E=>he.isImage(E)),p=s.filter(E=>he.isTable(E)),v=s.filter(E=>he.isSwimlane(E)),w=[...og(t,a),...og(t,d),...og(t,p),...og(t,v)].filter(E=>!f.includes(E));o.push(...a,...f,...h,...d,...p,...v,...w.filter(E=>!f.includes(E)))}return n(o)},t.buildFragment=(o,s,a,f)=>{const h=uv(t,f);let d=[];if(h.length){if(a===ru.cut){const y=h.filter(A=>he.isGeometry(A)),S=h.filter(A=>he.isArrowLine(A));d=og(t,y).filter(A=>!S.includes(A))}const p=[...h,...d],v=kj(t,p,s?[s.x,s.y]:[0,0]),E={text:rS(p),type:Wa.elements,elements:v};o=$v(o,E)}return r(o,s,a,f)},t.insertFragment=(o,s,a)=>{var h,d,p;const f=qe(t);if((h=o==null?void 0:o.files)!=null&&h.length){const v=XP.map(E=>"image/"+E),w=!No(t)&&!(f.length===1&&t.isImageBindingAllowed(f[0]));if(v.includes(o.files[0].type)&&w){const E=o.files[0];oS(t,E,LW,y=>{$i.insertImage(t,y,s)});return}}if((d=o==null?void 0:o.elements)!=null&&d.length){const v=(p=o.elements)==null?void 0:p.filter(w=>he.isDrawElement(w));o.elements&&o.elements.length>0&&v.length>0&&Lj(t,v,s)}if(o!=null&&o.text&&(!o.elements||o.elements.length===0)&&!(f.length===1&&f[0].children)){$i.insertText(t,s,o.text);return}i(o,s,a)},t},og=(e,t)=>v$(e).filter(r=>t.find(i=>Yr.isBoundElementOfSource(r,i)||Yr.isBoundElementOfTarget(r,i))),eV=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o,s=null,a=null;return e.pointerDown=f=>{const h=FW(),d=O.isInPointer(e,h);if(!O.isReadonly(e)&&d&&D0(e)){const p=bt(e,Ot(e,f.x,f.y));i=p;const v=o4(e,p);v&&(o=v)}t(f)},e.pointerMove=f=>{s==null||s.remove(),s=Gt();let h=bt(e,Ot(e,f.x,f.y));if(i){const d=O.getPointer(e);a=HS(e,d,i,h,o,s)}n(f)},e.globalPointerUp=f=>{a&&(Ve.insertNode(e,a,[e.children.length]),y0(e),Xf(e,a),Bn.updatePointerType(e,ln.selection)),s==null||s.remove(),s=null,o=null,i=null,a=null,r(f)},e},tV=e=>{let t,n,r,i,o;return Zf(e,{key:"draw-line",canResize:()=>!0,hitTest:a=>{const f=d4(e);if(f.length>0){let h=null;return f.forEach(d=>{const p=ED(e,d,a);p&&(h={element:d,handle:p.handle,handleIndex:p.handleIndex})}),h}return null},beforeResize:a=>{if(a.element.shape===_n.elbow&&a.handle!==Xr.source&&a.handle!==Xr.target){const f=pp(e,a.element);if(h4(a.element,f))return;const h=[...a.element.points],d=a.handleIndex,p=n3(e,a.element);r=p[0],i=p[p.length-1],o=rD(e,a.element,p);const v=FS(e,a.element,[...h],o,d);t=v.index,n=v.deleteCount}},onResize:(a,f)=>{let h=[...a.element.points],d={...a.element.source},p={...a.element.target},v=a.handleIndex;const w=o4(e,f.endPoint);if(a.handle===Xr.source||a.handle===Xr.target){const E=a.handle===Xr.source?d:p;h[v]=f.endPoint,w?(E.connection=Wg(e,f.endPoint,w),E.boundId=w.id):(E.connection=void 0,E.boundId=void 0)}else if(a.element.shape===_n.elbow){if(o&&r&&i){const E=e$(o,r,i,v),y=o[v],S=o[v+1],[A,B]=t$(y,S,f,E);let I=[...h].slice(1,h.length-1);t!==null&&n!==null&&(LS(I)?I=[A,B]:I.splice(t,n,A,B),h=[r,...I,i])}}else a.handle===Xr.addHandle?h.splice(v+1,0,f.endPoint):h[v]=f.endPoint;if(!w){v=a.handle===Xr.addHandle?v+1:v;const E=Wi(e,a.element),y=[...h];y[0]=E[0],y[y.length-1]=E[E.length-1],(a.element.shape!==_n.elbow||a.element.shape===_n.elbow&&y.length===2)&&y.forEach((S,A)=>{A!==v&&h[v]&&(h[v]=e4(S,h[v]))})}$i.resizeArrowLine(e,{points:h,source:d,target:p},a.path)},afterResize:a=>{if(a.element.shape===_n.elbow){const f=Vt.get(e,a.path);let h=f&&[...f.points];if(h.length>2&&o&&r&&i){const d=o[0],p=o[o.length-1];h.splice(0,1,d),h.splice(-1,1,p),h=ba(h),dt.isEquals(h[0],d)&&h.splice(0,1),dt.isEquals(h[h.length-1],p)&&h.pop(),h.length===1&&(h=[]),h=[r,...h,i],$i.resizeArrowLine(e,{points:h},a.path)}}t=null,n=null,r=null,i=null,o=null}}),e},nV=e=>{const{pointerMove:t,pointerUp:n}=e;let r=null;return e.pointerMove=i=>{if(r==null||r.remove(),O.isReadonly(e)){t(i);return}const o=Object.keys(_n),s=O.isInPointer(e,o),a=bt(e,Ot(e,i.x,i.y)),f=aG(e,h=>{const{element:d,handle:p}=h,v=p===Xr.target||p===Xr.source;return he.isArrowLine(d)&&v});if(s||f){const h=ZS(e,a);if(h){const d=s4(e,h,a),p=d.isHitEdge||d.isHitConnector;if(r=N$(e,h,{hasMask:p,hasConnector:!0}),p){const v=Kf(O.getRoughSVG(e),d.connectorPoint||d.edgePoint,6,{stroke:vo,strokeWidth:Ky,fill:vo,fillStyle:"solid"});r.appendChild(v)}zu(h)&&Es(r,R.getCenterPointByPoints(h.points),h.angle),O.getElementTopHost(e).append(r)}}t(i)},e.pointerUp=i=>{r==null||r.remove(),r=null,n(i)},e},DD=e=>jv(e,nv.lineText,UW),rV=e=>{const{dblClick:t}=e;return e.dblClick=n=>{var r,i;if(!O.isReadonly(e)){const o=bt(e,Ot(e,n.x,n.y)),s=lc(e,o);if(s&&he.isArrowLine(s)){const a=s&&O.findPath(e,s),f=Wi(e,s),h=In(o,f),d=(r=s.texts)!=null&&r.length?[...s.texts]:[],p=n4(e,s,o);if(jS(e,s,o))HC(e,s,p);else{const w=DD(e),E=((i=Kv("arrow-line"))==null?void 0:i.text)||{},y=Za(w,void 0,E),{width:S,height:A}=Yv(y,{fontSize:qv,fontFamily:yg}),B=JP(f,h);d.push({text:y,position:B,width:S,height:A}),$i.setArrowLineTexts(e,s,d),setTimeout(()=>{if(a){const I=Vt.get(e,a),_=T0(I);HC(e,I,_.length-1,!0)}})}}}t(n)},e};function HC(e,t,n,r=!1){const o=T0(t)[n];o.edit(()=>{const s=$e.string(o.getText()),a=DD(e);(!s||r&&s===a)&&$i.removeArrowLineText(e,t,n)})}class iV extends gc{constructor(){super()}initializeGenerator(){this.imageGenerator=new ja(this.board,{getRectangle:t=>({x:t.points[0][0],y:t.points[0][1],width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]}),getImageItem:t=>({url:t.url,width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]})}),this.lineAutoCompleteGenerator=new za(this.board),this.getRef().addGenerator(za.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}onContextChanged(t,n){t.element!==n.element?(this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})):(!(t.selected===n.selected)||t.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const oV=e=>{const{pointerMove:t}=e;let n=null;return e.pointerMove=r=>{n==null||n.remove(),O.getBoardContainer(e).classList.remove(_m.crosshair);const i=uv(e),o=i.length===1&&i[0],s=_f(e,r.x,r.y);if(!O.isReadonly(e)&&!ji(e)&&o&&he.isShapeElement(o)){const a=a4(e,o,!0),f=eD(tc(e,s,o,!0)||s,a),h=a[f],p=pn.getElementRef(o).getGenerator(za.key);if(p.recoverAutoCompleteG(),h&&(p==null||p.removeAutoCompleteG(f),n=Kf(O.getRoughSVG(e),h,VW,{stroke:"none",fill:dE(S0,zW),fillStyle:"solid"}),O.getActiveHost(e).append(n),O.getBoardContainer(e).classList.add(_m.crosshair),zu(o))){const v=e.getRectangle(o),w=Ti(e,v);Es(n,R.getCenterPoint(w),o.angle)}}t(r)},e},sV="plait-arrow-line-auto-complete-plugin-key",uV=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o=null,s,a;return e.pointerDown=f=>{const h=uv(e),d=h.length===1&&h[0],p=_f(e,f.x,f.y);if(!O.isReadonly(e)&&d&&he.isShapeElement(d)){const v=a4(e,d,!0),w=eD(tc(e,p,d,!0)||p,v),E=v[w];if(E){i5(e);const y=QO(e,E);i=bt(e,Ot(e,y[0],y[1])),s=d,Bn.updatePointerType(e,_n.elbow)}}t(f)},e.pointerMove=f=>{o==null||o.remove(),o=Gt();let h=bt(e,Ot(e,f.x,f.y));if(i&&s&&Et(...tc(e,h,s)||h,...i)>iw){const p=R.getRectangleByPoints(s.points),v=pc(s),w=gi(v);let E=i;w.getNearestCrossingPoint&&(E=w.getNearestCrossingPoint(p,i));const y=ec(E,s)||E;a=HS(e,_n.elbow,y,h,s,o),Ve.addSelectionWithTemporaryElements(e,[])}n(f)},e.globalPointerUp=f=>{var h;if(a){Ve.insertNode(e,a,[e.children.length]),y0(e),Xf(e,a);const d=(h=e.getPluginOptions(sV))==null?void 0:h.afterComplete;d&&d(a)}i&&(Bn.updatePointerType(e,ln.selection),i=null),o==null||o.remove(),o=null,s=null,a=null,r(f)},e},aV=e=>{let t=0;const n=100;return Zf(e,{key:"line-text",canResize:()=>!0,hitTest:i=>{let o=null;const s=lc(e,i,a=>he.isArrowLine(a));if(s){const a=n4(e,s,i),h=T0(s)[a];if(a!==-1&&!h.isEditing)return t=a,{element:s,handle:P5.e}}return o},onResize:(i,o)=>{const s=i.element;if(s){const a=o.endPoint,f=Wi(e,s);if(pE(a,f)<=n){const d=In(a,f,!1),p=JP(f,d),v=[...s.texts];v[t]={...v[t],position:p},$i.setArrowLineTexts(e,s,v)}}}}),e},lV=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r,afterChange:i,drawSelectionRectangle:o}=e;let s=null,a,f=!1;const h=()=>{const d=qe(e);return d.length>0&&d.every(p=>he.isDrawElement(p)&&!he.isArrowLine(p)||he.isCustomGeometryElement(e,p))};return e.pointerDown=d=>{if(!h()||O.isReadonly(e)||O.hasBeenTextEditing(e)||!ju(d)){t(d);return}const p=_f(e,d.x,d.y),v=qe(e),w=on(e,v,!1),E=Ti(e,w),y=Sj(E),S=go(v),A=S?br(p,R.getCenterPoint(E),-S):p;y&&R.isHit(R.getRectangleByPoints([A,A]),y)&&(s={elements:[...v],startPoint:p}),t(d)},e.pointerMove=d=>{if(s){d.preventDefault();const p=!!d.shiftKey;FG(e,s);const v=_f(e,d.x,d.y),w=on(e,s.elements,!1),E=Ti(e,w),y=R.getCenterPoint(E);!go(s.elements)&&s.elements.length>1&&(f=!0),Ga(e,"with-common-rotate",()=>{if(s&&s.startPoint){let S=EF(s.startPoint,v,y);const A=go(s.elements);S=Mg(A+S),p&&(S+=Math.PI/12/2,S-=S%(Math.PI/12));let B=S%(Math.PI/2);if(Math.PI/2-B<=h5(5)){const I=Math.PI/2-B;S+=I}if(B<=h5(5)){const I=-B;S+=I}s.angle=Mg(S-A)||0,xF(e,s.elements,s.angle),O.getBoardContainer(e).classList.add("element-rotating")}});return}n(d)},e.globalPointerUp=d=>{if(r(d),f){f=!1;const p=qe(e);Ve.addSelectionWithTemporaryElements(e,p)}O.getBoardContainer(e).classList.remove("element-rotating"),kG(e),s=null,Vr.set(e,!1)},e.afterChange=()=>{if(i(),a&&(a.remove(),a=null),h()&&!ji(e)){if(f&&s){const d=on(e,s.elements,!1),p=Ti(e,d);a=N9(e,p),a.classList.add(z6),s.angle&&Es(a,R.getCenterPoint(p),s.angle)}else{const d=qe(e),p=on(e,d,!1),v=Ti(e,p);a=N9(e,v),a.classList.add(z6),Es(a,R.getCenterPoint(v),go(d))}O.getActiveHost(e).append(a)}},e.drawSelectionRectangle=()=>{if(f&&s){const d=on(e,s.elements,!1),p=Ti(e,d),v=su(e,R.inflate(p,fr),{stroke:vo,strokeWidth:fr});return v.classList.add(np),s.angle&&Es(v,R.getCenterPoint(p),s.angle),v}return o()},e};class TD extends gc{constructor(){super()}initializeGenerator(){this.activeGenerator=up(this.board,{getStrokeWidth:()=>fr,getStrokeOpacity:()=>1,getRectangle:t=>{const n=Ud(t);return n!=null&&n.length?QW(this.board,this.element,n):R.getRectangleByPoints(t.points)},hasResizeHandle:()=>{const t=Ud(this.element);return t!=null&&t.length?!1:Uv(this.board,this.element)}}),this.tableGenerator=new o3(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new za(this.board),this.getRef().addGenerator(za.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(n=>{if(Ng.isVerticalText(n)){const r=MS(this.board,n);if(r){const o=gi(h0.table).getTextRectangle(this.element,{id:n.id,board:this.board});r.g.classList.add("vertical-cell-text"),Es(r.g,R.getCenterPoint(o),h5(-90))}}})}getDrawShapeTexts(t){return t.filter(n=>IS(n)).map(n=>({id:n.id,text:n.text,textHeight:n.textHeight,board:this.board}))}initializeTextManage(){const t=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new Qw(this.board,this.element,t,{onChange:(n,r,i)=>{const o=O.findPath(this.board,n);r.newText&&$i.setTableText(this.board,o,i.id,r.newText,r.height),r.operations&&Zw(n,r.operations)},getRenderRectangle:(n,r)=>{const i=Qf(this.board,n,r.id);if(Ng.isVerticalText(i)){const o=R.getRectangleByPoints(i.points),s=$t(i),a=i.textHeight||0,f=o.height-rt.rectangleAndText*2-s*2;return{width:a,height:f>0?f:0,x:o.x+rt.rectangleAndText+s,y:o.y+(o.height-f)/2}}else return wD(i)}}),this.textGenerator.initialize()}onContextChanged(t,n){if(t.element!==n.element||t.hasThemeChanged){const r=Ud(n.element);r!=null&&r.length&&(nC(n.element),RS(t.element,r)),this.tableGenerator.processDrawing(t.element,this.getElementG()),this.activeGenerator.processDrawing(t.element,O.getActiveHost(this.board),{selected:this.selected});const i=this.getDrawShapeTexts(n.element.cells),o=this.getDrawShapeTexts(t.element.cells);this.textGenerator.update(t.element,i,o,this.getElementG()),this.rotateVerticalText()}else{const r=t.selected===n.selected,i=Ud(t.element);(!r||i!=null&&i.length||t.selected)&&this.activeGenerator.processDrawing(t.element,O.getActiveHost(this.board),{selected:this.selected}),this.selected||nC(t.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const GC=20;function cV(e){let t;return Zf(e,{key:"draw-table",canResize:()=>{const r=qe(e);return A5(e)&&!zu(r[0])},hitTest:r=>{const o=qe(e)[0];if(o&&he.isElementByTable(o)){let s=e.getRectangle(o),a=M5(e,s,r,o.angle);if(a){const h=r5(e,o);if(h&&A5(e)||!h&&!Em(e,a.handle))return{element:o,handle:a.handle,cursorClass:a.cursorClass,rectangle:s}}const f=cp(e,o);for(let h=0;h<f.length;h++)if(s=R.getRectangleByPoints(f[h].points),a=M5(e,s,r,0),a&&!Em(e,a.handle))return{element:o,handle:a.handle,cursorClass:a.cursorClass,rectangle:s,options:{cell:f[h]}}}return null},onResize:(r,i)=>{var s,a,f,h;t==null||t.remove();const o=O.findPath(e,r.element);if((s=r.options)!=null&&s.cell&&r.rectangle){const d=Qm(r.handle),{originPoint:p,handlePoint:v}=b5(e,d,r.rectangle),w=[i.startPoint,i.endPoint],{xZoom:E,yZoom:y}=g4(w,p,v,!1,!1),S=(a=r.options)==null?void 0:a.cell.points,A=S.map(j=>Fa(j,p,E,y)),B=A[1][0]-S[1][0],I=A[1][1]-S[1][1],_=A[1][0]-A[0][0],L=A[1][1]-A[0][1];if(B!==0&&_>=GC){const{columns:j,points:z}=bS(r.element,(f=r.options)==null?void 0:f.cell.columnId,_,B);Ve.setNode(e,{columns:j,points:z},o)}else if(I!==0&&L>=GC){const{rows:j,points:z}=OS(r.element,(h=r.options)==null?void 0:h.cell.rowId,L,I);Ve.setNode(e,{rows:j,points:z},o)}}else{const d=Em(e,r.handle),p=i.isShift,v=Qm(r.handle),{originPoint:w,handlePoint:E}=b5(e,v,r.rectangle),y=pD(e,r,i,{originPoint:w,handlePoint:E},p,d),S=i3(e,[r.element],y);t=S.snapG,O.getElementTopHost(e).append(t);const A=S.activePoints,B=r.element.points,I=R.getRectangleByPoints(B),_=R.getRectangleByPoints(A),L=_.width-I.width,j=_.height-I.height;let z=[...r.element.columns],J=[...r.element.rows];L!==0&&(z=z.map(ae=>ae.width?{...ae,width:ae.width+L*(ae.width/I.width)}:ae)),j!==0&&(J=J.map(ae=>ae.height?{...ae,height:ae.height+j*(ae.height/I.height)}:ae)),Ve.setNode(e,{points:Gf(A),columns:z,rows:J},o)}},afterResize:r=>{t==null||t.remove(),t=null}}),e}const fV=e=>{const t=e,{drawElement:n,getRectangle:r,isRectangleHit:i,isHit:o,isMovable:s,dblClick:a,keyDown:f,pointerUp:h}=t;return t.drawElement=d=>he.isElementByTable(d.element)?TD:n(d),t.isHit=(d,p,v)=>{if(he.isElementByTable(d)){const w=R.getRectangleByPoints(d.points),E=_d.getNearestPoint(w,p);return Et(E[0],E[1],p[0],p[1])<=ow||R.isPointInRectangle(w,p)}return o(d,p,v)},t.getRectangle=d=>he.isElementByTable(d)?R.getRectangleByPoints(d.points):r(d),t.isMovable=d=>he.isElementByTable(d)?!0:s(d),t.isRectangleHit=(d,p)=>{if(he.isElementByTable(d)){const v=R.getRectangleByPoints([p.anchor,p.focus]),w=R.getRectangleByPoints(d.points);return Gm(R.getCornerPoints(w),v)}return i(d,p)},t.keyDown=d=>{const p=qe(e),v=p.length===1,w=p[0];if(!O.isReadonly(e)&&!O.hasBeenTextEditing(t)&&!jw(d)&&!Vw(d)&&!zw(d)&&v&&(d.preventDefault(),he.isElementByTable(w))){const E=Ud(w);let y=w.cells.find(S=>S.text&&S.textHeight);if(E!=null&&E.length&&(y=E.find(S=>S.text&&S.textHeight)),y){sC(e,y);return}}f(d)},t.dblClick=d=>{if(d.preventDefault(),!O.isReadonly(e)){const p=bt(e,Ot(e,d.x,d.y)),v=lc(e,p);if(v&&he.isElementByTable(v)){const w=oC(t,v,p);if(w&&w.text&&w.textHeight){sC(e,w);return}}}a(d)},t.pointerUp=d=>{const p=O.isPointer(t,ln.selection)||O.isPointer(t,ln.hand);if(!ju(d)||s0(t)||!p){h(d);return}if(A5(t)){const w=bt(t,Ot(t,d.x,d.y)),E=YW(t)[0],y=oC(t,E,w);y&&y.text&&y.textHeight&&RS(E,[y])}h(d)},t.buildTable=d=>d,cV(t)},gy=e=>lD(e)&&Xv(e),py=e=>lD(e)&&D0(e),hV=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null;return e.pointerMove=s=>{i==null||i.remove(),i=Gt();const a=new o3(e),f=gy(e),h=bt(e,Ot(e,s.x,s.y)),d=O.getPointer(e);if(f){const p=aD(d,h);o=av(d,p),a.processDrawing(o,i),O.getElementTopHost(e).append(i)}t(s)},e.pointerUp=s=>{gy(e)&&o||r(s)},e.globalPointerUp=s=>{gy(e)&&o&&rc(e,o),o=null,i==null||i.remove(),i=null,n(s)},e},dV=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,a=null,f=null,h=!1,d;return e.keyDown=p=>{h=dn.isKeyHotkey("shift",p),i(p)},e.keyUp=p=>{h=!1,o(p)},e.pointerDown=p=>{!O.isReadonly(e)&&py(e)&&(s=bt(e,Ot(e,p.x,p.y))),t(p)},e.pointerMove=p=>{a==null||a.remove(),a=Gt();const v=new o3(e),w=bt(e,Ot(e,p.x,p.y)),E=O.getPointer(e);if(d==null||d.remove(),s&&py(e)){let y=Gf([s,w],h);const S=R.getRectangleByPoints(y),[A,B]=Vn(s,w),I=i3(e,[],{resizePoints:y,activeRectangle:S,directionFactors:[f0(A),f0(B)],isAspectRatio:h,isFromCorner:!0,isCreate:!0});d=I.snapG,O.getElementTopHost(e).append(d),y=Gf(I.activePoints,h),f=av(E,y),v.processDrawing(f,a),O.getElementTopHost(e).append(a)}n(p)},e.pointerUp=p=>{if(py(e)&&s){const v=bt(e,Ot(e,p.x,p.y)),{width:w,height:E}=R.getRectangleByPoints([s,v]);if(Math.hypot(w,E)<8){const y=O.getPointer(e),S=aD(y,v);f=av(y,S)}f&&rc(e,f),d==null||d.remove(),a==null||a.remove(),a=null,s=null,f=null;return}r(p)},e},gV=e=>{const{drawElement:t,buildTable:n,pointerUp:r}=e;return e.drawElement=i=>he.isSwimlane(i.element)?TD:t(i),e.buildTable=i=>he.isSwimlane(i)?dj(i):n(i),dV(hV(e))},pV=e=>{const{pointerDown:t,pointerMove:n,dblClick:r,globalKeyDown:i}=e;let o=null,s=null,a=[];const f=()=>{s&&Ve.insertNode(e,s,[e.children.length]),O.getBoardContainer(e).classList.remove("vector-line-closed"),o==null||o.remove(),o=null,s=null,a=[]};return e.pointerDown=h=>{const d=kW(),p=O.isInPointer(e,d);if(!O.isReadonly(e)&&p&&D0(e)){let v=bt(e,Ot(e,h.x,h.y));if(a.length>1&&Et(...v,...a[0])<=rv){a.push(a[0]),f();return}a.push(v);return}t(h)},e.pointerMove=h=>{o==null||o.remove(),o=Gt();let d=bt(e,Ot(e,h.x,h.y));O.getPointer(e)===lv.vectorLine&&a.length>0&&(Et(...d,...a[0])<=rv?(d=a[0],O.getBoardContainer(e).classList.add("vector-line-closed")):O.getBoardContainer(e).classList.remove("vector-line-closed"),s=D$(e,zg.straight,a,d,o)),n(h)},e.dblClick=h=>{if(!O.isReadonly(e)&&s){f(),Bn.updatePointerType(e,ln.selection);return}r(h)},e.globalKeyDown=h=>{if(!O.isReadonly(e)){const d=dn.isKeyHotkey("esc",h),p=dn.isKeyHotkey("v",h);(d||p)&&s&&(f(),p&&Bn.updatePointerType(e,ln.selection))}i(h)},e},mV=e=>(Zf(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:n=>{const r=iD(e);if(r.length>0){let i=null;return r.forEach(o=>{const s=ED(e,o,n);s&&(i={element:o,handle:s.handle,handleIndex:s.handleIndex})}),i}return null},onResize:(n,r)=>{let i=[...n.element.points],o=n.handleIndex;if(n.handle===Xr.source||n.handle===Xr.target)if(i[o]=r.endPoint,hp(n.element.points))i[i.length-1]=r.endPoint;else{const s=n.handle===Xr.source?i[i.length-1]:i[0];Et(...r.endPoint,...s)<=rv&&(i[o]=s)}else n.handle===Xr.addHandle?i.splice(o+1,0,r.endPoint):i[o]=r.endPoint;Ve.setNode(e,{points:i},n.path)}}),e),AD=e=>{const{drawElement:t,getRectangle:n,isRectangleHit:r,isHit:i,isInsidePoint:o,isMovable:s,isAlign:a,getRelatedFragment:f,getOneHitElement:h}=e;return e.drawElement=d=>he.isGeometry(d.element)?(he.isUML(d.element),LC):he.isArrowLine(d.element)?Kz:he.isVectorLine(d.element)?Yz:he.isImage(d.element)?iV:t(d),e.getRectangle=d=>{if(he.isGeometry(d))return R.getRectangleByPoints(d.points);if(he.isArrowLine(d)){const p=Wi(e,d),v=d.texts.map((E,y)=>t4(e,d,y)),w=R.getRectangleByPoints(p);return R.getBoundingRectangle([w,...v])}if(he.isVectorLine(d)){const p=Yl(e,d),v=R.getRectangleByPoints(p);return R.getBoundingRectangle([v])}return he.isImage(d)?R.getRectangleByPoints(d.points):n(d)},e.isRectangleHit=(d,p)=>{const v=B$(e,d,p);return v!==null?v:r(d,p)},e.isHit=(d,p,v)=>{const w=I$(e,d,p,v);return w!==null?w:i(d,p,v)},e.getOneHitElement=d=>d.every(v=>he.isDrawElement(v))?KS(e,d):h(d),e.isInsidePoint=(d,p)=>{const v=k$(e,d,p);return v!==null?v:o(d,p)},e.isMovable=d=>{if(he.isGeometry(d)||he.isImage(d)||he.isVectorLine(d))return!0;if(he.isArrowLine(d)){const p=qe(e),v=w=>!!p.find(E=>E.id===w);return!!(!d.source.boundId&&!d.target.boundId||d.source.boundId&&v(d.source.boundId)&&p.includes(d)||d.target.boundId&&v(d.target.boundId)&&p.includes(d))}return s(d)},e.isAlign=d=>he.isGeometry(d)||he.isImage(d)?!0:a(d),e.getRelatedFragment=(d,p)=>{const v=p!=null&&p.length?p:qe(e),E=e.children.filter(y=>he.isArrowLine(y)).filter(y=>{const S=v.find(I=>I.id===y.source.boundId),A=v.find(I=>I.id===y.target.boundId),B=v.includes(y);return S&&A&&!B});return f([...d,...E],p)},gV(fV(Tj(pV(oV(nV(mV(tV(aV(rV(lV(eV(uV(Zz(Qz(Jz(qz(e)))))))))))))))))},pt={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var Ye;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(Ye||(Ye={}));var mo;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(mo||(mo={}));function I5(e){return e.origin.layout?e.origin.layout:pt.isAbstract(e.origin)?m4(I5(e.parent)):e.parent?I5(e.parent):null}const ou=e=>e===Ye.rightBottomIndented||e===Ye.rightTopIndented||e===Ye.leftBottomIndented||e===Ye.leftTopIndented,vV=e=>e===Ye.right||e===Ye.left||e===Ye.downward||e===Ye.upward,wo=e=>e===Ye.standard,ai=e=>e===Ye.right||e===Ye.left||e===Ye.standard||ou(e),Vg=e=>e===Ye.right||e===Ye.left||e===Ye.standard,F5=e=>e===Ye.upward||e===Ye.downward,ka=e=>e===Ye.leftTopIndented||e===Ye.rightTopIndented||e===Ye.upward,yV=e=>e===Ye.leftBottomIndented||e===Ye.rightBottomIndented||e===Ye.downward,Ug=e=>e===Ye.left||e===Ye.leftTopIndented||e===Ye.leftBottomIndented,cv=e=>e===Ye.right||e===Ye.rightTopIndented||e===Ye.rightBottomIndented,my=e=>ou(e)?mo.indented:(wo(e)||vV(e),mo.logic),m4=e=>ou(e)?cv(e)?Ye.right:Ye.left:e;class Xg{constructor(t,n,r,i){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const o=n.getHorizontalGap(t,i),s=n.getVerticalGap(t,i);this.origin=t,this.width=n.getWidth(t),this.height=n.getHeight(t),this.x=this.y=0,i&&(this.parent=i);const a=I5(this);this.layout=a&&a!==Ye.standard?a:r.rootLayoutType;const f=n.getVerticalConnectingPosition(t,i);f&&(this.verticalConnectingPosition=f),this.addGap(o,s)}isRoot(){return this.depth===0}addGap(t,n){const r=this;r.hGap+=t,r.vGap+=n,r.width+=2*t,r.height+=2*n}eachNode(t){BD(this,t)}getBoundingBox(){const t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(n=>{t.left=Math.min(t.left,n.x),t.top=Math.min(t.top,n.y),t.right=Math.max(t.right,n.x+n.width),t.bottom=Math.max(t.bottom,n.y+n.height)}),t.width=t.right-t.left,t.height=t.bottom-t.top,t}translate(t=0,n=0){this.eachNode(r=>{r.x+=t,r.y+=n})}right2left(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.x=r.x-(r.x-n.left)*2-r.width,r.left=!0}),t.translate(n.width,0)}down2up(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.y=r.y-(r.y-n.top)*2-r.height,r.up=!0}),t.translate(0,n.height)}}function BD(e,t){var n;(n=e.children)==null||n.forEach(r=>{BD(r,t)}),t(e)}class wV{constructor(t,n,r,i,o,s,a,f,h,d){this.left=t,this.right=n,this.top=r,this.bottom=i,this.width=o,this.height=s,this.rootX=a,this.rootY=f,this.rootWidth=h,this.rootHeight=d}}function CV(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var k5;(function(e){e.middle="middle",e.bottom="bottom"})(k5||(k5={}));class Wf{constructor(t,n,r,i,o){this.width=t,this.height=n,this.y=r,this.children=i,this.childrenCount=i.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=o}}const vc=e=>{var t;return e.children?(t=e.children)==null?void 0:t.filter(n=>n instanceof Xg?!pt.isAbstract(n.origin):n instanceof Wf?!pt.isAbstract(n.origin.origin):!pt.isAbstract(n)):[]},RD=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof Xg)return pt.isAbstract(r.origin)&&r.origin.end===n;if(r instanceof Wf&&e instanceof Wf){if(pt.isAbstract(r.origin.origin)){const{end:i}=ql(r.origin.origin,e.origin);return i===n}return!1}return pt.isAbstract(r)&&r.end===n})},xV=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof Xg)return pt.isAbstract(r.origin)&&r.origin.start===n;if(r instanceof Wf&&e instanceof Wf){if(pt.isAbstract(r.origin.origin)){const{start:i}=ql(r.origin.origin,e.origin);return i===n}return!1}return pt.isAbstract(r)&&r.start===n})},ql=(e,t)=>{let n=e.start,r=e.end;if(wo(t.layout)){const i=t.origin.rightNodeCount;n>=i&&(r-=i,n-=i)}return{start:n,end:r}};function fv(e,t,n){e.children[t].modifier+=n}function EV(e){return e.childrenCount===0?null:e.children[0]}function MD(e){let t=vc(e);return e.childrenCount===0?null:t[t.length-1]}function PV(e,t){if(pt.isAbstract(e.children[t].origin.origin))return;let n=e.children[t-1],r=e.children[t],i=n.modifier+n.preliminary+n.width,o=r.modifier+r.preliminary,s=0,a=e,f=e;for(;n||r;){if(n){let d=s+n.modifier+n.preliminary+n.width;d>i&&(i=d),i=OD(a,n,i,s),a=n,s=n.modifier+s,n=MD(n)}if(r){let d=r.modifier+r.preliminary;d<o&&(o=d),o=TV(f,r,o),f=r,r=EV(r)}}const h=i-o;h>0&&fv(e,t,h)}function SV(e){const t=e.children[0];let n=t.preliminary+t.modifier;const r=vc(e),i=r[r.length-1];let o=i.modifier+i.preliminary+i.width;t.origin.blackNode&&t.origin.blackNode.rootX>t.origin.blackNode.left&&(n=n+(t.origin.blackNode.rootX-t.origin.blackNode.left)),i.origin.blackNode&&i.origin.blackNode.rootX+i.origin.blackNode.rootWidth<i.origin.blackNode.right&&(o=o-(i.origin.blackNode.right-(i.origin.blackNode.rootX+i.origin.blackNode.rootWidth))),t.origin.verticalConnectingPosition&&i.origin.verticalConnectingPosition&&(n=n+t.width-t.origin.vGap,o=o-i.origin.vGap);let s=e.width/2;e.origin.verticalConnectingPosition&&(s=e.width-e.origin.vGap);const a=(n+o)/2-s;a>0?e.preliminary=a:e.children.forEach((f,h)=>{fv(e,h,Math.abs(a))})}function L5(e){if(e.childrenCount!==0){L5(e.children[0]);for(let t=1;t<e.childrenCount;t++){const n=e.children.find(r=>{let i=null;if(pt.isAbstract(r.origin.origin)){let{end:o}=ql(r.origin.origin,e.origin);i=o}return i===t-1});n&&DV(e,n),L5(e.children[t]),PV(e,t)}SV(e)}}function bD(e,t){t+=e.modifier,e.x=e.preliminary+t;for(let n=0;n<e.childrenCount;n++)bD(e.children[n],t)}function DV(e,t,n){const{start:r,end:i}=ql(t.origin.origin,e.origin),o=e.children.indexOf(t),s=e.children[r];let a=e.children[i];const f=s.modifier;let h=a.modifier+a.preliminary+a.width,d=a.modifier,p=e;for(e.children[o].modifier=s.modifier;a.childrenCount;){p=a;const E=MD(a);a=E||a;let y=d+a.modifier+a.preliminary+a.width;h=OD(p,a,h,d),d+=a.modifier,y>h&&(h=y)}const v=t.origin.blackNode?t.origin.blackNode.rootX*2+t.origin.blackNode.rootWidth:t.width,w=h-f;if(w>v){const E=(w-v)/2;fv(e,o,E)}else{const E=(v-w)/2;for(let y=r;y<i+1;y++)fv(e,y,E)}}function OD(e,t,n,r){const i=RD(e,t);return i?Math.max(i.modifier+i.width+r,n):n}function TV(e,t,n){const r=xV(e,t);return r?Math.min(r.modifier+r.preliminary,n):n}function AV(e){L5(e),bD(e,0)}function _5(e,t=0){e.x=t,e.children.forEach(n=>{if(pt.isAbstract(n.origin)){let r=0;for(let i=n.origin.start;i<=n.origin.end;i++){const o=e.children[i].getBoundingBox();r=Math.max(o.width,r)}_5(n,e.x+e.width/2+r)}else _5(n,e.x+e.width/2)})}function BV(e,t){let n=e.y+e.height,r=null;i(e);function i(o){o.children.forEach((s,a)=>{const f=o.children.find(d=>pt.isAbstract(d.origin)&&d.origin.end===a-1);if(f){const d=r!=null&&r.origin.isCollapsed?t.getExtendHeight(s.origin):0;n=RV(o,f)+d}if(pt.isAbstract(s.origin))return;let h=n+s.vGap;r&&!Vg(r.layout)&&r.origin.children.length>0&&(r.origin.isCollapsed?h=h+t.getExtendHeight(s.origin):h=h+t.getIndentedCrossLevelGap()),s.y=h,r=s,n=s.y+s.height,i(s)})}}function RV(e,t){const n=t.origin,r=e.children.indexOf(t),i=e.children[n.start],o=e.children[n.end];e.children[r].y=i.y;const s=i.y;let a=o.y+o.height,f=o,h=e;for(;f!=null&&f.children.length;){h=f;const w=vc(h);f=w[w.length-1];const E=RD(h,f);a=E?Math.max(E.y+E.height,f.y+f.height):f.y+f.height}const d=a-s,p=t.blackNode?t.blackNode.height:t.height,v=t.blackNode?t.blackNode.rootY*2+t.blackNode.rootHeight:t.height;if(v>d){const w=(v-d)/2;for(let E=n.start;E<=n.end;E++)e.children[E].eachNode(y=>{y.y+=w})}else{const w=(d-v)/2;e.children[r].y+=w}return Math.max(t.y+p,i.y+d)}function ID(e,t,n){n?t.y=e.x:t.x=e.x,e.children.forEach((r,i)=>{ID(r,t.children[i],n)})}function FD(e,t,n=0){var r,i;if(t){if(pt.isAbstract(e.origin)){const{start:o,end:s}=ql(e.origin,e.parent);for(let a=o;a<=s;a++){const f=(r=e.parent)==null?void 0:r.children[a].getBoundingBox().right;n=Math.max(f,n)}}e.x=n,n+=e.width}else{if(pt.isAbstract(e.origin))for(let o=e.origin.start;o<=e.origin.end;o++){const s=(i=e.parent)==null?void 0:i.children[o].getBoundingBox().bottom;n=Math.max(s,n)}e.y=n,n+=e.height}e.children.forEach(o=>{FD(o,t,n)})}const kD=(e,t)=>{const n=[];return e.children.forEach(r=>{n.push(kD(r,t))}),t?(e.blackNode&&(e.blackNode=CV(e.blackNode)),new Wf(e.height,e.width,e.x,n,e)):new Wf(e.width,e.height,e.y,n,e)};class MV{constructor(){}layout(t,n,r,i,o=!1,s){const a=[],f=[],h=this.buildLayoutNode(t,r,i,a,s);switch(a.filter(p=>p.origin.children.length>0).forEach(p=>{const v=p.layout,w=i.toTop||ai(i.rootLayoutType)&&ka(v),E=i.toLeft||!ai(i.rootLayoutType)&&Ug(v),y=ai(v),S=this.layout(p.origin,my(v),r,{toTop:w,toLeft:E,rootLayoutType:i.rootLayoutType},y,p.parent);!i.toTop&&w&&n!==mo.indented&&S.down2up(),!i.toLeft&&E&&S.right2left();const A=S.getBoundingBox();p.width=A.width,p.height=A.height,p.blackNode=new wV(A.left,A.right,A.top,A.bottom,A.width,A.height,S.x,S.y,S.width,S.height),f.push(S)}),n){case mo.indented:_5(h),BV(h,r);break;case mo.fishBone:break;case mo.logic:default:FD(h,o);const p=kD(h,o);AV(p),ID(p,h,o);break}const d=[];return a.filter(p=>p.origin.children.length>0).forEach((p,v)=>{if(p.parent){const w=f[v];w.parent=p.parent;let E,y;ai(p.parent.layout)?(E=w.x,y=0):(E=0,y=w.y),w.translate(p.x-E,p.y-y);const A=p.parent.children.indexOf(p),B=p.parent.children[A];p.parent.children[A]=Object.assign(B,w);const I=d.find(_=>_.parent===p.parent&&!pt.isAbstract(p.origin));I?(I.offsetX<E&&(I.offsetX=E),I.offsetX<y&&(I.offsetX=y)):pt.isAbstract(p.origin)||d.push({parent:p.parent,offsetX:E,offsetY:y})}}),d.forEach(p=>{p.parent.children.forEach(v=>v.translate(p.offsetX,p.offsetY))}),h}buildLayoutNode(t,n,r,i,o){const s=new Xg(t,n,r,o);if(!s.origin.isCollapsed){const a=[s];let f;for(;f=a.pop();)if(!f.origin.isCollapsed){const h=f.origin.children,d=h?h.length:0;if(f.children=[],h&&d)for(let p=0;p<d;p++){const v=new Xg(h[p],n,r,f);f.children.push(v),v.depth=f.depth+1,(f.layout!==v.layout&&(my(f.layout)!==my(v.layout)||ai(f.layout)!==ai(v.layout))||pt.isAbstract(v.origin))&&!v.origin.isCollapsed?i.push(v):a.push(v)}}}return s}}class bV{static layout(t,n,r){const i=new MV;if(wo(r)){const p=t.children.length,v=[],w=[],E={...t};for(let B=0;B<p;B++){const I=t.children[B];if(pt.isAbstract(I)&&I.end<t.rightNodeCount){v.push(I);continue}if(pt.isAbstract(I)&&I.start>=t.rightNodeCount){w.push(I);continue}B<t.rightNodeCount?v.push(I):w.push(I)}E.children=v;const y=i.layout(E,mo.logic,n,{toLeft:!1,toTop:!1,rootLayoutType:r},!0);E.children=w;const S=i.layout(E,mo.logic,n,{toLeft:!0,toTop:!1,rootLayoutType:r},!0);S.right2left(),y.translate(S.x-y.x,S.y-y.y);const A=y.children.filter(B=>pt.isAbstract(B.origin));return y.children=y.children.filter(B=>!pt.isAbstract(B.origin)),S.children.forEach(B=>{y.children.push(B),B.parent=y}),y.children=y.children.concat(A),y.x=S.x,y.origin=t,y}const o=ou(r),s=o?mo.indented:mo.logic,a=o?!0:ai(r),f=ka(r),h=Ug(r),d=i.layout(t,s,n,{toTop:f,toLeft:h,rootLayoutType:r},a);return f&&d.down2up(),h&&d.right2left(),d}}const hv=new WeakMap;var Lt;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(Lt||(Lt={}));const dv={[Ye.right]:[Lt.right],[Ye.left]:[Lt.left],[Ye.upward]:[Lt.top],[Ye.downward]:[Lt.bottom],[Ye.rightBottomIndented]:[Lt.right,Lt.bottom],[Ye.rightTopIndented]:[Lt.right,Lt.top],[Ye.leftBottomIndented]:[Lt.left,Lt.bottom],[Ye.leftTopIndented]:[Lt.left,Lt.top]};var Df;(function(e){e.mind="mind"})(Df||(Df={}));const OV=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],IV=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],FV=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],kV=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],LV=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],_V=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],LD={...JE,branchColors:OV,rootFill:"#f5f5f5",rootTextColor:qr},NV={...eP,branchColors:IV,rootFill:qr,rootTextColor:"#FFFFFF"},HV={...tP,branchColors:FV,rootFill:"#FFFFFF",rootTextColor:qr},GV={...nP,branchColors:kV,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},WV={...rP,branchColors:LV,rootFill:"#FFFFFF",rootTextColor:qr},$V={...iP,branchColors:_V,rootFill:"#FFFFFF",rootTextColor:qr},_D=[LD,NV,HV,GV,WV,$V],jV={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},s3="plait-mind-plugin-key",Mr=4,Qd="#6698FF",WC="#AAAAAA",N5=3,H5=8,Cg=16,$C="#6698FF",jC="white",zV=240;var gv;(function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"})(gv||(gv={}));function G5(e,t){const n=e.getPluginOptions(s3),r=t.data.emojis.length;return{width:ND(t)*r+r*2*n.emojiPadding+(r-1)*n.spaceBetweenEmojis,height:t.height}}function ND(e){return qt.isMind(e)?20:16}const $f=(e,t,n)=>t[n],d0={branch:{color:WC,width:2},shape:{strokeColor:WC,strokeWidth:2}},u3={shape:{rectangleRadius:4,strokeWidth:3,fill:"none"}},VV=e=>{const t=e.rightNodeCount,n=e.children;let r=[],i=[];for(let o=0;o<n.length;o++){const s=n[o];if(pt.isAbstract(s)&&s.end<t){r.push(s);continue}if(pt.isAbstract(s)&&s.start>=t){i.push(s);continue}o<t?r.push(s):i.push(s)}return{leftChildren:i,rightChildren:r}},mp=e=>{const t=Ie.findParent(e);if(!t)return;const n=t.children.indexOf(e);return t.children.find(r=>pt.isAbstract(r)&&n>=r.start&&n<=r.end)},HD=e=>{const t=Ie.findParent(e);if(!t)return[];const n=t.children.indexOf(e);return t.children.filter(r=>pt.isAbstract(r)&&r.start>n)},GD=(e,t)=>{const n=[];return t.filter(r=>!pt.isAbstract(r)&&!qt.isMind(r)).forEach(r=>{const i=mp(r);if(i&&t.indexOf(i)===-1&&n.indexOf(i)===-1){const{start:o,end:s}=i;Ie.getParent(r).children.slice(o,s+1).every(h=>t.indexOf(h)>-1)&&n.push(i)}}),n},WD=(e,t)=>{const n=[];return t.filter(r=>!pt.isAbstract(r)&&!qt.isMind(r)).forEach(r=>{const i=mp(r);if(i&&t.indexOf(i)>0){const o=n.findIndex(s=>s.abstract===i);o===-1?n.push({abstract:i,references:[r]}):n[o].references.push(r)}}),n};function $D(e,t){const n=t.indexOf(e.references[0]),r=t.indexOf(e.references[e.references.length-1]);return{start:n,end:r}}const jD=(e,t,n=1,r=!0,i=new Map)=>{const o=Vt.parent(e,t),s=t[t.length-1]!==0;let a;if(!s)a=o.children.filter(p=>pt.isAbstract(p));else{const p=Vt.get(e,mt.previous(t));a=HD(p)}if(a.length&&a.forEach(p=>{let v=i.get(p);v||(v={start:0,end:0},i.set(p,v)),v.start=v.start+n,v.end=v.end+n}),!s)return i;const f=Vt.get(e,mt.previous(t)),h=mp(f),d=!r&&h&&h.end===t[t.length-1]-1;if(h&&!d){let p=i.get(h);p||(p={start:0,end:0},i.set(h,p)),p.end=p.end+n}return i},zD=(e,t,n=new Map)=>(t.forEach(r=>{if(!qt.isMind(r)){const i=HD(r).filter(s=>!t.includes(s));i.length&&i.forEach(s=>{let a=n.get(s);a||(a={start:0,end:0},n.set(s,a)),a.start=a.start-1,a.end=a.end-1});const o=mp(r);if(o&&!t.includes(o)){let s=n.get(o);s||(s={start:0,end:0},n.set(o,s)),s.end=s.end-1}}}),n),VD=(e,t)=>!!Ie.getAncestors(e,t).find(r=>pt.isAbstract(r)),a3=(e,t)=>pt.isAbstract(t)||VD(e,t)?UD(e,t):$f(e,t,"branchColor")||$f(e,t,"strokeColor")||XD(e,t),v4=(e,t)=>$f(e,t,"branchShape")||jf.bight,l3=(e,t)=>$f(e,t,"branchWidth")||$f(e,t,"strokeWidth")||N5,UV=(e,t)=>Vo(t.branchWidth)?d0.branch.width:t.branchWidth,UD=(e,t)=>t.branchColor||t.strokeColor?t.branchColor||t.strokeColor:d0.branch.color,XV=(e,t)=>{const n=t.children.length;return KD(e,n)},XD=(e,t)=>{const n=O.findPath(e,t);return KD(e,n[1])},KD=(e,t)=>{const n=y4(e),r=n.branchColors.length,i=t%r;return n.branchColors[i]},y4=e=>{const n=O.getThemeColors(e).find(r=>r.mode===e.theme.themeColorMode);return n&&jV.isMindThemeColor(n)?n:LD},w4=(e,t)=>{if(qt.isMind(t)){const n=y4(e).rootFill;return t.strokeColor||n}return pt.isAbstract(t)||VD(e,t)?t.strokeColor||d0.shape.strokeColor:$f(e,t,"strokeColor")||XD(e,t)},c3=(e,t)=>t.strokeStyle||Ss.solid,vp=(e,t)=>t.strokeWidth||(pt.isAbstract(t)?d0.shape.strokeWidth:u3.shape.strokeWidth),YD=(e,t)=>{if(t.fill)return t.fill;const n=y4(e).rootFill;return t.isRoot?n:u3.shape.fill},g0=(e,t)=>$f(e,t,"shape")||Vu.roundRectangle;function C4(e){const t=Yf(e);t==null||t.edit(()=>{},n=>{const r=n;return r.key==="Enter"&&!r.shiftKey})}const vy=(e,t)=>(t!=null&&t.length?t:qe(e)).filter(r=>Ie.isMindElement(e,r)),zC=e=>{const t=[];return e.forEach(n=>{dv[n].forEach(i=>{!t.includes(i)&&!t.includes(E4(i))&&t.push(i)})}),t},KV=(e,t)=>{const n=dv[e],r=dv[t];if(!r)throw new Error(`unexpected layout: ${t} on correct layout`);return r.find(i=>n.includes(E4(i)))},YV=(e,t)=>{const n=t===Lt.left||t===Lt.right;let r=Ye.standard;switch(e){case Ye.left:r=Ye.right;break;case Ye.right:r=Ye.left;break;case Ye.downward:r=Ye.upward;break;case Ye.upward:r=Ye.downward;break;case Ye.rightBottomIndented:r=n?Ye.leftBottomIndented:Ye.rightTopIndented;break;case Ye.leftBottomIndented:r=n?Ye.rightBottomIndented:Ye.leftTopIndented;break;case Ye.rightTopIndented:r=n?Ye.leftTopIndented:Ye.rightBottomIndented;break;case Ye.leftTopIndented:r=n?Ye.rightTopIndented:Ye.leftBottomIndented;break}return r},x4=()=>Ye.standard,VC=e=>{const t=[],n=e.map(E4);for(const r in Ye){const i=Ye[r],o=dv[i];if(o){const s=o.some(f=>e.includes(f)),a=o.some(f=>n.includes(f));s&&!a&&t.push(i)}}return t},E4=e=>{let t=Lt.right;switch(e){case Lt.top:t=Lt.bottom;break;case Lt.bottom:t=Lt.top;break;case Lt.right:t=Lt.left;break;case Lt.left:t=Lt.right;break}return t},ic=e=>e.layout||x4(),qV=e=>{function t(r,i){return r.isRoot?Mr*12:(i&&i.isRoot(),Mr*3)}function n(r,i){return r.isRoot?Mr*10:Mr*6}return{getHeight(r){return An.getNodeHeight(e,r)},getWidth(r){return An.getNodeWidth(e,r)},getHorizontalGap(r,i){const o=i&&i.layout||ic(r),s=ai(o);return ou(o)?Mr*4:s?n(r):t(r,i)},getVerticalGap(r,i){const o=i&&i.layout||ic(r);return ou(o)?Mr:ai(o)?t(r,i):n(r)},getVerticalConnectingPosition(r,i){if(r.shape===Vu.underline&&i&&Vg(i.layout))return k5.bottom},getExtendHeight(r){return Mr*6},getIndentedCrossLevelGap(){return Mr*2}}},P4=14,qD=18,ZV=34,QV={defaultTextMaxWidth:34*14},JV="#6698FF80",_u=3.5,om=10,sm=8,eU="中心主题",tU="概要",nU=e=>jv(e,gv.mindCentralText,eU),rU=e=>jv(e,gv.abstractNodeText,tU),f3=(e,t,n,r)=>{let i=yg,o=P4;e?(i=yg,o=qD):t&&(i=yg);const s=o*ZV;return Yv(n,{fontSize:o,fontFamily:i},r||s)},UC=(e,t)=>{const n=nU(e),r=f3(!0,!1,Za(n)),i=h3(n,r.width,r.height,{layout:Ye.right});i.isRoot=!0,i.type="mindmap";const o=An.getNodeWidth(e,i),s=An.getNodeHeight(e,i);return i.points=[[t[0]-o/2,t[1]-s/2]],i},h3=(e,t,n,r)=>{const i={id:yn(),data:{topic:Za(e)},children:[],width:t,height:n};let o;for(o in r)Vo(r[o])||(i[o]=r[o]);return i},iU=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],Sm=e=>e.children.reduce((n,r)=>n+Sm(r),0)+e.children.length,ZD=(e,t)=>{let n=Ie.findParent(t);for(;n;){if(n===e)return!0;n=Ie.findParent(n)}return!1},xg=e=>{let t=[];return e.forEach(n=>{e.some(i=>ZD(i,n))||t.push(n)}),t},XC=(e,t)=>e.y>t.y,QD=e=>{const t={...e};t.id=yn(),t.children=[];for(const n of e.children)t.children.push(QD(n));return t},S4=(e,t,n)=>{const r={};t.isRoot||(iU.forEach(o=>{r[o]=t[o]}),delete r.layout);const i=h3("",P4,pS,r);Ve.insertNode(e,i,n),y0(e),Xf(e,i),setTimeout(()=>{C4(i)})},oU=e=>{const t=[],n=[];for(let r=0;r<e.length;r++){const i=Ie.getParent(e[r]),o=n.indexOf(i);o===-1?(n.push(i),t.push([e[r]])):t[o].push(e[r])}return{parentElements:n,abstractIncludedGroups:t}},sU=(e,t)=>{if(qt.isMind(t))return qD;if(Ie.isMindElement(e,t))return P4;throw new Error("can not find default font-size")},Kg={horizontal:{nodeAndText:Mr*2.5,emojiAndText:Mr*1.5},vertical:{nodeAndText:Mr,nodeAndImage:Mr,imageAndText:Mr*1.5}},D4={horizontal:{nodeAndText:Mr*4,emojiAndText:Mr*2},vertical:{nodeAndText:Mr*2}},yy=(e,t)=>{const r=qt.isMind(t)?D4.horizontal.nodeAndText:Kg.horizontal.nodeAndText,i=vp(e,t);return r+i},wy=(e,t)=>{const n=qt.isMind(t),r=vp(e,t);return(n?D4.vertical.nodeAndText:Kg.vertical.nodeAndText)+r},KC=e=>qt.isMind(e)?D4.horizontal.emojiAndText:Kg.horizontal.emojiAndText,An={getNodeWidth(e,t){const n=yy(e,t);return Ie.hasEmojis(t)?An.getEmojiLeftSpace(e,t)+G5(e,t).width+KC(t)+An.getNodeDynamicWidth(e,t)+n:n+An.getNodeDynamicWidth(e,t)+n},getNodeHeight(e,t){const n=wy(e,t);return Ie.hasImage(t)?An.getTextTopSpace(e,t)+t.height+n:n+t.height+n},getNodeDynamicWidth(e,t){var i;const n=t.manualWidth||t.width,r=Ie.hasImage(t)?(i=t.data.image)==null?void 0:i.width:0;return Math.max(n,r)},getNodeNewDynamicWidth(e,t,n){const r=t.manualWidth||t.width;return Math.max(r,n)},getNodeResizableMinWidth(e,t){const n=An.getNodeTopicMinWidth(e,t);return Ie.hasImage(t)&&t.data.image.width>n?t.data.image.width:n},getNodeTopicMinWidth(e,t){const n=sU(e,t),r=Uw(t);return Wu.getMarks(r)[ui.fontSize]||n},getTextLeftSpace(e,t){const n=yy(e,t);return Ie.hasEmojis(t)?An.getEmojiLeftSpace(e,t)+G5(e,t).width+KC(t):n},getTextTopSpace(e,t){const n=wy(e,t);return Ie.hasImage(t)?An.getImageTopSpace(e,t)+t.data.image.height+Kg.vertical.imageAndText:n},getImageTopSpace(e,t){return vp(e,t)+Kg.vertical.nodeAndImage},getEmojiLeftSpace(e,t){const n=e.getPluginOptions(s3);return yy(e,t)-n.emojiPadding},getEmojiTopSpace(e,t){return wy(e,t)}},uU=e=>{const t=qv;return typeof e=="string"?t:Wu.getMarksByElement(e)[ui.fontSize]||t};function Un(e){const t=e.x+e.hGap;let n=e.y+e.vGap;const r=e.width-e.hGap*2,i=e.height-e.vGap*2;return{x:t,y:n,width:r,height:i}}function aU(e,t){const n=An.getNodeWidth(e,t),r=An.getNodeHeight(e,t);return{x:t.points[0][0],y:t.points[0][1],width:n,height:r}}function JD(e,t,n){const r=Ie.getNode(n);return!!(r&&rp(t[0],t[1],Un(r))===0)}function eT(e,t){let{x:n,y:r}=Un(Ie.getNode(t));n=n+An.getEmojiLeftSpace(e,t);const{width:i}=G5(e,t);return{x:n,y:r,width:i,height:An.getNodeHeight(e,t)}}function tT(e,t){let n=Un(t);const r=nT(e,n,t.origin);return r.width=r.width,r}function nT(e,t,n){const r=t.x+An.getTextLeftSpace(e,n),i=t.y+An.getTextTopSpace(e,n),o=An.getNodeDynamicWidth(e,n);return{height:Math.ceil(n.height),width:o,x:r,y:i}}function d3(e,t){let{x:n,y:r}=Un(Ie.getNode(t));const i=t.manualWidth||t.width;n=i>t.data.image.width?n+An.getTextLeftSpace(e,t)+(i-t.data.image.width)/2:n+An.getTextLeftSpace(e,t),r=An.getImageTopSpace(e,t)+r;const{width:o,height:s}=t.data.image;return{x:n,y:r,width:o,height:s}}const lU=(e,t,n)=>{const r=d3(e,t),i=R.getOutlineRectangle(r,-ws/2);return R.isPointInRectangle(i,n)},cU=(e,t,n)=>{const r=d3(e,t);return YP(r,ws).find(s=>R.isHit(R.getRectangleByPoints([n,n]),s.rectangle))},fU=(e,t)=>{const n={...t};return delete n.isRoot,delete n.rightNodeCount,delete n.type,n.layout===Ye.standard&&delete n.layout,n},W5=e=>{const t={...e};return delete t.start,delete t.end,t},hU=(e,t)=>{const n={...t};return $e.string(n.data.topic)||(n.data.topic={children:[{text:"思维导图"}]}),n==null||delete n.strokeColor,n==null||delete n.fill,n==null||delete n.shape,n==null||delete n.strokeWidth,n==null||delete n.isCollapsed,{...n,layout:n.layout??Ye.right,isRoot:!0,type:"mindmap"}},dU=(e,t)=>{sS(e,t),pn.getElementRef(t).getGenerator(ja.key).setFocus(t,!0)},Dm=(e,t)=>{PG(e),pn.getElementRef(t).getGenerator(ja.key).setFocus(t,!1)},rT=(e,t,n)=>{const r=Yf(t),{height:i}=r.getSize(void 0,n);if(Math.abs(i-t.height)>2)return i},iT=e=>{pn.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{iT(t)})},oT=e=>{pn.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{oT(t)})},YC=(e,t)=>{qa(e,t),t?O.getBoardContainer(e).classList.add("mind-node-dragging"):O.getBoardContainer(e).classList.remove("mind-node-dragging")},gU=(e,t,n)=>{let r=vc(e);if(qt.isMind(e)&&wo(ic(e))){const s=sT(e,t);s&&(r=r.slice(0,e.rightNodeCount)),s||(r=r.slice(e.rightNodeCount,r.length),n=[...n,n[n.length-1]-e.rightNodeCount])}let i=n[n.length-1]!==0,o=n[n.length-1]!==((r==null?void 0:r.length)||0);return e.isCollapsed&&(o=!1,i=!1),{hasPreviousNode:i,hasNextNode:o}},sT=(e,t)=>{const n=t.target;return qt.isMind(e)&&wo(ic(e))&&e.children.indexOf(n)!==-1&&e.children.indexOf(n)<e.rightNodeCount||qt.isMind(n)&&wo(ic(n))&&t.detectResult==="right"},pU=(e,t,n)=>{if(!t.origin.isRoot&&!pt.isAbstract(t.origin)){const r=Co.getCorrectLayoutByElement(e,t==null?void 0:t.parent.origin);if(wo(r)){const o=t.parent.children.findIndex(s=>s===t)>=(t.parent.origin.rightNodeCount||0);return ku(n,[o?"right":"left"])}if(Ug(r))return ku(n,["right"]);if(cv(r))return ku(n,["left"]);if(r===Ye.upward)return ku(n,["bottom"]);if(r===Ye.downward)return ku(n,["top"])}else{const r=Co.getCorrectLayoutByElement(e,t==null?void 0:t.origin);if(wo(r))return ku(n,["top","bottom"]);if(r===Ye.upward)return ku(n,["left","right","bottom"]);if(r===Ye.downward)return ku(n,["left","right","top"]);if(Ug(r))return ku(n,["right","top","bottom"]);if(cv(r))return ku(n,["left","top","bottom"])}return null},ku=(e,t)=>{const n=e;return t.forEach(r=>{const i=n.findIndex(o=>o===r);i!==-1&&n.splice(i,1)}),n.length?n:null},mU=(e,t,n,r)=>{let i=null;return hi(e,o=>{if(!Ie.isMindElement(e,o)||i)return;const s=Ie.getNode(o),a=vU(s,t);a&&(i=pU(e,s,a)),n=null;const f=r.every(h=>yU(h,s.origin));i&&f&&(n={target:s.origin,detectResult:i[0]})},Uf(e)),n},vU=(e,t)=>{const{x:n,y:r,width:i,height:o}=Un(e),s=r+o/2,a=n+i/2,f=e.y,h=e.y+e.height,d=e.x,p=e.x+e.width,v=[];return t[1]>r&&t[1]<r+o?(t[0]>d&&t[0]<a&&v.push("left"),t[0]>a&&t[0]<p&&v.push("right"),(t[0]>n&&t[0]<a||t[0]>a&&t[0]<n+i)&&(t[1]<s?v.push("top"):v.push("bottom")),v.length?v:null):t[0]>n&&t[0]<n+i?(t[1]>f&&t[1]<s&&v.push("top"),t[1]>s&&t[1]<h&&v.push("bottom"),(t[1]>r&&t[1]<r+o||t[1]>s&&t[1]<r+o)&&(t[0]<a?v.push("left"):v.push("right")),v.length?v:null):null},yU=(e,t)=>e!==t&&!ZD(e,t),wU=(e,t)=>{let n=O.findPath(e,t==null?void 0:t.target);const r=qt.isMind(t==null?void 0:t.target)?ic(t==null?void 0:t.target):Co.getCorrectLayoutByElement(e,Ie.getParent(t==null?void 0:t.target)),i=vc(t.target);return F5(r)&&((t.detectResult==="top"||t.detectResult==="bottom")&&n.push(i.length),t.detectResult==="right"&&(n=mt.next(n))),Vg(r)&&(t.detectResult==="right"&&(qt.isMind(t==null?void 0:t.target)&&wo(r)?n.push(t==null?void 0:t.target.rightNodeCount):n.push(i.length)),t.detectResult==="left"&&n.push(i.length),t.detectResult==="bottom"&&(n=mt.next(n))),ou(r)&&(ka(r)&&t.detectResult==="top"&&(n=mt.next(n)),yV(r)&&t.detectResult==="bottom"&&(n=mt.next(n)),Ug(r)&&t.detectResult==="left"&&n.push(i.length),cv(r)&&t.detectResult==="right"&&n.push(i.length)),n};function CU(e,t){const n=Un(t);return T4(e,n,t.origin)}function T4(e,t,n){const r=YD(e,n),i=w4(e,n),o=vp(e,n),s=c3(e,n),a=dc(s,o),f=R.inflate(t,-o);return w0(O.getRoughSVG(e),f.x,f.y,f.x+f.width,f.y+f.height,{stroke:i,strokeWidth:o,fill:r,fillStyle:"solid",strokeLineDash:a},!1,u3.shape.rectangleRadius)}var bn;(function(e){e.left="left",e.center="center",e.right="right"})(bn||(bn={}));var gn;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(gn||(gn={}));const Hi=(e,t)=>{let n=e.x,r=e.y;return t[0]===bn.center&&(n=e.x+e.width/2),t[0]===bn.right&&(n=e.x+e.width),t[1]===gn.middle&&(r=e.y+e.height/2),t[1]===gn.bottom&&(r=e.y+e.height),[n,r]},xU=(e,t,n)=>Math.abs(n?e[0]-t[0]:e[1]-t[1]),La=(e,t)=>t?e.left?Lt.left:Lt.right:e.up?Lt.top:Lt.bottom,Xn=(e,t,n=Lt.right)=>n===Lt.left?[e[0]-t,e[1]]:n===Lt.bottom?[e[0],e[1]+t]:n===Lt.top?[e[0],e[1]-t]:[e[0]+t,e[1]],Xd=(e,t,n=Lt.right)=>n===Lt.bottom?[e[0]+t,e[1]]:n===Lt.top?[e[0]+t,e[1]]:[e[0],e[1]+t],ho=(e,t)=>{if(t===Lt.left&&(e[0]===bn.right?e[0]=bn.left:e[0]===bn.left&&(e[0]=bn.right)),t===Lt.bottom||t===Lt.top){let n=bn.center,r=gn.middle;e[1]===gn.top&&(n=bn.left),e[1]===gn.bottom&&(n=bn.right),e[0]===bn.left&&(r=gn.top),e[0]===bn.right&&(r=gn.bottom),e[0]=n,e[1]=r}t===Lt.top&&(e[1]===gn.bottom?e[1]=gn.top:e[1]===gn.top&&(e[1]=gn.bottom))};function EU(e,t,n,r=!0,i=null,o,s){const a=v4(e,t.origin),f=o||l3(e,n.origin),h=i||a3(e,n.origin),d=c3(e,n.origin),p=g0(e,n.origin)===Vu.underline;let v,w,E,y,S=t,A=n;const B=Un(S),I=Un(A);v=S.x+S.width/2,w=XC(t,n)?B.y:B.y+B.height,E=t.left?A.x+A.hGap+I.width:A.x+A.hGap,y=p?A.y+A.height-A.vGap:A.y+A.height/2;let _=XC(t,n)?t.left?[-1,-1]:[1,-1]:t.left?[-1,1]:[1,1],L=[[v,w],[v,w],[v,w],[v,y-A.hGap*3*_[1]/5],[v,y-A.hGap*_[1]/5],[v+A.hGap*_[0]/4,y],[v+A.hGap*_[0]*3/5,y],p&&r?[E+(A.width-A.hGap*2)*_[0],y]:[E,y],p&&r?[E+(A.width-A.hGap*2)*_[0],y]:[E,y],p&&r?[E+(A.width-A.hGap*2)*_[0],y]:[E,y]];const j=dc(d,f);if(a===jf.polyline){const J=[[v,w],[v,y],[E,y],p&&r?[E+(A.width-A.hGap*2)*_[0],y]:[E,y]];return Uo(J,{stroke:h,strokeWidth:f,strokeLineDash:j})}const z=ci(L,.001);return jO(z,{stroke:h,strokeWidth:f})}function PU(e,t,n,r,i=null,o,s){const a=v4(e,t.origin),f=i||a3(e,n.origin),h=o||l3(e,n.origin),d=c3(e,n.origin),p=a===jf.polyline?!0:!t.origin.isRoot,v=g0(e,t.origin),E=g0(e,n.origin)===Vu.underline,y=v===Vu.underline,S=Un(n),A=Un(t),B=La(n,r),I=[bn.right,gn.middle],_=[bn.left,gn.middle];ho(I,B),ho(_,B),r&&y&&!t.origin.isRoot&&(I[1]=gn.bottom),r&&E&&(_[1]=gn.bottom);let L=Hi(A,I),j=Hi(S,_);const J=p?Xn(L,8,B):L;let ae=p?[L,J,J]:[];const ne=(t.hGap+n.hGap)/3,Pe=-(t.hGap+n.hGap)/2.4;let oe=[J,Xn(J,ne,B),Xn(j,Pe,B),j];const ce=Xn(j,S.width,B),me=E&&r?[ce,ce,ce]:[],ye=ci([...ae,...oe,...me]),Fe=dc(d,h);let Te;if(a===jf.polyline){const se=Xn(J,8,B),we=[...ae,se,r?[se[0],j[1]]:[j[0],se[1]],j,...me];Te=Uo(we,{stroke:f,strokeWidth:h,strokeLineDash:Fe})}else Te=O.getRoughSVG(e).curve(ye,{stroke:f,strokeWidth:h,strokeLineDash:Fe});return d===Ss.dotted&&Xt(Te,"round"),Te}function uT(e,t,n,r,i,o,s,a){return Ie.isIndentedLayout(t.origin)?EU(e,t,n,i,o,s):PU(e,t,n,r,o,s)}const SU="foreign-object-emoji";class DU{constructor(t){this.board=t,this.emojiComponentRef=null}draw(t,n,r){this.destroy();const i={board:this.board,emojiItem:n,element:r,fontSize:ND(r)};this.emojiComponentRef=this.board.renderEmoji(t,i)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const Y4=class Y4{constructor(t){this.board=t,this.emojiGenerators=[]}drawEmojis(t){if(this.destroy(),Ie.hasEmojis(t)){this.g=Gt(),this.g.classList.add("emojis");const n=eT(this.board,t),r=gw(n.x,n.y,n.width,n.height);r.classList.add(SU),this.g.append(r);const i=document.createElement("div");return i.classList.add("node-emojis-container"),r.append(i),this.emojiGenerators=t.data.emojis.map(o=>{const s=new DU(this.board);return s.draw(i,o,t),s}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(t=>t.destroy()),this.emojiGenerators=[]}};Y4.key="node-emojis-generator";let Yg=Y4;const TU=(e,t,n,r)=>{const i=pn.getElementRef(t),o=Ie.getNode(t),s=Gt();s.classList.add("dragging","fake-node","plait-board-attached");const a={...o,x:o.x+n,y:o.y+r},f=tT(e,o),h=CU(e,a),d=Yf(t).g.cloneNode(!0);if(hg(d,f.width,f.height,f.x+n,f.y+r),s==null||s.append(h),s==null||s.append(d),Ie.hasEmojis(t)){const v=i.getGenerator(Yg.key).g.cloneNode(!0),w=eT(e,t);hg(v,w.width,w.height,w.x+n,w.y+r),s==null||s.append(v)}if(Ie.hasImage(t)){const v=i.getGenerator(ja.key).g.cloneNode(!0),w=d3(e,t);hg(v,w.width,w.height,w.x+n,w.y+r),s==null||s.append(v)}return s},AU=(e,t,n)=>{const r=t.target,i=Gt(),o=Vt.get(e,mt.parent(n)),s=Co.getLayoutByElement(o),a=ai(s),{hasNextNode:f,hasPreviousNode:h}=gU(o,t,n),d=30,p=12;let v,w,E,y;if(!h&&!f){const J=Ie.getNode(o),ae=Un(J);y=La(J,a),E=J,qt.isMind(r)&&wo(s)&&(t.detectResult==="left"?(y=Lt.left,E.left=!0):(y=Lt.right,E.left=!1));const ne=[bn.right,gn.middle];ho(ne,y);const Pe=Hi(ae,ne);if(ou(s)){const oe=[bn.center,ka(s)?gn.top:gn.bottom],ce=Hi(ae,oe);w=Xn(ce,p,y),w[1]=ka(s)?w[1]-p:w[1]+p}else w=Xn(Pe,d,y)}else if(!h&&f){const J=Vt.get(e,n);E=Ie.getNode(J);const ae=Un(E);y=La(E,a);const ne=[bn.left,gn.top];ho(ne,y);let Pe=-p;Ie.isIndentedLayout(o)&&(Pe=ka(s)?Pe/2+E.height-E.vGap:0),w=Hi(ae,ne),w=Xd(w,Pe,y)}else if(h&&!f){const J=Vt.get(e,mt.previous(n));E=Ie.getNode(J);const ae=Un(E);y=La(E,a);const ne=[bn.left,gn.bottom];ho(ne,y);let Pe=p;Ie.isIndentedLayout(o)&&(Pe=ka(s)?-Pe-(E.height-E.vGap):Pe),w=Hi(ae,ne),w=Xd(w,Pe,y)}else{const J=Vt.get(e,mt.previous(n));E=Ie.getNode(J);const ae=Un(E),ne=Vt.get(e,n),Pe=Ie.getNode(ne),oe=Un(Pe),ce=[bn.left,gn.bottom],me=[bn.left,gn.top];y=La(E,a),ho(ce,y),ho(me,y);const ye=Hi(ae,ce),Fe=Hi(oe,me);w=[(ye[0]+Fe[0])/2,(ye[1]+Fe[1])/2]}let S=w,A=w;const B=a?p:d,I=a?d:p;S=Xd(S,-B/2,y),A=Xd(A,B/2,y),A=Xn(A,I,y);const _=Math.min(S[0],A[0]),L=Math.min(S[1],A[1]);v={...E,x:_,y:L,width:d,height:p,hGap:Ie.isIndentedLayout(o)?Mr*4+(E.origin.strokeWidth||N5):0,vGap:Ie.isIndentedLayout(o)?Mr:0};const j=w0(O.getRoughSVG(e),v.x,v.y,v.x+d,v.y+p,{stroke:Qd,strokeWidth:2,fill:Qd,fillStyle:"solid"}),z=uT(e,Ie.getNode(o),v,a,!1,Qd,N5);return i==null||i.appendChild(z),i==null||i.appendChild(j),i};var li;(function(e){e.start="start",e.end="end"})(li||(li={}));var Eg;(function(e){e.start="start",e.resizing="resizing",e.end="end"})(Eg||(Eg={}));function qC(e,t,n,r,i){const o=Gt(),s=Ie.getParent(n),a=Co.getCorrectLayoutByElement(e,n),f=ai(a),h=s.children.slice(n.start,n.end+1),d=on(e,h,!0),p=Ti(e,d);let v=R.getOutlineRectangle(p,-_u);i&&(v=cg(v,i,r,f));const w=RU(t,v.x,v.y,v.x+v.width,v.y+v.height,f,{stroke:Qd,strokeWidth:1,fillStyle:"solid"}),E=[bn.center,gn.top],y=[bn.center,gn.bottom],S=La(Ie.getNode(n),f);ho(E,S),ho(y,S);let A=Hi(v,E),B=Hi(v,y);const I=Xn(A,-om/2,S),_=Xn(A,om/2,S),L=Xn(B,-om/2,S),j=Xn(B,om/2,S),z=t.line(I[0],I[1],_[0],_[1],ZC(r===li.start)),J=t.line(L[0],L[1],j[0],j[1],ZC(r===li.end));return BU(e,r,f),Xt(z,"round"),Xt(J,"round"),o.append(z),o.append(J),o.append(w),o}function ZC(e){return e?{stroke:Qd,strokeWidth:4,fillStyle:"solid"}:{stroke:JV,strokeWidth:3,fillStyle:"solid"}}function BU(e,t,n){t?n?O.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):O.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(O.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),O.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function RU(e,t,n,r,i,o,s){const a=Math.abs(t-r),f=Math.abs(n-i),h=5,v=10+4*2;if(o){const w=(a-v-h*2)/2,E=f-h*2;return e.path(`M${t+h},${n}
            l${w},0
            m${v},0
            l${w},0
            a${h},${h},0,0,1,${h},${h}
            l0,${E}
            a${h},${h},0,0,1,-${h},${h}
            l-${w},0
            m-${v},0
            l-${w},0
            a${h},${h},0,0,1,-${h},-${h}
            l0,-${E}
            a${h},${h},0,0,1,${h},-${h}`,s)}else{const w=(f-v-h*2)/2,E=a-h*2;return e.path(`M${t+h},${n}
            l${E},0
            a${h},${h},0,0,1,${h},${h}
            l0,${w}
            m0,${v}
            l0,${w}
            a${h},${h},0,0,1,-${h},${h}
            l-${E},0
            a${h},${h},0,0,1,-${h},-${h}
            l0,-${w}
            m0,-${v}
            l0,-${w}
            a${h},${h},0,0,1,${h},-${h}`,s)}}const q4=class q4 extends xo{canDraw(t,n){return!!n.selected}draw(t,n){const r=Gt(),i=Ie.getNode(t),o=Un(i),s=Ti(this.board,o),a=vp(this.board,t),f=fr,h=R.inflate(s,f),d=w0(O.getRoughSVG(this.board),h.x,h.y,h.x+h.width,h.y+h.height,{stroke:Qd,strokeWidth:f,fill:""},!0,u3.shape.rectangleRadius+(f+a)/2);return pt.isAbstract(t)&&(this.abstractOutlineG=qC(this.board,O.getRoughSVG(this.board),t),r.append(this.abstractOutlineG),d.classList.add("abstract-element")),r.appendChild(d),r.classList.add(np),r}updateAbstractOutline(t,n,r){const i=qC(this.board,O.getRoughSVG(this.board),t,n,r);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(i),this.abstractOutlineG=i)}};q4.key="mind-node-active";let oc=q4;const cg=(e,t,n,r)=>r?n===li.start?{...e,y:t,height:e.height+e.y-t}:{...e,height:t-e.y}:n===li.start?{...e,x:t,width:e.width+e.x-t}:{...e,width:t-e.x},MU=(e,t,n,r,i,o)=>{const s=Ie.getNode(r),{start:a,end:f}=ql(s.origin,i),h=n[a],d=n[f];if(t===li.start){const p=n.filter(y=>pt.isAbstract(y)&&y.end<r.start);let v;if(p.length){const y=p.map(S=>{const{end:A}=ql(S,i);return A}).sort((S,A)=>A-S)[0];v=n[y+1]}else v=n[0];const w=on(e,[v],!0),E=on(e,[d],!1);return o?{max:E.y-_u,min:w.y-_u}:{max:E.x-_u,min:w.x-_u}}else{const p=n.filter(y=>pt.isAbstract(y)&&y.start>r.end);let v;if(p.length){const y=p.map(S=>{const{start:A}=ql(S,i);return A}).sort((S,A)=>S-A)[0];v=n[y-1]}else{const y=n.filter(S=>!pt.isAbstract(S));v=n[y.length-1]}const w=on(e,[v],!0),E=on(e,[h],!1);return o?{max:w.y+w.height+_u,min:E.y+E.height+_u}:{max:w.x+w.width+_u,min:E.x+E.width+_u}}},aT=(e,t,n)=>{const r=Co.getCorrectLayoutByElement(e,t),i=ai(r),s=Ie.getParent(t).children.slice(t.start,t.end+1);let a=on(e,s,!0);a=R.getOutlineRectangle(a,-_u);const f=QC(a,i,li.start),h=QC(a,i,li.end),d=R.getRectangleByPoints([n,n]);if(R.isHit(d,f))return li.start;if(R.isHit(d,h))return li.end},QC=(e,t,n)=>{let r;if(n===li.start){const i=t?e.y:e.x;r=cg(e,i+sm/2,li.end,t),r=cg(r,i-sm/2,n,t)}else{const i=t?e.y+e.height:e.x+e.width;r=cg(e,i-sm/2,li.start,t),r=cg(r,i+sm/2,n,t)}return r};function bU(e,t,n,r){const i=t.filter(d=>!pt.isAbstract(d)),o=i.map(d=>on(e,[d],!1)),s=on(e,[i[0]],!0),a={x:s.x-s.width,y:s.y-s.height,width:s.width,height:s.height},f=on(e,[i[i.length-1]],!0),h={x:f.x+f.width,y:f.y+f.height,width:f.width,height:f.height};o.push(h),o.unshift(a);for(let d=0;d<o.length-1;d++){const p=r?o[d].y:o[d].x,v=r?o[d].height:o[d].width;if(n>=p+v/2&&n<=o[d+1][r?"y":"x"]+o[d+1][r?"height":"width"]/2)return d-1}return 0}function OU(e,t,n){let r;const i=qe(e).filter(o=>pt.isAbstract(o)).find(o=>(r=aT(e,o,n),r));return t===i||(t&&(pn.getElementRef(t).getGenerator(oc.key).updateAbstractOutline(t),t=void 0),i&&(t=i,pn.getElementRef(t).getGenerator(oc.key).updateAbstractOutline(t,r))),t}const lT=e=>{const t=Ie.findParent(e);if(t){const n=t.children.findIndex(r=>r.id===e.id);if(t.isRoot&&ic(t)===Ye.standard&&t.rightNodeCount&&n<=t.rightNodeCount-1)return!0}return!1},cT=(e,t,n,r=[])=>{let i=r.findIndex(s=>mt.equals(s.path,t));const o=Vt.get(e,t);return i===-1?r.push({path:t,rightNodeCount:o.rightNodeCount+n}):r[i].rightNodeCount+=n,r},fT=(e,t,n=[])=>(t.forEach(r=>{if(lT(r)){const i=Ie.getParent(r),o=O.findPath(e,i);let s=n.findIndex(a=>mt.equals(a.path,o));s===-1?n.push({path:o,rightNodeCount:i.rightNodeCount-1}):n[s].rightNodeCount-=1}}),n);function A4(e,t){const n=vc(t);return O.findPath(e,t).concat(n.length)}function IU(e,t){const n=O.findPath(e,t);return q.next(n)}const B4=(e,t)=>{const n=Ie.getAncestors(e,t);n.unshift(t);const r=n[n.length-1];let i=ic(r);if(qt.isMind(t))return i;const o=Ie.getNode(t);let s=i;i===Ye.standard&&(s=o.left?Ye.left:Ye.right);let a=null;const f=n.find(h=>h.layout||pt.isAbstract(h));if(f)if(pt.isAbstract(f)){const h=Ie.getParent(f),d=B4(e,h);a=m4(d)}else a=f==null?void 0:f.layout;if(a===Ye.standard||!a)return s;{const h=KV(s,a);return h?YV(a,h):a}},hT=(e,t)=>{const n=[];t.layout&&n.unshift(B4(e,t));let r=Ie.findParent(t);for(;r;)r.layout&&n.unshift(r.layout),r=Ie.findParent(r);return n},FU=(e,t)=>{const n=Ie.findParent(t);if(n){const r=hT(e,n);if(r[0]===Ye.standard){const h=Ie.getNode(t);r[0]=h.left?Ye.left:Ye.right}const i=zC(r);let o=VC(i);const s=[r[r.length-1]],a=zC(s),f=VC(a);return o=o.filter(h=>f.some(d=>d===h)),o}},$5=e=>{const t=e.layout;if(t)return t;const n=!qt.isMind(e)&&Ie.getParent(e);return pt.isAbstract(e)&&n?m4($5(n)):n?$5(n):x4()},Co={getAvailableSubLayoutsByElement:FU,getBranchLayouts:hT,getLayoutByElement:$5,getCorrectLayoutByElement:B4},qt={isMind:e=>e.type==="mindmap"},Ie={hasLayout(e,t){return Co.getLayoutByElement(e)===t},isIndentedLayout(e){const t=Co.getLayoutByElement(e);return ou(t)},isMindElement(e,t){return!!(t.data&&t.data.topic&&!Vo(t.width)&&!Vo(t.height))},getParent(e){if(qt.isMind(e))throw new Error("mind root node can not get parent");return Af.get(e)},findParent(e){return qt.isMind(e)?void 0:Af.get(e)},getRoot(e,t){const n=O.findPath(e,t);return Vt.get(e,n.slice(0,1))},getAncestors(e,t){const n=O.findPath(e,t),r=[];for(const i of mt.ancestors(n,{reverse:!0})){const o=Vt.get(e,i);o&&!O.isBoard(o)&&r.push(o)}return r},getNode(e){const t=hv.get(e);if(!t)throw new Error(`can not get node from ${JSON.stringify(e)}`);return t},findParentNode(e){if(qt.isMind(e))return;const t=Ie.getParent(e);return Ie.getNode(t)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var Vu;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(Vu||(Vu={}));var jf;(function(e){e.bight="bight",e.polyline="polyline"})(jf||(jf={}));function kU(e,t,n){const i=UV(e,t.origin),o=UD(e,t.origin),s=c3(e,t.origin),a=t.parent,f=v4(e,t.origin),h=Un(t);let d=a.children.slice(t.origin.start,t.origin.end+1).map(ae=>ae.origin);const p=on(e,d,!0),v=La(t,n),w=[bn.right,gn.top],E=[bn.right,gn.bottom],y=[bn.left,gn.middle];ho(w,v),ho(E,v),ho(y,v);let S=Hi(p,w),A=Hi(p,E),B=Hi(h,y),I=xU(B,S,n)-15*2;S=Xn(S,15,v);let _=Xn(S,I,v);A=Xn(A,15,v);let L=Xn(A,I,v),j=Xn(B,-15,v);const z=dc(s,i);if(f===jf.polyline){const ae=Gt(),ne=Uo([S,_,j,L,A],{stroke:o,strokeWidth:i}),Pe=Uo([B,j],{stroke:o,strokeWidth:i,strokeLineDash:z});return ae.appendChild(ne),ae.appendChild(Pe),ae}return O.getRoughSVG(e).path(`M${S[0]},${S[1]} Q${_[0]},${_[1]} ${j[0]},${j[1]} Q${L[0]},${L[1]} ${A[0]},${A[1]} M${B[0]},${B[1]} L${j[0]},${j[1]}`,{stroke:o,strokeWidth:i,strokeLineDash:z})}const dT=(e,t)=>{t.forEach((n,r)=>{const i=r.start+n.start,o=r.end+n.end,s=O.findPath(e,r);i>o?Ve.removeNode(e,s):Ve.setNode(e,{start:i,end:o},s)})},gT=(e,t)=>{const n=t.rightNodeCount,r=t.children.find(i=>pt.isAbstract(i)&&i.end>=n&&i.start<n);if(r){const i=O.findPath(e,r);Ve.setNode(e,{end:n-1},i)}},LU=(e,t)=>{let n=xg(t);const{parentElements:r,abstractIncludedGroups:i}=oU(n);i.forEach((o,s)=>{const a=r[s];_U(e,a,o)})},_U=(e,t,n)=>{const r=n.map(a=>t.children.indexOf(a)).sort((a,f)=>a-f),i=t==null?void 0:t.rightNodeCount,o=r[0],s=r[r.length-1];if(wo(Co.getLayoutByElement(t))&&i&&o<i&&s>=i){const a=t.children.length,f=[...O.findPath(e,t),a],h=r.filter(p=>p>=i),d=r.filter(p=>p<i);Cy(e,f,d[0],d[d.length-1]),Cy(e,mt.next(f),h[0],h[h.length-1])}else{const a=[...O.findPath(e,t),t.children.length];Cy(e,a,o,s)}},Cy=(e,t,n,r)=>{const i=rU(e),{width:o,height:s}=f3(!1,!1,Za(i)),a=h3(i,o,s,{strokeWidth:d0.branch.width,branchWidth:d0.branch.width});a.start=n,a.end=r,Ve.insertNode(e,a,t),y0(e),Xf(e,a)},R4=(e,t,n,r)=>{const i=An.getNodeTopicMinWidth(e,t),o=n<i?i:n;return{width:Math.ceil(o),height:r}},NU=(e,t,n,r,i)=>{const o={data:{...t.data,topic:n},...R4(e,t,r,i)},s=O.findPath(e,t);Ve.setNode(e,o,s)},HU=(e,t,n,r)=>{const i=O.findPath(e,t),{width:o,height:s}=R4(e,t,n,r),a={manualWidth:o,height:s};Ve.setNode(e,a,i)},GU=(e,t,n,r)=>{const i={...R4(e,t,n,r)};let o=Math.ceil(t.width)===Math.ceil(i.width),s=Math.ceil(t.height)===Math.ceil(i.height);if(t.manualWidth&&(o=!0),!o||!s){const a=O.findPath(e,t);Ve.setNode(e,i,a)}},pT=(e,t,n)=>{const r=e.pathRef(n);t.forEach(i=>{r.current&&Ve.insertNode(e,i,r.current)}),r.unref()},WU=(e,t,n,r)=>{var a;const i=Vt.get(e,q.parent(r)),o=[...q.parent(r),(a=i.children)==null?void 0:a.length],s=t.map(f=>{const{start:h,end:d}=$D(f,n);return{...f.abstract,start:h+r[r.length-1],end:d+r[r.length-1]}});pT(e,s,o)},mT=(e,t)=>{t.forEach(n=>{Ve.setNode(e,{rightNodeCount:n.rightNodeCount},n.path)})},$U=(e,t)=>{if(Ie.isMindElement(e,t)){Hv(e,t);const n=O.findPath(e,t);if(t.isCollapsed){const r={isCollapsed:!1};gs.withoutSaving(e,()=>{Ve.setNode(e,r,n)})}S4(e,t,A4(e,t))}},jU=(e,t)=>{if(Ie.isMindElement(e,t)&&!qt.isMind(t)&&!pt.isAbstract(t)){const n=O.findPath(e,t);if(lT(t)){const i=cT(e,n.slice(0,1),1);mT(e,i)}const r=jD(e,q.next(n));dT(e,r),S4(e,t,IU(e,t))}},zU=(e,t)=>{Ve.insertNode(e,t,[e.children.length]),Ve.addSelectionWithTemporaryElements(e,[t])},VU=(e,t,n)=>{const i=[...t.data.emojis||[]];i.push(n);const o={data:{...t.data,emojis:i}},s=O.findPath(e,t);Ve.setNode(e,o,s)},UU=(e,t,n)=>{const r=t.data.emojis.filter(s=>s!==n),i={data:{topic:t.data.topic}};Ie.hasImage(t)&&(i.data.image=t.data.image),r.length>0&&(i.data.emojis=r);const o=O.findPath(e,t);Ve.setNode(e,i,o)},XU=(e,t,n,r)=>{const i={data:{...t.data}},o=t.data.emojis.map(a=>a===n?r:a);i.data.emojis=o;const s=O.findPath(e,t);Ve.setNode(e,i,s)},KU=(e,t)=>{Dm(e,t);const n={data:{...t.data}};delete n.data.image;const r=O.findPath(e,t),i=An.getNodeNewDynamicWidth(e,t,0),o=rT(e,t,i);o&&(n.height=o),Ve.setNode(e,n,r)},YU=(e,t,n)=>{const r={data:{...t.data,image:n}},i=An.getNodeNewDynamicWidth(e,t,n.width),o=rT(e,t,i);o&&(r.height=o);const s=O.findPath(e,t);Ve.setNode(e,r,s)},vT=(e,t,n)=>{var i;const r=Vt.get(e,n);r&&t&&((i=r.children)==null||i.forEach((o,s)=>{var a;o.layout&&((Vg(t)&&F5(o.layout)||F5(t)&&Vg(o.layout))&&Ve.setNode(e,{layout:null},[...n,s]),(a=o.children)!=null&&a.length&&vT(e,t,[...n,s]))}))},qU=(e,t)=>{const n=(r,i)=>{if(Ie.isMindElement(e,r)){vT(e,t,i);const o=Vt.get(e,i);if(qt.isMind(o)&&wo(t)){let s={rightNodeCount:o.children.length/2};Ve.setNode(e,s,i),gT(e,o)}Ve.setNode(e,{layout:t},i)}};Ku.setProperty(e,{},{callback:n})},ZU=(e,t)=>{Ku.setProperty(e,{shape:t})},QU=(e,t)=>{Ku.setProperty(e,{branchShape:t})},JU=(e,t)=>{Ku.setProperty(e,{branchWidth:t})},eX=(e,t)=>{Ku.setProperty(e,{branchColor:t})},Or={setLayout:qU,setShape:ZU,setBranchShape:QU,setBranchWidth:JU,setBranchColor:eX,setTopic:NU,setTopicSize:GU,setNodeManualWidth:HU,addEmoji:VU,removeEmoji:UU,replaceEmoji:XU,insertAbstract:LU,setAbstractsByRefs:dT,setAbstractByStandardLayout:gT,insertNodes:pT,insertAbstractNodes:WU,setRightNodeCountByRefs:mT,removeImage:KU,setImage:YU,insertChildNode:$U,insertSiblingNode:jU,insertMind:zU};class tX extends xo{canDraw(t){return!(O.isReadonly(this.board)||t!=null&&t.isCollapsed)}draw(t){const n=Gt();n.classList.add("plus");const r=Ie.getNode(t),i=Co.getLayoutByElement(t),o=ai(i);let s=La(r,o);ou(i)&&(s=ka(i)?Lt.top:Lt.bottom);const a=g0(this.board,t)===Vu.underline,f=Un(r),h=l3(this.board,t),d=qt.isMind(t)?XV(this.board,t):a3(this.board,t);let p=8,v=[bn.right,gn.middle];ho(v,s),o&&a&&!t.isRoot&&(v[1]=gn.bottom);let w=Hi(f,v);t.children.length>0&&!t.isRoot&&(w=Xn(w,Cg+8,s),p=5);const E=Xn(w,p,s),y=Xn(E,8,s),S=O.getRoughSVG(this.board).line(w[0],w[1],E[0],E[1],{stroke:d,strokeWidth:h}),A=O.getRoughSVG(this.board).circle(y[0],y[1],Cg,{fill:$C,stroke:$C,fillStyle:"solid"}),B=[y[0]-5,y[1]],I=[y[0]+5,y[1]],_=[y[0],y[1]-5],L=[y[0],y[1]+5],j=O.getRoughSVG(this.board).line(B[0],B[1],I[0],I[1],{stroke:jC,strokeWidth:2}),z=O.getRoughSVG(this.board).line(_[0],_[1],L[0],L[1],{stroke:jC,strokeWidth:2});return n.appendChild(S),n.appendChild(A),n.appendChild(j),n.appendChild(z),n}afterDraw(t){if(!this.g)throw new Error("can not find quick insert g");Lf(this.g,"pointerdown").pipe(Xy(1)).subscribe(n=>{n.preventDefault()}),Lf(this.g,"pointerup").pipe(Xy(1)).subscribe(n=>{setTimeout(()=>{const r=A4(this.board,t);S4(this.board,t,r)},0)})}}class nX extends xo{canDraw(t){return!!(t.children.length&&!qt.isMind(t))}draw(t){const n=Gt();n.classList.add("collapse");const r=Ie.getNode(t),i=a3(this.board,t),o=l3(this.board,t),s=Co.getLayoutByElement(t),a=g0(this.board,t)===Vu.underline,f=ai(s),h=Un(r);let d=La(r,f);ou(s)&&(d=ka(s)?Lt.top:Lt.bottom);let p=[bn.right,gn.middle];ho(p,d),f&&a&&!t.isRoot&&(p[1]=gn.bottom);let v=Hi(h,p);const w=Xn(v,H5,d),E=Xn(w,Cg/2,d),y=this.getArrowPoints(E,d),S=Uo(y,{stroke:i,strokeWidth:2}),A=O.getRoughSVG(this.board).line(v[0],v[1],w[0],w[1],{strokeWidth:o,stroke:i}),B=O.getRoughSVG(this.board).circle(E[0],E[1],Cg,{fill:i,stroke:i,fillStyle:"solid"}),I=O.getRoughSVG(this.board).circle(E[0],E[1],Cg,{fill:"#fff",stroke:i,strokeWidth:o>3?3:o,fillStyle:"solid"});if(t.isCollapsed){let _=0;Sm(t)>=10&&(_=-2),Sm(t)===1&&(_=1);const L=EO(E[0]-4+_,E[1]+4,i,`${Sm(t)}`);B.setAttribute("style","opacity: 0.15"),L.setAttribute("style","font-size: 12px"),n.appendChild(B),n.appendChild(L),n.appendChild(A)}else n.appendChild(I),n.appendChild(S);return n.appendChild(A),n}afterDraw(t){if(!this.g)throw new Error("can not find quick insert g");Lf(this.g,"pointerdown").pipe(eO(()=>!O.isPointer(this.board,ln.hand)||!!O.isReadonly(this.board)),Xy(1)).subscribe(n=>{n.preventDefault();const i={isCollapsed:!t.isCollapsed},o=O.findPath(this.board,t);Ve.setNode(this.board,i,o)})}getArrowPoints(t,n){let r=Xn(t,2,n);r=Xd(r,4,n);const i=Xn(t,-2,n);let o=Xn(t,2,n);return o=Xd(o,-4,n),[r,i,o]}}class rX extends xo{constructor(t){super(t,{prepend:!0})}canDraw(t,n){return g0(this.board,t)===Vu.roundRectangle}draw(t,n){const r=Un(n.node);return T4(this.board,r,n.node.origin)}}class yT extends gc{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(t,n)=>n.origin.id}initializeGenerator(){this.nodeShapeGenerator=new rX(this.board),this.nodeEmojisGenerator=new Yg(this.board),this.activeGenerator=new oc(this.board),this.nodePlusGenerator=new tX(this.board),this.collapseGenerator=new nX(this.board),this.imageGenerator=new ja(this.board,{getRectangle:r=>d3(this.board,r),getImageItem:r=>r.data.image});const t=(this.board.getPluginOptions(E5)||{}).textPlugins,n=new lp(this.board,{getRectangle:()=>tT(this.board,this.node),onChange:r=>{const i=r.width,o=r.height;r.newText?Or.setTopic(this.board,this.element,r.newText,i,o):Or.setTopicSize(this.board,this.element,i,o)},getMaxWidth:()=>this.element.manualWidth?An.getNodeDynamicWidth(this.board,this.element):Math.max(An.getNodeDynamicWidth(this.board,this.element),QV.defaultTextMaxWidth),textPlugins:t||[]});this.getRef().addGenerator(oc.key,this.activeGenerator),this.getRef().addGenerator(Yg.key,this.nodeEmojisGenerator),this.getRef().addGenerator(ja.key,this.imageGenerator),this.getRef().initializeTextManage(n),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=Ie.getNode(this.element),this.index=Yd.get(this.element)||0,this.roughSVG=O.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.drawEmojis(),this.drawExtend(),this.imageGenerator.processDrawing(this.element,this.getElementG()),qt.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(t,n){const r=Ie.getNode(t.element),i=R.isEqual(this.node,r);if(this.node=r,!i||t.element!==n.element||t.hasThemeChanged)this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),this.drawExtend(),!Ie.hasImage(n.element)&&Ie.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),Ie.hasImage(n.element)&&Ie.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),Ie.hasImage(n.element)&&!Ie.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const o=t.selected===n.selected,s=t.parent===n.parent;(!o||t.selected)&&this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected}),s||this.drawLink()}}drawEmojis(){const t=this.nodeEmojisGenerator.drawEmojis(this.element);t&&this.getElementG().append(t)}drawLink(){if(qt.isMind(this.element))return;const t=Ie.getParent(this.element),n=Ie.getNode(t);this.linkG&&this.linkG.remove();const r=Co.getLayoutByElement(t);pt.isAbstract(this.node.origin)?this.linkG=kU(this.board,this.node,ai(r)):this.linkG=uT(this.board,n,this.node,ai(r)),this.getElementG().append(this.linkG)}drawExtend(){this.extendG||(this.extendG=Gt(),this.extendG.classList.add("extend"),this.getElementG().append(this.extendG)),this.element.isCollapsed?this.getElementG().classList.add("collapsed"):this.getElementG().classList.remove("collapsed"),this.nodePlusGenerator.processDrawing(this.element,this.extendG),this.collapseGenerator.processDrawing(this.element,this.extendG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),hv.get(this.element)===this.node&&hv.delete(this.element),this.getRef().destroyTextManage()}}class iX extends yT{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(t){t.element!==this.element&&this.initialized&&this.updateMindLayout(t.element)}updateMindLayout(t=this.element){const n=t.layout||x4();this.root=bV.layout(t,qV(this.board),n),this.updateMindNodeLocation(t)}updateMindNodeLocation(t){const{x:n,y:r,hGap:i,vGap:o}=this.root,s=n+i,a=r+o;hi(this.root,f=>{f.x=f.x-s+t.points[0][0],f.y=f.y-a+t.points[0][1],hv.set(f.origin,f)})}}const oX=5,sX=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=[],o=[],s,a,f,h=null,d;return e.pointerDown=p=>{if(O.isReadonly(e)||O.hasBeenTextEditing(e)||!O.isPointer(e,ln.selection)||!ju(p)){t(p);return}const v=bt(e,Ot(e,p.x,p.y)),w=qe(e),E=lc(e,v);if(E&&Ie.isMindElement(e,E)&&!qt.isMind(E)&&!pt.isAbstract(E)){const y=w.filter(A=>Ie.isMindElement(e,A)&&!A.isRoot&&!pt.isAbstract(A));w.length>0&&w.includes(E)?(i=y,s=v):(i=[E],s=v)}i.length&&(o=GD(e,i)),t(p)},e.pointerMove=p=>{if(!e.options.readonly&&i.length&&s){const v=bt(e,Ot(e,p.x,p.y));if(Et(s[0],s[1],v[0],v[1])<oX)return;YC(e,!0),f==null||f.remove();const E=bt(e,Ot(e,p.x,p.y));h=mU(e,E,h,[...i,...o]),h!=null&&h.target&&(d=wU(e,h),f=AU(e,h,d),O.getHost(e).appendChild(f));const y=v[0]-s[0],S=v[1]-s[1];a==null||a.remove(),a=Gt(),[...i,...o].forEach(A=>{iT(A)}),i.forEach(A=>{const B=TU(e,A,y,S);a==null||a.appendChild(B)}),O.getHost(e).appendChild(a);return}n(p)},e.globalPointerUp=p=>{const v=xg(i);if(!e.options.readonly&&v.length){if(v.push(...o),s0(e)&&v.forEach(w=>{oT(w)}),h){const w=e.pathRef(d),E=mt.hasPrevious(d)&&e.pathRef(mt.previous(d)),y=e.pathRef(O.findPath(e,h.target));let S=WD(e,v);const A=v.filter(ne=>!S.some(Pe=>Pe.abstract===ne)).map(ne=>pt.isAbstract(ne)?W5(ne):ne);if(d[d.length-1]!==0){const ne=Vt.get(e,mt.previous(d)),Pe=mp(ne);if(Pe&&Pe.end!==d[d.length-1]-1){const ce=S.map(me=>W5(me.abstract));A.push(...ce),S=[]}}const I=zD(e,v);jD(e,d,A.length,!1,I),Or.setAbstractsByRefs(e,I);let _=fT(e,v);const L=Vt.get(e,mt.parent(d));sT(L,h)&&y.current&&(_=cT(e,y.current.slice(0,1),A.length,_)),Or.setRightNodeCountByRefs(e,_),ZE.removeElements(e,v);let z=w.current;const J=mt.parent(w.current||d);if(!z){const ne=E&&E.unref();if(ne)z=mt.next(ne);else{const Pe=Vt.get(e,J),oe=vc(Pe);z=[...J,oe.length||0]}}Or.insertNodes(e,A,z),S.length&&Or.insertAbstractNodes(e,S,A,z),y.current&&w.current&&mt.isAncestor(y.current,w.current)&&h.target.isCollapsed&&Ve.setNode(e,{isCollapsed:!1},y.current),y.unref(),w.unref();let ae=[];hi(e,ne=>{i.some(oe=>oe.id===ne.id)&&ae.push(ne)}),Ve.addSelectionWithTemporaryElements(e,ae)}YC(e,!1),i=[],a==null||a.remove(),a=void 0,f==null||f.remove(),f=void 0,h=null}r(p)},e},uX=e=>{const t=e,{pointerDown:n,pointerMove:r,pointerUp:i}=e;let o,s,a,f;return e.pointerDown=h=>{if(!ju(h)||O.isReadonly(e)){n(h);return}const d=qe(e).filter(v=>pt.isAbstract(v)),p=bt(e,Ot(e,h.x,h.y));if(o=d.find(v=>(s=aT(e,v,p),s)),o){t!=null&&t.onAbstractResize&&t.onAbstractResize(Eg.start);return}n(h)},e.pointerMove=h=>{qe(e);const d=bt(e,Ot(e,h.x,h.y));if(a=OU(e,a,d),s&&o){const p=Co.getCorrectLayoutByElement(e,o),v=ai(p),w=Ie.getParent(o);let E=w.children;const y=Co.getLayoutByElement(w);if(wo(y)){const ae=w.rightNodeCount,{leftChildren:ne,rightChildren:Pe}=VV(w);o.end<ae&&(E=Pe),o.start>=ae&&(E=ne)}t!=null&&t.onAbstractResize&&t.onAbstractResize(Eg.resizing);const S=v?d[1]:d[0],A=Ie.getNode(w),B=MU(e,s,E,o,A,v),I=Math.min(B.max,Math.max(B.min,S));let _=bU(e,E,I,v);if(s===li.start&&_+1===o.start||s===li.end&&_===o.end)f=void 0;else{if(wo(A.layout)){const ae=A.origin.rightNodeCount;o.start>=ae&&(_+=ae)}f=s===li.start?{start:_+1}:{end:_}}const z=pn.getElementRef(o).getGenerator(oc.key),J=Rg(e,[I,I]);z.updateAbstractOutline(o,s,v?J[1]:J[0])}r(h)},e.pointerUp=h=>{if(s=void 0,o){if(t!=null&&t.onAbstractResize&&t.onAbstractResize(Eg.end),f){const d=O.findPath(e,o);Ve.setNode(e,f,d)}else pn.getElementRef(o).getGenerator(oc.key).updateAbstractOutline(o);o=void 0;return}i(h)},e},aX=e=>{const t=e;return e.setPluginOptions(s3,{spaceBetweenEmojis:4,emojiPadding:0}),t},lX="m",cX=e=>{const t=e,{keyDown:n,pointerDown:r,pointerMove:i,pointerUp:o}=e;let s=null,a=null;t.pointerDown=h=>{const d=O.isPointer(e,Df.mind);if(!O.isReadonly(e)&&D0(e)&&d){const p=bt(e,Ot(e,h.x,h.y)),v=UC(t,p);Or.insertMind(e,v),Bn.updatePointerType(e,ln.selection);return}r(h)},t.pointerMove=h=>{if(O.isReadonly(e)){i(h);return}const d=O.isPointer(e,Df.mind);Xv(e)&&d?Ga(e,"with-mind-create",()=>{let p=O.getMovingPointInBoard(e);if(p){p=bt(t,Ot(e,p[0],p[1])),a=UC(t,p);const v=aU(t,a),w=T4(e,v,a),E=nT(t,v,a);if(s)s.textManage.updateRectangle(E),s.nodeG.remove(),s.nodeG=w,s.g.append(w),s.g.append(s.textManage.g);else{const y=new lp(e,{getRectangle:()=>E});y.draw(a.data.topic),s={g:Gt(),nodeG:w,textManage:y},s.g.classList.add("root"),s.g.setAttribute("plait-mind-temporary","true"),O.getHost(e).append(s.g),s.g.append(s.nodeG,y.g)}}}):f(),i(h)},t.pointerUp=h=>{if(a){Or.insertMind(e,a),Bn.updatePointerType(e,ln.selection),a=null,f();return}o(h)},e.keyDown=h=>{if(O.isReadonly(e)||qe(e).length>0){n(h);return}if(h.key===lX&&!O.isPointer(e,Df.mind)){Bn.updatePointerType(e,Df.mind),Ul(e,Cs.drawing),h.preventDefault();return}n(h)};function f(){s&&(s.textManage.destroy(),s.g.remove(),s=null)}return t},fX=e=>{const t=e,{keyDown:n,globalKeyDown:r}=t;return t.keyDown=i=>{const o=qe(t),s=o.length===1,a=o.length===1&&Ie.isMindElement(t,o[0]),f=o[0];if(yG(i)&&a&&!qt.isMind(f)&&f.children&&f.children.length>0){Ve.setNode(t,{isCollapsed:!f.isCollapsed},O.findPath(t,f));return}if(!O.isReadonly(t)){if(wG(i)&&a){i.preventDefault(),Or.insertChildNode(t,f);return}if(CG(i)&&a&&!qt.isMind(f)&&!pt.isAbstract(f)){Or.insertSiblingNode(t,f);return}if(!jw(i)&&!Vw(i)&&!zw(i)&&s&&Ie.isMindElement(t,f)){i.preventDefault(),C4(f);return}}n(i)},t.globalKeyDown=i=>{if(O.isFocus(t)&&O.hasBeenTextEditing(t)&&dn.isHotkey("mod+z",i)){const{history:o}=t,{undos:s}=o,a=s.length>0?s[s.length-1][0]:void 0;a&&a.type==="insert_node"&&Ie.isMindElement(t,a.node)&&Yf(a.node).isEditing&&t.undo()}r(i)},t},hX=(e,t,n)=>{let r=null;const i=bt(e,Ot(e,t.x,t.y));return hi(e,o=>{if(r||!Ie.isMindElement(e,o))return;JD(e,i,o)&&(r=o)},Uf(e),!0),n&&r&&n.element===r||(n&&wT(n.element),r?(gX(r),n?n.element=r:n={element:r}):n=null),n},dX=(e,t,n)=>{n&&wT(n.element)},gX=e=>{pn.getElementG(e).classList.add("hovered")},wT=e=>{var t,n;(n=(t=pn.getElementG(e))==null?void 0:t.classList)==null||n.remove("hovered")},pX=e=>{const{pointerMove:t,pointerLeave:n}=e;let r=null;return e.pointerMove=i=>{Ga(e,"with-mind-node-hover-hit-test",()=>{r&&!pn.hasMounted(r.element)&&(r=null),r=hX(e,i,r)}),t(i)},e.pointerLeave=i=>{dX(e,i,r),r=null,n(i)},e},mX=e=>{const{keyDown:t,pointerUp:n,globalPointerUp:r,buildFragment:i,insertFragment:o,deleteFragment:s,afterChange:a}=e;return e.pointerUp=f=>{const h=No(e);if(h&&Ie.isMindElement(e,h)&&!aO(f)&&(O.isReadonly(e)||!ju(f)||!O.isPointer(e,ln.selection))){Dm(e,h),n(f);return}if(O.isReadonly(e)){n(f);return}const d=bt(e,Ot(e,f.x,f.y)),p=lc(e,d),v=p&&Ie.isMindElement(e,p)&&Ie.hasImage(p)&&lU(e,p,d);if(v&&h&&p===h){i5(e),n(f);return}h&&Ie.isMindElement(e,h)&&Dm(e,h),v&&p&&(i5(e),dU(e,p)),n(f)},e.keyDown=f=>{const h=No(e);if(!O.isReadonly(e)&&h&&(Di.isDeleteBackward(f)||Di.isDeleteForward(f))){Xf(e,h),Or.removeImage(e,h);return}t(f)},e.globalPointerUp=f=>{if(O.isFocus(e)){const h=f.target instanceof Node&&O.getBoardContainer(e).contains(f.target),d=No(e);d&&Ie.isMindElement(e,d)&&!h&&Dm(e,d)}r(f)},e.buildFragment=(f,h,d,p)=>{const v=No(e);return v&&(f=PI(Wa.medias,[v.data.image],"")),i(f,h,d,p)},e.deleteFragment=f=>{const h=No(e);h&&Or.removeImage(e,h),s(f)},e.insertFragment=(f,h,d)=>{var E,y;const p=qe(e),v=!!No(e),w=p.length===1&&Ie.isMindElement(e,p[0]);if(v||w){if((E=f==null?void 0:f.files)!=null&&E.length){const S=XP.map(B=>"image/"+B),A=p[0]||No(e);if(S.includes(f.files[0].type)){const B=f.files[0];oS(e,B,zV,I=>{Or.setImage(e,A,I)});return}}if((y=f==null?void 0:f.medias)!=null&&y.length){const S=p[0]||No(e);Or.setImage(e,S,f.medias[0]);return}}o(f,h,d)},e.afterChange=()=>{a();const f=No(e);f&&Ie.isMindElement(e,f)&&pn.getElementRef(f).getGenerator(ja.key).setFocus(f,!0)},e},vX=e=>{let t=null;return Zf(e,{key:"mind-node",canResize:()=>!0,hitTest:r=>{const i=yX(e,r);return i?{element:i,handle:null,cursorClass:eu.ew}:null},beforeResize:r=>{t={minWidth:An.getNodeResizableMinWidth(e,r.element),currentWidth:An.getNodeDynamicWidth(e,r.element),path:O.findPath(e,r.element),textManage:Yf(r.element)}},onResize:(r,i)=>{let o=t.currentWidth+dt.getOffsetX(i.startPoint,i.endPoint);o<=t.minWidth&&(o=t.minWidth);const s=Vt.get(e,t.path);if(s&&An.getNodeTopicMinWidth(e,s)!==o){t.textManage.updateRectangleWidth(o);const{height:a}=t.textManage.getSize(void 0,o);Or.setNodeManualWidth(e,s,o,a)}},afterResize:r=>{t=null}}),e},yX=(e,t)=>{const n=qe(e).filter(r=>Ie.isMindElement(e,r));if(n.length>0){const r=n.find(i=>{const o=wX(e,i);return rp(t[0],t[1],o)<=0});return r||null}return null},wX=(e,t)=>{const n=Ie.getNode(t),r=Un(n);return{x:r.x+r.width-H5,y:r.y,width:H5*2,height:r.height}},CX=e=>(Zf(e,{key:"mind-node-image",canResize:()=>!0,hitTest:n=>{const r=No(e),i=r&&Ie.isMindElement(e,r)?r:void 0;if(i){const o=cU(e,i,n);if(o)return{element:i,handle:o.handle,cursorClass:o.cursorClass}}return null},onResize:(n,r)=>{const i=dt.getOffsetX(r.startPoint,r.endPoint),o=n.element.data.image.width,s=n.element.data.image.height,a=n.path;let f=o+i;f<=100&&(f=100);const h=o/s,d=f/h,p={...n.element.data.image,width:f,height:d};Or.setImage(e,Vt.get(e,a),p),sS(e,Vt.get(e,a))}}),e),xX=(e,t,n)=>{let r=[];const i=GD(e,t),o=WD(e,[...t,...i]),s=t.filter(f=>!o.find(h=>h.abstract===f));s.push(...o.map(f=>f.abstract));const a=s.map(f=>Ie.getNode(f));return s.forEach((f,h)=>{const d=Un(a[h]),p=[[d.x-n[0],d.y-n[1]]],v=o.find(w=>w.abstract===f);if(pt.isAbstract(f)&&v){const{start:w,end:E}=$D(v,s);r.push({...f,points:p,start:w,end:E})}else if(pt.isAbstract(f)){let w={...f,points:p};delete w.start,delete w.end,r.push(w)}else r.push({...f,points:p})}),r},EX=(e,t,n,r)=>{let i,o;const s=qe(e);let a=[];const f=s.length===1,h=s[0],d=h&&O.findPath(e,h),p=h&&vc(h).length;t.forEach((v,w)=>{if(i=QD(v),f&&r!==ru.duplicate){if(v.isRoot){i=fU(e,i);const{width:E,height:y}=JC(i,h);i.width=E,i.height=y}pt.isAbstract(i)&&(i.start=i.start+p,i.end=i.end+p),o=[...d,p+w]}else{const E=[n[0]+v.points[0][0],n[1]+v.points[0][1]];if(i.points=[E],pt.isAbstract(v)&&(i=W5(i)),!v.isRoot){i=hU(e,i);const{width:y,height:S}=JC(i);i.width=y,i.height=S}o=[e.children.length]}a.push(i),Ve.insertNode(e,i,o)}),Ve.addSelectionWithTemporaryElements(e,a)},PX=(e,t,n)=>{const{width:r,height:i}=f3(!1,qt.isMind(t),Za(n)),o=h3(n,Math.max(r,uU(n)),i,{});Ve.insertNode(e,o,A4(e,t)),Ve.addSelectionWithTemporaryElements(e,[o])},JC=(e,t)=>f3(qt.isMind(e),t&&qt.isMind(t)||!1,e.data.topic,e.manualWidth),SX=e=>{const t=e;let n;const{getDeletedFragment:r,insertFragment:i,buildFragment:o,deleteFragment:s}=t;return t.getDeletedFragment=a=>{const f=vy(t);if(f.length){n=xg(f).reverse();const h=zD(t,n);Or.setAbstractsByRefs(t,h);const d=fT(t,f);Or.setRightNodeCountByRefs(t,d);const p=xg(f);a.push(...p)}return r(a)},t.deleteFragment=a=>{if(s(a),n){const f=DX(t,n);f&&Xf(t,f),n=null}},t.buildFragment=(a,f,h,d)=>{const p=vy(t,d),v=xg(p);if(v.length){const w=xX(t,v,f?[f.x,f.y]:[0,0]),y={text:rS(p),type:Wa.elements,elements:w};a=$v(a,y)}return o(a,f,h,d)},t.insertFragment=(a,f,h)=>{var d,p;if((d=a==null?void 0:a.elements)!=null&&d.length){const v=(p=a.elements)==null?void 0:p.filter(w=>Ie.isMindElement(t,w));v&&v.length>0&&EX(t,v,f,h)}if(a!=null&&a.text){const v=vy(t);if(v.length===1){PX(t,v[0],Za(a.text));return}}i(a,f,h)},t},DX=(e,t)=>{let n;const r=t[0],i=O.findPath(e,r);let o=i;if(mt.hasPrevious(i)&&(o=mt.previous(i)),pt.isAbstract(r)){const h=Ie.getParent(r);t.includes(h.children[r.start])||(n=h.children[r.start])}try{n||(n=Vt.get(e,o))}catch{}const s=t[0],a=Ie.findParent(s),f=t.every(h=>Ie.findParent(h)===a);return a&&f&&!n&&(n=a),n},TX=e=>{const t=e;return t.renderEmoji=(n,r)=>{throw new Error("No implementation for renderEmoji method.")},t},AX=e=>!(!e.data||!e.data.topic),BX=e=>!(Vo(e.width)||Vo(e.height)),RX=e=>{const t={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=t);else{const n={topic:t};e.data=n}},MX=e=>{Vo(e.width)&&(e.width=56),Vo(e.height)&&(e.width=20)},CT=e=>{const t=e,{drawElement:n,dblClick:r,isRectangleHit:i,isHit:o,getRectangle:s,isMovable:a,isRecursion:f,isAlign:h,isImageBindingAllowed:d,canAddToGroup:p,canSetZIndex:v,isExpanded:w,getOneHitElement:E,normalizeElement:y}=t;return t.normalizeElement=S=>{qt.isMind(S.element)&&hi(S.element,A=>{AX(A)||RX(A),BX(A)||MX(A)}),y(S)},t.drawElement=S=>qt.isMind(S.element)?iX:Ie.isMindElement(t,S.element)?yT:n(S),t.applyTheme=S=>{const A=S,B=!O.isBoard(S)&&((A==null?void 0:A.branchColor)||(A==null?void 0:A.fill)||(A==null?void 0:A.strokeColor));if(qt.isMind(S)&&B){const I=O.findPath(t,S);Ve.setNode(t,{fill:null,strokeColor:null,branchColor:null},I)}},t.getRectangle=S=>Ie.isMindElement(t,S)?(pn.hasMounted(S)||console.error("mind element has not been mounted"),Un(Ie.getNode(S))):s(S),t.canAddToGroup=S=>Ie.isMindElement(t,S)&&!S.isRoot?!1:p(S),t.canSetZIndex=S=>Ie.isMindElement(t,S)&&!S.isRoot?!1:v(S),t.isRecursion=S=>Ie.isMindElement(t,S)&&S.isCollapsed?!1:f(S),t.isRectangleHit=(S,A)=>{if(Ie.isMindElement(t,S)){const B=Un(Ie.getNode(S));return R.isHit(R.getRectangleByPoints([A.anchor,A.focus]),B)}return i(S,A)},t.isHit=(S,A,B)=>{if(Ie.isMindElement(t,S)){const I=Un(Ie.getNode(S));return R.isHit(R.getRectangleByPoints([A,A]),I)}return o(S,A,B)},t.getOneHitElement=S=>S.every(B=>Ie.isMindElement(t,B))?S[0]:E(S),t.isMovable=S=>qt.isMind(S)&&S.isRoot?!0:a(S),t.isImageBindingAllowed=S=>Ie.isMindElement(t,S)?!0:d(S),t.isAlign=S=>qt.isMind(S)&&S.isRoot?!0:h(S),t.isExpanded=S=>Ie.isMindElement(t,S)&&!qt.isMind(S)?!S.isCollapsed:w(S),t.dblClick=S=>{if(O.isReadonly(t)){r(S);return}const A=bt(t,Ot(t,S.x,S.y));t.children.filter(B=>qt.isMind(B)).forEach(B=>{hi(B,I=>{!O.hasBeenTextEditing(t)&&JD(t,A,I)&&C4(I)},Uf(t))}),!O.hasBeenTextEditing(t)&&r(S)},TX(vX(CX(mX(pX(SX(fX(aX(cX(uX(sX(t)))))))))))};var xy={exports:{}},ex;function bX(){return ex||(ex=1,function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(t,n){t(function(){var r={};r.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},r.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var i=Object.prototype.hasOwnProperty,o;r.FALLBACK_PHONE="UnknownPhone",r.FALLBACK_TABLET="UnknownTablet",r.FALLBACK_MOBILE="UnknownMobile",o="isArray"in Array?Array.isArray:function(p){return Object.prototype.toString.call(p)==="[object Array]"};function s(p,v){return p!=null&&v!=null&&p.toLowerCase()===v.toLowerCase()}function a(p,v){var w,E,y=p.length;if(!y||!v)return!1;for(w=v.toLowerCase(),E=0;E<y;++E)if(w===p[E].toLowerCase())return!0;return!1}function f(p){for(var v in p)i.call(p,v)&&(p[v]=new RegExp(p[v],"i"))}function h(p){return(p||"").substr(0,500)}(function(){var v,w,E,y,S,A,B=r.mobileDetectRules;for(v in B.props)if(i.call(B.props,v)){for(w=B.props[v],o(w)||(w=[w]),S=w.length,y=0;y<S;++y)E=w[y],A=E.indexOf("[VER]"),A>=0&&(E=E.substring(0,A)+"([\\w._\\+]+)"+E.substring(A+5)),w[y]=new RegExp(E,"i");B.props[v]=w}f(B.oss),f(B.phones),f(B.tablets),f(B.uas),f(B.utils),B.oss0={WindowsPhoneOS:B.oss.WindowsPhoneOS,WindowsMobileOS:B.oss.WindowsMobileOS}})(),r.findMatch=function(p,v){for(var w in p)if(i.call(p,w)&&p[w].test(v))return w;return null},r.findMatches=function(p,v){var w=[];for(var E in p)i.call(p,E)&&p[E].test(v)&&w.push(E);return w},r.getVersionStr=function(p,v){var w=r.mobileDetectRules.props,E,y,S,A;if(i.call(w,p)){for(E=w[p],S=E.length,y=0;y<S;++y)if(A=E[y].exec(v),A!==null)return A[1]}return null},r.getVersion=function(p,v){var w=r.getVersionStr(p,v);return w?r.prepareVersionNo(w):NaN},r.prepareVersionNo=function(p){var v;return v=p.split(/[a-z._ \/\-]/i),v.length===1&&(p=v[0]),v.length>1&&(p=v[0]+".",v.shift(),p+=v.join("")),Number(p)},r.isMobileFallback=function(p){return r.detectMobileBrowsers.fullPattern.test(p)||r.detectMobileBrowsers.shortPattern.test(p.substr(0,4))},r.isTabletFallback=function(p){return r.detectMobileBrowsers.tabletPattern.test(p)},r.prepareDetectionCache=function(p,v,w){if(p.mobile===n){var E,y,S;if(y=r.findMatch(r.mobileDetectRules.tablets,v),y){p.mobile=p.tablet=y,p.phone=null;return}if(E=r.findMatch(r.mobileDetectRules.phones,v),E){p.mobile=p.phone=E,p.tablet=null;return}r.isMobileFallback(v)?(S=d.isPhoneSized(w),S===n?(p.mobile=r.FALLBACK_MOBILE,p.tablet=p.phone=null):S?(p.mobile=p.phone=r.FALLBACK_PHONE,p.tablet=null):(p.mobile=p.tablet=r.FALLBACK_TABLET,p.phone=null)):r.isTabletFallback(v)?(p.mobile=p.tablet=r.FALLBACK_TABLET,p.phone=null):p.mobile=p.tablet=p.phone=null}},r.mobileGrade=function(p){var v=p.mobile()!==null;return p.os("iOS")&&p.version("iPad")>=4.3||p.os("iOS")&&p.version("iPhone")>=3.1||p.os("iOS")&&p.version("iPod")>=3.1||p.version("Android")>2.1&&p.is("Webkit")||p.version("Windows Phone OS")>=7||p.is("BlackBerry")&&p.version("BlackBerry")>=6||p.match("Playbook.*Tablet")||p.version("webOS")>=1.4&&p.match("Palm|Pre|Pixi")||p.match("hp.*TouchPad")||p.is("Firefox")&&p.version("Firefox")>=12||p.is("Chrome")&&p.is("AndroidOS")&&p.version("Android")>=4||p.is("Skyfire")&&p.version("Skyfire")>=4.1&&p.is("AndroidOS")&&p.version("Android")>=2.3||p.is("Opera")&&p.version("Opera Mobi")>11&&p.is("AndroidOS")||p.is("MeeGoOS")||p.is("Tizen")||p.is("Dolfin")&&p.version("Bada")>=2||(p.is("UC Browser")||p.is("Dolfin"))&&p.version("Android")>=2.3||p.match("Kindle Fire")||p.is("Kindle")&&p.version("Kindle")>=3||p.is("AndroidOS")&&p.is("NookTablet")||p.version("Chrome")>=11&&!v||p.version("Safari")>=5&&!v||p.version("Firefox")>=4&&!v||p.version("MSIE")>=7&&!v||p.version("Opera")>=10&&!v?"A":p.os("iOS")&&p.version("iPad")<4.3||p.os("iOS")&&p.version("iPhone")<3.1||p.os("iOS")&&p.version("iPod")<3.1||p.is("Blackberry")&&p.version("BlackBerry")>=5&&p.version("BlackBerry")<6||p.version("Opera Mini")>=5&&p.version("Opera Mini")<=6.5&&(p.version("Android")>=2.3||p.is("iOS"))||p.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||p.version("Opera Mobi")>=11&&p.is("SymbianOS")?"B":(p.version("BlackBerry")<5||p.match("MSIEMobile|Windows CE.*Mobile")||p.version("Windows Mobile")<=5.2,"C")},r.detectOS=function(p){return r.findMatch(r.mobileDetectRules.oss0,p)||r.findMatch(r.mobileDetectRules.oss,p)},r.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function d(p,v){this.ua=h(p),this._cache={},this.maxPhoneWidth=v||600}return d.prototype={constructor:d,mobile:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===n&&(this._cache.userAgent=r.findMatch(r.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===n&&(this._cache.userAgents=r.findMatches(r.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===n&&(this._cache.os=r.detectOS(this.ua)),this._cache.os},version:function(p){return r.getVersion(p,this.ua)},versionStr:function(p){return r.getVersionStr(p,this.ua)},is:function(p){return a(this.userAgents(),p)||s(p,this.os())||s(p,this.phone())||s(p,this.tablet())||a(r.findMatches(r.mobileDetectRules.utils,this.ua),p)},match:function(p){return p instanceof RegExp||(p=new RegExp(p,"i")),p.test(this.ua)},isPhoneSized:function(p){return d.isPhoneSized(p||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===n&&(this._cache.grade=r.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?d.isPhoneSized=function(p){return p<0?n:r.getDeviceSmallerSide()<=p}:d.isPhoneSized=function(){},d._impl=r,d.version="1.4.5 2021-03-13",d})})(function(t){if(e.exports)return function(n){e.exports=n()};if(typeof window<"u")return function(n){window.MobileDetect=n()};throw new Error("unknown environment")}())}(xy)),xy.exports}var OX=bX();const IX=uc(OX),tx=e=>b.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),FX=e=>{const t=e;return e.setPluginOptions(s3,{emojiPadding:0,spaceBetweenEmojis:4}),t.renderEmoji=(n,r)=>{const i=document.createElement("span");n.appendChild(i);const o=Av.createRoot(i);o.render(b.jsx(tx,{...r}));let s={...r};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:f=>{s={...s,...f},o.render(b.jsx(tx,{...s}))}}},t},nx=e=>b.jsx("div",{children:b.jsx("img",{src:e.imageItem.url,draggable:"false",width:"100%"})});var qg=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(qg||{});const M4={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},b4={json:"application/json",drawnix:"application/vnd.drawnix+json",...M4},kX={drawnix:1},O4=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),LX=O4?Promise.resolve().then(function(){return $X}):Promise.resolve().then(function(){return KX});async function _X(...e){return(await LX).default(...e)}O4?Promise.resolve().then(function(){return zX}):Promise.resolve().then(function(){return qX});const NX=O4?Promise.resolve().then(function(){return UX}):Promise.resolve().then(function(){return QX});async function HX(...e){return(await NX).default(...e)}const GX=async e=>{const t=await e.getFile();return t.handle=e,t};var WX=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((i,o)=>{t[o]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(s=>{t[o].accept[s]=i.extensions||[]}):t[o].accept["*/*"]=i.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(GX));return e[0].multiple?r:r[0]},$X={__proto__:null,default:WX};function Tm(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return Tm=function(n){this.s=n,this.n=n.next},Tm.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Promise.resolve({value:n,done:!0}):t(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Promise.reject(n):t(r.apply(this.s,arguments))}},new Tm(e)}const xT=async(e,t,n=e.name,r)=>{const i=[],o=[];var s,a=!1,f=!1;try{for(var h,d=function(p){var v,w,E,y=2;for(typeof Symbol<"u"&&(w=Symbol.asyncIterator,E=Symbol.iterator);y--;){if(w&&(v=p[w])!=null)return v.call(p);if(E&&(v=p[E])!=null)return new Tm(v.call(p));w="@@asyncIterator",E="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());a=!(h=await d.next()).done;a=!1){const p=h.value,v=`${n}/${p.name}`;p.kind==="file"?o.push(p.getFile().then(w=>(w.directoryHandle=e,w.handle=p,Object.defineProperty(w,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>v})))):p.kind!=="directory"||!t||r&&r(p)||i.push(xT(p,t,v,r))}}catch(p){f=!0,s=p}finally{try{a&&d.return!=null&&await d.return()}finally{if(f)throw s}}return[...(await Promise.all(i)).flat(),...await Promise.all(o)]};var jX=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:xT(t,e.recursive,void 0,e.skipDirectory)},zX={__proto__:null,default:jX},VX=async(e,t=[{}],n=null,r=!1,i=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const o=[];let s=null;if(e instanceof Blob&&e.type?s=e.type:e.headers&&e.headers.get("content-type")&&(s=e.headers.get("content-type")),t.forEach((h,d)=>{o[d]={description:h.description||"Files",accept:{}},h.mimeTypes?(d===0&&s&&h.mimeTypes.push(s),h.mimeTypes.map(p=>{o[d].accept[p]=h.extensions||[]})):s?o[d].accept[s]=h.extensions||[]:o[d].accept["*/*"]=h.extensions||[]}),n)try{await n.getFile()}catch(h){if(n=null,r)throw h}const a=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:o,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&i&&i(a);const f=await a.createWritable();return"stream"in e?(await e.stream().pipeTo(f),a):"body"in e?(await e.body.pipeTo(f),a):(await f.write(await e),await f.close(),a)},UX={__proto__:null,default:VX},XX=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const r=document.createElement("input");r.type="file";const i=[...e.map(f=>f.mimeTypes||[]),...e.map(f=>f.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=i||"",r.style.display="none",document.body.append(r);const o=f=>{typeof s=="function"&&s(),t(f)},s=e[0].legacySetup&&e[0].legacySetup(o,()=>s(n),r),a=()=>{window.removeEventListener("focus",a),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",a)}),r.addEventListener("change",()=>{window.removeEventListener("focus",a),r.remove(),o(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),KX={__proto__:null,default:XX},YX=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const i=s=>{typeof o=="function"&&o(),t(s)},o=e[0].legacySetup&&e[0].legacySetup(i,()=>o(n),r);r.addEventListener("change",()=>{let s=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(s=s.filter(a=>a.webkitRelativePath.split("/").every(f=>!e[0].skipDirectory({name:f,kind:"directory"})))):s=s.filter(a=>a.webkitRelativePath.split("/").length===2),i(s)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),qX={__proto__:null,default:YX},ZX=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let r=e;"body"in e&&(r=await async function(s,a){const f=s.getReader(),h=new ReadableStream({start:v=>async function w(){return f.read().then(({done:E,value:y})=>{if(!E)return v.enqueue(y),w();v.close()})}()}),d=new Response(h),p=await d.blob();return f.releaseLock(),new Blob([p],{type:a})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await r);const i=()=>{typeof o=="function"&&o()},o=t.legacySetup&&t.legacySetup(i,()=>o(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),i()}),n.click(),null},QX={__proto__:null,default:ZX};const ET=e=>{var r,i;const t=(r=e.extensions)==null?void 0:r.reduce((o,s)=>(o.push(b4[s]),o),[]),n=(i=e.extensions)==null?void 0:i.reduce((o,s)=>s==="jpg"?o.concat(".jpg",".jpeg"):o.concat(`.${s}`),[]);return _X({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1})},JX=(e,t)=>HX(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`]},t.fileHandle);var I4=(e=>(e.drawnix="drawnix",e))(I4||{});const eK=()=>new Date().getTime().toString(),PT=async(e,t=eK())=>{const n=rK(e),r=window.top;if(r._saveCurrentArticle){r._saveCurrentArticle(n);return}const i=new Blob([n],{type:b4.drawnix});return{fileHandle:await JX(i,{name:t,extension:"drawnix",description:"Drawnix file"})}},tK=async e=>{const t=await ET({description:"Drawnix files"});return iK(e,await uK(t))},nK=e=>e&&e.type===I4.drawnix&&Array.isArray(e.elements)&&typeof e.viewport=="object",rK=e=>{const t={type:I4.drawnix,version:kX.drawnix,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(t,null,2)},iK=async(e,t)=>{const n=await aK(t);let r;try{if(r=JSON.parse(n),nK(r))return r;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},oK=(e,t,n)=>new File([e],n||"",{type:t}),sK=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{var o;if(!((o=i.target)!=null&&o.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),uK=async e=>{var t;return e.type||(t=e==null?void 0:e.name)!=null&&t.endsWith(".drawnix")&&(e=oK(await sK(e),b4.drawnix,e.name)),e},aK=async e=>{let t;return"text"in Blob?t=await e.text():t=await new Promise(n=>{const r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),t},lK=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),cK=e=>!!e&&Object.values(M4).includes(e),fK=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),hK=(e,t,n)=>{const r=e.width>n?n:e.width,i=r/e.width*e.height;return{url:t,width:r,height:i}},ST=async(e,t)=>{const n=qe(e)[0]||No(e),r=n?240:400,i=await lK(t),o=await fK(i),s=hK(o,i,r);n&&Ie.isMindElement(e,n)?Or.setImage(e,n,s):$i.insertImage(e,s)},dK=e=>{const t=e,{insertFragment:n}=t;return t.insertFragment=(r,i,o)=>{var s;if((s=r==null?void 0:r.files)!=null&&s.length&&cK(r.files[0].type)){const a=r.files[0];ST(e,a);return}n(r,i,o)},e},DT=e=>{const t=e;return t.renderImage=(n,r)=>{const i=Av.createRoot(n);i.render(b.jsx(nx,{...r}));let o={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:a=>{o={...o,...a},i.render(b.jsx(nx,{...o}))}}},dK(e)},uu=Pt.forwardRef(({children:e,padding:t,className:n,style:r},i)=>b.jsx("div",{className:On("island",n),style:{"--padding":t,...r},ref:i,children:e})),gK=W.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>b.jsx("div",{className:On("stack stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...o},ref:s,children:e})),pK=W.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>b.jsx("div",{className:On("stack stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...o},ref:s,children:e})),Ds={Row:gK,Col:pK};class mK extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}const vK=(e,t,n,r,i)=>{e.children=n,e.viewport=r||{zoom:1},e.theme={themeColorMode:lr.default},t.update(e.children,{board:e,parent:e,parentG:O.getElementHost(e)}),Bn.fitViewport(e)},yK=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,wK=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(i){if(e==null||e(i),!n||!(i!=null&&i.defaultPrevented))return t==null?void 0:t(i)},CK=e=>{const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let i=r.length;const o=new Uint8Array(i);for(;i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})},xK=(e,t={})=>xI(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...t});function EK(e,t){const n=document.createElement("a"),r=window.URL.createObjectURL(e);n.href=r,n.download=t,document.body.append(n),n.click(),window.URL.revokeObjectURL(r),n.remove()}const TT=(e,t)=>{const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},rx=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),Wm||BO?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),mr=Pt.forwardRef((e,t)=>{const{id:n}={id:"drawnix"},r=Pt.useRef(null);Pt.useImperativeHandle(t,()=>r.current);const i=`tool-icon_size_${e.size||"medium"}`,[o,s]=W.useState(!1),a=W.useRef(!0),f=async d=>{var v;const p="onClick"in e&&((v=e.onClick)==null?void 0:v.call(e,d));if(yK(p))try{s(!0),await p}catch(w){if(w instanceof mK)console.warn(w);else throw w}finally{a.current&&s(!1)}};W.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]);const h=W.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const d=e.type==="icon"?"button":e.type;return b.jsxs("button",{className:On("tool-icon_type_button",i,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:d,onClick:f,onPointerDown:p=>{var v;(v=e.onPointerDown)==null||v.call(e,{pointerType:p.pointerType||null})},onPointerUp:p=>{var v;(v=e.onPointerUp)==null||v.call(e,{pointerType:p.pointerType||null})},ref:r,disabled:o||!!e.disabled,children:[(e.icon||e.label)&&b.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&b.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&b.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&b.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return b.jsxs("label",{className:On("tool-icon",e.className),title:e.title,onPointerDown:d=>{var p;h.current=d.pointerType||null,(p=e.onPointerDown)==null||p.call(e,{pointerType:d.pointerType||null})},onPointerUp:d=>{var p;(p=e.onPointerUp)==null||p.call(e,{pointerType:d.pointerType||null}),requestAnimationFrame(()=>{h.current=null})},children:[b.jsx("input",{className:`tool-icon_type_radio ${i}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${n}-${e.id}`,onChange:()=>{var d;(d=e.onChange)==null||d.call(e,{pointerType:h.current})},checked:e.checked,ref:r}),b.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&b.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});mr.displayName="ToolButton";const Kt=e=>e,PK=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),SK=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),DK=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),TK=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),AK=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),BK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),RK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),MK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:b.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),bK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),OK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),IK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),FK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),kK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),LK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),_K=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),NK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),HK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b.jsxs("g",{strokeWidth:"1.5",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),b.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),b.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),b.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),GK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),b.jsx("path",{d:"M15 8h.01"}),b.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),b.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),b.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),b.jsx("path",{d:"M19 16v6"}),b.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),WK=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:b.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),$K=Kt(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:b.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),jK=Kt(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:b.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),zK=Kt(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:b.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),VK=Kt(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:b.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),UK=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:b.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[b.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),b.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),XK=Kt(b.jsx("svg",{viewBox:"0 0 32 32",className:"no-color-icon",children:b.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[b.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),b.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),KK=Kt(b.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("polyline",{points:"20 6 9 17 4 12"})})),YK=Kt(b.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:b.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[b.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),b.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),qK=Kt(b.jsx("svg",{viewBox:"0 0 24 24",children:b.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:b.jsxs("g",{id:"Group",children:[b.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),b.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),ZK=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[b.jsx("path",{d:"M-18-19h60v40h-60z"}),b.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),QK=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:b.jsx("g",{fill:"currentColor",children:b.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),JK=Kt(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:b.jsxs("g",{fill:"currentColor",children:[b.jsx("rect",{rx:"1",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),eY=({currentColor:e})=>b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:b.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[b.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),b.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),tY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:b.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),nY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:b.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),AT=Kt(b.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:b.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),rY=Kt(b.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{strokeWidth:"1.25",children:[b.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),b.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),iY=Kt(b.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),oY=Kt(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),BT=Kt(b.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{strokeWidth:1.8,fill:"none",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M12 3l-4 7h8z"}),b.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),b.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),sY=Kt(b.jsx("svg",{stroke:"currentColor",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{stroke:"none",fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})})),uY=Kt(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M14.85,2.5 C15.4851275,2.5 16,3.01487254 16,3.65 L16,12.35 C16,12.9851275 15.4851275,13.5 14.85,13.5 L1.15,13.5 C0.514872538,13.5 0,12.9851275 0,12.35 L0,3.65 C0,3.01487254 0.514872538,2.5 1.15,2.5 L14.85,2.5 Z M14.85,3.7 L1.15,3.7 C1.17735931,3.7 1.2,3.72264069 1.2,3.75 L1.2,12.25 C1.2,12.2773593 1.17735931,12.3 1.15,12.3 L14.85,12.3 C14.8226407,12.3 14.8,12.2773593 14.8,12.25 L14.8,3.75 C14.8,3.72264069 14.8226407,3.7 14.85,3.7 Z M3.5,10.5 L3.5,5.5 L5.25,5.5 L7,7.8 L8.75,5.5 L10.5,5.5 L10.5,10.5 L8.75,10.5 L8.75,7.5 L7,9.8 L5.25,7.5 L5.25,10.5 L3.5,10.5 Z M12.5,10.5 L11,8.5 L12.5,8.5 L12.5,5.5 L11,5.5 L12.5,5.5 L12.5,8.5 L14,8.5 L12.5,10.5 Z"})})})),aY=[{icon:RK,title:"Rectangle",pointer:gt.rectangle},{icon:bK,title:"Ellipse",pointer:gt.ellipse},{icon:OK,title:"Triangle",pointer:gt.triangle},{icon:MK,title:"Terminal",pointer:ht.terminal},{icon:IK,title:"Diamond",pointer:gt.diamond},{icon:FK,title:"Parallelogram",pointer:gt.parallelogram},{icon:kK,title:"RoundRectangle",pointer:gt.roundRectangle}],lY=TT(aY,5),cY=({onPointerUp:e})=>{const t=di();return b.jsx(uu,{padding:1,children:b.jsx(Ds.Col,{gap:1,children:lY.map((n,r)=>b.jsx(Ds.Row,{gap:1,children:n.map((i,o)=>b.jsx(mr,{className:On({fillable:!1}),type:"icon",size:"small",visible:!0,icon:i.icon,title:i.title,"aria-label":i.title,onPointerDown:()=>{Ul(t,Cs.dnd),Bn.updatePointerType(t,i.pointer)},onPointerUp:()=>{Ul(t,Cs.drawing),e(i.pointer)}},o))},r))})})},fY=[{icon:LK,title:"Straight Arrow Line",pointer:_n.straight},{icon:_K,title:"Elbow Arrow Line",pointer:_n.elbow},{icon:NK,title:"Curve Arrow Line",pointer:_n.curve}],hY=({onPointerUp:e})=>{const t=di();return b.jsx(uu,{padding:1,children:b.jsx(Ds.Row,{gap:1,children:fY.map((n,r)=>b.jsx(mr,{className:On({fillable:!1}),type:"icon",size:"small",visible:!0,icon:n.icon,title:n.title,"aria-label":n.title,onPointerDown:()=>{Ul(t,Cs.drawing),Bn.updatePointerType(t,n.pointer)},onPointerUp:()=>{e(n.pointer)}},r))})})};function g3(){return typeof window<"u"}function yc(e){return RT(e)?(e.nodeName||"").toLowerCase():"#document"}function Wo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Yu(e){var t;return(t=(RT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function RT(e){return g3()?e instanceof Node||e instanceof Wo(e).Node:!1}function cr(e){return g3()?e instanceof Element||e instanceof Wo(e).Element:!1}function Kr(e){return g3()?e instanceof HTMLElement||e instanceof Wo(e).HTMLElement:!1}function j5(e){return!g3()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Wo(e).ShadowRoot}function yp(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ts(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function dY(e){return["table","td","th"].includes(yc(e))}function p3(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function F4(e){const t=m3(),n=cr(e)?Ts(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function gY(e){let t=Va(e);for(;Kr(t)&&!sc(t);){if(F4(t))return t;if(p3(t))return null;t=Va(t)}return null}function m3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sc(e){return["html","body","#document"].includes(yc(e))}function Ts(e){return Wo(e).getComputedStyle(e)}function v3(e){return cr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Va(e){if(yc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||j5(e)&&e.host||Yu(e);return j5(t)?t.host:t}function MT(e){const t=Va(e);return sc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Kr(t)&&yp(t)?t:MT(t)}function Zl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=MT(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Wo(i);if(o){const a=z5(s);return t.concat(s,s.visualViewport||[],yp(i)?i:[],a&&n?Zl(a):[])}return t.concat(i,Zl(i,[],n))}function z5(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Cf(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function _o(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&j5(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function bT(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function OT(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function pY(e){return e.mozInputSource===0&&e.isTrusted?!0:V5()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function mY(e){return yY()?!1:!V5()&&e.width===0&&e.height===0||V5()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function vY(){return/apple/i.test(navigator.vendor)}function V5(){const e=/android/i;return e.test(bT())||e.test(OT())}function yY(){return OT().includes("jsdom/")}function ix(e,t){return["mouse","pen"].includes(e)}function wY(e){return"nativeEvent"in e}function CY(e){return e.matches("html,body")}function Zs(e){return(e==null?void 0:e.ownerDocument)||document}function Ey(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Ef(e){return"composedPath"in e?e.composedPath()[0]:e.target}const xY="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function IT(e){return Kr(e)&&e.matches(xY)}function Py(e){e.preventDefault(),e.stopPropagation()}function EY(e){return e?e.getAttribute("role")==="combobox"&&IT(e):!1}const pv=Math.min,Of=Math.max,mv=Math.round,um=Math.floor,$u=e=>({x:e,y:e}),PY={left:"right",right:"left",bottom:"top",top:"bottom"},SY={start:"end",end:"start"};function ox(e,t,n){return Of(e,pv(t,n))}function y3(e,t){return typeof e=="function"?e(t):e}function zf(e){return e.split("-")[0]}function w3(e){return e.split("-")[1]}function FT(e){return e==="x"?"y":"x"}function kT(e){return e==="y"?"height":"width"}function Kl(e){return["top","bottom"].includes(zf(e))?"y":"x"}function LT(e){return FT(Kl(e))}function DY(e,t,n){n===void 0&&(n=!1);const r=w3(e),i=LT(e),o=kT(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=vv(s)),[s,vv(s)]}function TY(e){const t=vv(e);return[U5(e),t,U5(t)]}function U5(e){return e.replace(/start|end/g,t=>SY[t])}function AY(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function BY(e,t,n,r){const i=w3(e);let o=AY(zf(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(U5)))),o}function vv(e){return e.replace(/left|right|bottom|top/g,t=>PY[t])}function RY(e){return{top:0,right:0,bottom:0,left:0,...e}}function MY(e){return typeof e!="number"?RY(e):{top:e,right:e,bottom:e,left:e}}function yv(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var bY=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],wv=bY.join(","),_T=typeof Element>"u",p0=_T?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Cv=!_T&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},xv=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",s=o||n&&t&&e(t.parentNode);return s},OY=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},IY=function(t,n,r){if(xv(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(wv));return n&&p0.call(t,wv)&&i.unshift(t),i=i.filter(r),i},FY=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!xv(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),f=a.length?a:s.children,h=e(f,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:s,candidates:h})}else{var d=p0.call(s,wv);d&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var p=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),v=!xv(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(p&&v){var w=e(p===!0?s.children:p.children,!0,r);r.flatten?i.push.apply(i,w):i.push({scopeParent:s,candidates:w})}else o.unshift.apply(o,s.children)}}return i},NT=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},HT=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||OY(t))&&!NT(t)?0:t.tabIndex},kY=function(t,n){var r=HT(t);return r<0&&n&&!NT(t)?0:r},LY=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},GT=function(t){return t.tagName==="INPUT"},_Y=function(t){return GT(t)&&t.type==="hidden"},NY=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},HY=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},GY=function(t){if(!t.name)return!0;var n=t.form||Cv(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=HY(i,t.form);return!o||o===t},WY=function(t){return GT(t)&&t.type==="radio"},$Y=function(t){return WY(t)&&!GY(t)},jY=function(t){var n,r=t&&Cv(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var s,a,f;for(o=!!((s=i)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(f=t.ownerDocument)!==null&&f!==void 0&&f.contains(t));!o&&i;){var h,d,p;r=Cv(i),i=(h=r)===null||h===void 0?void 0:h.host,o=!!((d=i)!==null&&d!==void 0&&(p=d.ownerDocument)!==null&&p!==void 0&&p.contains(i))}}return o},sx=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},zY=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=p0.call(t,"details>summary:first-of-type"),s=o?t.parentElement:t;if(p0.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var f=t.parentElement,h=Cv(t);if(f&&!f.shadowRoot&&i(f)===!0)return sx(t);t.assignedSlot?t=t.assignedSlot:!f&&h!==t.ownerDocument?t=h.host:t=f}t=a}if(jY(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return sx(t);return!1},VY=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return p0.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},UY=function(t,n){return!(n.disabled||xv(n)||_Y(n)||zY(n,t)||NY(n)||VY(n))},X5=function(t,n){return!($Y(n)||HT(n)<0||!UY(t,n))},XY=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},KY=function e(t){var n=[],r=[];return t.forEach(function(i,o){var s=!!i.scopeParent,a=s?i.scopeParent:i,f=kY(a,s),h=s?e(i.candidates):a;f===0?s?n.push.apply(n,h):n.push(a):r.push({documentOrder:o,tabIndex:f,item:i,isScope:s,content:h})}),r.sort(LY).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},C3=function(t,n){n=n||{};var r;return n.getShadowRoot?r=FY([t],n.includeContainer,{filter:X5.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:XY}):r=IY(t,n.includeContainer,X5.bind(null,n)),KY(r)},YY=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return p0.call(t,wv)===!1?!1:X5(n,t)};function ux(e,t,n){let{reference:r,floating:i}=e;const o=Kl(t),s=LT(t),a=kT(s),f=zf(t),h=o==="y",d=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[a]/2-i[a]/2;let w;switch(f){case"top":w={x:d,y:r.y-i.height};break;case"bottom":w={x:d,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:p};break;case"left":w={x:r.x-i.width,y:p};break;default:w={x:r.x,y:r.y}}switch(w3(t)){case"start":w[s]-=v*(n&&h?-1:1);break;case"end":w[s]+=v*(n&&h?-1:1);break}return w}const qY=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),f=await(s.isRTL==null?void 0:s.isRTL(t));let h=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:p}=ux(h,r,f),v=r,w={},E=0;for(let y=0;y<a.length;y++){const{name:S,fn:A}=a[y],{x:B,y:I,data:_,reset:L}=await A({x:d,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:w,rects:h,platform:s,elements:{reference:e,floating:t}});d=B??d,p=I??p,w={...w,[S]:{...w[S],..._}},L&&E<=50&&(E++,typeof L=="object"&&(L.placement&&(v=L.placement),L.rects&&(h=L.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):L.rects),{x:d,y:p}=ux(h,v,f)),y=-1)}return{x:d,y:p,placement:v,strategy:i,middlewareData:w}};async function WT(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:f}=e,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:v=!1,padding:w=0}=y3(t,e),E=MY(w),S=a[v?p==="floating"?"reference":"floating":p],A=yv(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(S)))==null||n?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:h,rootBoundary:d,strategy:f})),B=p==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(I))?await(o.getScale==null?void 0:o.getScale(I))||{x:1,y:1}:{x:1,y:1},L=yv(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:B,offsetParent:I,strategy:f}):B);return{top:(A.top-L.top+E.top)/_.y,bottom:(L.bottom-A.bottom+E.bottom)/_.y,left:(A.left-L.left+E.left)/_.x,right:(L.right-A.right+E.right)/_.x}}const ZY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:f,elements:h}=t,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:y=!0,...S}=y3(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const A=zf(i),B=Kl(a),I=zf(a)===a,_=await(f.isRTL==null?void 0:f.isRTL(h.floating)),L=v||(I||!y?[vv(a)]:TY(a)),j=E!=="none";!v&&j&&L.push(...BY(a,y,E,_));const z=[a,...L],J=await WT(t,S),ae=[];let ne=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&ae.push(J[A]),p){const me=DY(i,s,_);ae.push(J[me[0]],J[me[1]])}if(ne=[...ne,{placement:i,overflows:ae}],!ae.every(me=>me<=0)){var Pe,oe;const me=(((Pe=o.flip)==null?void 0:Pe.index)||0)+1,ye=z[me];if(ye&&(!(p==="alignment"?B!==Kl(ye):!1)||ne.every(ge=>ge.overflows[0]>0&&Kl(ge.placement)===B)))return{data:{index:me,overflows:ne},reset:{placement:ye}};let Fe=(oe=ne.filter(Te=>Te.overflows[0]<=0).sort((Te,ge)=>Te.overflows[1]-ge.overflows[1])[0])==null?void 0:oe.placement;if(!Fe)switch(w){case"bestFit":{var ce;const Te=(ce=ne.filter(ge=>{if(j){const se=Kl(ge.placement);return se===B||se==="y"}return!0}).map(ge=>[ge.placement,ge.overflows.filter(se=>se>0).reduce((se,we)=>se+we,0)]).sort((ge,se)=>ge[1]-se[1])[0])==null?void 0:ce[0];Te&&(Fe=Te);break}case"initialPlacement":Fe=a;break}if(i!==Fe)return{reset:{placement:Fe}}}return{}}}};async function QY(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=zf(n),a=w3(n),f=Kl(n)==="y",h=["left","top"].includes(s)?-1:1,d=o&&f?-1:1,p=y3(t,e);let{mainAxis:v,crossAxis:w,alignmentAxis:E}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof E=="number"&&(w=a==="end"?E*-1:E),f?{x:w*d,y:v*h}:{x:v*h,y:w*d}}const JY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,f=await QY(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:o+f.y,data:{...f,placement:s}}}}},eq=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:S=>{let{x:A,y:B}=S;return{x:A,y:B}}},...f}=y3(e,t),h={x:n,y:r},d=await WT(t,f),p=Kl(zf(i)),v=FT(p);let w=h[v],E=h[p];if(o){const S=v==="y"?"top":"left",A=v==="y"?"bottom":"right",B=w+d[S],I=w-d[A];w=ox(B,w,I)}if(s){const S=p==="y"?"top":"left",A=p==="y"?"bottom":"right",B=E+d[S],I=E-d[A];E=ox(B,E,I)}const y=a.fn({...t,[v]:w,[p]:E});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[v]:o,[p]:s}}}}}};function $T(e){const t=Ts(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Kr(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=mv(n)!==o||mv(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function k4(e){return cr(e)?e:e.contextElement}function Jd(e){const t=k4(e);if(!Kr(t))return $u(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=$T(t);let s=(o?mv(n.width):n.width)/r,a=(o?mv(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const tq=$u(0);function jT(e){const t=Wo(e);return!m3()||!t.visualViewport?tq:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nq(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Wo(e)?!1:t}function Vf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=k4(e);let s=$u(1);t&&(r?cr(r)&&(s=Jd(r)):s=Jd(e));const a=nq(o,n,r)?jT(o):$u(0);let f=(i.left+a.x)/s.x,h=(i.top+a.y)/s.y,d=i.width/s.x,p=i.height/s.y;if(o){const v=Wo(o),w=r&&cr(r)?Wo(r):r;let E=v,y=z5(E);for(;y&&r&&w!==E;){const S=Jd(y),A=y.getBoundingClientRect(),B=Ts(y),I=A.left+(y.clientLeft+parseFloat(B.paddingLeft))*S.x,_=A.top+(y.clientTop+parseFloat(B.paddingTop))*S.y;f*=S.x,h*=S.y,d*=S.x,p*=S.y,f+=I,h+=_,E=Wo(y),y=z5(E)}}return yv({width:d,height:p,x:f,y:h})}function L4(e,t){const n=v3(e).scrollLeft;return t?t.left+n:Vf(Yu(e)).left+n}function zT(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:L4(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function rq(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=Yu(r),a=t?p3(t.floating):!1;if(r===s||a&&o)return n;let f={scrollLeft:0,scrollTop:0},h=$u(1);const d=$u(0),p=Kr(r);if((p||!p&&!o)&&((yc(r)!=="body"||yp(s))&&(f=v3(r)),Kr(r))){const w=Vf(r);h=Jd(r),d.x=w.x+r.clientLeft,d.y=w.y+r.clientTop}const v=s&&!p&&!o?zT(s,f,!0):$u(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-f.scrollLeft*h.x+d.x+v.x,y:n.y*h.y-f.scrollTop*h.y+d.y+v.y}}function iq(e){return Array.from(e.getClientRects())}function oq(e){const t=Yu(e),n=v3(e),r=e.ownerDocument.body,i=Of(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Of(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+L4(e);const a=-n.scrollTop;return Ts(r).direction==="rtl"&&(s+=Of(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function sq(e,t){const n=Wo(e),r=Yu(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,f=0;if(i){o=i.width,s=i.height;const h=m3();(!h||h&&t==="fixed")&&(a=i.offsetLeft,f=i.offsetTop)}return{width:o,height:s,x:a,y:f}}function uq(e,t){const n=Vf(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Kr(e)?Jd(e):$u(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,f=i*o.x,h=r*o.y;return{width:s,height:a,x:f,y:h}}function ax(e,t,n){let r;if(t==="viewport")r=sq(e,n);else if(t==="document")r=oq(Yu(e));else if(cr(t))r=uq(t,n);else{const i=jT(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return yv(r)}function VT(e,t){const n=Va(e);return n===t||!cr(n)||sc(n)?!1:Ts(n).position==="fixed"||VT(n,t)}function aq(e,t){const n=t.get(e);if(n)return n;let r=Zl(e,[],!1).filter(a=>cr(a)&&yc(a)!=="body"),i=null;const o=Ts(e).position==="fixed";let s=o?Va(e):e;for(;cr(s)&&!sc(s);){const a=Ts(s),f=F4(s);!f&&a.position==="fixed"&&(i=null),(o?!f&&!i:!f&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||yp(s)&&!f&&VT(e,s))?r=r.filter(d=>d!==s):i=a,s=Va(s)}return t.set(e,r),r}function lq(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?p3(t)?[]:aq(t,this._c):[].concat(n),r],a=s[0],f=s.reduce((h,d)=>{const p=ax(t,d,i);return h.top=Of(p.top,h.top),h.right=pv(p.right,h.right),h.bottom=pv(p.bottom,h.bottom),h.left=Of(p.left,h.left),h},ax(t,a,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function cq(e){const{width:t,height:n}=$T(e);return{width:t,height:n}}function fq(e,t,n){const r=Kr(t),i=Yu(t),o=n==="fixed",s=Vf(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const f=$u(0);function h(){f.x=L4(i)}if(r||!r&&!o)if((yc(t)!=="body"||yp(i))&&(a=v3(t)),r){const w=Vf(t,!0,o,t);f.x=w.x+t.clientLeft,f.y=w.y+t.clientTop}else i&&h();o&&!r&&i&&h();const d=i&&!r&&!o?zT(i,a):$u(0),p=s.left+a.scrollLeft-f.x-d.x,v=s.top+a.scrollTop-f.y-d.y;return{x:p,y:v,width:s.width,height:s.height}}function Sy(e){return Ts(e).position==="static"}function lx(e,t){if(!Kr(e)||Ts(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Yu(e)===n&&(n=n.ownerDocument.body),n}function UT(e,t){const n=Wo(e);if(p3(e))return n;if(!Kr(e)){let i=Va(e);for(;i&&!sc(i);){if(cr(i)&&!Sy(i))return i;i=Va(i)}return n}let r=lx(e,t);for(;r&&dY(r)&&Sy(r);)r=lx(r,t);return r&&sc(r)&&Sy(r)&&!F4(r)?n:r||gY(e)||n}const hq=async function(e){const t=this.getOffsetParent||UT,n=this.getDimensions,r=await n(e.floating);return{reference:fq(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function dq(e){return Ts(e).direction==="rtl"}const gq={convertOffsetParentRelativeRectToViewportRelativeRect:rq,getDocumentElement:Yu,getClippingRect:lq,getOffsetParent:UT,getElementRects:hq,getClientRects:iq,getDimensions:cq,getScale:Jd,isElement:cr,isRTL:dq};function XT(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pq(e,t){let n=null,r;const i=Yu(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,f){a===void 0&&(a=!1),f===void 0&&(f=1),o();const h=e.getBoundingClientRect(),{left:d,top:p,width:v,height:w}=h;if(a||t(),!v||!w)return;const E=um(p),y=um(i.clientWidth-(d+v)),S=um(i.clientHeight-(p+w)),A=um(d),I={rootMargin:-E+"px "+-y+"px "+-S+"px "+-A+"px",threshold:Of(0,pv(1,f))||1};let _=!0;function L(j){const z=j[0].intersectionRatio;if(z!==f){if(!_)return s();z?s(!1,z):r=setTimeout(()=>{s(!1,1e-7)},1e3)}z===1&&!XT(h,e.getBoundingClientRect())&&s(),_=!1}try{n=new IntersectionObserver(L,{...I,root:i.ownerDocument})}catch{n=new IntersectionObserver(L,I)}n.observe(e)}return s(!0),o}function mq(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,h=k4(e),d=i||o?[...h?Zl(h):[],...Zl(t)]:[];d.forEach(A=>{i&&A.addEventListener("scroll",n,{passive:!0}),o&&A.addEventListener("resize",n)});const p=h&&a?pq(h,n):null;let v=-1,w=null;s&&(w=new ResizeObserver(A=>{let[B]=A;B&&B.target===h&&w&&(w.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var I;(I=w)==null||I.observe(t)})),n()}),h&&!f&&w.observe(h),w.observe(t));let E,y=f?Vf(e):null;f&&S();function S(){const A=Vf(e);y&&!XT(y,A)&&n(),y=A,E=requestAnimationFrame(S)}return n(),()=>{var A;d.forEach(B=>{i&&B.removeEventListener("scroll",n),o&&B.removeEventListener("resize",n)}),p==null||p(),(A=w)==null||A.disconnect(),w=null,f&&cancelAnimationFrame(E)}}const vq=JY,yq=eq,wq=ZY,Cq=(e,t,n)=>{const r=new Map,i={platform:gq,...n},o={...i.platform,_c:r};return qY(e,t,{...i,platform:o})};var xq=typeof document<"u",Eq=function(){},Am=xq?W.useLayoutEffect:Eq;function Ev(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ev(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Ev(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function KT(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function cx(e,t){const n=KT(e);return Math.round(t*n)/n}function Dy(e){const t=W.useRef(e);return Am(()=>{t.current=e}),t}function Pq(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:f,open:h}=e,[d,p]=W.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,w]=W.useState(r);Ev(v,r)||w(r);const[E,y]=W.useState(null),[S,A]=W.useState(null),B=W.useCallback(ge=>{ge!==j.current&&(j.current=ge,y(ge))},[]),I=W.useCallback(ge=>{ge!==z.current&&(z.current=ge,A(ge))},[]),_=o||E,L=s||S,j=W.useRef(null),z=W.useRef(null),J=W.useRef(d),ae=f!=null,ne=Dy(f),Pe=Dy(i),oe=Dy(h),ce=W.useCallback(()=>{if(!j.current||!z.current)return;const ge={placement:t,strategy:n,middleware:v};Pe.current&&(ge.platform=Pe.current),Cq(j.current,z.current,ge).then(se=>{const we={...se,isPositioned:oe.current!==!1};me.current&&!Ev(J.current,we)&&(J.current=we,kw.flushSync(()=>{p(we)}))})},[v,t,n,Pe,oe]);Am(()=>{h===!1&&J.current.isPositioned&&(J.current.isPositioned=!1,p(ge=>({...ge,isPositioned:!1})))},[h]);const me=W.useRef(!1);Am(()=>(me.current=!0,()=>{me.current=!1}),[]),Am(()=>{if(_&&(j.current=_),L&&(z.current=L),_&&L){if(ne.current)return ne.current(_,L,ce);ce()}},[_,L,ce,ne,ae]);const ye=W.useMemo(()=>({reference:j,floating:z,setReference:B,setFloating:I}),[B,I]),Fe=W.useMemo(()=>({reference:_,floating:L}),[_,L]),Te=W.useMemo(()=>{const ge={position:n,left:0,top:0};if(!Fe.floating)return ge;const se=cx(Fe.floating,d.x),we=cx(Fe.floating,d.y);return a?{...ge,transform:"translate("+se+"px, "+we+"px)",...KT(Fe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:se,top:we}},[n,a,Fe.floating,d.x,d.y]);return W.useMemo(()=>({...d,update:ce,refs:ye,elements:Fe,floatingStyles:Te}),[d,ce,ye,Fe,Te])}const YT=(e,t)=>({...vq(e),options:[e,t]}),Sq=(e,t)=>({...yq(e),options:[e,t]}),qT=(e,t)=>({...wq(e),options:[e,t]});function x3(e){return W.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const ZT={...fM},Dq=ZT.useInsertionEffect,Tq=Dq||(e=>e());function zl(e){const t=W.useRef(()=>{});return Tq(()=>{t.current=e}),W.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Go=typeof document<"u"?W.useLayoutEffect:W.useEffect;function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zg.apply(this,arguments)}let fx=!1,Aq=0;const hx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Aq++;function Bq(){const[e,t]=W.useState(()=>fx?hx():void 0);return Go(()=>{e==null&&t(hx())},[]),W.useEffect(()=>{fx=!0},[]),e}const Rq=ZT.useId,wp=Rq||Bq;function Mq(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const bq=W.createContext(null),Oq=W.createContext(null),QT=()=>{var e;return((e=W.useContext(bq))==null?void 0:e.id)||null},_4=()=>W.useContext(Oq);function Qg(e){return"data-floating-ui-"+e}function Ty(e){const t=W.useRef(e);return Go(()=>{t.current=e}),t}let dx=0;function Id(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(dx);const o=()=>e==null?void 0:e.focus({preventScroll:n});i?o():dx=requestAnimationFrame(o)}function Iq(e,t){var n;let r=[],i=(n=e.find(o=>o.id===t))==null?void 0:n.parentId;for(;i;){const o=e.find(s=>s.id===i);i=o==null?void 0:o.parentId,o&&(r=r.concat(o))}return r}function Pg(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var a;return i.parentId===s.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Fd=new WeakMap,am=new WeakSet,lm={},Ay=0;const Fq=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,JT=e=>e&&(e.host||JT(e.parentNode)),kq=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=JT(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Lq(e,t,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,s=kq(t,e),a=new Set,f=new Set(s),h=[];lm[i]||(lm[i]=new WeakMap);const d=lm[i];s.forEach(p),v(t),a.clear();function p(w){!w||a.has(w)||(a.add(w),w.parentNode&&p(w.parentNode))}function v(w){!w||f.has(w)||[].forEach.call(w.children,E=>{if(yc(E)!=="script")if(a.has(E))v(E);else{const y=o?E.getAttribute(o):null,S=y!==null&&y!=="false",A=(Fd.get(E)||0)+1,B=(d.get(E)||0)+1;Fd.set(E,A),d.set(E,B),h.push(E),A===1&&S&&am.add(E),B===1&&E.setAttribute(i,""),!S&&o&&E.setAttribute(o,"true")}})}return Ay++,()=>{h.forEach(w=>{const E=(Fd.get(w)||0)-1,y=(d.get(w)||0)-1;Fd.set(w,E),d.set(w,y),E||(!am.has(w)&&o&&w.removeAttribute(o),am.delete(w)),y||w.removeAttribute(i)}),Ay--,Ay||(Fd=new WeakMap,Fd=new WeakMap,am=new WeakSet,lm={})}}function gx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Zs(e[0]).body;return Lq(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const Jg=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function eA(e,t){const n=C3(e,Jg());t==="prev"&&n.reverse();const r=n.indexOf(Cf(Zs(e)));return n.slice(r+1)[0]}function tA(){return eA(document.body,"next")}function nA(){return eA(document.body,"prev")}function Sg(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!_o(n,r)}function _q(e){C3(e,Jg()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function px(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const E3={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let Nq;function mx(e){e.key==="Tab"&&(e.target,clearTimeout(Nq))}const Pv=W.forwardRef(function(t,n){const[r,i]=W.useState();Go(()=>(vY()&&i("button"),document.addEventListener("keydown",mx),()=>{document.removeEventListener("keydown",mx)}),[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Qg("focus-guard")]:"",style:E3};return W.createElement("span",Zg({},t,o))}),rA=W.createContext(null),vx=Qg("portal");function Hq(e){e===void 0&&(e={});const{id:t,root:n}=e,r=wp(),i=oA(),[o,s]=W.useState(null),a=W.useRef(null);return Go(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{a.current=null})},[o]),Go(()=>{if(!r||a.current)return;const f=t?document.getElementById(t):null;if(!f)return;const h=document.createElement("div");h.id=r,h.setAttribute(vx,""),f.appendChild(h),a.current=h,s(h)},[t,r]),Go(()=>{if(n===null||!r||a.current)return;let f=n||(i==null?void 0:i.portalNode);f&&!cr(f)&&(f=f.current),f=f||document.body;let h=null;t&&(h=document.createElement("div"),h.id=t,f.appendChild(h));const d=document.createElement("div");d.id=r,d.setAttribute(vx,""),f=h||f,f.appendChild(d),a.current=d,s(d)},[t,n,r,i]),o}function iA(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=Hq({id:n,root:r}),[s,a]=W.useState(null),f=W.useRef(null),h=W.useRef(null),d=W.useRef(null),p=W.useRef(null),v=s==null?void 0:s.modal,w=s==null?void 0:s.open,E=!!s&&!s.modal&&s.open&&i&&!!(r||o);return W.useEffect(()=>{if(!o||!i||v)return;function y(S){o&&Sg(S)&&(S.type==="focusin"?px:_q)(o)}return o.addEventListener("focusin",y,!0),o.addEventListener("focusout",y,!0),()=>{o.removeEventListener("focusin",y,!0),o.removeEventListener("focusout",y,!0)}},[o,i,v]),W.useEffect(()=>{o&&(w||px(o))},[w,o]),W.createElement(rA.Provider,{value:W.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:f,afterOutsideRef:h,beforeInsideRef:d,afterInsideRef:p,portalNode:o,setFocusManagerState:a}),[i,o])},E&&o&&W.createElement(Pv,{"data-type":"outside",ref:f,onFocus:y=>{if(Sg(y,o)){var S;(S=d.current)==null||S.focus()}else{const A=nA()||(s==null?void 0:s.refs.domReference.current);A==null||A.focus()}}}),E&&o&&W.createElement("span",{"aria-owns":o.id,style:E3}),o&&kw.createPortal(t,o),E&&o&&W.createElement(Pv,{"data-type":"outside",ref:h,onFocus:y=>{if(Sg(y,o)){var S;(S=p.current)==null||S.focus()}else{const A=tA()||(s==null?void 0:s.refs.domReference.current);A==null||A.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,y.nativeEvent,"focus-out"))}}}))}const oA=()=>W.useContext(rA),K5="data-floating-ui-focusable";function Gq(e){return e?e.hasAttribute(K5)?e:e.querySelector("["+K5+"]")||e:null}const yx=20;let xf=[];function By(e){xf=xf.filter(n=>n.isConnected);let t=e;if(!(!t||yc(t)==="body")){if(!YY(t,Jg())){const n=C3(t,Jg())[0];n&&(t=n)}xf.push(t),xf.length>yx&&(xf=xf.slice(-yx))}}function wx(){return xf.slice().reverse().find(e=>e.isConnected)}const Wq=W.forwardRef(function(t,n){return W.createElement("button",Zg({},t,{type:"button",ref:n,tabIndex:-1,style:E3}))});function sA(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:o=!0,initialFocus:s=0,returnFocus:a=!0,restoreFocus:f=!1,modal:h=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:p=!0}=e,{open:v,refs:w,nodeId:E,onOpenChange:y,events:S,dataRef:A,floatingId:B,elements:{domReference:I,floating:_}}=t,L=typeof s=="number"&&s<0,j=EY(I)&&L,z=Fq()?o:!0,J=Ty(i),ae=Ty(s),ne=Ty(a),Pe=_4(),oe=oA(),ce=W.useRef(null),me=W.useRef(null),ye=W.useRef(!1),Fe=W.useRef(!1),Te=W.useRef(-1),ge=oe!=null,se=Gq(_),we=zl(function(Me){return Me===void 0&&(Me=se),Me?C3(Me,Jg()):[]}),X=zl(Me=>{const K=we(Me);return J.current.map(fe=>I&&fe==="reference"?I:se&&fe==="floating"?se:K).filter(Boolean).flat()});W.useEffect(()=>{if(r||!h)return;function Me(fe){if(fe.key==="Tab"){_o(se,Cf(Zs(se)))&&we().length===0&&!j&&Py(fe);const Ce=X(),Se=Ef(fe);J.current[0]==="reference"&&Se===I&&(Py(fe),fe.shiftKey?Id(Ce[Ce.length-1]):Id(Ce[1])),J.current[1]==="floating"&&Se===se&&fe.shiftKey&&(Py(fe),Id(Ce[0]))}}const K=Zs(se);return K.addEventListener("keydown",Me),()=>{K.removeEventListener("keydown",Me)}},[r,I,se,h,J,j,we,X]),W.useEffect(()=>{if(r||!_)return;function Me(K){const fe=Ef(K),Se=we().indexOf(fe);Se!==-1&&(Te.current=Se)}return _.addEventListener("focusin",Me),()=>{_.removeEventListener("focusin",Me)}},[r,_,we]),W.useEffect(()=>{if(r||!p)return;function Me(){Fe.current=!0,setTimeout(()=>{Fe.current=!1})}function K(fe){const Ce=fe.relatedTarget;queueMicrotask(()=>{const Se=!(_o(I,Ce)||_o(_,Ce)||_o(Ce,_)||_o(oe==null?void 0:oe.portalNode,Ce)||Ce!=null&&Ce.hasAttribute(Qg("focus-guard"))||Pe&&(Pg(Pe.nodesRef.current,E).find(Ke=>{var Ue,Bt;return _o((Ue=Ke.context)==null?void 0:Ue.elements.floating,Ce)||_o((Bt=Ke.context)==null?void 0:Bt.elements.domReference,Ce)})||Iq(Pe.nodesRef.current,E).find(Ke=>{var Ue,Bt;return((Ue=Ke.context)==null?void 0:Ue.elements.floating)===Ce||((Bt=Ke.context)==null?void 0:Bt.elements.domReference)===Ce})));if(f&&Se&&Cf(Zs(se))===Zs(se).body){Kr(se)&&se.focus();const Ke=Te.current,Ue=we(),Bt=Ue[Ke]||Ue[Ue.length-1]||se;Kr(Bt)&&Bt.focus()}(j||!h)&&Ce&&Se&&!Fe.current&&Ce!==wx()&&(ye.current=!0,y(!1,fe,"focus-out"))})}if(_&&Kr(I))return I.addEventListener("focusout",K),I.addEventListener("pointerdown",Me),_.addEventListener("focusout",K),()=>{I.removeEventListener("focusout",K),I.removeEventListener("pointerdown",Me),_.removeEventListener("focusout",K)}},[r,I,_,se,h,E,Pe,oe,y,p,f,we,j]),W.useEffect(()=>{var Me;if(r)return;const K=Array.from((oe==null||(Me=oe.portalNode)==null?void 0:Me.querySelectorAll("["+Qg("portal")+"]"))||[]);if(_){const fe=[_,...K,ce.current,me.current,J.current.includes("reference")||j?I:null].filter(Se=>Se!=null),Ce=h||j?gx(fe,z,!z):gx(fe);return()=>{Ce()}}},[r,I,_,h,J,oe,j,z]),Go(()=>{if(r||!Kr(se))return;const Me=Zs(se),K=Cf(Me);queueMicrotask(()=>{const fe=X(se),Ce=ae.current,Se=(typeof Ce=="number"?fe[Ce]:Ce.current)||se,Ke=_o(se,K);!L&&!Ke&&v&&Id(Se,{preventScroll:Se===se})})},[r,v,se,L,X,ae]),Go(()=>{if(r||!se)return;let Me=!1;const K=Zs(se),fe=Cf(K);let Se=A.current.openEvent;By(fe);function Ke(It){let{open:St,reason:lt,event:yt,nested:wn}=It;St&&(Se=yt),lt==="escape-key"&&w.domReference.current&&By(w.domReference.current),lt==="hover"&&yt.type==="mouseleave"&&(ye.current=!0),lt==="outside-press"&&(wn?(ye.current=!1,Me=!0):ye.current=!(pY(yt)||mY(yt)))}S.on("openchange",Ke);const Ue=K.createElement("span");Ue.setAttribute("tabindex","-1"),Ue.setAttribute("aria-hidden","true"),Object.assign(Ue.style,E3),ge&&I&&I.insertAdjacentElement("afterend",Ue);function Bt(){return typeof ne.current=="boolean"?wx()||Ue:ne.current.current||Ue}return()=>{S.off("openchange",Ke);const It=Cf(K),St=_o(_,It)||Pe&&Pg(Pe.nodesRef.current,E).some(wn=>{var Rt;return _o((Rt=wn.context)==null?void 0:Rt.elements.floating,It)});(St||Se&&["click","mousedown"].includes(Se.type))&&w.domReference.current&&By(w.domReference.current);const yt=Bt();queueMicrotask(()=>{ne.current&&!ye.current&&Kr(yt)&&(!(yt!==It&&It!==K.body)||St)&&yt.focus({preventScroll:Me}),Ue.remove()})}},[r,_,se,ne,A,w,S,Pe,E,ge,I]),W.useEffect(()=>{queueMicrotask(()=>{ye.current=!1})},[r]),Go(()=>{if(!r&&oe)return oe.setFocusManagerState({modal:h,closeOnFocusOut:p,open:v,onOpenChange:y,refs:w}),()=>{oe.setFocusManagerState(null)}},[r,oe,h,v,y,w,p]),Go(()=>{if(r||!se||typeof MutationObserver!="function"||L)return;const Me=()=>{const fe=se.getAttribute("tabindex"),Ce=we(),Se=Cf(Zs(_)),Ke=Ce.indexOf(Se);Ke!==-1&&(Te.current=Ke),J.current.includes("floating")||Se!==w.domReference.current&&Ce.length===0?fe!=="0"&&se.setAttribute("tabindex","0"):fe!=="-1"&&se.setAttribute("tabindex","-1")};Me();const K=new MutationObserver(Me);return K.observe(se,{childList:!0,subtree:!0,attributes:!0}),()=>{K.disconnect()}},[r,_,se,w,J,we,L]);function Ee(Me){return r||!d||!h?null:W.createElement(Wq,{ref:Me==="start"?ce:me,onClick:K=>y(!1,K.nativeEvent)},typeof d=="string"?d:"Dismiss")}const st=!r&&z&&(h?!j:!0)&&(ge||h);return W.createElement(W.Fragment,null,st&&W.createElement(Pv,{"data-type":"inside",ref:oe==null?void 0:oe.beforeInsideRef,onFocus:Me=>{if(h){const fe=X();Id(i[0]==="reference"?fe[0]:fe[fe.length-1])}else if(oe!=null&&oe.preserveTabOrder&&oe.portalNode)if(ye.current=!1,Sg(Me,oe.portalNode)){const fe=tA()||I;fe==null||fe.focus()}else{var K;(K=oe.beforeOutsideRef.current)==null||K.focus()}}}),!j&&Ee("start"),n,Ee("end"),st&&W.createElement(Pv,{"data-type":"inside",ref:oe==null?void 0:oe.afterInsideRef,onFocus:Me=>{if(h)Id(X()[0]);else if(oe!=null&&oe.preserveTabOrder&&oe.portalNode)if(p&&(ye.current=!0),Sg(Me,oe.portalNode)){const fe=nA()||I;fe==null||fe.focus()}else{var K;(K=oe.afterOutsideRef.current)==null||K.focus()}}}))}let cm=0;function $q(){const e=/iP(hone|ad|od)|iOS/.test(bT()),t=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,o=t.left?parseFloat(t.left):window.scrollX,s=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",i&&(t[r]=i+"px"),e){var a,f;const h=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,d=((f=window.visualViewport)==null?void 0:f.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(s-Math.floor(d))+"px",left:-(o-Math.floor(h))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[r]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(o,s))}}let Cx=()=>{};const jq=W.forwardRef(function(t,n){const{lockScroll:r=!1,...i}=t;return Go(()=>{if(r)return cm++,cm===1&&(Cx=$q()),()=>{cm--,cm===0&&Cx()}},[r]),W.createElement("div",Zg({ref:n},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function xx(e){return Kr(e.target)&&e.target.tagName==="BUTTON"}function Ex(e){return IT(e)}function uA(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:a="click",toggle:f=!0,ignoreMouse:h=!1,keyboardHandlers:d=!0,stickIfOpen:p=!0}=t,v=W.useRef(),w=W.useRef(!1),E=W.useMemo(()=>({onPointerDown(y){v.current=y.pointerType},onMouseDown(y){const S=v.current;y.button===0&&a!=="click"&&(ix(S)&&h||(n&&f&&(!(i.current.openEvent&&p)||i.current.openEvent.type==="mousedown")?r(!1,y.nativeEvent,"click"):(y.preventDefault(),r(!0,y.nativeEvent,"click"))))},onClick(y){const S=v.current;if(a==="mousedown"&&v.current){v.current=void 0;return}ix(S)&&h||(n&&f&&(!(i.current.openEvent&&p)||i.current.openEvent.type==="click")?r(!1,y.nativeEvent,"click"):r(!0,y.nativeEvent,"click"))},onKeyDown(y){v.current=void 0,!(y.defaultPrevented||!d||xx(y))&&(y.key===" "&&!Ex(o)&&(y.preventDefault(),w.current=!0),y.key==="Enter"&&r(!(n&&f),y.nativeEvent,"click"))},onKeyUp(y){y.defaultPrevented||!d||xx(y)||Ex(o)||y.key===" "&&w.current&&(w.current=!1,r(!(n&&f),y.nativeEvent,"click"))}}),[i,o,a,h,d,r,n,p,f]);return W.useMemo(()=>s?{reference:E}:{},[s,E])}const zq={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Vq={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Px=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function aA(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:f=!0,outsidePressEvent:h="pointerdown",referencePress:d=!1,referencePressEvent:p="pointerdown",ancestorScroll:v=!1,bubbles:w,capture:E}=t,y=_4(),S=zl(typeof f=="function"?f:()=>!1),A=typeof f=="function"?S:f,B=W.useRef(!1),I=W.useRef(!1),{escapeKey:_,outsidePress:L}=Px(w),{escapeKey:j,outsidePress:z}=Px(E),J=W.useRef(!1),ae=zl(ye=>{var Fe;if(!n||!s||!a||ye.key!=="Escape"||J.current)return;const Te=(Fe=o.current.floatingContext)==null?void 0:Fe.nodeId,ge=y?Pg(y.nodesRef.current,Te):[];if(!_&&(ye.stopPropagation(),ge.length>0)){let se=!0;if(ge.forEach(we=>{var X;if((X=we.context)!=null&&X.open&&!we.context.dataRef.current.__escapeKeyBubbles){se=!1;return}}),!se)return}r(!1,wY(ye)?ye.nativeEvent:ye,"escape-key")}),ne=zl(ye=>{var Fe;const Te=()=>{var ge;ae(ye),(ge=Ef(ye))==null||ge.removeEventListener("keydown",Te)};(Fe=Ef(ye))==null||Fe.addEventListener("keydown",Te)}),Pe=zl(ye=>{var Fe;const Te=B.current;B.current=!1;const ge=I.current;if(I.current=!1,h==="click"&&ge||Te||typeof A=="function"&&!A(ye))return;const se=Ef(ye),we="["+Qg("inert")+"]",X=Zs(i.floating).querySelectorAll(we);let Ee=cr(se)?se:null;for(;Ee&&!sc(Ee);){const fe=Va(Ee);if(sc(fe)||!cr(fe))break;Ee=fe}if(X.length&&cr(se)&&!CY(se)&&!_o(se,i.floating)&&Array.from(X).every(fe=>!_o(Ee,fe)))return;if(Kr(se)&&me){const fe=se.clientWidth>0&&se.scrollWidth>se.clientWidth,Ce=se.clientHeight>0&&se.scrollHeight>se.clientHeight;let Se=Ce&&ye.offsetX>se.clientWidth;if(Ce&&Ts(se).direction==="rtl"&&(Se=ye.offsetX<=se.offsetWidth-se.clientWidth),Se||fe&&ye.offsetY>se.clientHeight)return}const st=(Fe=o.current.floatingContext)==null?void 0:Fe.nodeId,Me=y&&Pg(y.nodesRef.current,st).some(fe=>{var Ce;return Ey(ye,(Ce=fe.context)==null?void 0:Ce.elements.floating)});if(Ey(ye,i.floating)||Ey(ye,i.domReference)||Me)return;const K=y?Pg(y.nodesRef.current,st):[];if(K.length>0){let fe=!0;if(K.forEach(Ce=>{var Se;if((Se=Ce.context)!=null&&Se.open&&!Ce.context.dataRef.current.__outsidePressBubbles){fe=!1;return}}),!fe)return}r(!1,ye,"outside-press")}),oe=zl(ye=>{var Fe;const Te=()=>{var ge;Pe(ye),(ge=Ef(ye))==null||ge.removeEventListener(h,Te)};(Fe=Ef(ye))==null||Fe.addEventListener(h,Te)});W.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=_,o.current.__outsidePressBubbles=L;let ye=-1;function Fe(X){r(!1,X,"ancestor-scroll")}function Te(){window.clearTimeout(ye),J.current=!0}function ge(){ye=window.setTimeout(()=>{J.current=!1},m3()?5:0)}const se=Zs(i.floating);a&&(se.addEventListener("keydown",j?ne:ae,j),se.addEventListener("compositionstart",Te),se.addEventListener("compositionend",ge)),A&&se.addEventListener(h,z?oe:Pe,z);let we=[];return v&&(cr(i.domReference)&&(we=Zl(i.domReference)),cr(i.floating)&&(we=we.concat(Zl(i.floating))),!cr(i.reference)&&i.reference&&i.reference.contextElement&&(we=we.concat(Zl(i.reference.contextElement)))),we=we.filter(X=>{var Ee;return X!==((Ee=se.defaultView)==null?void 0:Ee.visualViewport)}),we.forEach(X=>{X.addEventListener("scroll",Fe,{passive:!0})}),()=>{a&&(se.removeEventListener("keydown",j?ne:ae,j),se.removeEventListener("compositionstart",Te),se.removeEventListener("compositionend",ge)),A&&se.removeEventListener(h,z?oe:Pe,z),we.forEach(X=>{X.removeEventListener("scroll",Fe)}),window.clearTimeout(ye)}},[o,i,a,A,h,n,r,v,s,_,L,ae,j,ne,Pe,z,oe]),W.useEffect(()=>{B.current=!1},[A,h]);const ce=W.useMemo(()=>({onKeyDown:ae,[zq[p]]:ye=>{d&&r(!1,ye.nativeEvent,"reference-press")}}),[ae,r,d,p]),me=W.useMemo(()=>({onKeyDown:ae,onMouseDown(){I.current=!0},onMouseUp(){I.current=!0},[Vq[h]]:()=>{B.current=!0}}),[ae,h]);return W.useMemo(()=>s?{reference:ce,floating:me}:{},[s,ce,me])}function Uq(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=wp(),o=W.useRef({}),[s]=W.useState(()=>Mq()),a=QT()!=null,[f,h]=W.useState(r.reference),d=zl((w,E,y)=>{o.current.openEvent=w?E:void 0,s.emit("openchange",{open:w,event:E,reason:y,nested:a}),n==null||n(w,E,y)}),p=W.useMemo(()=>({setPositionReference:h}),[]),v=W.useMemo(()=>({reference:f||r.reference||null,floating:r.floating||null,domReference:r.reference}),[f,r.reference,r.floating]);return W.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:v,events:s,floatingId:i,refs:p}),[t,d,v,s,i,p])}function N4(e){e===void 0&&(e={});const{nodeId:t}=e,n=Uq({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=W.useState(null),[a,f]=W.useState(null),d=(i==null?void 0:i.domReference)||o,p=W.useRef(null),v=_4();Go(()=>{d&&(p.current=d)},[d]);const w=Pq({...e,elements:{...i,...a&&{reference:a}}}),E=W.useCallback(I=>{const _=cr(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),contextElement:I}:I;f(_),w.refs.setReference(_)},[w.refs]),y=W.useCallback(I=>{(cr(I)||I===null)&&(p.current=I,s(I)),(cr(w.refs.reference.current)||w.refs.reference.current===null||I!==null&&!cr(I))&&w.refs.setReference(I)},[w.refs]),S=W.useMemo(()=>({...w.refs,setReference:y,setPositionReference:E,domReference:p}),[w.refs,y,E]),A=W.useMemo(()=>({...w.elements,domReference:d}),[w.elements,d]),B=W.useMemo(()=>({...w,...r,refs:S,elements:A,nodeId:t}),[w,S,A,t,r]);return Go(()=>{r.dataRef.current.floatingContext=B;const I=v==null?void 0:v.nodesRef.current.find(_=>_.id===t);I&&(I.context=B)}),W.useMemo(()=>({...w,context:B,refs:S,elements:A}),[w,S,A,B])}const Sx="active",Dx="selected";function Ry(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[Sx]:s,[Dx]:a,...f}=e;o=f}return{...n==="floating"&&{tabIndex:-1,[K5]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(f=>{let[h,d]=f;if(!(i&&[Sx,Dx].includes(h)))if(h.indexOf("on")===0){if(r.has(h)||r.set(h,[]),typeof d=="function"){var p;(p=r.get(h))==null||p.push(d),s[h]=function(){for(var v,w=arguments.length,E=new Array(w),y=0;y<w;y++)E[y]=arguments[y];return(v=r.get(h))==null?void 0:v.map(S=>S(...E)).find(S=>S!==void 0)}}}else s[h]=d}),s),{})}}function lA(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=W.useCallback(a=>Ry(a,e,"reference"),t),o=W.useCallback(a=>Ry(a,e,"floating"),n),s=W.useCallback(a=>Ry(a,e,"item"),r);return W.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const Xq=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function cA(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,a=(n=Xq.get(s))!=null?n:s,f=wp(),d=QT()!=null,p=W.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:f},...a==="menu"&&d&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,i,d,r,f,s]),v=W.useMemo(()=>{const E={id:i,...a&&{role:a}};return a==="tooltip"||s==="label"?E:{...E,...a==="menu"&&{"aria-labelledby":f}}},[a,i,f,s]),w=W.useCallback(E=>{let{active:y,selected:S}=E;const A={role:"option",...y&&{id:i+"-option"}};switch(s){case"select":return{...A,"aria-selected":y&&S};case"combobox":return{...A,...y&&{"aria-selected":!0}}}return{}},[i,s]);return W.useMemo(()=>o?{reference:p,floating:v,item:w}:{},[o,p,v,w])}function Kq({initialOpen:e=!1,placement:t="bottom",modal:n,sideOffset:r,open:i,onOpenChange:o}={}){const[s,a]=W.useState(e),[f,h]=W.useState(),[d,p]=W.useState(),v=i??s,w=o??a,E=N4({placement:t,open:v,onOpenChange:w,whileElementsMounted:mq,middleware:[YT(r||4),qT({crossAxis:t.includes("-"),fallbackAxisSideDirection:"end",padding:5}),Sq({padding:5})]}),y=E.context,S=uA(y,{enabled:i==null}),A=aA(y),B=cA(y),I=lA([S,A,B]);return W.useMemo(()=>({open:v,setOpen:w,...I,...E,modal:n,labelId:f,descriptionId:d,setLabelId:h,setDescriptionId:p}),[v,w,I,E,n,f,d])}const fA=W.createContext(null),hA=()=>{const e=W.useContext(fA);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function Ua({children:e,modal:t=!1,...n}){const r=Kq({modal:t,...n});return b.jsx(fA.Provider,{value:r,children:e})}const Xa=W.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=hA(),s=t.ref,a=x3([o.refs.setReference,i,s]);return n&&W.isValidElement(t)?W.cloneElement(t,o.getReferenceProps({ref:a,...r,...t.props,"data-state":o.open?"open":"closed"})):b.jsx("button",{ref:a,type:"button","data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})}),Ka=W.forwardRef(function({container:t,style:n,...r},i){const{context:o,...s}=hA(),a=x3([s.refs.setFloating,i]);return o.open?b.jsx(iA,{root:t,children:b.jsx(sA,{context:o,modal:s.modal,children:b.jsx("div",{ref:a,style:{...s.floatingStyles,...n},"aria-labelledby":s.labelId,"aria-describedby":s.descriptionId,...s.getFloatingProps(r),children:r.children})})}):null}),dA={[lr.default]:{strokeColor:qr,fill:"#FFFFFF"},[lr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[lr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[lr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[lr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[lr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var H4=(e=>(e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(H4||{});const gA="freehand",Qs={isFreehand:e=>e.type===gA};var Tf=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(Tf||{});const pA=W.createContext(null),Bs=()=>{const e=W.useContext(pA);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},Yq=()=>{const{appState:e,setAppState:t}=Bs();return n=>{t({...e,pointer:n})}},G4=Pt.createContext({}),Tx=(e="",t=!1)=>`menu-item menu-item-base ${e} ${t?"menu-item--active":""}`.trim(),qq=(e,t)=>{const n=W.useContext(G4);return wK(e,r=>{var o;const i=new CustomEvent(qg.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||(o=n.onSelect)==null||o.call(n,i)})},Cp=({children:e,className:t="",onSelect:n,style:r})=>{const i=On(`menu ${t}`).trim();return b.jsx(G4.Provider,{value:{onSelect:n},children:b.jsx("div",{className:i,style:r,"data-testid":"menu",children:b.jsx(uu,{className:"menu-container",padding:2,children:e})})})};Cp.displayName="Menu";const Zq=({icon:e,shortcut:t,children:n})=>b.jsxs(b.Fragment,{children:[e&&b.jsx("div",{className:"menu-item__icon",children:e}),b.jsx("div",{className:"menu-item__text",children:n}),t&&b.jsx("div",{className:"menu-item__shortcut",children:t})]}),$o=({icon:e,onSelect:t,children:n,shortcut:r,className:i,selected:o,submenu:s,...a})=>{const[f,h]=W.useState(!1),d=W.useRef(),p=qq(a.onClick,t),v=b.jsx(Zq,{icon:e,shortcut:r,children:n}),w=()=>{d.current&&window.clearTimeout(d.current),h(!0)},E=()=>{d.current=window.setTimeout(()=>{h(!1)},100)};return s?b.jsxs(Ua,{open:f,onOpenChange:h,placement:"right-start",children:[b.jsx(Xa,{asChild:!0,children:b.jsx("button",{...a,type:"button",className:Tx(i,o||f),title:a.title??a["aria-label"],onClick:p,onMouseEnter:w,onMouseLeave:E,children:v})}),b.jsx(Ka,{onMouseEnter:w,onMouseLeave:E,children:s})]}):b.jsx("button",{...a,onClick:p,type:"button",className:Tx(i,o),title:a.title??a["aria-label"],children:v})};$o.displayName="MenuItem";const mA=({children:e})=>b.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});mA.displayName="MenuItemBadge";$o.Badge=mA;const W4=()=>{const{appState:e,setAppState:t}=Bs();return b.jsx($o,{"data-testid":"marmaid-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:Tf.mermaidToDrawnix})},icon:sY,"aria-label":"Mermaid 到 Drawnix",children:"Mermaid 到 Drawnix"})};W4.displayName="MermaidToDrawnix";const Qq=()=>{const{appState:e,setAppState:t}=Bs();return b.jsx($o,{"data-testid":"markdown-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:Tf.markdownToDrawnix})},icon:uY,"aria-label":"Markdown 到 Drawnix",children:"Markdown 到 Drawnix"})};W4.displayName="MarkdownToDrawnix";const Jq=()=>{const e=di(),t=O.getBoardContainer(e),[n,r]=W.useState(!1);return b.jsxs(Ua,{sideOffset:12,open:n,onOpenChange:i=>{r(i)},placement:"bottom-start",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(mr,{type:"icon",visible:!0,selected:n,icon:BT,title:"Extra Tools","aria-label":"Extra Tools",onPointerDown:()=>{r(!n)}})}),b.jsx(Ka,{container:t,children:b.jsxs(Cp,{onSelect:()=>{r(!1)},children:[b.jsx(W4,{}),b.jsx(Qq,{})]})})]},0)},My=e=>e===ln.hand||e===ln.selection,eZ=[{icon:PK,pointer:ln.hand,title:"Hand"},{icon:SK,pointer:ln.selection,title:"Selection"},{icon:DK,pointer:Df.mind,title:"Mind"},{icon:AK,pointer:gt.text,title:"Text"},{icon:iY,pointer:H4.feltTipPen,title:"Freehand"},{icon:BK,title:"Arrow Line",key:"arrow",pointer:_n.straight},{icon:TK,title:"Shape",key:"shape",pointer:gt.rectangle},{icon:oY,title:"Image",key:"image"},{icon:BT,title:"更多工具",key:"extra-tools"}],tZ=e=>Object.keys(_n).includes(e.pointer),nZ=e=>Object.keys(gt).includes(e.pointer)||Object.keys(ht).includes(e.pointer),rZ=()=>{const e=di(),{appState:t}=Bs(),n=Yq(),r=O.getBoardContainer(e),[i,o]=W.useState(!1),[s,a]=W.useState(!1),f=E=>{Ul(e,Cs.dnd),Bn.updatePointerType(e,E),n(E)},h=()=>{Ul(e,Cs.drawing)},d=E=>O.isPointer(e,E.pointer)&&!i&&!s,p=async()=>{const E=await ET({description:"Image",extensions:Object.keys(M4)});ST(e,E)},[v,w]=W.useState(!1);return b.jsx(uu,{padding:1,className:On("draw-toolbar",Ya),children:b.jsx(Ds.Row,{gap:1,children:eZ.map((E,y)=>t.isMobile&&E.pointer===ln.hand?b.jsx(b.Fragment,{}):E.key==="shape"?b.jsxs(Ua,{open:s,sideOffset:12,onOpenChange:S=>{a(S)},children:[b.jsx(Xa,{asChild:!0,children:b.jsx(mr,{type:"icon",visible:!0,selected:s||nZ(e)&&!O.isPointer(e,gt.text),icon:E.icon,title:"Shape","aria-label":"Shape",onPointerDown:()=>{a(!s),Bn.updatePointerType(e,gt.rectangle),n(gt.rectangle),Ul(e,Cs.drawing)}})}),b.jsx(Ka,{container:r,children:b.jsx(cY,{onPointerUp:S=>{a(!1),n(S)}})})]},y):E.key==="arrow"?b.jsxs(Ua,{open:i,sideOffset:12,onOpenChange:S=>{o(S)},children:[b.jsx(Xa,{asChild:!0,children:b.jsx(mr,{type:"icon",visible:!0,selected:i||tZ(e),icon:E.icon,title:"Arrow","aria-label":"Arrow",onPointerDown:()=>{o(!s),Bn.updatePointerType(e,_n.straight),n(_n.straight),Ul(e,Cs.drawing)}})}),b.jsx(Ka,{container:r,children:b.jsx(hY,{onPointerUp:S=>{o(!1),n(S)}})})]},y):E.key==="extra-tools"?b.jsx(Jq,{},y):b.jsx(mr,{type:"radio",icon:E.icon,checked:d(E),title:`${E.title}`,"aria-label":`${E.title}`,onPointerDown:()=>{E.pointer&&!My(E.pointer)&&f(E.pointer)},onPointerUp:()=>{E.pointer&&!My(E.pointer)?h():E.pointer&&My(E.pointer)&&(Bn.updatePointerType(e,E.pointer),n(E.pointer)),E.key==="image"&&p()}},y))})})},iZ=()=>{var i;const e=di(),t=O.getBoardContainer(e),[n,r]=W.useState(!1);return b.jsx(uu,{padding:1,className:On("zoom-toolbar",Ya),children:b.jsxs(Ds.Row,{gap:1,children:[b.jsx(mr,{type:"button",icon:WK,visible:!0,title:"缩小 — Cmd+-","aria-label":"缩小 — Cmd+-",onPointerUp:()=>{Bn.updateZoom(e,e.viewport.zoom-.1)},className:"zoom-out-button"},0),b.jsxs(Ua,{sideOffset:12,open:n,onOpenChange:o=>{r(o)},placement:"bottom-end",children:[b.jsx(Xa,{asChild:!0,children:b.jsxs("div",{title:"自适应","aria-label":"自适应",className:On("zoom-menu-trigger",{active:n}),onPointerUp:()=>{r(!n)},children:[Number(((((i=e==null?void 0:e.viewport)==null?void 0:i.zoom)||1)*100).toFixed(0)),"%"]},1)}),b.jsx(Ka,{container:t,children:b.jsxs(Cp,{onSelect:()=>{r(!1)},children:[b.jsx($o,{"data-testid":"open-button",onSelect:()=>{Bn.fitViewport(e)},"aria-label":"自适应缩放",shortcut:"Cmd+Shift+=",children:"自适应缩放"}),b.jsx($o,{"data-testid":"open-button",onSelect:()=>{Bn.updateZoom(e,1)},"aria-label":"缩放至 100%",shortcut:"Cmd+0",children:"缩放至 100%"})]})})]}),b.jsx(mr,{type:"button",icon:$K,visible:!0,title:"放大 — Cmd++","aria-label":"放大 — Cmd++",onPointerUp:()=>{Bn.updateZoom(e,e.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})},oZ="TRANSPARENT",$4="NO_COLOR",j4="#FFFFFF",vA=[{name:"Topic Color",value:$4},{name:"Basic Black",value:qr},{name:"White",value:j4},{name:"Gray",value:"#808080"},{name:"Deep Blue",value:"#1E90FF"},{name:"Red",value:"#FF4500"},{name:"Green",value:"#2ECC71"},{name:"Yellow",value:"#FFD700"},{name:"Purple",value:"#8A2BE2"},{name:"Orange",value:"#FFA500"},{name:"Pastel Pink",value:"#FFB3BA"},{name:"Cyan",value:"#00CED1"},{name:"Brown",value:"#8B4513"},{name:"Forest Green",value:"#228B22"},{name:"Light Gray",value:"#D3D3D3"}];function sZ(e){return Math.round((100-e)/100*255)}function uZ(e){return Math.round((1-e/255)*100)}function M0(e,t){const r=sZ(100-t).toString(16).padStart(2,"0");return`${e}${r}`}function b0(e){e=e.replace(/^#/,"");let t;if(e.length===8)t=parseInt(e.slice(6,8),16);else if(e.length===4)t=parseInt(e.slice(3,4).repeat(2),16);else return 100;return 100-uZ(t)}function aZ(e){return e!=="none"}function Jf(e){const t=e.replace(/^#/,"").toUpperCase();return t.length===8?"#"+t.slice(0,6):t.length===4?"#"+t.slice(0,3):t.length===6||t.length===3?"#"+t:e}function yA(e){return e===j4}function wA(e){return e===0}function xp(e){return e===100}function If(e){return e===$4}function lZ(e){return!e||e===qr}var fg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var cZ=fg.exports,Ax;function fZ(){return Ax||(Ax=1,function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",p=1,v=2,w=4,E=1,y=2,S=1,A=2,B=4,I=8,_=16,L=32,j=64,z=128,J=256,ae=512,ne=30,Pe="...",oe=800,ce=16,me=1,ye=2,Fe=3,Te=1/0,ge=9007199254740991,se=17976931348623157e292,we=NaN,X=4294967295,Ee=X-1,st=X>>>1,Me=[["ary",z],["bind",S],["bindKey",A],["curry",I],["curryRight",_],["flip",ae],["partial",L],["partialRight",j],["rearg",J]],K="[object Arguments]",fe="[object Array]",Ce="[object AsyncFunction]",Se="[object Boolean]",Ke="[object Date]",Ue="[object DOMException]",Bt="[object Error]",It="[object Function]",St="[object GeneratorFunction]",lt="[object Map]",yt="[object Number]",wn="[object Null]",Rt="[object Object]",Nn="[object Promise]",rr="[object Proxy]",Dn="[object RegExp]",en="[object Set]",tn="[object String]",Kn="[object Symbol]",Hn="[object Undefined]",Wt="[object WeakMap]",Sr="[object WeakSet]",vr="[object ArrayBuffer]",Tn="[object DataView]",yr="[object Float32Array]",wr="[object Float64Array]",ir="[object Int8Array]",Vi="[object Int16Array]",Ui="[object Int32Array]",Xi="[object Uint8Array]",qu="[object Uint8ClampedArray]",Rs="[object Uint16Array]",Eo="[object Uint32Array]",au=/\b__p \+= '';/g,Zu=/\b(__p \+=) '' \+/g,pi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ms=/&(?:amp|lt|gt|quot|#39);/g,bs=/[&<>"']/g,wc=RegExp(Ms.source),eh=RegExp(bs.source),th=/<%-([\s\S]+?)%>/g,nh=/<%([\s\S]+?)%>/g,Cc=/<%=([\s\S]+?)%>/g,xc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rh=/^\w*$/,Qu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ju=/[\\^$.*+?()[\]{}|]/g,ea=RegExp(Ju.source),Ec=/^\s+/,lu=/\s/,Qa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ja=/\{\n\/\* \[wrapped with (.+)\] \*/,Pc=/,? & /,O0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,I0=/[()=,{}\[\]\/\s]/,F0=/\\(\\)?/g,Os=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sc=/\w*$/,ih=/^[-+]0x[0-9a-f]+$/i,k0=/^0b[01]+$/i,oh=/^\[object .+?Constructor\]$/,sh=/^0o[0-7]+$/i,uh=/^(?:0|[1-9]\d*)$/,ah=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,el=/($^)/,lh=/['\n\r\u2028\u2029\\]/g,mn="\\ud800-\\udfff",ch="\\u0300-\\u036f",Ko="\\ufe20-\\ufe2f",fh="\\u20d0-\\u20ff",Yo=ch+Ko+fh,tl="\\u2700-\\u27bf",Dc="a-z\\xdf-\\xf6\\xf8-\\xff",nl="\\xac\\xb1\\xd7\\xf7",mi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",L0="\\u2000-\\u206f",Bi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",H="A-Z\\xc0-\\xd6\\xd8-\\xde",Y="\\ufe0e\\ufe0f",$=nl+mi+L0+Bi,re="['’]",ue="["+mn+"]",ee="["+$+"]",Be="["+Yo+"]",Ne="\\d+",je="["+tl+"]",We="["+Dc+"]",Xe="[^"+mn+$+Ne+tl+Dc+H+"]",tt="\\ud83c[\\udffb-\\udfff]",kt="(?:"+Be+"|"+tt+")",sn="[^"+mn+"]",Qt="(?:\\ud83c[\\udde6-\\uddff]){2}",wt="[\\ud800-\\udbff][\\udc00-\\udfff]",Cn="["+H+"]",Fr="\\u200d",qo="(?:"+We+"|"+Xe+")",rl="(?:"+Cn+"|"+Xe+")",Tc="(?:"+re+"(?:d|ll|m|re|s|t|ve))?",ta="(?:"+re+"(?:D|LL|M|RE|S|T|VE))?",Ac=kt+"?",na="["+Y+"]?",Zo="(?:"+Fr+"(?:"+[sn,Qt,wt].join("|")+")"+na+Ac+")*",Po="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",il=na+Ac+Zo,Bc="(?:"+[je,Qt,wt].join("|")+")"+il,fu="(?:"+[sn+Be+"?",Be,Qt,wt,ue].join("|")+")",P3=RegExp(re,"g"),Pp=RegExp(Be,"g"),ra=RegExp(tt+"(?="+tt+")|"+fu+il,"g"),S3=RegExp([Cn+"?"+We+"+"+Tc+"(?="+[ee,Cn,"$"].join("|")+")",rl+"+"+ta+"(?="+[ee,Cn+qo,"$"].join("|")+")",Cn+"?"+qo+"+"+Tc,Cn+"+"+ta,cu,Po,Ne,Bc].join("|"),"g"),Sp=RegExp("["+Fr+mn+Yo+Y+"]"),hh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],D3=-1,xn={};xn[yr]=xn[wr]=xn[ir]=xn[Vi]=xn[Ui]=xn[Xi]=xn[qu]=xn[Rs]=xn[Eo]=!0,xn[K]=xn[fe]=xn[vr]=xn[Se]=xn[Tn]=xn[Ke]=xn[Bt]=xn[It]=xn[lt]=xn[yt]=xn[Rt]=xn[Dn]=xn[en]=xn[tn]=xn[Wt]=!1;var vn={};vn[K]=vn[fe]=vn[vr]=vn[Tn]=vn[Se]=vn[Ke]=vn[yr]=vn[wr]=vn[ir]=vn[Vi]=vn[Ui]=vn[lt]=vn[yt]=vn[Rt]=vn[Dn]=vn[en]=vn[tn]=vn[Kn]=vn[Xi]=vn[qu]=vn[Rs]=vn[Eo]=!0,vn[Bt]=vn[It]=vn[Wt]=!1;var ol={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},dh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},T3={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},A3={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_0=parseFloat,gh=parseInt,ph=typeof vs=="object"&&vs&&vs.Object===Object&&vs,Tp=typeof self=="object"&&self&&self.Object===Object&&self,Gn=ph||Tp||Function("return this")(),Rc=t&&!t.nodeType&&t,Qo=Rc&&!0&&e&&!e.nodeType&&e,N0=Qo&&Qo.exports===Rc,sl=N0&&ph.process,Qr=function(){try{var ie=Qo&&Qo.require&&Qo.require("util").types;return ie||sl&&sl.binding&&sl.binding("util")}catch{}}(),H0=Qr&&Qr.isArrayBuffer,vi=Qr&&Qr.isDate,ia=Qr&&Qr.isMap,mh=Qr&&Qr.isRegExp,ul=Qr&&Qr.isSet,Ap=Qr&&Qr.isTypedArray;function Jr(ie,Re,ve){switch(ve.length){case 0:return ie.call(Re);case 1:return ie.call(Re,ve[0]);case 2:return ie.call(Re,ve[0],ve[1]);case 3:return ie.call(Re,ve[0],ve[1],ve[2])}return ie.apply(Re,ve)}function G0(ie,Re,ve,Qe){for(var Ft=-1,cn=ie==null?0:ie.length;++Ft<cn;){var or=ie[Ft];Re(Qe,or,ve(or),ie)}return Qe}function kr(ie,Re){for(var ve=-1,Qe=ie==null?0:ie.length;++ve<Qe&&Re(ie[ve],ve,ie)!==!1;);return ie}function vh(ie,Re){for(var ve=ie==null?0:ie.length;ve--&&Re(ie[ve],ve,ie)!==!1;);return ie}function W0(ie,Re){for(var ve=-1,Qe=ie==null?0:ie.length;++ve<Qe;)if(!Re(ie[ve],ve,ie))return!1;return!0}function hu(ie,Re){for(var ve=-1,Qe=ie==null?0:ie.length,Ft=0,cn=[];++ve<Qe;){var or=ie[ve];Re(or,ve,ie)&&(cn[Ft++]=or)}return cn}function yh(ie,Re){var ve=ie==null?0:ie.length;return!!ve&&al(ie,Re,0)>-1}function $0(ie,Re,ve){for(var Qe=-1,Ft=ie==null?0:ie.length;++Qe<Ft;)if(ve(Re,ie[Qe]))return!0;return!1}function Rn(ie,Re){for(var ve=-1,Qe=ie==null?0:ie.length,Ft=Array(Qe);++ve<Qe;)Ft[ve]=Re(ie[ve],ve,ie);return Ft}function du(ie,Re){for(var ve=-1,Qe=Re.length,Ft=ie.length;++ve<Qe;)ie[Ft+ve]=Re[ve];return ie}function j0(ie,Re,ve,Qe){var Ft=-1,cn=ie==null?0:ie.length;for(Qe&&cn&&(ve=ie[++Ft]);++Ft<cn;)ve=Re(ve,ie[Ft],Ft,ie);return ve}function B3(ie,Re,ve,Qe){var Ft=ie==null?0:ie.length;for(Qe&&Ft&&(ve=ie[--Ft]);Ft--;)ve=Re(ve,ie[Ft],Ft,ie);return ve}function z0(ie,Re){for(var ve=-1,Qe=ie==null?0:ie.length;++ve<Qe;)if(Re(ie[ve],ve,ie))return!0;return!1}var R3=U0("length");function Bp(ie){return ie.split("")}function M3(ie){return ie.match(O0)||[]}function Rp(ie,Re,ve){var Qe;return ve(ie,function(Ft,cn,or){if(Re(Ft,cn,or))return Qe=cn,!1}),Qe}function wh(ie,Re,ve,Qe){for(var Ft=ie.length,cn=ve+(Qe?1:-1);Qe?cn--:++cn<Ft;)if(Re(ie[cn],cn,ie))return cn;return-1}function al(ie,Re,ve){return Re===Re?Eh(ie,Re,ve):wh(ie,Mp,ve)}function V0(ie,Re,ve,Qe){for(var Ft=ve-1,cn=ie.length;++Ft<cn;)if(Qe(ie[Ft],Re))return Ft;return-1}function Mp(ie){return ie!==ie}function bp(ie,Re){var ve=ie==null?0:ie.length;return ve?X0(ie,Re)/ve:we}function U0(ie){return function(Re){return Re==null?n:Re[ie]}}function Ch(ie){return function(Re){return ie==null?n:ie[Re]}}function Op(ie,Re,ve,Qe,Ft){return Ft(ie,function(cn,or,En){ve=Qe?(Qe=!1,cn):Re(ve,cn,or,En)}),ve}function b3(ie,Re){var ve=ie.length;for(ie.sort(Re);ve--;)ie[ve]=ie[ve].value;return ie}function X0(ie,Re){for(var ve,Qe=-1,Ft=ie.length;++Qe<Ft;){var cn=Re(ie[Qe]);cn!==n&&(ve=ve===n?cn:ve+cn)}return ve}function K0(ie,Re){for(var ve=-1,Qe=Array(ie);++ve<ie;)Qe[ve]=Re(ve);return Qe}function O3(ie,Re){return Rn(Re,function(ve){return[ve,ie[ve]]})}function Ip(ie){return ie&&ie.slice(0,Ph(ie)+1).replace(Ec,"")}function Ri(ie){return function(Re){return ie(Re)}}function Mc(ie,Re){return Rn(Re,function(ve){return ie[ve]})}function Is(ie,Re){return ie.has(Re)}function Fp(ie,Re){for(var ve=-1,Qe=ie.length;++ve<Qe&&al(Re,ie[ve],0)>-1;);return ve}function Y0(ie,Re){for(var ve=ie.length;ve--&&al(Re,ie[ve],0)>-1;);return ve}function kp(ie,Re){for(var ve=ie.length,Qe=0;ve--;)ie[ve]===Re&&++Qe;return Qe}var Lp=Ch(ol),_p=Ch(dh);function Np(ie){return"\\"+A3[ie]}function ll(ie,Re){return ie==null?n:ie[Re]}function cl(ie){return Sp.test(ie)}function I3(ie){return hh.test(ie)}function F3(ie){for(var Re,ve=[];!(Re=ie.next()).done;)ve.push(Re.value);return ve}function xh(ie){var Re=-1,ve=Array(ie.size);return ie.forEach(function(Qe,Ft){ve[++Re]=[Ft,Qe]}),ve}function q0(ie,Re){return function(ve){return ie(Re(ve))}}function Ki(ie,Re){for(var ve=-1,Qe=ie.length,Ft=0,cn=[];++ve<Qe;){var or=ie[ve];(or===Re||or===d)&&(ie[ve]=d,cn[Ft++]=ve)}return cn}function gu(ie){var Re=-1,ve=Array(ie.size);return ie.forEach(function(Qe){ve[++Re]=Qe}),ve}function k3(ie){var Re=-1,ve=Array(ie.size);return ie.forEach(function(Qe){ve[++Re]=[Qe,Qe]}),ve}function Eh(ie,Re,ve){for(var Qe=ve-1,Ft=ie.length;++Qe<Ft;)if(ie[Qe]===Re)return Qe;return-1}function L3(ie,Re,ve){for(var Qe=ve+1;Qe--;)if(ie[Qe]===Re)return Qe;return Qe}function oa(ie){return cl(ie)?Gp(ie):R3(ie)}function Mi(ie){return cl(ie)?Wp(ie):Bp(ie)}function Ph(ie){for(var Re=ie.length;Re--&&lu.test(ie.charAt(Re)););return Re}var Hp=Ch(T3);function Gp(ie){for(var Re=ra.lastIndex=0;ra.test(ie);)++Re;return Re}function Wp(ie){return ie.match(ra)||[]}function _3(ie){return ie.match(S3)||[]}var N3=function ie(Re){Re=Re==null?Gn:fl.defaults(Gn.Object(),Re,fl.pick(Gn,Dp));var ve=Re.Array,Qe=Re.Date,Ft=Re.Error,cn=Re.Function,or=Re.Math,En=Re.Object,bc=Re.RegExp,H3=Re.String,Yi=Re.TypeError,Fs=ve.prototype,Z0=cn.prototype,Jo=En.prototype,hl=Re["__core-js_shared__"],Oc=Z0.toString,fn=Jo.hasOwnProperty,dl=0,Sh=function(){var c=/[^.]+$/.exec(hl&&hl.keys&&hl.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Ic=Jo.toString,Dh=Oc.call(En),$p=Gn._,jp=bc("^"+Oc.call(fn).replace(Ju,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fc=N0?Re.Buffer:n,ks=Re.Symbol,kc=Re.Uint8Array,Q0=Fc?Fc.allocUnsafe:n,So=q0(En.getPrototypeOf,En),Th=En.create,Ah=Jo.propertyIsEnumerable,Bh=Fs.splice,zp=ks?ks.isConcatSpreadable:n,Ls=ks?ks.iterator:n,sa=ks?ks.toStringTag:n,Lc=function(){try{var c=Du(En,"defineProperty");return c({},"",{}),c}catch{}}(),Vp=Re.clearTimeout!==Gn.clearTimeout&&Re.clearTimeout,Fn=Qe&&Qe.now!==Gn.Date.now&&Qe.now,J0=Re.setTimeout!==Gn.setTimeout&&Re.setTimeout,ua=or.ceil,pu=or.floor,Rh=En.getOwnPropertySymbols,e1=Fc?Fc.isBuffer:n,gl=Re.isFinite,Mh=Fs.join,pl=q0(En.keys,En),sr=or.max,Lr=or.min,G3=Qe.now,Up=Re.parseInt,_c=or.random,bh=Fs.reverse,Nc=Du(Re,"DataView"),aa=Du(Re,"Map"),Hc=Du(Re,"Promise"),mu=Du(Re,"Set"),Gc=Du(Re,"WeakMap"),ml=Du(En,"create"),Oh=Gc&&new Gc,vl={},t1=Tu(Nc),vu=Tu(aa),Xp=Tu(Hc),yl=Tu(mu),es=Tu(Gc),yu=ks?ks.prototype:n,bi=yu?yu.valueOf:n,Ih=yu?yu.toString:n;function N(c){if(ar(c)&&!Ht(c)&&!(c instanceof Nt)){if(c instanceof _r)return c;if(fn.call(c,"__wrapped__"))return x2(c)}return new _r(c)}var wl=function(){function c(){}return function(g){if(!tr(g))return{};if(Th)return Th(g);c.prototype=g;var x=new c;return c.prototype=n,x}}();function ts(){}function _r(c,g){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=n}N.templateSettings={escape:th,evaluate:nh,interpolate:Cc,variable:"",imports:{_:N}},N.prototype=ts.prototype,N.prototype.constructor=N,_r.prototype=wl(ts.prototype),_r.prototype.constructor=_r;function Nt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=X,this.__views__=[]}function Fh(){var c=new Nt(this.__wrapped__);return c.__actions__=ti(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ti(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ti(this.__views__),c}function n1(){if(this.__filtered__){var c=new Nt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Cl(){var c=this.__wrapped__.value(),g=this.__dir__,x=Ht(c),T=g<0,M=x?c.length:0,G=M1(0,M,this.__views__),U=G.start,Q=G.end,le=Q-U,be=T?Q:U-1,Oe=this.__iteratees__,He=Oe.length,Ze=0,ft=Lr(le,this.__takeCount__);if(!x||!T&&M==le&&ft==le)return Bl(c,this.__actions__);var Tt=[];e:for(;le--&&Ze<ft;){be+=g;for(var Ut=-1,At=c[be];++Ut<He;){var Jt=Oe[Ut],an=Jt.iteratee,Fo=Jt.type,Li=an(At);if(Fo==ye)At=Li;else if(!Li){if(Fo==me)continue e;break e}}Tt[Ze++]=At}return Tt}Nt.prototype=wl(ts.prototype),Nt.prototype.constructor=Nt;function yi(c){var g=-1,x=c==null?0:c.length;for(this.clear();++g<x;){var T=c[g];this.set(T[0],T[1])}}function kn(){this.__data__=ml?ml(null):{},this.size=0}function Mn(c){var g=this.has(c)&&delete this.__data__[c];return this.size-=g?1:0,g}function wu(c){var g=this.__data__;if(ml){var x=g[c];return x===f?n:x}return fn.call(g,c)?g[c]:n}function Nr(c){var g=this.__data__;return ml?g[c]!==n:fn.call(g,c)}function wi(c,g){var x=this.__data__;return this.size+=this.has(c)?0:1,x[c]=ml&&g===n?f:g,this}yi.prototype.clear=kn,yi.prototype.delete=Mn,yi.prototype.get=wu,yi.prototype.has=Nr,yi.prototype.set=wi;function ei(c){var g=-1,x=c==null?0:c.length;for(this.clear();++g<x;){var T=c[g];this.set(T[0],T[1])}}function xl(){this.__data__=[],this.size=0}function Ci(c){var g=this.__data__,x=Gr(g,c);if(x<0)return!1;var T=g.length-1;return x==T?g.pop():Bh.call(g,x,1),--this.size,!0}function kh(c){var g=this.__data__,x=Gr(g,c);return x<0?n:g[x][1]}function Kp(c){return Gr(this.__data__,c)>-1}function Yp(c,g){var x=this.__data__,T=Gr(x,c);return T<0?(++this.size,x.push([c,g])):x[T][1]=g,this}ei.prototype.clear=xl,ei.prototype.delete=Ci,ei.prototype.get=kh,ei.prototype.has=Kp,ei.prototype.set=Yp;function qi(c){var g=-1,x=c==null?0:c.length;for(this.clear();++g<x;){var T=c[g];this.set(T[0],T[1])}}function qp(){this.size=0,this.__data__={hash:new yi,map:new(aa||ei),string:new yi}}function _s(c){var g=nf(this,c).delete(c);return this.size-=g?1:0,g}function Lh(c){return nf(this,c).get(c)}function r1(c){return nf(this,c).has(c)}function Zp(c,g){var x=nf(this,c),T=x.size;return x.set(c,g),this.size+=x.size==T?0:1,this}qi.prototype.clear=qp,qi.prototype.delete=_s,qi.prototype.get=Lh,qi.prototype.has=r1,qi.prototype.set=Zp;function la(c){var g=-1,x=c==null?0:c.length;for(this.__data__=new qi;++g<x;)this.add(c[g])}function Cu(c){return this.__data__.set(c,f),this}function El(c){return this.__data__.has(c)}la.prototype.add=la.prototype.push=Cu,la.prototype.has=El;function Hr(c){var g=this.__data__=new ei(c);this.size=g.size}function _h(){this.__data__=new ei,this.size=0}function Nh(c){var g=this.__data__,x=g.delete(c);return this.size=g.size,x}function Zi(c){return this.__data__.get(c)}function Qi(c){return this.__data__.has(c)}function ca(c,g){var x=this.__data__;if(x instanceof ei){var T=x.__data__;if(!aa||T.length<i-1)return T.push([c,g]),this.size=++x.size,this;x=this.__data__=new qi(T)}return x.set(c,g),this.size=x.size,this}Hr.prototype.clear=_h,Hr.prototype.delete=Nh,Hr.prototype.get=Zi,Hr.prototype.has=Qi,Hr.prototype.set=ca;function ns(c,g){var x=Ht(c),T=!x&&pf(c),M=!x&&!T&&Nl(c),G=!x&&!T&&!M&&Ad(c),U=x||T||M||G,Q=U?K0(c.length,H3):[],le=Q.length;for(var be in c)(g||fn.call(c,be))&&!(U&&(be=="length"||M&&(be=="offset"||be=="parent")||G&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||$n(be,le)))&&Q.push(be);return Q}function rs(c){var g=c.length;return g?c[Tl(0,g-1)]:n}function fa(c,g){return cd(ti(c),Ns(g,0,c.length))}function Qp(c){return cd(ti(c))}function Wc(c,g,x){(x!==n&&!Ks(c[g],x)||x===n&&!(g in c))&&is(c,g,x)}function ha(c,g,x){var T=c[g];(!(fn.call(c,g)&&Ks(T,x))||x===n&&!(g in c))&&is(c,g,x)}function Gr(c,g){for(var x=c.length;x--;)if(Ks(c[x][0],g))return x;return-1}function Oi(c,g,x,T){return ss(c,function(M,G,U){g(T,M,x(M),U)}),T}function Ln(c,g){return c&&To(g,jr(g),c)}function Do(c,g){return c&&To(g,uo(g),c)}function is(c,g,x){g=="__proto__"&&Lc?Lc(c,g,{configurable:!0,enumerable:!0,value:x,writable:!0}):c[g]=x}function Hh(c,g){for(var x=-1,T=g.length,M=ve(T),G=c==null;++x<T;)M[x]=G?n:c7(c,g[x]);return M}function Ns(c,g,x){return c===c&&(x!==n&&(c=c<=x?c:x),g!==n&&(c=c>=g?c:g)),c}function xi(c,g,x,T,M,G){var U,Q=g&p,le=g&v,be=g&w;if(x&&(U=M?x(c,T,M,G):x(c)),U!==n)return U;if(!tr(c))return c;var Oe=Ht(c);if(Oe){if(U=of(c),!Q)return ti(c,U)}else{var He=Ar(c),Ze=He==It||He==St;if(Nl(c))return y1(c,Q);if(He==Rt||He==K||Ze&&!M){if(U=le||Ze?{}:Br(c),!Q)return le?$3(c,Do(U,c)):Qh(c,Ln(U,c))}else{if(!vn[He])return M?c:{};U=j3(c,He,Q)}}G||(G=new Hr);var ft=G.get(c);if(ft)return ft;G.set(c,U),e6(c)?c.forEach(function(At){U.add(xi(At,g,x,At,c,G))}):Q4(c)&&c.forEach(function(At,Jt){U.set(Jt,xi(At,g,x,Jt,c,G))});var Tt=be?le?tf:ef:le?uo:jr,Ut=Oe?n:Tt(c);return kr(Ut||c,function(At,Jt){Ut&&(Jt=At,At=c[Jt]),ha(U,Jt,xi(At,g,x,Jt,c,G))}),U}function Jp(c){var g=jr(c);return function(x){return $c(x,c,g)}}function $c(c,g,x){var T=x.length;if(c==null)return!T;for(c=En(c);T--;){var M=x[T],G=g[M],U=c[M];if(U===n&&!(M in c)||!G(U))return!1}return!0}function i1(c,g,x){if(typeof c!="function")throw new Yi(s);return kl(function(){c.apply(n,x)},g)}function os(c,g,x,T){var M=-1,G=yh,U=!0,Q=c.length,le=[],be=g.length;if(!Q)return le;x&&(g=Rn(g,Ri(x))),T?(G=$0,U=!1):g.length>=i&&(G=Is,U=!1,g=new la(g));e:for(;++M<Q;){var Oe=c[M],He=x==null?Oe:x(Oe);if(Oe=T||Oe!==0?Oe:0,U&&He===He){for(var Ze=be;Ze--;)if(g[Ze]===He)continue e;le.push(Oe)}else G(g,He,T)||le.push(Oe)}return le}var ss=ro(Ii),e2=ro(xu,!0);function jc(c,g){var x=!0;return ss(c,function(T,M,G){return x=!!g(T,M,G),x}),x}function da(c,g,x){for(var T=-1,M=c.length;++T<M;){var G=c[T],U=g(G);if(U!=null&&(Q===n?U===U&&!Io(U):x(U,Q)))var Q=U,le=G}return le}function t2(c,g,x,T){var M=c.length;for(x=zt(x),x<0&&(x=-x>M?0:M+x),T=T===n||T>M?M:zt(T),T<0&&(T+=M),T=x>T?0:n6(T);x<T;)c[x++]=g;return c}function o1(c,g){var x=[];return ss(c,function(T,M,G){g(T,M,G)&&x.push(T)}),x}function Yn(c,g,x,T,M){var G=-1,U=c.length;for(x||(x=ud),M||(M=[]);++G<U;){var Q=c[G];g>0&&x(Q)?g>1?Yn(Q,g-1,x,T,M):du(M,Q):T||(M[M.length]=Q)}return M}var Gh=ed(),zc=ed(!0);function Ii(c,g){return c&&Gh(c,g,jr)}function xu(c,g){return c&&zc(c,g,jr)}function Pl(c,g){return hu(g,function(x){return Ta(c[x])})}function Hs(c,g){g=ls(g,c);for(var x=0,T=g.length;c!=null&&x<T;)c=c[Mo(g[x++])];return x&&x==T?c:n}function Wh(c,g,x){var T=g(c);return Ht(c)?T:du(T,x(c))}function Dr(c){return c==null?c===n?Hn:wn:sa&&sa in En(c)?sd(c):O1(c)}function Eu(c,g){return c>g}function Ji(c,g){return c!=null&&fn.call(c,g)}function ga(c,g){return c!=null&&g in En(c)}function s1(c,g,x){return c>=Lr(g,x)&&c<sr(g,x)}function $h(c,g,x){for(var T=x?$0:yh,M=c[0].length,G=c.length,U=G,Q=ve(G),le=1/0,be=[];U--;){var Oe=c[U];U&&g&&(Oe=Rn(Oe,Ri(g))),le=Lr(Oe.length,le),Q[U]=!x&&(g||M>=120&&Oe.length>=120)?new la(U&&Oe):n}Oe=c[0];var He=-1,Ze=Q[0];e:for(;++He<M&&be.length<le;){var ft=Oe[He],Tt=g?g(ft):ft;if(ft=x||ft!==0?ft:0,!(Ze?Is(Ze,Tt):T(be,Tt,x))){for(U=G;--U;){var Ut=Q[U];if(!(Ut?Is(Ut,Tt):T(c[U],Tt,x)))continue e}Ze&&Ze.push(Tt),be.push(ft)}}return be}function Gs(c,g,x,T){return Ii(c,function(M,G,U){g(T,x(M),G,U)}),T}function eo(c,g,x){g=ls(g,c),c=Cr(c,g);var T=c==null?c:c[Mo(ii(g))];return T==null?n:Jr(T,c,x)}function jh(c){return ar(c)&&Dr(c)==K}function n2(c){return ar(c)&&Dr(c)==vr}function Ws(c){return ar(c)&&Dr(c)==Ke}function to(c,g,x,T,M){return c===g?!0:c==null||g==null||!ar(c)&&!ar(g)?c!==c&&g!==g:zh(c,g,x,T,to,M)}function zh(c,g,x,T,M,G){var U=Ht(c),Q=Ht(g),le=U?fe:Ar(c),be=Q?fe:Ar(g);le=le==K?Rt:le,be=be==K?Rt:be;var Oe=le==Rt,He=be==Rt,Ze=le==be;if(Ze&&Nl(c)){if(!Nl(g))return!1;U=!0,Oe=!1}if(Ze&&!Oe)return G||(G=new Hr),U||Ad(c)?B1(c,g,x,T,M,G):R1(c,g,le,x,T,M,G);if(!(x&E)){var ft=Oe&&fn.call(c,"__wrapped__"),Tt=He&&fn.call(g,"__wrapped__");if(ft||Tt){var Ut=ft?c.value():c,At=Tt?g.value():g;return G||(G=new Hr),M(Ut,At,x,T,G)}}return Ze?(G||(G=new Hr),d2(c,g,x,T,M,G)):!1}function r2(c){return ar(c)&&Ar(c)==lt}function Sl(c,g,x,T){var M=x.length,G=M,U=!T;if(c==null)return!G;for(c=En(c);M--;){var Q=x[M];if(U&&Q[2]?Q[1]!==c[Q[0]]:!(Q[0]in c))return!1}for(;++M<G;){Q=x[M];var le=Q[0],be=c[le],Oe=Q[1];if(U&&Q[2]){if(be===n&&!(le in c))return!1}else{var He=new Hr;if(T)var Ze=T(be,Oe,le,c,g,He);if(!(Ze===n?to(Oe,be,E|y,T,He):Ze))return!1}}return!0}function u1(c){if(!tr(c)||m2(c))return!1;var g=Ta(c)?jp:oh;return g.test(Tu(c))}function Vc(c){return ar(c)&&Dr(c)==Dn}function us(c){return ar(c)&&Ar(c)==en}function Uc(c){return ar(c)&&k2(c.length)&&!!xn[Dr(c)]}function Dl(c){return typeof c=="function"?c:c==null?ao:typeof c=="object"?Ht(c)?Wn(c[0],c[1]):Vh(c):d6(c)}function $s(c){if(!Us(c))return pl(c);var g=[];for(var x in En(c))fn.call(c,x)&&x!="constructor"&&g.push(x);return g}function a1(c){if(!tr(c))return w2(c);var g=Us(c),x=[];for(var T in c)T=="constructor"&&(g||!fn.call(c,T))||x.push(T);return x}function Pu(c,g){return c<g}function l1(c,g){var x=-1,T=so(c)?ve(c.length):[];return ss(c,function(M,G,U){T[++x]=g(M,G,U)}),T}function Vh(c){var g=rf(c);return g.length==1&&g[0][2]?ad(g[0][0],g[0][1]):function(x){return x===c||Sl(x,c,g)}}function Wn(c,g){return et(c)&&uf(g)?ad(Mo(c),g):function(x){var T=c7(x,c);return T===n&&T===g?f7(x,c):to(g,T,E|y)}}function pa(c,g,x,T,M){c!==g&&Gh(g,function(G,U){if(M||(M=new Hr),tr(G))c1(c,g,U,x,pa,T,M);else{var Q=T?T(hs(c,U),G,U+"",c,g,M):n;Q===n&&(Q=G),Wc(c,U,Q)}},uo)}function c1(c,g,x,T,M,G,U){var Q=hs(c,x),le=hs(g,x),be=U.get(le);if(be){Wc(c,x,be);return}var Oe=G?G(Q,le,x+"",c,g,U):n,He=Oe===n;if(He){var Ze=Ht(le),ft=!Ze&&Nl(le),Tt=!Ze&&!ft&&Ad(le);Oe=le,Ze||ft||Tt?Ht(Q)?Oe=Q:gr(Q)?Oe=ti(Q):ft?(He=!1,Oe=y1(le,!0)):Tt?(He=!1,Oe=a2(le,!0)):Oe=[]:q1(le)||pf(le)?(Oe=Q,pf(Q)?Oe=r6(Q):(!tr(Q)||Ta(Q))&&(Oe=Br(le))):He=!1}He&&(U.set(le,Oe),M(Oe,le,T,G,U),U.delete(le)),Wc(c,x,Oe)}function Uh(c,g){var x=c.length;if(x)return g+=g<0?x:0,$n(g,x)?c[g]:n}function Xc(c,g,x){g.length?g=Rn(g,function(G){return Ht(G)?function(U){return Hs(U,G.length===1?G[0]:G)}:G}):g=[ao];var T=-1;g=Rn(g,Ri(xt()));var M=l1(c,function(G,U,Q){var le=Rn(g,function(be){return be(G)});return{criteria:le,index:++T,value:G}});return b3(M,function(G,U){return W3(G,U,x)})}function f1(c,g){return Su(c,g,function(x,T){return f7(c,T)})}function Su(c,g,x){for(var T=-1,M=g.length,G={};++T<M;){var U=g[T],Q=Hs(c,U);x(Q,U)&&va(G,ls(U,c),Q)}return G}function jn(c){return function(g){return Hs(g,c)}}function Jn(c,g,x,T){var M=T?V0:al,G=-1,U=g.length,Q=c;for(c===g&&(g=ti(g)),x&&(Q=Rn(c,Ri(x)));++G<U;)for(var le=0,be=g[G],Oe=x?x(be):be;(le=M(Q,Oe,le,T))>-1;)Q!==c&&Bh.call(Q,le,1),Bh.call(c,le,1);return c}function hr(c,g){for(var x=c?g.length:0,T=x-1;x--;){var M=g[x];if(x==T||M!==G){var G=M;$n(M)?Bh.call(c,M,1):Yh(c,M)}}return c}function Tl(c,g){return c+pu(_c()*(g-c+1))}function Kc(c,g,x,T){for(var M=-1,G=sr(ua((g-c)/(x||1)),0),U=ve(G);G--;)U[T?G:++M]=c,c+=x;return U}function ma(c,g){var x="";if(!c||g<1||g>ge)return x;do g%2&&(x+=c),g=pu(g/2),g&&(c+=c);while(g);return x}function jt(c,g){return Fi(ld(c,g,ao),c+"")}function Wr(c){return rs(Bd(c))}function h1(c,g){var x=Bd(c);return cd(x,Ns(g,0,x.length))}function va(c,g,x,T){if(!tr(c))return c;g=ls(g,c);for(var M=-1,G=g.length,U=G-1,Q=c;Q!=null&&++M<G;){var le=Mo(g[M]),be=x;if(le==="__proto__"||le==="constructor"||le==="prototype")return c;if(M!=U){var Oe=Q[le];be=T?T(Oe,le,Q):n,be===n&&(be=tr(Oe)?Oe:$n(g[M+1])?[]:{})}ha(Q,le,be),Q=Q[le]}return c}var Xh=Oh?function(c,g){return Oh.set(c,g),c}:ao,as=Lc?function(c,g){return Lc(c,"toString",{configurable:!0,enumerable:!1,value:d7(g),writable:!0})}:ao;function no(c){return cd(Bd(c))}function $r(c,g,x){var T=-1,M=c.length;g<0&&(g=-g>M?0:M+g),x=x>M?M:x,x<0&&(x+=M),M=g>x?0:x-g>>>0,g>>>=0;for(var G=ve(M);++T<M;)G[T]=c[T+g];return G}function d1(c,g){var x;return ss(c,function(T,M,G){return x=g(T,M,G),!x}),!!x}function Al(c,g,x){var T=0,M=c==null?T:c.length;if(typeof g=="number"&&g===g&&M<=st){for(;T<M;){var G=T+M>>>1,U=c[G];U!==null&&!Io(U)&&(x?U<=g:U<g)?T=G+1:M=G}return M}return Kh(c,g,ao,x)}function Kh(c,g,x,T){var M=0,G=c==null?0:c.length;if(G===0)return 0;g=x(g);for(var U=g!==g,Q=g===null,le=Io(g),be=g===n;M<G;){var Oe=pu((M+G)/2),He=x(c[Oe]),Ze=He!==n,ft=He===null,Tt=He===He,Ut=Io(He);if(U)var At=T||Tt;else be?At=Tt&&(T||Ze):Q?At=Tt&&Ze&&(T||!ft):le?At=Tt&&Ze&&!ft&&(T||!Ut):ft||Ut?At=!1:At=T?He<=g:He<g;At?M=Oe+1:G=Oe}return Lr(G,Ee)}function g1(c,g){for(var x=-1,T=c.length,M=0,G=[];++x<T;){var U=c[x],Q=g?g(U):U;if(!x||!Ks(Q,le)){var le=Q;G[M++]=U===0?0:U}}return G}function p1(c){return typeof c=="number"?c:Io(c)?we:+c}function Ei(c){if(typeof c=="string")return c;if(Ht(c))return Rn(c,Ei)+"";if(Io(c))return Ih?Ih.call(c):"";var g=c+"";return g=="0"&&1/c==-Te?"-0":g}function js(c,g,x){var T=-1,M=yh,G=c.length,U=!0,Q=[],le=Q;if(x)U=!1,M=$0;else if(G>=i){var be=g?null:h2(c);if(be)return gu(be);U=!1,M=Is,le=new la}else le=g?[]:Q;e:for(;++T<G;){var Oe=c[T],He=g?g(Oe):Oe;if(Oe=x||Oe!==0?Oe:0,U&&He===He){for(var Ze=le.length;Ze--;)if(le[Ze]===He)continue e;g&&le.push(He),Q.push(Oe)}else M(le,He,x)||(le!==Q&&le.push(He),Q.push(Oe))}return Q}function Yh(c,g){return g=ls(g,c),c=Cr(c,g),c==null||delete c[Mo(ii(g))]}function m1(c,g,x,T){return va(c,g,x(Hs(c,g)),T)}function Yc(c,g,x,T){for(var M=c.length,G=T?M:-1;(T?G--:++G<M)&&g(c[G],G,c););return x?$r(c,T?0:G,T?G+1:M):$r(c,T?G+1:0,T?M:G)}function Bl(c,g){var x=c;return x instanceof Nt&&(x=x.value()),j0(g,function(T,M){return M.func.apply(M.thisArg,du([T],M.args))},x)}function qh(c,g,x){var T=c.length;if(T<2)return T?js(c[0]):[];for(var M=-1,G=ve(T);++M<T;)for(var U=c[M],Q=-1;++Q<T;)Q!=M&&(G[M]=os(G[M]||U,c[Q],g,x));return js(Yn(G,1),g,x)}function qc(c,g,x){for(var T=-1,M=c.length,G=g.length,U={};++T<M;){var Q=T<G?g[T]:n;x(U,c[T],Q)}return U}function Rl(c){return gr(c)?c:[]}function Zh(c){return typeof c=="function"?c:ao}function ls(c,g){return Ht(c)?c:et(c,g)?[c]:k1(Pn(c))}var i2=jt;function zs(c,g,x){var T=c.length;return x=x===n?T:x,!g&&x>=T?c:$r(c,g,x)}var v1=Vp||function(c){return Gn.clearTimeout(c)};function y1(c,g){if(g)return c.slice();var x=c.length,T=Q0?Q0(x):new c.constructor(x);return c.copy(T),T}function Zc(c){var g=new c.constructor(c.byteLength);return new kc(g).set(new kc(c)),g}function o2(c,g){var x=g?Zc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.byteLength)}function s2(c){var g=new c.constructor(c.source,Sc.exec(c));return g.lastIndex=c.lastIndex,g}function u2(c){return bi?En(bi.call(c)):{}}function a2(c,g){var x=g?Zc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.length)}function w1(c,g){if(c!==g){var x=c!==n,T=c===null,M=c===c,G=Io(c),U=g!==n,Q=g===null,le=g===g,be=Io(g);if(!Q&&!be&&!G&&c>g||G&&U&&le&&!Q&&!be||T&&U&&le||!x&&le||!M)return 1;if(!T&&!G&&!be&&c<g||be&&x&&M&&!T&&!G||Q&&x&&M||!U&&M||!le)return-1}return 0}function W3(c,g,x){for(var T=-1,M=c.criteria,G=g.criteria,U=M.length,Q=x.length;++T<U;){var le=w1(M[T],G[T]);if(le){if(T>=Q)return le;var be=x[T];return le*(be=="desc"?-1:1)}}return c.index-g.index}function l2(c,g,x,T){for(var M=-1,G=c.length,U=x.length,Q=-1,le=g.length,be=sr(G-U,0),Oe=ve(le+be),He=!T;++Q<le;)Oe[Q]=g[Q];for(;++M<U;)(He||M<G)&&(Oe[x[M]]=c[M]);for(;be--;)Oe[Q++]=c[M++];return Oe}function C1(c,g,x,T){for(var M=-1,G=c.length,U=-1,Q=x.length,le=-1,be=g.length,Oe=sr(G-Q,0),He=ve(Oe+be),Ze=!T;++M<Oe;)He[M]=c[M];for(var ft=M;++le<be;)He[ft+le]=g[le];for(;++U<Q;)(Ze||M<G)&&(He[ft+x[U]]=c[M++]);return He}function ti(c,g){var x=-1,T=c.length;for(g||(g=ve(T));++x<T;)g[x]=c[x];return g}function To(c,g,x,T){var M=!x;x||(x={});for(var G=-1,U=g.length;++G<U;){var Q=g[G],le=T?T(x[Q],c[Q],Q,x,c):n;le===n&&(le=c[Q]),M?is(x,Q,le):ha(x,Q,le)}return x}function Qh(c,g){return To(c,Ao(c),g)}function $3(c,g){return To(c,g2(c),g)}function Jh(c,g){return function(x,T){var M=Ht(x)?G0:Oi,G=g?g():{};return M(x,c,xt(T,2),G)}}function Ml(c){return jt(function(g,x){var T=-1,M=x.length,G=M>1?x[M-1]:n,U=M>2?x[2]:n;for(G=c.length>3&&typeof G=="function"?(M--,G):n,U&&ri(x[0],x[1],U)&&(G=M<3?n:G,M=1),g=En(g);++T<M;){var Q=x[T];Q&&c(g,Q,T,G)}return g})}function ro(c,g){return function(x,T){if(x==null)return x;if(!so(x))return c(x,T);for(var M=x.length,G=g?M:-1,U=En(x);(g?G--:++G<M)&&T(U[G],G,U)!==!1;);return x}}function ed(c){return function(g,x,T){for(var M=-1,G=En(g),U=T(g),Q=U.length;Q--;){var le=U[c?Q:++M];if(x(G[le],le,G)===!1)break}return g}}function td(c,g,x){var T=g&S,M=bl(c);function G(){var U=this&&this!==Gn&&this instanceof G?M:c;return U.apply(T?x:this,arguments)}return G}function x1(c){return function(g){g=Pn(g);var x=cl(g)?Mi(g):n,T=x?x[0]:g.charAt(0),M=x?zs(x,1).join(""):g.slice(1);return T[c]()+M}}function ya(c){return function(g){return j0(f6(c6(g).replace(P3,"")),c,"")}}function bl(c){return function(){var g=arguments;switch(g.length){case 0:return new c;case 1:return new c(g[0]);case 2:return new c(g[0],g[1]);case 3:return new c(g[0],g[1],g[2]);case 4:return new c(g[0],g[1],g[2],g[3]);case 5:return new c(g[0],g[1],g[2],g[3],g[4]);case 6:return new c(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new c(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var x=wl(c.prototype),T=c.apply(x,g);return tr(T)?T:x}}function E1(c,g,x){var T=bl(c);function M(){for(var G=arguments.length,U=ve(G),Q=G,le=Vs(M);Q--;)U[Q]=arguments[Q];var be=G<3&&U[0]!==le&&U[G-1]!==le?[]:Ki(U,le);if(G-=be.length,G<x)return ni(c,g,Ol,M.placeholder,n,U,be,n,n,x-G);var Oe=this&&this!==Gn&&this instanceof M?T:c;return Jr(Oe,this,U)}return M}function wa(c){return function(g,x,T){var M=En(g);if(!so(g)){var G=xt(x,3);g=jr(g),x=function(Q){return G(M[Q],Q,M)}}var U=c(g,x,T);return U>-1?M[G?g[U]:U]:n}}function nd(c){return fs(function(g){var x=g.length,T=x,M=_r.prototype.thru;for(c&&g.reverse();T--;){var G=g[T];if(typeof G!="function")throw new Yi(s);if(M&&!U&&Il(G)=="wrapper")var U=new _r([],!0)}for(T=U?T:x;++T<x;){G=g[T];var Q=Il(G),le=Q=="wrapper"?od(G):n;le&&sf(le[0])&&le[1]==(z|I|L|J)&&!le[4].length&&le[9]==1?U=U[Il(le[0])].apply(U,le[3]):U=G.length==1&&sf(G)?U[Q]():U.thru(G)}return function(){var be=arguments,Oe=be[0];if(U&&be.length==1&&Ht(Oe))return U.plant(Oe).value();for(var He=0,Ze=x?g[He].apply(this,be):Oe;++He<x;)Ze=g[He].call(this,Ze);return Ze}})}function Ol(c,g,x,T,M,G,U,Q,le,be){var Oe=g&z,He=g&S,Ze=g&A,ft=g&(I|_),Tt=g&ae,Ut=Ze?n:bl(c);function At(){for(var Jt=arguments.length,an=ve(Jt),Fo=Jt;Fo--;)an[Fo]=arguments[Fo];if(ft)var Li=Vs(At),ko=kp(an,Li);if(T&&(an=l2(an,T,M,ft)),G&&(an=C1(an,G,U,ft)),Jt-=ko,ft&&Jt<be){var pr=Ki(an,Li);return ni(c,g,Ol,At.placeholder,x,an,pr,Q,le,be-Jt)}var Ys=He?x:this,Ba=Ze?Ys[c]:c;return Jt=an.length,Q?an=Bo(an,Q):Tt&&Jt>1&&an.reverse(),Oe&&le<Jt&&(an.length=le),this&&this!==Gn&&this instanceof At&&(Ba=Ut||bl(Ba)),Ba.apply(Ys,an)}return At}function c2(c,g){return function(x,T){return Gs(x,c,g(T),{})}}function Qc(c,g){return function(x,T){var M;if(x===n&&T===n)return g;if(x!==n&&(M=x),T!==n){if(M===n)return T;typeof x=="string"||typeof T=="string"?(x=Ei(x),T=Ei(T)):(x=p1(x),T=p1(T)),M=c(x,T)}return M}}function rd(c){return fs(function(g){return g=Rn(g,Ri(xt())),jt(function(x){var T=this;return c(g,function(M){return Jr(M,T,x)})})})}function Jc(c,g){g=g===n?" ":Ei(g);var x=g.length;if(x<2)return x?ma(g,c):g;var T=ma(g,ua(c/oa(g)));return cl(g)?zs(Mi(T),0,c).join(""):T.slice(0,c)}function f2(c,g,x,T){var M=g&S,G=bl(c);function U(){for(var Q=-1,le=arguments.length,be=-1,Oe=T.length,He=ve(Oe+le),Ze=this&&this!==Gn&&this instanceof U?G:c;++be<Oe;)He[be]=T[be];for(;le--;)He[be++]=arguments[++Q];return Jr(Ze,M?x:this,He)}return U}function P1(c){return function(g,x,T){return T&&typeof T!="number"&&ri(g,x,T)&&(x=T=n),g=Aa(g),x===n?(x=g,g=0):x=Aa(x),T=T===n?g<x?1:-1:Aa(T),Kc(g,x,T,c)}}function id(c){return function(g,x){return typeof g=="string"&&typeof x=="string"||(g=ds(g),x=ds(x)),c(g,x)}}function ni(c,g,x,T,M,G,U,Q,le,be){var Oe=g&I,He=Oe?U:n,Ze=Oe?n:U,ft=Oe?G:n,Tt=Oe?n:G;g|=Oe?L:j,g&=~(Oe?j:L),g&B||(g&=-4);var Ut=[c,g,M,ft,He,Tt,Ze,Q,le,be],At=x.apply(n,Ut);return sf(c)&&I1(At,Ut),At.placeholder=T,F1(At,c,g)}function Tr(c){var g=or[c];return function(x,T){if(x=ds(x),T=T==null?0:Lr(zt(T),292),T&&gl(x)){var M=(Pn(x)+"e").split("e"),G=g(M[0]+"e"+(+M[1]+T));return M=(Pn(G)+"e").split("e"),+(M[0]+"e"+(+M[1]-T))}return g(x)}}var h2=mu&&1/gu(new mu([,-0]))[1]==Te?function(c){return new mu(c)}:m7;function S1(c){return function(g){var x=Ar(g);return x==lt?xh(g):x==en?k3(g):O3(g,c(g))}}function cs(c,g,x,T,M,G,U,Q){var le=g&A;if(!le&&typeof c!="function")throw new Yi(s);var be=T?T.length:0;if(be||(g&=-97,T=M=n),U=U===n?U:sr(zt(U),0),Q=Q===n?Q:zt(Q),be-=M?M.length:0,g&j){var Oe=T,He=M;T=M=n}var Ze=le?n:od(c),ft=[c,g,x,T,M,Oe,He,G,U,Q];if(Ze&&y2(ft,Ze),c=ft[0],g=ft[1],x=ft[2],T=ft[3],M=ft[4],Q=ft[9]=ft[9]===n?le?0:c.length:sr(ft[9]-be,0),!Q&&g&(I|_)&&(g&=-25),!g||g==S)var Tt=td(c,g,x);else g==I||g==_?Tt=E1(c,g,Q):(g==L||g==(S|L))&&!M.length?Tt=f2(c,g,x,T):Tt=Ol.apply(n,ft);var Ut=Ze?Xh:I1;return F1(Ut(Tt,ft),c,g)}function D1(c,g,x,T){return c===n||Ks(c,Jo[x])&&!fn.call(T,x)?g:c}function T1(c,g,x,T,M,G){return tr(c)&&tr(g)&&(G.set(g,c),pa(c,g,n,T1,G),G.delete(g)),c}function A1(c){return q1(c)?n:c}function B1(c,g,x,T,M,G){var U=x&E,Q=c.length,le=g.length;if(Q!=le&&!(U&&le>Q))return!1;var be=G.get(c),Oe=G.get(g);if(be&&Oe)return be==g&&Oe==c;var He=-1,Ze=!0,ft=x&y?new la:n;for(G.set(c,g),G.set(g,c);++He<Q;){var Tt=c[He],Ut=g[He];if(T)var At=U?T(Ut,Tt,He,g,c,G):T(Tt,Ut,He,c,g,G);if(At!==n){if(At)continue;Ze=!1;break}if(ft){if(!z0(g,function(Jt,an){if(!Is(ft,an)&&(Tt===Jt||M(Tt,Jt,x,T,G)))return ft.push(an)})){Ze=!1;break}}else if(!(Tt===Ut||M(Tt,Ut,x,T,G))){Ze=!1;break}}return G.delete(c),G.delete(g),Ze}function R1(c,g,x,T,M,G,U){switch(x){case Tn:if(c.byteLength!=g.byteLength||c.byteOffset!=g.byteOffset)return!1;c=c.buffer,g=g.buffer;case vr:return!(c.byteLength!=g.byteLength||!G(new kc(c),new kc(g)));case Se:case Ke:case yt:return Ks(+c,+g);case Bt:return c.name==g.name&&c.message==g.message;case Dn:case tn:return c==g+"";case lt:var Q=xh;case en:var le=T&E;if(Q||(Q=gu),c.size!=g.size&&!le)return!1;var be=U.get(c);if(be)return be==g;T|=y,U.set(c,g);var Oe=B1(Q(c),Q(g),T,M,G,U);return U.delete(c),Oe;case Kn:if(bi)return bi.call(c)==bi.call(g)}return!1}function d2(c,g,x,T,M,G){var U=x&E,Q=ef(c),le=Q.length,be=ef(g),Oe=be.length;if(le!=Oe&&!U)return!1;for(var He=le;He--;){var Ze=Q[He];if(!(U?Ze in g:fn.call(g,Ze)))return!1}var ft=G.get(c),Tt=G.get(g);if(ft&&Tt)return ft==g&&Tt==c;var Ut=!0;G.set(c,g),G.set(g,c);for(var At=U;++He<le;){Ze=Q[He];var Jt=c[Ze],an=g[Ze];if(T)var Fo=U?T(an,Jt,Ze,g,c,G):T(Jt,an,Ze,c,g,G);if(!(Fo===n?Jt===an||M(Jt,an,x,T,G):Fo)){Ut=!1;break}At||(At=Ze=="constructor")}if(Ut&&!At){var Li=c.constructor,ko=g.constructor;Li!=ko&&"constructor"in c&&"constructor"in g&&!(typeof Li=="function"&&Li instanceof Li&&typeof ko=="function"&&ko instanceof ko)&&(Ut=!1)}return G.delete(c),G.delete(g),Ut}function fs(c){return Fi(ld(c,n,hd),c+"")}function ef(c){return Wh(c,jr,Ao)}function tf(c){return Wh(c,uo,g2)}var od=Oh?function(c){return Oh.get(c)}:m7;function Il(c){for(var g=c.name+"",x=vl[g],T=fn.call(vl,g)?x.length:0;T--;){var M=x[T],G=M.func;if(G==null||G==c)return M.name}return g}function Vs(c){var g=fn.call(N,"placeholder")?N:c;return g.placeholder}function xt(){var c=N.iteratee||g7;return c=c===g7?Dl:c,arguments.length?c(arguments[0],arguments[1]):c}function nf(c,g){var x=c.__data__;return Fl(g)?x[typeof g=="string"?"string":"hash"]:x.map}function rf(c){for(var g=jr(c),x=g.length;x--;){var T=g[x],M=c[T];g[x]=[T,M,uf(M)]}return g}function Du(c,g){var x=ll(c,g);return u1(x)?x:n}function sd(c){var g=fn.call(c,sa),x=c[sa];try{c[sa]=n;var T=!0}catch{}var M=Ic.call(c);return T&&(g?c[sa]=x:delete c[sa]),M}var Ao=Rh?function(c){return c==null?[]:(c=En(c),hu(Rh(c),function(g){return Ah.call(c,g)}))}:v7,g2=Rh?function(c){for(var g=[];c;)du(g,Ao(c)),c=So(c);return g}:v7,Ar=Dr;(Nc&&Ar(new Nc(new ArrayBuffer(1)))!=Tn||aa&&Ar(new aa)!=lt||Hc&&Ar(Hc.resolve())!=Nn||mu&&Ar(new mu)!=en||Gc&&Ar(new Gc)!=Wt)&&(Ar=function(c){var g=Dr(c),x=g==Rt?c.constructor:n,T=x?Tu(x):"";if(T)switch(T){case t1:return Tn;case vu:return lt;case Xp:return Nn;case yl:return en;case es:return Wt}return g});function M1(c,g,x){for(var T=-1,M=x.length;++T<M;){var G=x[T],U=G.size;switch(G.type){case"drop":c+=U;break;case"dropRight":g-=U;break;case"take":g=Lr(g,c+U);break;case"takeRight":c=sr(c,g-U);break}}return{start:c,end:g}}function p2(c){var g=c.match(Ja);return g?g[1].split(Pc):[]}function b1(c,g,x){g=ls(g,c);for(var T=-1,M=g.length,G=!1;++T<M;){var U=Mo(g[T]);if(!(G=c!=null&&x(c,U)))break;c=c[U]}return G||++T!=M?G:(M=c==null?0:c.length,!!M&&k2(M)&&$n(U,M)&&(Ht(c)||pf(c)))}function of(c){var g=c.length,x=new c.constructor(g);return g&&typeof c[0]=="string"&&fn.call(c,"index")&&(x.index=c.index,x.input=c.input),x}function Br(c){return typeof c.constructor=="function"&&!Us(c)?wl(So(c)):{}}function j3(c,g,x){var T=c.constructor;switch(g){case vr:return Zc(c);case Se:case Ke:return new T(+c);case Tn:return o2(c,x);case yr:case wr:case ir:case Vi:case Ui:case Xi:case qu:case Rs:case Eo:return a2(c,x);case lt:return new T;case yt:case tn:return new T(c);case Dn:return s2(c);case en:return new T;case Kn:return u2(c)}}function z3(c,g){var x=g.length;if(!x)return c;var T=x-1;return g[T]=(x>1?"& ":"")+g[T],g=g.join(x>2?", ":" "),c.replace(Qa,`{
/* [wrapped with `+g+`] */
`)}function ud(c){return Ht(c)||pf(c)||!!(zp&&c&&c[zp])}function $n(c,g){var x=typeof c;return g=g??ge,!!g&&(x=="number"||x!="symbol"&&uh.test(c))&&c>-1&&c%1==0&&c<g}function ri(c,g,x){if(!tr(x))return!1;var T=typeof g;return(T=="number"?so(x)&&$n(g,x.length):T=="string"&&g in x)?Ks(x[g],c):!1}function et(c,g){if(Ht(c))return!1;var x=typeof c;return x=="number"||x=="symbol"||x=="boolean"||c==null||Io(c)?!0:rh.test(c)||!xc.test(c)||g!=null&&c in En(g)}function Fl(c){var g=typeof c;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?c!=="__proto__":c===null}function sf(c){var g=Il(c),x=N[g];if(typeof x!="function"||!(g in Nt.prototype))return!1;if(c===x)return!0;var T=od(x);return!!T&&c===T[0]}function m2(c){return!!Sh&&Sh in c}var V3=hl?Ta:y7;function Us(c){var g=c&&c.constructor,x=typeof g=="function"&&g.prototype||Jo;return c===x}function uf(c){return c===c&&!tr(c)}function ad(c,g){return function(x){return x==null?!1:x[c]===g&&(g!==n||c in En(x))}}function v2(c){var g=pe(c,function(T){return x.size===h&&x.clear(),T}),x=g.cache;return g}function y2(c,g){var x=c[1],T=g[1],M=x|T,G=M<(S|A|z),U=T==z&&x==I||T==z&&x==J&&c[7].length<=g[8]||T==(z|J)&&g[7].length<=g[8]&&x==I;if(!(G||U))return c;T&S&&(c[2]=g[2],M|=x&S?0:B);var Q=g[3];if(Q){var le=c[3];c[3]=le?l2(le,Q,g[4]):Q,c[4]=le?Ki(c[3],d):g[4]}return Q=g[5],Q&&(le=c[5],c[5]=le?C1(le,Q,g[6]):Q,c[6]=le?Ki(c[5],d):g[6]),Q=g[7],Q&&(c[7]=Q),T&z&&(c[8]=c[8]==null?g[8]:Lr(c[8],g[8])),c[9]==null&&(c[9]=g[9]),c[0]=g[0],c[1]=M,c}function w2(c){var g=[];if(c!=null)for(var x in En(c))g.push(x);return g}function O1(c){return Ic.call(c)}function ld(c,g,x){return g=sr(g===n?c.length-1:g,0),function(){for(var T=arguments,M=-1,G=sr(T.length-g,0),U=ve(G);++M<G;)U[M]=T[g+M];M=-1;for(var Q=ve(g+1);++M<g;)Q[M]=T[M];return Q[g]=x(U),Jr(c,this,Q)}}function Cr(c,g){return g.length<2?c:Hs(c,$r(g,0,-1))}function Bo(c,g){for(var x=c.length,T=Lr(g.length,x),M=ti(c);T--;){var G=g[T];c[T]=$n(G,x)?M[G]:n}return c}function hs(c,g){if(!(g==="constructor"&&typeof c[g]=="function")&&g!="__proto__")return c[g]}var I1=Ro(Xh),kl=J0||function(c,g){return Gn.setTimeout(c,g)},Fi=Ro(as);function F1(c,g,x){var T=g+"";return Fi(c,z3(T,C2(p2(T),x)))}function Ro(c){var g=0,x=0;return function(){var T=G3(),M=ce-(T-x);if(x=T,M>0){if(++g>=oe)return arguments[0]}else g=0;return c.apply(n,arguments)}}function cd(c,g){var x=-1,T=c.length,M=T-1;for(g=g===n?T:g;++x<g;){var G=Tl(x,M),U=c[G];c[G]=c[x],c[x]=U}return c.length=g,c}var k1=v2(function(c){var g=[];return c.charCodeAt(0)===46&&g.push(""),c.replace(Qu,function(x,T,M,G){g.push(M?G.replace(F0,"$1"):T||x)}),g});function Mo(c){if(typeof c=="string"||Io(c))return c;var g=c+"";return g=="0"&&1/c==-Te?"-0":g}function Tu(c){if(c!=null){try{return Oc.call(c)}catch{}try{return c+""}catch{}}return""}function C2(c,g){return kr(Me,function(x){var T="_."+x[0];g&x[1]&&!yh(c,T)&&c.push(T)}),c.sort()}function x2(c){if(c instanceof Nt)return c.clone();var g=new _r(c.__wrapped__,c.__chain__);return g.__actions__=ti(c.__actions__),g.__index__=c.__index__,g.__values__=c.__values__,g}function fd(c,g,x){(x?ri(c,g,x):g===n)?g=1:g=sr(zt(g),0);var T=c==null?0:c.length;if(!T||g<1)return[];for(var M=0,G=0,U=ve(ua(T/g));M<T;)U[G++]=$r(c,M,M+=g);return U}function L1(c){for(var g=-1,x=c==null?0:c.length,T=0,M=[];++g<x;){var G=c[g];G&&(M[T++]=G)}return M}function io(){var c=arguments.length;if(!c)return[];for(var g=ve(c-1),x=arguments[0],T=c;T--;)g[T-1]=arguments[T];return du(Ht(x)?ti(x):[x],Yn(g,1))}var un=jt(function(c,g){return gr(c)?os(c,Yn(g,1,gr,!0)):[]}),xr=jt(function(c,g){var x=ii(g);return gr(x)&&(x=n),gr(c)?os(c,Yn(g,1,gr,!0),xt(x,2)):[]}),ur=jt(function(c,g){var x=ii(g);return gr(x)&&(x=n),gr(c)?os(c,Yn(g,1,gr,!0),n,x):[]});function Rr(c,g,x){var T=c==null?0:c.length;return T?(g=x||g===n?1:zt(g),$r(c,g<0?0:g,T)):[]}function ki(c,g,x){var T=c==null?0:c.length;return T?(g=x||g===n?1:zt(g),g=T-g,$r(c,0,g<0?0:g)):[]}function Ll(c,g){return c&&c.length?Yc(c,xt(g,3),!0,!0):[]}function dr(c,g){return c&&c.length?Yc(c,xt(g,3),!0):[]}function af(c,g,x,T){var M=c==null?0:c.length;return M?(x&&typeof x!="number"&&ri(c,g,x)&&(x=0,T=M),t2(c,g,x,T)):[]}function Au(c,g,x){var T=c==null?0:c.length;if(!T)return-1;var M=x==null?0:zt(x);return M<0&&(M=sr(T+M,0)),wh(c,xt(g,3),M)}function lf(c,g,x){var T=c==null?0:c.length;if(!T)return-1;var M=T-1;return x!==n&&(M=zt(x),M=x<0?sr(T+M,0):Lr(M,T-1)),wh(c,xt(g,3),M,!0)}function hd(c){var g=c==null?0:c.length;return g?Yn(c,1):[]}function cf(c){var g=c==null?0:c.length;return g?Yn(c,Te):[]}function Pi(c,g){var x=c==null?0:c.length;return x?(g=g===n?1:zt(g),Yn(c,g)):[]}function _1(c){for(var g=-1,x=c==null?0:c.length,T={};++g<x;){var M=c[g];T[M[0]]=M[1]}return T}function Ca(c){return c&&c.length?c[0]:n}function Xs(c,g,x){var T=c==null?0:c.length;if(!T)return-1;var M=x==null?0:zt(x);return M<0&&(M=sr(T+M,0)),al(c,g,M)}function dd(c){var g=c==null?0:c.length;return g?$r(c,0,-1):[]}var N1=jt(function(c){var g=Rn(c,Rl);return g.length&&g[0]===c[0]?$h(g):[]}),Bu=jt(function(c){var g=ii(c),x=Rn(c,Rl);return g===ii(x)?g=n:x.pop(),x.length&&x[0]===c[0]?$h(x,xt(g,2)):[]}),gd=jt(function(c){var g=ii(c),x=Rn(c,Rl);return g=typeof g=="function"?g:n,g&&x.pop(),x.length&&x[0]===c[0]?$h(x,n,g):[]});function Ru(c,g){return c==null?"":Mh.call(c,g)}function ii(c){var g=c==null?0:c.length;return g?c[g-1]:n}function ff(c,g,x){var T=c==null?0:c.length;if(!T)return-1;var M=T;return x!==n&&(M=zt(x),M=M<0?sr(T+M,0):Lr(M,T-1)),g===g?L3(c,g,M):wh(c,Mp,M,!0)}function H1(c,g){return c&&c.length?Uh(c,zt(g)):n}var pd=jt(hf);function hf(c,g){return c&&c.length&&g&&g.length?Jn(c,g):c}function oi(c,g,x){return c&&c.length&&g&&g.length?Jn(c,g,xt(x,2)):c}function Mu(c,g,x){return c&&c.length&&g&&g.length?Jn(c,g,n,x):c}var bo=fs(function(c,g){var x=c==null?0:c.length,T=Hh(c,g);return hr(c,Rn(g,function(M){return $n(M,x)?+M:M}).sort(w1)),T});function Si(c,g){var x=[];if(!(c&&c.length))return x;var T=-1,M=[],G=c.length;for(g=xt(g,3);++T<G;){var U=c[T];g(U,T,c)&&(x.push(U),M.push(T))}return hr(c,M),x}function md(c){return c==null?c:bh.call(c)}function G1(c,g,x){var T=c==null?0:c.length;return T?(x&&typeof x!="number"&&ri(c,g,x)?(g=0,x=T):(g=g==null?0:zt(g),x=x===n?T:zt(x)),$r(c,g,x)):[]}function W1(c,g){return Al(c,g)}function U3(c,g,x){return Kh(c,g,xt(x,2))}function bu(c,g){var x=c==null?0:c.length;if(x){var T=Al(c,g);if(T<x&&Ks(c[T],g))return T}return-1}function E2(c,g){return Al(c,g,!0)}function $1(c,g,x){return Kh(c,g,xt(x,2),!0)}function xa(c,g){var x=c==null?0:c.length;if(x){var T=Al(c,g,!0)-1;if(Ks(c[T],g))return T}return-1}function j1(c){return c&&c.length?g1(c):[]}function Ea(c,g){return c&&c.length?g1(c,xt(g,2)):[]}function P2(c){var g=c==null?0:c.length;return g?$r(c,1,g):[]}function S2(c,g,x){return c&&c.length?(g=x||g===n?1:zt(g),$r(c,0,g<0?0:g)):[]}function z1(c,g,x){var T=c==null?0:c.length;return T?(g=x||g===n?1:zt(g),g=T-g,$r(c,g<0?0:g,T)):[]}function vd(c,g){return c&&c.length?Yc(c,xt(g,3),!1,!0):[]}function X3(c,g){return c&&c.length?Yc(c,xt(g,3)):[]}var K3=jt(function(c){return js(Yn(c,1,gr,!0))}),D2=jt(function(c){var g=ii(c);return gr(g)&&(g=n),js(Yn(c,1,gr,!0),xt(g,2))}),T2=jt(function(c){var g=ii(c);return g=typeof g=="function"?g:n,js(Yn(c,1,gr,!0),n,g)});function Pa(c){return c&&c.length?js(c):[]}function Y3(c,g){return c&&c.length?js(c,xt(g,2)):[]}function _l(c,g){return g=typeof g=="function"?g:n,c&&c.length?js(c,n,g):[]}function yd(c){if(!(c&&c.length))return[];var g=0;return c=hu(c,function(x){if(gr(x))return g=sr(x.length,g),!0}),K0(g,function(x){return Rn(c,U0(x))})}function zn(c,g){if(!(c&&c.length))return[];var x=yd(c);return g==null?x:Rn(x,function(T){return Jr(g,n,T)})}var q3=jt(function(c,g){return gr(c)?os(c,g):[]}),A2=jt(function(c){return qh(hu(c,gr))}),Z3=jt(function(c){var g=ii(c);return gr(g)&&(g=n),qh(hu(c,gr),xt(g,2))}),Q3=jt(function(c){var g=ii(c);return g=typeof g=="function"?g:n,qh(hu(c,gr),n,g)}),B2=jt(yd);function R2(c,g){return qc(c||[],g||[],ha)}function J3(c,g){return qc(c||[],g||[],va)}var oo=jt(function(c){var g=c.length,x=g>1?c[g-1]:n;return x=typeof x=="function"?(c.pop(),x):n,zn(c,x)});function wd(c){var g=N(c);return g.__chain__=!0,g}function e7(c,g){return g(c),c}function Oo(c,g){return g(c)}var Cd=fs(function(c){var g=c.length,x=g?c[0]:0,T=this.__wrapped__,M=function(G){return Hh(G,c)};return g>1||this.__actions__.length||!(T instanceof Nt)||!$n(x)?this.thru(M):(T=T.slice(x,+x+(g?1:0)),T.__actions__.push({func:Oo,args:[M],thisArg:n}),new _r(T,this.__chain__).thru(function(G){return g&&!G.length&&G.push(n),G}))});function Sa(){return wd(this)}function xd(){return new _r(this.value(),this.__chain__)}function V1(){this.__values__===n&&(this.__values__=t6(this.value()));var c=this.__index__>=this.__values__.length,g=c?n:this.__values__[this.__index__++];return{done:c,value:g}}function U1(){return this}function t7(c){for(var g,x=this;x instanceof ts;){var T=x2(x);T.__index__=0,T.__values__=n,g?M.__wrapped__=T:g=T;var M=T;x=x.__wrapped__}return M.__wrapped__=c,g}function X1(){var c=this.__wrapped__;if(c instanceof Nt){var g=c;return this.__actions__.length&&(g=new Nt(this)),g=g.reverse(),g.__actions__.push({func:Oo,args:[md],thisArg:n}),new _r(g,this.__chain__)}return this.thru(md)}function n7(){return Bl(this.__wrapped__,this.__actions__)}var M2=Jh(function(c,g,x){fn.call(c,x)?++c[x]:is(c,x,1)});function b2(c,g,x){var T=Ht(c)?W0:jc;return x&&ri(c,g,x)&&(g=n),T(c,xt(g,3))}function Ed(c,g){var x=Ht(c)?hu:o1;return x(c,xt(g,3))}var Pd=wa(Au),O2=wa(lf);function K1(c,g){return Yn(Da(c,g),1)}function r7(c,g){return Yn(Da(c,g),Te)}function I2(c,g,x){return x=x===n?1:zt(x),Yn(Da(c,g),x)}function Sd(c,g){var x=Ht(c)?kr:ss;return x(c,xt(g,3))}function df(c,g){var x=Ht(c)?vh:e2;return x(c,xt(g,3))}var Y1=Jh(function(c,g,x){fn.call(c,x)?c[x].push(g):is(c,x,[g])});function Dd(c,g,x,T){c=so(c)?c:Bd(c),x=x&&!T?zt(x):0;var M=c.length;return x<0&&(x=sr(M+x,0)),L2(c)?x<=M&&c.indexOf(g,x)>-1:!!M&&al(c,g,x)>-1}var F2=jt(function(c,g,x){var T=-1,M=typeof g=="function",G=so(c)?ve(c.length):[];return ss(c,function(U){G[++T]=M?Jr(g,U,x):eo(U,g,x)}),G}),i7=Jh(function(c,g,x){is(c,x,g)});function Da(c,g){var x=Ht(c)?Rn:l1;return x(c,xt(g,3))}function o7(c,g,x,T){return c==null?[]:(Ht(g)||(g=g==null?[]:[g]),x=T?n:x,Ht(x)||(x=x==null?[]:[x]),Xc(c,g,x))}var gf=Jh(function(c,g,x){c[x?0:1].push(g)},function(){return[[],[]]});function s7(c,g,x){var T=Ht(c)?j0:Op,M=arguments.length<3;return T(c,xt(g,4),x,M,ss)}function Td(c,g,x){var T=Ht(c)?B3:Op,M=arguments.length<3;return T(c,xt(g,4),x,M,e2)}function u(c,g){var x=Ht(c)?hu:o1;return x(c,ze(xt(g,3)))}function l(c){var g=Ht(c)?rs:Wr;return g(c)}function m(c,g,x){(x?ri(c,g,x):g===n)?g=1:g=zt(g);var T=Ht(c)?fa:h1;return T(c,g)}function C(c){var g=Ht(c)?Qp:no;return g(c)}function P(c){if(c==null)return 0;if(so(c))return L2(c)?oa(c):c.length;var g=Ar(c);return g==lt||g==en?c.size:$s(c).length}function D(c,g,x){var T=Ht(c)?z0:d1;return x&&ri(c,g,x)&&(g=n),T(c,xt(g,3))}var k=jt(function(c,g){if(c==null)return[];var x=g.length;return x>1&&ri(c,g[0],g[1])?g=[]:x>2&&ri(g[0],g[1],g[2])&&(g=[g[0]]),Xc(c,Yn(g,1),[])}),V=Fn||function(){return Gn.Date.now()};function Z(c,g){if(typeof g!="function")throw new Yi(s);return c=zt(c),function(){if(--c<1)return g.apply(this,arguments)}}function xe(c,g,x){return g=x?n:g,g=c&&g==null?c.length:g,cs(c,z,n,n,n,n,g)}function _e(c,g){var x;if(typeof g!="function")throw new Yi(s);return c=zt(c),function(){return--c>0&&(x=g.apply(this,arguments)),c<=1&&(g=n),x}}var Ge=jt(function(c,g,x){var T=S;if(x.length){var M=Ki(x,Vs(Ge));T|=L}return cs(c,T,g,x,M)}),ke=jt(function(c,g,x){var T=S|A;if(x.length){var M=Ki(x,Vs(ke));T|=L}return cs(g,T,c,x,M)});function Je(c,g,x){g=x?n:g;var T=cs(c,I,n,n,n,n,n,g);return T.placeholder=Je.placeholder,T}function nt(c,g,x){g=x?n:g;var T=cs(c,_,n,n,n,n,n,g);return T.placeholder=nt.placeholder,T}function it(c,g,x){var T,M,G,U,Q,le,be=0,Oe=!1,He=!1,Ze=!0;if(typeof c!="function")throw new Yi(s);g=ds(g)||0,tr(x)&&(Oe=!!x.leading,He="maxWait"in x,G=He?sr(ds(x.maxWait)||0,g):G,Ze="trailing"in x?!!x.trailing:Ze);function ft(pr){var Ys=T,Ba=M;return T=M=n,be=pr,U=c.apply(Ba,Ys),U}function Tt(pr){return be=pr,Q=kl(Jt,g),Oe?ft(pr):U}function Ut(pr){var Ys=pr-le,Ba=pr-be,g6=g-Ys;return He?Lr(g6,G-Ba):g6}function At(pr){var Ys=pr-le,Ba=pr-be;return le===n||Ys>=g||Ys<0||He&&Ba>=G}function Jt(){var pr=V();if(At(pr))return an(pr);Q=kl(Jt,Ut(pr))}function an(pr){return Q=n,Ze&&T?ft(pr):(T=M=n,U)}function Fo(){Q!==n&&v1(Q),be=0,T=le=M=Q=n}function Li(){return Q===n?U:an(V())}function ko(){var pr=V(),Ys=At(pr);if(T=arguments,M=this,le=pr,Ys){if(Q===n)return Tt(le);if(He)return v1(Q),Q=kl(Jt,g),ft(le)}return Q===n&&(Q=kl(Jt,g)),U}return ko.cancel=Fo,ko.flush=Li,ko}var er=jt(function(c,g){return i1(c,1,g)}),de=jt(function(c,g,x){return i1(c,ds(g)||0,x)});function te(c){return cs(c,ae)}function pe(c,g){if(typeof c!="function"||g!=null&&typeof g!="function")throw new Yi(s);var x=function(){var T=arguments,M=g?g.apply(this,T):T[0],G=x.cache;if(G.has(M))return G.get(M);var U=c.apply(this,T);return x.cache=G.set(M,U)||G,U};return x.cache=new(pe.Cache||qi),x}pe.Cache=qi;function ze(c){if(typeof c!="function")throw new Yi(s);return function(){var g=arguments;switch(g.length){case 0:return!c.call(this);case 1:return!c.call(this,g[0]);case 2:return!c.call(this,g[0],g[1]);case 3:return!c.call(this,g[0],g[1],g[2])}return!c.apply(this,g)}}function ct(c){return _e(2,c)}var Ct=i2(function(c,g){g=g.length==1&&Ht(g[0])?Rn(g[0],Ri(xt())):Rn(Yn(g,1),Ri(xt()));var x=g.length;return jt(function(T){for(var M=-1,G=Lr(T.length,x);++M<G;)T[M]=g[M].call(this,T[M]);return Jr(c,this,T)})}),vt=jt(function(c,g){var x=Ki(g,Vs(vt));return cs(c,L,n,g,x)}),Dt=jt(function(c,g){var x=Ki(g,Vs(Dt));return cs(c,j,n,g,x)}),Er=fs(function(c,g){return cs(c,J,n,n,n,g)});function hn(c,g){if(typeof c!="function")throw new Yi(s);return g=g===n?g:zt(g),jt(c,g)}function Ou(c,g){if(typeof c!="function")throw new Yi(s);return g=g==null?0:sr(zt(g),0),jt(function(x){var T=x[g],M=zs(x,0,g);return T&&du(M,T),Jr(c,this,M)})}function u7(c,g,x){var T=!0,M=!0;if(typeof c!="function")throw new Yi(s);return tr(x)&&(T="leading"in x?!!x.leading:T,M="trailing"in x?!!x.trailing:M),it(c,g,{leading:T,maxWait:g,trailing:M})}function NA(c){return xe(c,1)}function HA(c,g){return vt(Zh(g),c)}function GA(){if(!arguments.length)return[];var c=arguments[0];return Ht(c)?c:[c]}function WA(c){return xi(c,w)}function $A(c,g){return g=typeof g=="function"?g:n,xi(c,w,g)}function jA(c){return xi(c,p|w)}function zA(c,g){return g=typeof g=="function"?g:n,xi(c,p|w,g)}function VA(c,g){return g==null||$c(c,g,jr(g))}function Ks(c,g){return c===g||c!==c&&g!==g}var UA=id(Eu),XA=id(function(c,g){return c>=g}),pf=jh(function(){return arguments}())?jh:function(c){return ar(c)&&fn.call(c,"callee")&&!Ah.call(c,"callee")},Ht=ve.isArray,KA=H0?Ri(H0):n2;function so(c){return c!=null&&k2(c.length)&&!Ta(c)}function gr(c){return ar(c)&&so(c)}function YA(c){return c===!0||c===!1||ar(c)&&Dr(c)==Se}var Nl=e1||y7,qA=vi?Ri(vi):Ws;function ZA(c){return ar(c)&&c.nodeType===1&&!q1(c)}function QA(c){if(c==null)return!0;if(so(c)&&(Ht(c)||typeof c=="string"||typeof c.splice=="function"||Nl(c)||Ad(c)||pf(c)))return!c.length;var g=Ar(c);if(g==lt||g==en)return!c.size;if(Us(c))return!$s(c).length;for(var x in c)if(fn.call(c,x))return!1;return!0}function JA(c,g){return to(c,g)}function eB(c,g,x){x=typeof x=="function"?x:n;var T=x?x(c,g):n;return T===n?to(c,g,n,x):!!T}function a7(c){if(!ar(c))return!1;var g=Dr(c);return g==Bt||g==Ue||typeof c.message=="string"&&typeof c.name=="string"&&!q1(c)}function tB(c){return typeof c=="number"&&gl(c)}function Ta(c){if(!tr(c))return!1;var g=Dr(c);return g==It||g==St||g==Ce||g==rr}function Z4(c){return typeof c=="number"&&c==zt(c)}function k2(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ge}function tr(c){var g=typeof c;return c!=null&&(g=="object"||g=="function")}function ar(c){return c!=null&&typeof c=="object"}var Q4=ia?Ri(ia):r2;function nB(c,g){return c===g||Sl(c,g,rf(g))}function rB(c,g,x){return x=typeof x=="function"?x:n,Sl(c,g,rf(g),x)}function iB(c){return J4(c)&&c!=+c}function oB(c){if(V3(c))throw new Ft(o);return u1(c)}function sB(c){return c===null}function uB(c){return c==null}function J4(c){return typeof c=="number"||ar(c)&&Dr(c)==yt}function q1(c){if(!ar(c)||Dr(c)!=Rt)return!1;var g=So(c);if(g===null)return!0;var x=fn.call(g,"constructor")&&g.constructor;return typeof x=="function"&&x instanceof x&&Oc.call(x)==Dh}var l7=mh?Ri(mh):Vc;function aB(c){return Z4(c)&&c>=-ge&&c<=ge}var e6=ul?Ri(ul):us;function L2(c){return typeof c=="string"||!Ht(c)&&ar(c)&&Dr(c)==tn}function Io(c){return typeof c=="symbol"||ar(c)&&Dr(c)==Kn}var Ad=Ap?Ri(Ap):Uc;function lB(c){return c===n}function cB(c){return ar(c)&&Ar(c)==Wt}function fB(c){return ar(c)&&Dr(c)==Sr}var hB=id(Pu),dB=id(function(c,g){return c<=g});function t6(c){if(!c)return[];if(so(c))return L2(c)?Mi(c):ti(c);if(Ls&&c[Ls])return F3(c[Ls]());var g=Ar(c),x=g==lt?xh:g==en?gu:Bd;return x(c)}function Aa(c){if(!c)return c===0?c:0;if(c=ds(c),c===Te||c===-Te){var g=c<0?-1:1;return g*se}return c===c?c:0}function zt(c){var g=Aa(c),x=g%1;return g===g?x?g-x:g:0}function n6(c){return c?Ns(zt(c),0,X):0}function ds(c){if(typeof c=="number")return c;if(Io(c))return we;if(tr(c)){var g=typeof c.valueOf=="function"?c.valueOf():c;c=tr(g)?g+"":g}if(typeof c!="string")return c===0?c:+c;c=Ip(c);var x=k0.test(c);return x||sh.test(c)?gh(c.slice(2),x?2:8):ih.test(c)?we:+c}function r6(c){return To(c,uo(c))}function gB(c){return c?Ns(zt(c),-ge,ge):c===0?c:0}function Pn(c){return c==null?"":Ei(c)}var pB=Ml(function(c,g){if(Us(g)||so(g)){To(g,jr(g),c);return}for(var x in g)fn.call(g,x)&&ha(c,x,g[x])}),i6=Ml(function(c,g){To(g,uo(g),c)}),_2=Ml(function(c,g,x,T){To(g,uo(g),c,T)}),mB=Ml(function(c,g,x,T){To(g,jr(g),c,T)}),vB=fs(Hh);function yB(c,g){var x=wl(c);return g==null?x:Ln(x,g)}var wB=jt(function(c,g){c=En(c);var x=-1,T=g.length,M=T>2?g[2]:n;for(M&&ri(g[0],g[1],M)&&(T=1);++x<T;)for(var G=g[x],U=uo(G),Q=-1,le=U.length;++Q<le;){var be=U[Q],Oe=c[be];(Oe===n||Ks(Oe,Jo[be])&&!fn.call(c,be))&&(c[be]=G[be])}return c}),CB=jt(function(c){return c.push(n,T1),Jr(o6,n,c)});function xB(c,g){return Rp(c,xt(g,3),Ii)}function EB(c,g){return Rp(c,xt(g,3),xu)}function PB(c,g){return c==null?c:Gh(c,xt(g,3),uo)}function SB(c,g){return c==null?c:zc(c,xt(g,3),uo)}function DB(c,g){return c&&Ii(c,xt(g,3))}function TB(c,g){return c&&xu(c,xt(g,3))}function AB(c){return c==null?[]:Pl(c,jr(c))}function BB(c){return c==null?[]:Pl(c,uo(c))}function c7(c,g,x){var T=c==null?n:Hs(c,g);return T===n?x:T}function RB(c,g){return c!=null&&b1(c,g,Ji)}function f7(c,g){return c!=null&&b1(c,g,ga)}var MB=c2(function(c,g,x){g!=null&&typeof g.toString!="function"&&(g=Ic.call(g)),c[g]=x},d7(ao)),bB=c2(function(c,g,x){g!=null&&typeof g.toString!="function"&&(g=Ic.call(g)),fn.call(c,g)?c[g].push(x):c[g]=[x]},xt),OB=jt(eo);function jr(c){return so(c)?ns(c):$s(c)}function uo(c){return so(c)?ns(c,!0):a1(c)}function IB(c,g){var x={};return g=xt(g,3),Ii(c,function(T,M,G){is(x,g(T,M,G),T)}),x}function FB(c,g){var x={};return g=xt(g,3),Ii(c,function(T,M,G){is(x,M,g(T,M,G))}),x}var kB=Ml(function(c,g,x){pa(c,g,x)}),o6=Ml(function(c,g,x,T){pa(c,g,x,T)}),LB=fs(function(c,g){var x={};if(c==null)return x;var T=!1;g=Rn(g,function(G){return G=ls(G,c),T||(T=G.length>1),G}),To(c,tf(c),x),T&&(x=xi(x,p|v|w,A1));for(var M=g.length;M--;)Yh(x,g[M]);return x});function _B(c,g){return s6(c,ze(xt(g)))}var NB=fs(function(c,g){return c==null?{}:f1(c,g)});function s6(c,g){if(c==null)return{};var x=Rn(tf(c),function(T){return[T]});return g=xt(g),Su(c,x,function(T,M){return g(T,M[0])})}function HB(c,g,x){g=ls(g,c);var T=-1,M=g.length;for(M||(M=1,c=n);++T<M;){var G=c==null?n:c[Mo(g[T])];G===n&&(T=M,G=x),c=Ta(G)?G.call(c):G}return c}function GB(c,g,x){return c==null?c:va(c,g,x)}function WB(c,g,x,T){return T=typeof T=="function"?T:n,c==null?c:va(c,g,x,T)}var u6=S1(jr),a6=S1(uo);function $B(c,g,x){var T=Ht(c),M=T||Nl(c)||Ad(c);if(g=xt(g,4),x==null){var G=c&&c.constructor;M?x=T?new G:[]:tr(c)?x=Ta(G)?wl(So(c)):{}:x={}}return(M?kr:Ii)(c,function(U,Q,le){return g(x,U,Q,le)}),x}function jB(c,g){return c==null?!0:Yh(c,g)}function zB(c,g,x){return c==null?c:m1(c,g,Zh(x))}function VB(c,g,x,T){return T=typeof T=="function"?T:n,c==null?c:m1(c,g,Zh(x),T)}function Bd(c){return c==null?[]:Mc(c,jr(c))}function UB(c){return c==null?[]:Mc(c,uo(c))}function XB(c,g,x){return x===n&&(x=g,g=n),x!==n&&(x=ds(x),x=x===x?x:0),g!==n&&(g=ds(g),g=g===g?g:0),Ns(ds(c),g,x)}function KB(c,g,x){return g=Aa(g),x===n?(x=g,g=0):x=Aa(x),c=ds(c),s1(c,g,x)}function YB(c,g,x){if(x&&typeof x!="boolean"&&ri(c,g,x)&&(g=x=n),x===n&&(typeof g=="boolean"?(x=g,g=n):typeof c=="boolean"&&(x=c,c=n)),c===n&&g===n?(c=0,g=1):(c=Aa(c),g===n?(g=c,c=0):g=Aa(g)),c>g){var T=c;c=g,g=T}if(x||c%1||g%1){var M=_c();return Lr(c+M*(g-c+_0("1e-"+((M+"").length-1))),g)}return Tl(c,g)}var qB=ya(function(c,g,x){return g=g.toLowerCase(),c+(x?l6(g):g)});function l6(c){return h7(Pn(c).toLowerCase())}function c6(c){return c=Pn(c),c&&c.replace(ah,Lp).replace(Pp,"")}function ZB(c,g,x){c=Pn(c),g=Ei(g);var T=c.length;x=x===n?T:Ns(zt(x),0,T);var M=x;return x-=g.length,x>=0&&c.slice(x,M)==g}function QB(c){return c=Pn(c),c&&eh.test(c)?c.replace(bs,_p):c}function JB(c){return c=Pn(c),c&&ea.test(c)?c.replace(Ju,"\\$&"):c}var eR=ya(function(c,g,x){return c+(x?"-":"")+g.toLowerCase()}),tR=ya(function(c,g,x){return c+(x?" ":"")+g.toLowerCase()}),nR=x1("toLowerCase");function rR(c,g,x){c=Pn(c),g=zt(g);var T=g?oa(c):0;if(!g||T>=g)return c;var M=(g-T)/2;return Jc(pu(M),x)+c+Jc(ua(M),x)}function iR(c,g,x){c=Pn(c),g=zt(g);var T=g?oa(c):0;return g&&T<g?c+Jc(g-T,x):c}function oR(c,g,x){c=Pn(c),g=zt(g);var T=g?oa(c):0;return g&&T<g?Jc(g-T,x)+c:c}function sR(c,g,x){return x||g==null?g=0:g&&(g=+g),Up(Pn(c).replace(Ec,""),g||0)}function uR(c,g,x){return(x?ri(c,g,x):g===n)?g=1:g=zt(g),ma(Pn(c),g)}function aR(){var c=arguments,g=Pn(c[0]);return c.length<3?g:g.replace(c[1],c[2])}var lR=ya(function(c,g,x){return c+(x?"_":"")+g.toLowerCase()});function cR(c,g,x){return x&&typeof x!="number"&&ri(c,g,x)&&(g=x=n),x=x===n?X:x>>>0,x?(c=Pn(c),c&&(typeof g=="string"||g!=null&&!l7(g))&&(g=Ei(g),!g&&cl(c))?zs(Mi(c),0,x):c.split(g,x)):[]}var fR=ya(function(c,g,x){return c+(x?" ":"")+h7(g)});function hR(c,g,x){return c=Pn(c),x=x==null?0:Ns(zt(x),0,c.length),g=Ei(g),c.slice(x,x+g.length)==g}function dR(c,g,x){var T=N.templateSettings;x&&ri(c,g,x)&&(g=n),c=Pn(c),g=_2({},g,T,D1);var M=_2({},g.imports,T.imports,D1),G=jr(M),U=Mc(M,G),Q,le,be=0,Oe=g.interpolate||el,He="__p += '",Ze=bc((g.escape||el).source+"|"+Oe.source+"|"+(Oe===Cc?Os:el).source+"|"+(g.evaluate||el).source+"|$","g"),ft="//# sourceURL="+(fn.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++D3+"]")+`
`;c.replace(Ze,function(At,Jt,an,Fo,Li,ko){return an||(an=Fo),He+=c.slice(be,ko).replace(lh,Np),Jt&&(Q=!0,He+=`' +
__e(`+Jt+`) +
'`),Li&&(le=!0,He+=`';
`+Li+`;
__p += '`),an&&(He+=`' +
((__t = (`+an+`)) == null ? '' : __t) +
'`),be=ko+At.length,At}),He+=`';
`;var Tt=fn.call(g,"variable")&&g.variable;if(!Tt)He=`with (obj) {
`+He+`
}
`;else if(I0.test(Tt))throw new Ft(a);He=(le?He.replace(au,""):He).replace(Zu,"$1").replace(pi,"$1;"),He="function("+(Tt||"obj")+`) {
`+(Tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Q?", __e = _.escape":"")+(le?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+He+`return __p
}`;var Ut=h6(function(){return cn(G,ft+"return "+He).apply(n,U)});if(Ut.source=He,a7(Ut))throw Ut;return Ut}function gR(c){return Pn(c).toLowerCase()}function pR(c){return Pn(c).toUpperCase()}function mR(c,g,x){if(c=Pn(c),c&&(x||g===n))return Ip(c);if(!c||!(g=Ei(g)))return c;var T=Mi(c),M=Mi(g),G=Fp(T,M),U=Y0(T,M)+1;return zs(T,G,U).join("")}function vR(c,g,x){if(c=Pn(c),c&&(x||g===n))return c.slice(0,Ph(c)+1);if(!c||!(g=Ei(g)))return c;var T=Mi(c),M=Y0(T,Mi(g))+1;return zs(T,0,M).join("")}function yR(c,g,x){if(c=Pn(c),c&&(x||g===n))return c.replace(Ec,"");if(!c||!(g=Ei(g)))return c;var T=Mi(c),M=Fp(T,Mi(g));return zs(T,M).join("")}function wR(c,g){var x=ne,T=Pe;if(tr(g)){var M="separator"in g?g.separator:M;x="length"in g?zt(g.length):x,T="omission"in g?Ei(g.omission):T}c=Pn(c);var G=c.length;if(cl(c)){var U=Mi(c);G=U.length}if(x>=G)return c;var Q=x-oa(T);if(Q<1)return T;var le=U?zs(U,0,Q).join(""):c.slice(0,Q);if(M===n)return le+T;if(U&&(Q+=le.length-Q),l7(M)){if(c.slice(Q).search(M)){var be,Oe=le;for(M.global||(M=bc(M.source,Pn(Sc.exec(M))+"g")),M.lastIndex=0;be=M.exec(Oe);)var He=be.index;le=le.slice(0,He===n?Q:He)}}else if(c.indexOf(Ei(M),Q)!=Q){var Ze=le.lastIndexOf(M);Ze>-1&&(le=le.slice(0,Ze))}return le+T}function CR(c){return c=Pn(c),c&&wc.test(c)?c.replace(Ms,Hp):c}var xR=ya(function(c,g,x){return c+(x?" ":"")+g.toUpperCase()}),h7=x1("toUpperCase");function f6(c,g,x){return c=Pn(c),g=x?n:g,g===n?I3(c)?_3(c):M3(c):c.match(g)||[]}var h6=jt(function(c,g){try{return Jr(c,n,g)}catch(x){return a7(x)?x:new Ft(x)}}),ER=fs(function(c,g){return kr(g,function(x){x=Mo(x),is(c,x,Ge(c[x],c))}),c});function PR(c){var g=c==null?0:c.length,x=xt();return c=g?Rn(c,function(T){if(typeof T[1]!="function")throw new Yi(s);return[x(T[0]),T[1]]}):[],jt(function(T){for(var M=-1;++M<g;){var G=c[M];if(Jr(G[0],this,T))return Jr(G[1],this,T)}})}function SR(c){return Jp(xi(c,p))}function d7(c){return function(){return c}}function DR(c,g){return c==null||c!==c?g:c}var TR=nd(),AR=nd(!0);function ao(c){return c}function g7(c){return Dl(typeof c=="function"?c:xi(c,p))}function BR(c){return Vh(xi(c,p))}function RR(c,g){return Wn(c,xi(g,p))}var MR=jt(function(c,g){return function(x){return eo(x,c,g)}}),bR=jt(function(c,g){return function(x){return eo(c,x,g)}});function p7(c,g,x){var T=jr(g),M=Pl(g,T);x==null&&!(tr(g)&&(M.length||!T.length))&&(x=g,g=c,c=this,M=Pl(g,jr(g)));var G=!(tr(x)&&"chain"in x)||!!x.chain,U=Ta(c);return kr(M,function(Q){var le=g[Q];c[Q]=le,U&&(c.prototype[Q]=function(){var be=this.__chain__;if(G||be){var Oe=c(this.__wrapped__),He=Oe.__actions__=ti(this.__actions__);return He.push({func:le,args:arguments,thisArg:c}),Oe.__chain__=be,Oe}return le.apply(c,du([this.value()],arguments))})}),c}function OR(){return Gn._===this&&(Gn._=$p),this}function m7(){}function IR(c){return c=zt(c),jt(function(g){return Uh(g,c)})}var FR=rd(Rn),kR=rd(W0),LR=rd(z0);function d6(c){return et(c)?U0(Mo(c)):jn(c)}function _R(c){return function(g){return c==null?n:Hs(c,g)}}var NR=P1(),HR=P1(!0);function v7(){return[]}function y7(){return!1}function GR(){return{}}function WR(){return""}function $R(){return!0}function jR(c,g){if(c=zt(c),c<1||c>ge)return[];var x=X,T=Lr(c,X);g=xt(g),c-=X;for(var M=K0(T,g);++x<c;)g(x);return M}function zR(c){return Ht(c)?Rn(c,Mo):Io(c)?[c]:ti(k1(Pn(c)))}function VR(c){var g=++dl;return Pn(c)+g}var UR=Qc(function(c,g){return c+g},0),XR=Tr("ceil"),KR=Qc(function(c,g){return c/g},1),YR=Tr("floor");function qR(c){return c&&c.length?da(c,ao,Eu):n}function ZR(c,g){return c&&c.length?da(c,xt(g,2),Eu):n}function QR(c){return bp(c,ao)}function JR(c,g){return bp(c,xt(g,2))}function eM(c){return c&&c.length?da(c,ao,Pu):n}function tM(c,g){return c&&c.length?da(c,xt(g,2),Pu):n}var nM=Qc(function(c,g){return c*g},1),rM=Tr("round"),iM=Qc(function(c,g){return c-g},0);function oM(c){return c&&c.length?X0(c,ao):0}function sM(c,g){return c&&c.length?X0(c,xt(g,2)):0}return N.after=Z,N.ary=xe,N.assign=pB,N.assignIn=i6,N.assignInWith=_2,N.assignWith=mB,N.at=vB,N.before=_e,N.bind=Ge,N.bindAll=ER,N.bindKey=ke,N.castArray=GA,N.chain=wd,N.chunk=fd,N.compact=L1,N.concat=io,N.cond=PR,N.conforms=SR,N.constant=d7,N.countBy=M2,N.create=yB,N.curry=Je,N.curryRight=nt,N.debounce=it,N.defaults=wB,N.defaultsDeep=CB,N.defer=er,N.delay=de,N.difference=un,N.differenceBy=xr,N.differenceWith=ur,N.drop=Rr,N.dropRight=ki,N.dropRightWhile=Ll,N.dropWhile=dr,N.fill=af,N.filter=Ed,N.flatMap=K1,N.flatMapDeep=r7,N.flatMapDepth=I2,N.flatten=hd,N.flattenDeep=cf,N.flattenDepth=Pi,N.flip=te,N.flow=TR,N.flowRight=AR,N.fromPairs=_1,N.functions=AB,N.functionsIn=BB,N.groupBy=Y1,N.initial=dd,N.intersection=N1,N.intersectionBy=Bu,N.intersectionWith=gd,N.invert=MB,N.invertBy=bB,N.invokeMap=F2,N.iteratee=g7,N.keyBy=i7,N.keys=jr,N.keysIn=uo,N.map=Da,N.mapKeys=IB,N.mapValues=FB,N.matches=BR,N.matchesProperty=RR,N.memoize=pe,N.merge=kB,N.mergeWith=o6,N.method=MR,N.methodOf=bR,N.mixin=p7,N.negate=ze,N.nthArg=IR,N.omit=LB,N.omitBy=_B,N.once=ct,N.orderBy=o7,N.over=FR,N.overArgs=Ct,N.overEvery=kR,N.overSome=LR,N.partial=vt,N.partialRight=Dt,N.partition=gf,N.pick=NB,N.pickBy=s6,N.property=d6,N.propertyOf=_R,N.pull=pd,N.pullAll=hf,N.pullAllBy=oi,N.pullAllWith=Mu,N.pullAt=bo,N.range=NR,N.rangeRight=HR,N.rearg=Er,N.reject=u,N.remove=Si,N.rest=hn,N.reverse=md,N.sampleSize=m,N.set=GB,N.setWith=WB,N.shuffle=C,N.slice=G1,N.sortBy=k,N.sortedUniq=j1,N.sortedUniqBy=Ea,N.split=cR,N.spread=Ou,N.tail=P2,N.take=S2,N.takeRight=z1,N.takeRightWhile=vd,N.takeWhile=X3,N.tap=e7,N.throttle=u7,N.thru=Oo,N.toArray=t6,N.toPairs=u6,N.toPairsIn=a6,N.toPath=zR,N.toPlainObject=r6,N.transform=$B,N.unary=NA,N.union=K3,N.unionBy=D2,N.unionWith=T2,N.uniq=Pa,N.uniqBy=Y3,N.uniqWith=_l,N.unset=jB,N.unzip=yd,N.unzipWith=zn,N.update=zB,N.updateWith=VB,N.values=Bd,N.valuesIn=UB,N.without=q3,N.words=f6,N.wrap=HA,N.xor=A2,N.xorBy=Z3,N.xorWith=Q3,N.zip=B2,N.zipObject=R2,N.zipObjectDeep=J3,N.zipWith=oo,N.entries=u6,N.entriesIn=a6,N.extend=i6,N.extendWith=_2,p7(N,N),N.add=UR,N.attempt=h6,N.camelCase=qB,N.capitalize=l6,N.ceil=XR,N.clamp=XB,N.clone=WA,N.cloneDeep=jA,N.cloneDeepWith=zA,N.cloneWith=$A,N.conformsTo=VA,N.deburr=c6,N.defaultTo=DR,N.divide=KR,N.endsWith=ZB,N.eq=Ks,N.escape=QB,N.escapeRegExp=JB,N.every=b2,N.find=Pd,N.findIndex=Au,N.findKey=xB,N.findLast=O2,N.findLastIndex=lf,N.findLastKey=EB,N.floor=YR,N.forEach=Sd,N.forEachRight=df,N.forIn=PB,N.forInRight=SB,N.forOwn=DB,N.forOwnRight=TB,N.get=c7,N.gt=UA,N.gte=XA,N.has=RB,N.hasIn=f7,N.head=Ca,N.identity=ao,N.includes=Dd,N.indexOf=Xs,N.inRange=KB,N.invoke=OB,N.isArguments=pf,N.isArray=Ht,N.isArrayBuffer=KA,N.isArrayLike=so,N.isArrayLikeObject=gr,N.isBoolean=YA,N.isBuffer=Nl,N.isDate=qA,N.isElement=ZA,N.isEmpty=QA,N.isEqual=JA,N.isEqualWith=eB,N.isError=a7,N.isFinite=tB,N.isFunction=Ta,N.isInteger=Z4,N.isLength=k2,N.isMap=Q4,N.isMatch=nB,N.isMatchWith=rB,N.isNaN=iB,N.isNative=oB,N.isNil=uB,N.isNull=sB,N.isNumber=J4,N.isObject=tr,N.isObjectLike=ar,N.isPlainObject=q1,N.isRegExp=l7,N.isSafeInteger=aB,N.isSet=e6,N.isString=L2,N.isSymbol=Io,N.isTypedArray=Ad,N.isUndefined=lB,N.isWeakMap=cB,N.isWeakSet=fB,N.join=Ru,N.kebabCase=eR,N.last=ii,N.lastIndexOf=ff,N.lowerCase=tR,N.lowerFirst=nR,N.lt=hB,N.lte=dB,N.max=qR,N.maxBy=ZR,N.mean=QR,N.meanBy=JR,N.min=eM,N.minBy=tM,N.stubArray=v7,N.stubFalse=y7,N.stubObject=GR,N.stubString=WR,N.stubTrue=$R,N.multiply=nM,N.nth=H1,N.noConflict=OR,N.noop=m7,N.now=V,N.pad=rR,N.padEnd=iR,N.padStart=oR,N.parseInt=sR,N.random=YB,N.reduce=s7,N.reduceRight=Td,N.repeat=uR,N.replace=aR,N.result=HB,N.round=rM,N.runInContext=ie,N.sample=l,N.size=P,N.snakeCase=lR,N.some=D,N.sortedIndex=W1,N.sortedIndexBy=U3,N.sortedIndexOf=bu,N.sortedLastIndex=E2,N.sortedLastIndexBy=$1,N.sortedLastIndexOf=xa,N.startCase=fR,N.startsWith=hR,N.subtract=iM,N.sum=oM,N.sumBy=sM,N.template=dR,N.times=jR,N.toFinite=Aa,N.toInteger=zt,N.toLength=n6,N.toLower=gR,N.toNumber=ds,N.toSafeInteger=gB,N.toString=Pn,N.toUpper=pR,N.trim=mR,N.trimEnd=vR,N.trimStart=yR,N.truncate=wR,N.unescape=CR,N.uniqueId=VR,N.upperCase=xR,N.upperFirst=h7,N.each=Sd,N.eachRight=df,N.first=Ca,p7(N,function(){var c={};return Ii(N,function(g,x){fn.call(N.prototype,x)||(c[x]=g)}),c}(),{chain:!1}),N.VERSION=r,kr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){N[c].placeholder=N}),kr(["drop","take"],function(c,g){Nt.prototype[c]=function(x){x=x===n?1:sr(zt(x),0);var T=this.__filtered__&&!g?new Nt(this):this.clone();return T.__filtered__?T.__takeCount__=Lr(x,T.__takeCount__):T.__views__.push({size:Lr(x,X),type:c+(T.__dir__<0?"Right":"")}),T},Nt.prototype[c+"Right"]=function(x){return this.reverse()[c](x).reverse()}}),kr(["filter","map","takeWhile"],function(c,g){var x=g+1,T=x==me||x==Fe;Nt.prototype[c]=function(M){var G=this.clone();return G.__iteratees__.push({iteratee:xt(M,3),type:x}),G.__filtered__=G.__filtered__||T,G}}),kr(["head","last"],function(c,g){var x="take"+(g?"Right":"");Nt.prototype[c]=function(){return this[x](1).value()[0]}}),kr(["initial","tail"],function(c,g){var x="drop"+(g?"":"Right");Nt.prototype[c]=function(){return this.__filtered__?new Nt(this):this[x](1)}}),Nt.prototype.compact=function(){return this.filter(ao)},Nt.prototype.find=function(c){return this.filter(c).head()},Nt.prototype.findLast=function(c){return this.reverse().find(c)},Nt.prototype.invokeMap=jt(function(c,g){return typeof c=="function"?new Nt(this):this.map(function(x){return eo(x,c,g)})}),Nt.prototype.reject=function(c){return this.filter(ze(xt(c)))},Nt.prototype.slice=function(c,g){c=zt(c);var x=this;return x.__filtered__&&(c>0||g<0)?new Nt(x):(c<0?x=x.takeRight(-c):c&&(x=x.drop(c)),g!==n&&(g=zt(g),x=g<0?x.dropRight(-g):x.take(g-c)),x)},Nt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Nt.prototype.toArray=function(){return this.take(X)},Ii(Nt.prototype,function(c,g){var x=/^(?:filter|find|map|reject)|While$/.test(g),T=/^(?:head|last)$/.test(g),M=N[T?"take"+(g=="last"?"Right":""):g],G=T||/^find/.test(g);M&&(N.prototype[g]=function(){var U=this.__wrapped__,Q=T?[1]:arguments,le=U instanceof Nt,be=Q[0],Oe=le||Ht(U),He=function(Jt){var an=M.apply(N,du([Jt],Q));return T&&Ze?an[0]:an};Oe&&x&&typeof be=="function"&&be.length!=1&&(le=Oe=!1);var Ze=this.__chain__,ft=!!this.__actions__.length,Tt=G&&!Ze,Ut=le&&!ft;if(!G&&Oe){U=Ut?U:new Nt(this);var At=c.apply(U,Q);return At.__actions__.push({func:Oo,args:[He],thisArg:n}),new _r(At,Ze)}return Tt&&Ut?c.apply(this,Q):(At=this.thru(He),Tt?T?At.value()[0]:At.value():At)})}),kr(["pop","push","shift","sort","splice","unshift"],function(c){var g=Fs[c],x=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",T=/^(?:pop|shift)$/.test(c);N.prototype[c]=function(){var M=arguments;if(T&&!this.__chain__){var G=this.value();return g.apply(Ht(G)?G:[],M)}return this[x](function(U){return g.apply(Ht(U)?U:[],M)})}}),Ii(Nt.prototype,function(c,g){var x=N[g];if(x){var T=x.name+"";fn.call(vl,T)||(vl[T]=[]),vl[T].push({name:g,func:x})}}),vl[Ol(n,A).name]=[{name:"wrapper",func:n}],Nt.prototype.clone=Fh,Nt.prototype.reverse=n1,Nt.prototype.value=Cl,N.prototype.at=Cd,N.prototype.chain=Sa,N.prototype.commit=xd,N.prototype.next=V1,N.prototype.plant=t7,N.prototype.reverse=X1,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=n7,N.prototype.first=N.prototype.head,Ls&&(N.prototype[Ls]=U1),N},fl=N3();Qo?((Qo.exports=fl)._=fl,Rc._=fl):Gn._=fl}).call(cZ)}(fg,fg.exports)),fg.exports}var hZ=fZ();const dZ=({min:e=0,max:t=100,step:n=1,defaultValue:r=100,disabled:i=!1,onChange:o,beforeStart:s,afterEnd:a})=>{const[f,h]=W.useState(!1),[d,p]=W.useState(r),v=W.useRef(0),w=W.useRef(null),E=W.useRef(null);W.useEffect(()=>{if(w.current&&E.current){const B=w.current.getBoundingClientRect(),I=E.current.getBoundingClientRect();v.current=vO(I.width/2/B.width*100)}},[E,w]),W.useEffect(()=>{p(r)},[r]);const y=W.useCallback(hZ.throttle(B=>{if(w.current&&E.current){const I=w.current.getBoundingClientRect(),_=B.clientX-I.left;let L=Math.min(Math.max(_/I.width,0),1);L>=(100-v.current)/100?L=1:L<=v.current/100&&(L=0);const j=Math.round(L*(t-e)/n)*n+e;p(j),o&&o(j)}},50,{leading:!0,trailing:!0}),[e,t,n,o]),S=W.useCallback(()=>{const B=_=>{h(!0),y(_)},I=()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",I),a&&a(),setTimeout(()=>{h(!1)},0)};document.addEventListener("pointermove",B),document.addEventListener("pointerup",I)},[y]);let A=(d-e)/(t-e)*100;return A>=100-v.current&&(A=100-v.current),A<=v.current&&(A=v.current),b.jsx("div",{className:On("slider-container",{disabled:i}),children:b.jsxs("div",{ref:w,className:"slider-track",onClick:B=>{i||f||y(B)},onPointerDown:B=>{B.preventDefault(),!i&&(s&&s(),S())},children:[b.jsx("div",{className:"slider-range",style:{width:`${A}%`}}),b.jsx("div",{ref:E,className:"slider-thumb",style:{left:`${A}%`}})]})})},Bx=TT(vA,4),z4=Pt.forwardRef((e,t)=>{const n=di(),{currentColor:r,currentFontSize:i,onColorChange:o,onFontSizeChange:s,onOpacityChange:a}=e,[f,h]=W.useState(r&&Jf(r)||Bx[0][0].value),[d,p]=W.useState(()=>{const v=r&&b0(r);return Vo(v)?100:v});return b.jsxs(Ds.Col,{gap:3,children:[b.jsx("div",{children:b.jsx("input",{style:{borderWidth:0},value:i,placeholder:"字体大小",onChange:v=>{s(v+"")}})}),b.jsx(dZ,{step:5,defaultValue:d,onChange:v=>{p(v),a(v)},beforeStart:()=>{Vr.set(n,!0),gs.setSplittingOnce(n,!0)},afterEnd:()=>{Vr.set(n,!1)},disabled:f===vA[0].value}),b.jsx(Ds.Col,{gap:2,children:Bx.map((v,w)=>b.jsx(Ds.Row,{gap:2,children:v.map(E=>b.jsxs("button",{className:`color-select-item ${f===E.value?"active":""} ${If(E.value)?"no-color":""}`,style:{backgroundColor:If(E.value)?oZ:E.value,color:lZ(E.value)?j4:qr},onClick:()=>{h(E.value),E.value===$4&&p(100),o(E.value)},title:E.name,children:[If(E.value)&&XK,f===E.value&&KK]},E.value))},w))})]})}),CA=(e,t)=>Ie.isMindElement(e,t)||he.isDrawElement(t)&&fp(t)||t3(e,t),xA=(e,t)=>{let n=t.fill;return n||(Ie.isMindElement(e,t)&&(n=YD(e,t)),(he.isDrawElement(t)||he.isCustomGeometryElement(e,t))&&(n=Jv(e,t))),n},EA=(e,t)=>{let n=t.strokeColor;return n||(Ie.isMindElement(e,t)&&(n=w4(e,t)),(he.isDrawElement(t)||he.isCustomGeometryElement(e,t))&&(n=B0(e,t))),n},gZ=(e,t)=>{Ku.setFillColor(e,null,{getMemorizeKey:A0,callback:(n,r)=>{if(!CA(e,n))return;const i=xA(e,n);if(!aZ(i))return;const o=Jf(i),s=xp(t)?o:M0(o,t);Ve.setNode(e,{fill:s},r)}})},pZ=(e,t)=>{Ku.setFillColor(e,null,{getMemorizeKey:A0,callback:(n,r)=>{if(!CA(e,n))return;const i=xA(e,n),o=b0(i);If(t)?Ve.setNode(e,{fill:null},r):Vo(o)||xp(o)?Ve.setNode(e,{fill:t},r):Ve.setNode(e,{fill:M0(t,o)},r)}})},mZ=(e,t)=>{Ku.setStrokeColor(e,null,{getMemorizeKey:A0,callback:(n,r)=>{const i=EA(e,n),o=Jf(i),s=xp(t)?o:M0(o,t);Ve.setNode(e,{strokeColor:s},r)}})},vZ=(e,t)=>{Ku.setStrokeColor(e,null,{getMemorizeKey:A0,callback:(n,r)=>{const i=EA(e,n),o=b0(i);If(t)?Ve.setNode(e,{strokeColor:null},r):Vo(o)||xp(o)?Ve.setNode(e,{strokeColor:t},r):Ve.setNode(e,{strokeColor:M0(t,o)},r)}})},yZ=(e,t,n)=>{const r=b0(t);If(n)?tv.setTextColor(e,null):tv.setTextColor(e,M0(n,r))},PA=(e,t)=>{if(If(t)){const n=CZ("fontSize"+t);n!==void 0&&tv.setFontSize(e,n,18)}},wZ=(e,t,n)=>{const r=Jf(t),i=xp(n)?r:M0(r,n);tv.setTextColor(e,i)};function CZ(e){for(const t in ev)if(ev[t]===e)return e}const xZ=({board:e,currentColor:t,fontColorIcon:n,currentFontSize:r,title:i})=>{const[o,s]=W.useState(!1),a=O.getBoardContainer(e);return b.jsxs(Ua,{sideOffset:12,open:o,onOpenChange:f=>{s(f)},placement:"top",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(mr,{className:On("property-button"),selected:o,visible:!0,icon:n,type:"button",title:i,"aria-label":i,onPointerUp:()=>{s(!o)}})}),b.jsx(Ka,{container:a,children:b.jsx(uu,{padding:4,className:On(`${Ya}`),children:b.jsx(z4,{onColorChange:f=>{yZ(e,t||f,f)},onFontSizeChange:f=>{PA(e,f)},onOpacityChange:f=>{t&&wZ(e,t,f)},currentColor:t,currentFontSize:r})})})]})},EZ=({board:e,currentColor:t,title:n,hasStrokeStyle:r,children:i})=>{const[o,s]=W.useState(!1),a=t&&Jf(t),f=t?b0(t):100,h=O.getBoardContainer(e),d=wA(f)?YK:yA(a)?qK:void 0,p=v=>{Ku.setStrokeStyle(e,v,{getMemorizeKey:A0})};return b.jsxs(Ua,{sideOffset:12,open:o,onOpenChange:v=>{s(v)},placement:"top",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(mr,{className:On("property-button"),visible:!0,icon:d,type:"button",title:n,"aria-label":n,onPointerUp:()=>{s(!o)},children:!d&&i})}),b.jsx(Ka,{container:h,children:b.jsx(uu,{padding:4,className:On(`${Ya}`,"stroke-setting",{"has-stroke-style":r}),children:b.jsxs(Ds.Col,{children:[r&&b.jsxs(Ds.Row,{className:On("stroke-style-picker"),children:[b.jsx(mr,{visible:!0,icon:ZK,type:"button",title:n,"aria-label":n,onPointerUp:()=>{p(Ss.solid)}}),b.jsx(mr,{visible:!0,icon:QK,type:"button",title:n,"aria-label":n,onPointerUp:()=>{p(Ss.dashed)}}),b.jsx(mr,{visible:!0,icon:JK,type:"button",title:n,"aria-label":n,onPointerUp:()=>{p(Ss.dotted)}})]}),b.jsx(z4,{onColorChange:v=>{vZ(e,v)},onFontSizeChange:v=>{PA(e,v)},onOpacityChange:v=>{mZ(e,v)},currentColor:t})]})})})]})},PZ=({board:e,currentColor:t,title:n,children:r,currentFontSize:i})=>{const[o,s]=W.useState(!1),a=t&&Jf(t),f=t?b0(t):100,h=O.getBoardContainer(e),d=!a||wA(f)?UK:void 0;return b.jsxs(Ua,{sideOffset:12,open:o,onOpenChange:p=>{s(p)},placement:"top",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(mr,{className:On("property-button"),visible:!0,icon:d,type:"button",title:n,"aria-label":n,onPointerUp:()=>{s(!o)},children:!d&&r})}),b.jsx(Ka,{container:h,children:b.jsx(uu,{padding:4,className:On(`${Ya}`),children:b.jsx(z4,{onColorChange:p=>{pZ(e,p)},onOpacityChange:p=>{gZ(e,p)},currentColor:t,currentFontSize:i})})})]})},SZ=()=>{var v,w;const e=di(),t=qe(e),[n,r]=W.useState(!1),i=W.useRef(n),o=t.length>0&&!ji(e)&&!t.some(he.isImage),{viewport:s,selection:a,children:f}=e,{refs:h,floatingStyles:d}=N4({placement:"right-start",middleware:[YT(32),qT()]});let p={fill:"red"};if(o&&!n){const E=t.some(B=>BZ(e,B))&&!O.hasBeenTextEditing(e),y=t.some(B=>MZ(e,B)),S=t.some(B=>SA(e,B))&&!O.hasBeenTextEditing(e),A=t.some(B=>RZ(e,B))&&!O.hasBeenTextEditing(e);p={...AZ(e),hasFill:E,hasFontColor:y,hasStroke:S,hasStrokeStyle:A}}return W.useEffect(()=>{if(o){const E=t.length>0;if(!n&&E){const y=qe(e),S=on(e,y,!1),[A,B]=R.getPoints(S),I=o5(e,$m(e,A)),_=o5(e,$m(e,B)),L=_[0]-I[0],j=_[1]-I[1];h.setPositionReference({getBoundingClientRect(){return{width:L,height:j,x:I[0],y:I[1],top:I[1],left:I[0],right:I[0]+L,bottom:I[1]+j}}})}}},[s,a,f,n]),W.useEffect(()=>{i.current=n},[n]),W.useEffect(()=>{const{pointerUp:E,pointerMove:y}=e;return e.pointerMove=S=>{(u0(e)||s0(e))&&!i.current&&r(!0),y(S)},e.pointerUp=S=>{i.current&&(u0(e)||s0(e))&&r(!1),E(S)},()=>{e.pointerUp=E,e.pointerMove=y}},[e]),b.jsx(b.Fragment,{children:o&&!n&&b.jsx(uu,{padding:1,className:On("popup-toolbar",Ya),ref:h.setFloating,style:d,children:b.jsxs(Ds.Row,{gap:1,children:[p.hasFontColor&&b.jsx(xZ,{board:e,currentColor:(v=p.marks)==null?void 0:v.color,title:"Font Color",fontColorIcon:b.jsx(eY,{currentColor:(w=p.marks)==null?void 0:w.color})},0),p.hasStroke&&b.jsx(EZ,{board:e,currentColor:p.strokeColor,title:"Stroke",hasStrokeStyle:p.hasStrokeStyle||!1,children:b.jsx("label",{className:On("stroke-label","color-label"),style:{borderColor:p.strokeColor}})},1),p.hasFill&&b.jsx(PZ,{board:e,currentColor:p.fill,title:"Fill Color",children:b.jsx("label",{className:On("fill-label","color-label",{"color-white":p.fill&&yA(Jf(p.fill))}),style:{backgroundColor:p.fill}})},2)]})})})},DZ=(e,t)=>{const n=mS(t);return{fill:t.fill,strokeColor:w4(e,t),marks:n}},TZ=(e,t)=>{const n=mS(t);return{fill:t.fill,strokeColor:B0(e,t),marks:n}},AZ=e=>{const t=qe(e)[0];return Ie.isMindElement(e,t)?DZ(e,t):TZ(e,t)},BZ=(e,t)=>Ie.isMindElement(e,t)||t3(e,t)?!0:he.isDrawElement(t)?he.isShapeElement(t)&&!he.isImage(t)&&!he.isText(t)&&fp(t):!1,SA=(e,t)=>Ie.isMindElement(e,t)||Qs.isFreehand(t)?!0:he.isDrawElement(t)?he.isShapeElement(t)&&!he.isImage(t)&&!he.isText(t)||he.isArrowLine(t)||he.isVectorLine(t)||he.isTable(t):!1,RZ=(e,t)=>SA(e,t),MZ=(e,t)=>Ie.isMindElement(e,t)?!0:he.isDrawElement(t)?L$([t]):!1,Bm=(e,t)=>{const n=qe(e);xK(e,{elements:n.length>0?n:void 0,fillStyle:t?"transparent":"white"}).then(r=>{if(r){const i=t?"png":"jpg",o=CK(r),s=`drawnix-${new Date().getTime()}.${i}`;EK(o,s)}})},V4=()=>{const e=di(),{appState:t,setAppState:n}=Bs();return b.jsx($o,{"data-testid":"save-button",onSelect:()=>{PT(e),window.top._saveCurrentArticle&&n({...t,openSuccessMessage:!0})},icon:jK,"aria-label":"保存文件",shortcut:"Cmd+S",children:"保存文件"})};V4.displayName="SaveToFile";const bZ=()=>b.jsx($o,{"data-testid":"tomvd-button",onSelect:()=>{window.location.href="/mvd/index.html"},icon:zK,"aria-label":"高级脑图",shortcut:"Cmd+M",children:"高级脑图"});V4.displayName="SaveToFile";const DA=()=>{const e=di(),t=gP();return b.jsx($o,{"data-testid":"open-button",onSelect:()=>{tK(e).then(n=>{vK(e,t,n.elements,n.viewport)})},icon:VK,"aria-label":"打开",children:"打开"})};DA.displayName="OpenFile";const TA=()=>{const e=di(),t=W.useContext(G4);return b.jsx($o,{icon:GK,"data-testid":"image-export-button",onSelect:()=>{Bm(e,!0)},submenu:b.jsxs(Cp,{onSelect:()=>{var r;const n=new CustomEvent(qg.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(r=t.onSelect)==null||r.call(t,n)},children:[b.jsx($o,{onSelect:()=>{Bm(e,!0)},"aria-label":"透明背景",children:"PNG"}),b.jsx($o,{onSelect:()=>{Bm(e,!1)},"aria-label":"白色背景",children:"JPG"})]}),shortcut:"Cmd+Shift+E","aria-label":"",children:"导出图片"})};TA.displayName="SaveAsImage";const AA=()=>{const{appState:e,setAppState:t}=Bs();return b.jsx($o,{icon:AT,"data-testid":"reset-button",onSelect:()=>{t({...e,openCleanConfirm:!0})},shortcut:"Cmd+Backspace","aria-label":"清除画布",children:"清除画布"})};AA.displayName="CleanBoard";const BA=()=>b.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});BA.displayName="MenuSeparator";const OZ=()=>{const e=di(),t=O.getBoardContainer(e),n=qe(e),[r,i]=W.useState(!1),o=e.history.undos.length<=0,s=e.history.redos.length<=0;return b.jsx(uu,{padding:1,className:On("app-toolbar",Ya),children:b.jsxs(Ds.Row,{gap:1,children:[b.jsxs(Ua,{sideOffset:12,open:r,onOpenChange:a=>{i(a)},placement:"bottom-start",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(mr,{type:"icon",visible:!0,selected:r,icon:HK,title:"App Menu","aria-label":"App Menu",onPointerDown:()=>{i(!r)}})}),b.jsx(Ka,{container:t,children:b.jsxs(Cp,{onSelect:()=>{i(!1)},children:[b.jsx(DA,{}),b.jsx(V4,{}),b.jsx(TA,{}),b.jsx(AA,{}),b.jsx(BA,{}),b.jsx(bZ,{})]})})]},0),b.jsx(mr,{type:"icon",icon:tY,visible:!0,title:"Undo","aria-label":"Undo",onPointerUp:()=>{e.undo()},disabled:o},1),b.jsx(mr,{type:"icon",icon:nY,visible:!0,title:"Redo","aria-label":"Redo",onPointerUp:()=>{e.redo()},disabled:s},2),n.length>0&&b.jsx(mr,{className:"duplicate",type:"icon",icon:rY,visible:!0,title:"Duplicate","aria-label":"Duplicate",onPointerUp:()=>{Aw(e)}},3),n.length>0&&b.jsx(mr,{className:"trash",type:"icon",icon:AT,visible:!0,title:"Trash","aria-label":"Trash",onPointerUp:()=>{Tw(e)}},4)]})})},IZ=(e,t)=>r=>{const{globalKeyDown:i}=r;return r.globalKeyDown=o=>{if(O.getMovingPointInBoard(r)||O.isMovingPointInBoard(r)){if(dn.isHotkey(["mod+shift+e"],{byKey:!0})(o)){Bm(r,!0),o.preventDefault();return}if(dn.isHotkey(["mod+s"],{byKey:!0})(o)){PT(r),window.top._saveCurrentArticle&&t({...e,openSuccessMessage:!0}),o.preventDefault();return}if(dn.isHotkey(["mod+backspace"])(o)||dn.isHotkey(["mod+delete"])(o)){t({...e,openCleanConfirm:!0}),o.preventDefault();return}}i(o)},r};function FZ(){return[H4.feltTipPen]}const Rx=(e,t)=>({id:yn(),type:"freehand",shape:e,points:t}),kZ=(e,t,n)=>{const r=tc(e,n,t)||n,i=t.points;return hp(t.points)&&Jl(r,i)||$g(i,r)},LZ=(e,t,n)=>{const r=R.getRectangleByPoints([n.anchor,n.focus]);return ov(r,t.points,t.angle)},Mx=e=>qe(e).filter(t=>Qs.isFreehand(t)),_Z=e=>dA[e].strokeColor,NZ=e=>dA[e].fill,HZ=(e,t)=>{const n=_Z(e.theme.themeColorMode);return t.strokeColor||n},GZ=(e,t)=>{const n=Qs.isFreehand(t)&&t3(e,t)?NZ(e.theme.themeColorMode):Zv.fill;return t.fill||n};function WZ(e,t){return Math.exp(-(e*e)/(2*t*t))}function $Z(e,t,n){if(e.length<2)return e;const r=Math.floor(n/2),i=[];function o(a){if(a<0){const f=-a-1;if(f<e.length)return[2*e[0][0]-e[f][0],2*e[0][1]-e[f][1]]}else if(a>=e.length){const f=2*e.length-a-1;if(f>=0)return[2*e[e.length-1][0]-e[f][0],2*e[e.length-1][1]-e[f][1]]}return e[a]}function s(a){const f=Math.min(a,e.length-1-a);return Math.min(r,f+Math.floor(r/2))}for(let a=0;a<e.length;a++){let f=0,h=0,d=0;const p=s(a);for(let v=-p;v<=p;v++){const w=a+v,E=o(w);let y=WZ(v,t);if(a<r||a>=e.length-r){const S=1+.5*(1-Math.abs(v)/p);y*=v===0?S:1}f+=E[0]*y,h+=E[1]*y,d+=y}a===0||a===e.length-1?i.push([e[a][0],e[a][1]]):i.push([f/d,h/d])}return i}class RA extends xo{draw(t){const n=$t(t),r=HZ(this.board,t),i=GZ(this.board,t),o={strokeWidth:n,stroke:r,fill:i,fillStyle:"solid"},s=O.getRoughSVG(this.board).curve($Z(t.points,1,3),o);return Xt(s,"round"),s}canDraw(t){return!0}}class jZ extends gc{constructor(){super()}initializeGenerator(){this.activeGenerator=up(this.board,{getRectangle:t=>R.getRectangleByPoints(t.points),getStrokeWidth:()=>fr,getStrokeOpacity:()=>1,hasResizeHandle:()=>Uv(this.board,this.element)}),this.generator=new RA(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})):(t.selected!==n.selected||t.selected)&&this.activeGenerator.processDrawing(this.element,O.getActiveHost(this.board),{selected:this.selected})}destroy(){var t;super.destroy(),(t=this.activeGenerator)==null||t.destroy()}}class zZ{constructor(t={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...t}}process(t,n={}){const r=n.timestamp??Date.now();if(this.points.length===0){const f={point:t,timestamp:r,...n};return this.points.push(f),this.lastProcessedTime=r,t}if(r-this.lastProcessedTime<this.options.samplingRate&&r-this.lastProcessedTime<2)return null;const i={point:t,timestamp:r,...n};if(!this.checkDistance(t)&&this.points.length>1&&r-this.lastProcessedTime<32)return null;this.updatePoints(i);const s=this.calculateDynamicParameters(i),a=this.smooth(t,s);return this.lastProcessedTime=r,a}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(t){this.points.push(t),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(t){if(this.points.length===0)return!0;const n=this.points[this.points.length-1].point,r=this.getDistance(n,t);let i=this.options.minDistance;if(this.movingAverageVelocity.length>0){const o=this.getAverageVelocity();i*=Math.max(.5,Math.min(1.5,o/200))}return r>=i}calculateDynamicParameters(t){const n=this.calculateVelocity(t);this.updateMovingAverage(n);const r=this.getAverageVelocity(),i={...this.options};if(t.pressure!==void 0){const s=Math.pow(t.pressure,1.2);i.smoothing*=1-s*i.pressureSensitivity*.8}const o=Math.min(r/i.velocityThreshold,1);if(i.velocityWeight=.2+o*.3,i.smoothing*=1+o*.2,t.tiltX!==void 0&&t.tiltY!==void 0){const s=Math.sqrt(t.tiltX**2+t.tiltY**2)/90;i.smoothing*=1+s*i.tiltSensitivity*.7}return i}smooth(t,n){if(this.points.length<2)return t;const r=this.calculateWeights(n),i=r.reduce((s,a)=>s+a,0);if(i===0)return t;const o=[0,0];for(let s=0;s<this.points.length;s++){const a=r[s]/i;o[0]+=this.points[s].point[0]*a,o[1]+=this.points[s].point[1]*a}return o}calculateWeights(t){const n=[],r=this.points.length-1;for(let i=0;i<this.points.length;i++){let o=Math.pow(t.smoothing,(r-i)*.8);if(i<r){const s=this.getPointVelocity(i);o*=1+s*t.velocityWeight*.8}if(i>0&&i<r){const s=this.getPointCurvature(i);o*=1+s*t.curvatureWeight*.7}n.push(o)}return n}getDistance(t,n){return Et(t[0],t[1],n[0],n[1])}calculateVelocity(t){if(this.points.length<2)return 0;const n=this.points[this.points.length-1],r=this.getDistance(n.point,t.point),i=t.timestamp-n.timestamp;return i>0?r/i:0}updateMovingAverage(t){this.movingAverageVelocity.push(t),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return this.movingAverageVelocity.length===0?0:this.movingAverageVelocity.reduce((t,n)=>t+n)/this.movingAverageVelocity.length}getPointVelocity(t){if(t>=this.points.length-1)return 0;const n=this.points[t],r=this.points[t+1],i=this.getDistance(n.point,r.point),o=r.timestamp-n.timestamp;return o>0?i/o:0}getPointCurvature(t){if(t<=0||t>=this.points.length-1)return 0;const n=this.points[t-1].point,r=this.points[t].point,i=this.points[t+1].point,o=this.getDistance(n,r),s=this.getDistance(r,i),a=this.getDistance(n,i),f=(o+s+a)/2;return 4*Math.sqrt(Math.max(0,f*(f-o)*(f-s)*(f-a)))/(o*s*a+1e-4)}}const VZ=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e;let o=!1,s=!1,a=[],f=null;const h=new RA(e),d=new zZ({smoothing:.7,pressureSensitivity:.6});let p=null;const v=w=>{if(o){const E=O.getPointer(e);s&&a.push(a[0]),p=Rx(E,a)}p&&!w&&Ve.insertNode(e,p,[e.children.length]),h==null||h.destroy(),p=null,o=!1,a=[],d.reset()};return e.pointerDown=w=>{const E=FZ();if(O.isInPointer(e,E)&&D0(e)){o=!0,f=[w.x,w.y];const S=d.process(f),A=bt(e,Ot(e,S[0],S[1]));a.push(A)}t(w)},e.pointerMove=w=>{if(o){const E=[w.x,w.y];f&&Et(f[0],f[1],E[0],E[1])<8?s=!0:s=!1;const y=d.process(E);if(y){h==null||h.destroy();const S=bt(e,Ot(e,y[0],y[1]));a.push(S);const A=O.getPointer(e);p=Rx(A,a),h.processDrawing(p,O.getElementTopHost(e))}return}n(w)},e.pointerUp=w=>{v(),r(w)},e.globalPointerUp=w=>{v(!0),i(w)},e},UZ=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=Mx(t);return s.length&&o.push(...s),n(o)},t.buildFragment=(o,s,a,f)=>{const h=Mx(t);if(h.length){const d=cS(t,h,s?[s.x,s.y]:[0,0]);o=$v(o,{text:"",type:Wa.elements,elements:d})}return r(o,s,a,f)},t.insertFragment=(o,s,a)=>{var h;const f=(h=o==null?void 0:o.elements)==null?void 0:h.filter(d=>Qs.isFreehand(d));f&&f.length>0&&fS(t,f,s),i(o,s,a)},t},XZ=e=>{const{getRectangle:t,drawElement:n,isHit:r,isRectangleHit:i,getOneHitElement:o,isMovable:s,isAlign:a}=e;return e.drawElement=f=>Qs.isFreehand(f.element)?jZ:n(f),e.getRectangle=f=>Qs.isFreehand(f)?R.getRectangleByPoints(f.points):t(f),e.isRectangleHit=(f,h)=>Qs.isFreehand(f)?LZ(e,f,h):i(f,h),e.isHit=(f,h,d)=>Qs.isFreehand(f)?kZ(e,f,h):r(f,h,d),e.getOneHitElement=f=>f.every(d=>Qs.isFreehand(d))?KS(e,f):o(f),e.isMovable=f=>Qs.isFreehand(f)?!0:s(f),e.isAlign=f=>Qs.isFreehand(f)?!0:a(f),e.setPluginOptions(vS,{customGeometryTypes:[gA]}),UZ(VZ(e))},KZ=()=>{const e=di(),t=e.theme;return b.jsx(uu,{padding:1,className:On("theme-toolbar",Ya),children:b.jsxs("select",{onChange:n=>{const r=n.target.value;Bn.updateThemeColor(e,r)},value:t.themeColorMode,children:[b.jsx("option",{value:"default",children:"默认"}),b.jsx("option",{value:"colorful",children:"缤纷"}),b.jsx("option",{value:"soft",children:"柔和"}),b.jsx("option",{value:"retro",children:"复古"}),b.jsx("option",{value:"dark",children:"暗夜"}),b.jsx("option",{value:"starry",children:"星空"})]})})},MA=new WeakMap,bx=e=>!!MA.get(e),bA=(e,t)=>{MA.set(e,t)},YZ=(e,t)=>r=>{const{pointerDown:i}=r;return r.pointerDown=o=>{c5(o)&&!bx(r)&&(bA(r,!0),t({...e,isPencilMode:!0})),!(bx(r)&&!c5(o))&&i(o)},r},qZ=()=>{const e=di(),{appState:t,setAppState:n}=Bs();return b.jsx(b.Fragment,{children:t.isPencilMode&&b.jsx("div",{className:"pencil-mode-toolbar",children:b.jsx(mr,{type:"button",visible:!0,title:"X Pencil","aria-label":"Arrow",label:"Pencil X",onPointerDown:()=>{n({...t,isPencilMode:!1}),bA(e,!1)}})})})};function ZZ({initialOpen:e=!1,open:t,onOpenChange:n}={}){const[r,i]=W.useState(e),[o,s]=W.useState(),[a,f]=W.useState(),h=t??r,d=n??i,p=N4({open:h,onOpenChange:d}),v=p.context,w=uA(v,{enabled:t==null}),E=aA(v,{outsidePressEvent:"mousedown"}),y=cA(v),S=lA([w,E,y]);return W.useMemo(()=>({open:h,setOpen:d,...S,...p,labelId:o,descriptionId:a,setLabelId:s,setDescriptionId:f}),[h,d,S,p,o,a])}const OA=W.createContext(null),Ep=()=>{const e=W.useContext(OA);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function Sv({children:e,...t}){const n=ZZ(t);return b.jsx(OA.Provider,{value:n,children:e})}W.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=Ep(),s=t.ref,a=x3([o.refs.setReference,i,s]);return n&&W.isValidElement(t)?W.cloneElement(t,o.getReferenceProps({ref:a,...r,...t.props,"data-state":o.open?"open":"closed"})):b.jsx("button",{ref:a,"data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})});const Dv=W.forwardRef(function(t,n){const{context:r,...i}=Ep(),o=x3([i.refs.setFloating,n]);return r.open?b.jsx(iA,{root:t.container,children:b.jsx(jq,{className:"Dialog-overlay",lockScroll:!0,children:b.jsx(sA,{context:r,children:b.jsx("div",{ref:o,"aria-labelledby":i.labelId,"aria-describedby":i.descriptionId,...i.getFloatingProps(t),children:t.children})})})}):null});W.forwardRef(function({children:t,...n},r){const{setLabelId:i}=Ep(),o=wp();return W.useLayoutEffect(()=>(i(o),()=>i(void 0)),[o,i]),b.jsx("h2",{...n,ref:r,id:o,children:t})});W.forwardRef(function({children:t,...n},r){const{setDescriptionId:i}=Ep(),o=wp();return W.useLayoutEffect(()=>(i(o),()=>i(void 0)),[o,i]),b.jsx("p",{...n,ref:r,id:o,children:t})});W.forwardRef(function(t,n){const{setOpen:r}=Ep();return b.jsx("button",{type:"button",...t,ref:n,onClick:()=>r(!1)})});const QZ="modulepreload",JZ=function(e){return"/vdx/"+e},Ox={},IA=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let s=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),f=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=s(n.map(h=>{if(h=JZ(h),h in Ox)return;Ox[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":QZ,d||(v.as="script"),v.crossOrigin="",v.href=h,f&&v.setAttribute("nonce",f),document.head.appendChild(v),d)return new Promise((w,E)=>{v.addEventListener("load",w),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},FA=({children:e})=>b.jsx("div",{className:"ttd-dialog-panels",children:e}),Tv=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgress:i,renderTopRight:o,renderSubmitShortcut:s,renderBottomRight:a})=>b.jsxs("div",{className:"ttd-dialog-panel",children:[b.jsxs("div",{className:"ttd-dialog-panel__header",children:[b.jsx("label",{children:e}),o==null?void 0:o()]}),t,b.jsxs("div",{className:On("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[b.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:n&&n.action,disabled:r||i,children:b.jsxs("div",{className:On({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&b.jsx("span",{children:n.icon})]})}),!r&&!i&&(s==null?void 0:s()),a==null?void 0:a()]})]}),Ix={CTRL_OR_CMD:RO||Wm?"metaKey":"ctrlKey",ENTER:"Enter"},kA=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{const i=W.useRef(null),o=W.useRef(r);return o.current=r,W.useEffect(()=>{if(!o.current)return;const s=i.current;if(s){const a=f=>{var h;f[Ix.CTRL_OR_CMD]&&f.key===Ix.ENTER&&(f.preventDefault(),(h=o.current)==null||h.call(o))};return s.addEventListener(qg.KEYDOWN,a),()=>{s.removeEventListener(qg.KEYDOWN,a)}}},[]),b.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},eQ=({error:e})=>b.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",b.jsx("p",{children:e})]}),LA=({error:e,value:t,loaded:n})=>{const r=[AD,CT,hS,DT],i={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:_D};return b.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&b.jsx(eQ,{error:e.message}),b.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:b.jsx(gS,{value:t,options:i,plugins:r,children:b.jsx(pP,{})})})]})},_A=()=>b.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[b.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:rx("CtrlOrCmd")}),b.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:rx("Enter")})]}),tQ=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,nQ=()=>{const{appState:e,setAppState:t}=Bs(),[n,r]=W.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});W.useEffect(()=>{(async()=>{try{const E=await IA(()=>import("./index-Ouw_ExnQ.js").then(y=>y.b6),[]);r({loaded:!0,api:Promise.resolve(E)})}catch(E){console.error("Failed to load mermaid library:",E),d(new Error("加载 Mermaid 库失败"))}})()},[]);const[i,o]=W.useState(()=>tQ),[s,a]=W.useState(()=>[]),f=W.useDeferredValue(i.trim()),[h,d]=W.useState(null),p=di();W.useEffect(()=>{(async()=>{try{const E=await n.api;let y;try{y=await E.parseMermaidToDrawnix(f)}catch{y=await E.parseMermaidToDrawnix(f.replace(/"/g,"'"))}const{elements:S}=y;a(S),d(null)}catch(E){d(E)}})()},[f,n]);const v=()=>{if(!s.length)return;const w=O.getBoardContainer(p).getBoundingClientRect(),E=[w.width/2,w.height/2],y=p.viewport.zoom,S=x0(p),A=S[0]+E[0]/y,B=S[1]+E[1]/y,I=s,_=R.getBoundingRectangle(I.filter(j=>!yo.isGroup(j)).map(j=>R.getRectangleByPoints(j.points))),L=[A-_.width/2,B-_.height/2];p.insertFragment({elements:JSON.parse(JSON.stringify(I))},L,ru.paste),t({...e,openDialogType:null})};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"ttd-dialog-desc",children:["目前仅支持",b.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:"流程图"}),"、",b.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:"序列图"}),"和",b.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:"类图"}),"。其他类型在 Drawnix 中将以图片呈现。"]}),b.jsxs(FA,{children:[b.jsx(Tv,{label:"Mermaid 语法",children:b.jsx(kA,{input:i,placeholder:"在此处编写 Mermaid 图表定义...",onChange:w=>o(w.target.value),onKeyboardSubmit:()=>{v()}})}),b.jsx(Tv,{label:"预览",panelAction:{action:()=>{v()},label:"插入"},renderSubmitShortcut:()=>b.jsx(_A,{}),children:b.jsx(LA,{value:s,loaded:n.loaded,error:h})})]})]})},rQ=`# 我开始了

- 让我看看是谁搞出了这个 bug 🕵️ ♂️ 🔍
  - 😯 💣
    - 原来是我 👈 🎯 💘

- 竟然不可以运行，为什么呢 🚫 ⚙️ ❓
  - 竟然可以运行了，为什么呢？🎢 ✨
    - 🤯 ⚡ ➡️ 🎉

- 能运行起来的 🐞 🚀
  - 就不要去动它 🛑 ✋
    - 👾 💥 🏹 🎯
    
## 男孩还是女孩 👶 ❓ 🤷 ♂️ ♀️

### Hello world 👋 🌍 ✨ 💻

#### 哇 是个程序员 🤯 ⌨️ 💡 👩 💻`,iQ=()=>{const{appState:e,setAppState:t}=Bs(),[n,r]=W.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(w,E)=>null})});W.useEffect(()=>{(async()=>{try{const E=await IA(()=>import("./index-nlYZ2Hsc.js"),__vite__mapDeps([0,1]));r({loaded:!0,api:Promise.resolve(E)})}catch(E){console.error("Failed to load mermaid library:",E),d(new Error("加载 Mermaid 库失败"))}})()},[]);const[i,o]=W.useState(()=>rQ),[s,a]=W.useState(()=>[]),f=W.useDeferredValue(i.trim()),[h,d]=W.useState(null),p=di();W.useEffect(()=>{(async()=>{try{const E=await n.api;let y;try{y=await E.parseMarkdownToDrawnix(f)}catch{y=await E.parseMarkdownToDrawnix(f.replace(/"/g,"'"))}const S=y;S.points=[[0,0]],S&&(a([S]),d(null))}catch(E){d(E)}})()},[f,n]);const v=()=>{if(!s.length)return;const w=O.getBoardContainer(p).getBoundingClientRect(),E=[w.width/4,w.height/2-20],y=p.viewport.zoom,S=x0(p),A=S[0]+E[0]/y,B=S[1]+E[1]/y,I=s;p.insertFragment({elements:JSON.parse(JSON.stringify(I))},[A,B],ru.paste),t({...e,openDialogType:null})};return b.jsx(b.Fragment,{children:b.jsxs(FA,{children:[b.jsx(Tv,{label:"Markdown 语法",children:b.jsx(kA,{input:i,placeholder:"在此处编写 Markdown 文本定义...",onChange:w=>o(w.target.value),onKeyboardSubmit:()=>{}})}),b.jsx(Tv,{label:"预览",panelAction:{action:()=>{v()},label:"插入"},renderSubmitShortcut:()=>b.jsx(_A,{}),children:b.jsx(LA,{value:s,loaded:n.loaded,error:h})})]})})},oQ=({container:e})=>{const{appState:t,setAppState:n}=Bs();return b.jsxs(b.Fragment,{children:[b.jsx(Sv,{open:t.openDialogType===Tf.mermaidToDrawnix,onOpenChange:r=>{n({...t,openDialogType:r?Tf.mermaidToDrawnix:null})},children:b.jsx(Dv,{className:"Dialog ttd-dialog",container:e,children:b.jsx(nQ,{})})}),b.jsx(Sv,{open:t.openDialogType===Tf.markdownToDrawnix,onOpenChange:r=>{n({...t,openDialogType:r?Tf.markdownToDrawnix:null})},children:b.jsx(Dv,{className:"Dialog ttd-dialog",container:e,children:b.jsx(iQ,{})})})]})},sQ=({container:e})=>{const{appState:t,setAppState:n}=Bs(),r=di();return b.jsx(Sv,{open:t.openCleanConfirm,onOpenChange:i=>{n({...t,openCleanConfirm:i})},children:b.jsxs(Dv,{className:"clean-confirm",container:e,children:[b.jsx("h2",{className:"clean-confirm__title",children:"清除画布"}),b.jsx("p",{className:"clean-confirm__description",children:"这将会清除整个画布。你是否要继续?"}),b.jsxs("div",{className:"clean-confirm__actions",children:[b.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{n({...t,openCleanConfirm:!1})},children:"取消"}),b.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{r.deleteFragment(r.children),n({...t,openCleanConfirm:!1})},children:"确认"})]})]})})};let by=null;const uQ=({container:e})=>{const{appState:t,setAppState:n}=Bs();return t.openSuccessMessage&&(console.log("=======>appState.openSuccessMessage"),by||(by=setTimeout(()=>{n({...t,openSuccessMessage:!1}),by=null,console.log("=======>Message.setAppState")},1e3))),b.jsx(Sv,{open:t.openSuccessMessage,onOpenChange:r=>{n({...t,openSuccessMessage:r})},children:b.jsx(Dv,{className:"clean-confirm",container:e,children:b.jsx("p",{className:"clean-confirm__description",children:"保存成功"})})})},aQ=({value:e,viewport:t,theme:n,onChange:r,onSelectionChange:i,onViewportChange:o,onThemeChange:s,onValueChange:a,afterInit:f})=>{const h={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:_D},[d,p]=W.useState(()=>{const E=new IX(window.navigator.userAgent);return{pointer:ln.hand,isMobile:E.mobile()!==null,isPencilMode:!1,openDialog:!1,openCleanConfirm:!1}}),v=[AD,hS,CT,FX,DT,IZ(d,p),XZ,YZ(d,p)],w=W.useRef(null);return b.jsx(pA.Provider,{value:{appState:d,setAppState:p},children:b.jsx("div",{className:On("drawnix",{"drawnix--mobile":d.isMobile}),ref:w,children:b.jsxs(gS,{value:e,viewport:t,theme:n,options:h,plugins:v,onChange:E=>{r&&r(E)},onSelectionChange:i,onViewportChange:o,onThemeChange:s,onValueChange:a,children:[b.jsx(pP,{afterInit:f}),b.jsx(OZ,{}),b.jsx(rZ,{}),b.jsx(iZ,{}),b.jsx(KZ,{}),b.jsx(SZ,{}),b.jsx(qZ,{}),b.jsx(oQ,{container:w.current}),b.jsx(sQ,{container:w.current}),b.jsx(uQ,{container:w.current})]})})})};function fm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Oy={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Fx;function lQ(){return Fx||(Fx=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(h,d){if(!i[h]){if(!r[h]){var p=typeof fm=="function"&&fm;if(!d&&p)return p(h,!0);if(a)return a(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var w=i[h]={exports:{}};r[h][0].call(w.exports,function(E){var y=r[h][1][E];return s(y||E)},w,w.exports,n,r,i,o)}return i[h].exports}for(var a=typeof fm=="function"&&fm,f=0;f<o.length;f++)s(o[f]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var f=0,h=new s(E),d=o.document.createTextNode("");h.observe(d,{characterData:!0}),a=function(){d.data=f=++f%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var p=new o.MessageChannel;p.port1.onmessage=E,a=function(){p.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var S=o.document.createElement("script");S.onreadystatechange=function(){E(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},o.document.documentElement.appendChild(S)}:a=function(){setTimeout(E,0)};var v,w=[];function E(){v=!0;for(var S,A,B=w.length;B;){for(A=w,w=[],S=-1;++S<B;)A[S]();B=w.length}v=!1}r.exports=y;function y(S){w.push(S)===1&&!v&&a()}}).call(this,typeof vs<"u"?vs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},f=["REJECTED"],h=["FULFILLED"],d=["PENDING"];r.exports=p;function p(L){if(typeof L!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,L!==s&&y(this,L)}p.prototype.catch=function(L){return this.then(null,L)},p.prototype.then=function(L,j){if(typeof L!="function"&&this.state===h||typeof j!="function"&&this.state===f)return this;var z=new this.constructor(s);if(this.state!==d){var J=this.state===h?L:j;w(z,J,this.outcome)}else this.queue.push(new v(z,L,j));return z};function v(L,j,z){this.promise=L,typeof j=="function"&&(this.onFulfilled=j,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(L){a.resolve(this.promise,L)},v.prototype.otherCallFulfilled=function(L){w(this.promise,this.onFulfilled,L)},v.prototype.callRejected=function(L){a.reject(this.promise,L)},v.prototype.otherCallRejected=function(L){w(this.promise,this.onRejected,L)};function w(L,j,z){o(function(){var J;try{J=j(z)}catch(ae){return a.reject(L,ae)}J===L?a.reject(L,new TypeError("Cannot resolve promise with itself")):a.resolve(L,J)})}a.resolve=function(L,j){var z=S(E,j);if(z.status==="error")return a.reject(L,z.value);var J=z.value;if(J)y(L,J);else{L.state=h,L.outcome=j;for(var ae=-1,ne=L.queue.length;++ae<ne;)L.queue[ae].callFulfilled(j)}return L},a.reject=function(L,j){L.state=f,L.outcome=j;for(var z=-1,J=L.queue.length;++z<J;)L.queue[z].callRejected(j);return L};function E(L){var j=L&&L.then;if(L&&(typeof L=="object"||typeof L=="function")&&typeof j=="function")return function(){j.apply(L,arguments)}}function y(L,j){var z=!1;function J(oe){z||(z=!0,a.reject(L,oe))}function ae(oe){z||(z=!0,a.resolve(L,oe))}function ne(){j(ae,J)}var Pe=S(ne);Pe.status==="error"&&J(Pe.value)}function S(L,j){var z={};try{z.value=L(j),z.status="success"}catch(J){z.status="error",z.value=J}return z}p.resolve=A;function A(L){return L instanceof this?L:a.resolve(new this(s),L)}p.reject=B;function B(L){var j=new this(s);return a.reject(j,L)}p.all=I;function I(L){var j=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=L.length,J=!1;if(!z)return this.resolve([]);for(var ae=new Array(z),ne=0,Pe=-1,oe=new this(s);++Pe<z;)ce(L[Pe],Pe);return oe;function ce(me,ye){j.resolve(me).then(Fe,function(Te){J||(J=!0,a.reject(oe,Te))});function Fe(Te){ae[ye]=Te,++ne===z&&!J&&(J=!0,a.resolve(oe,ae))}}}p.race=_;function _(L){var j=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=L.length,J=!1;if(!z)return this.resolve([]);for(var ae=-1,ne=new this(s);++ae<z;)Pe(L[ae]);return ne;function Pe(oe){j.resolve(oe).then(function(ce){J||(J=!0,a.resolve(ne,ce))},function(ce){J||(J=!0,a.reject(ne,ce))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof vs<"u"?vs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H};function s(H,Y){if(!(H instanceof Y))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var f=a();function h(){try{if(!f||!f.open)return!1;var H=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Y=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!H||Y)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(H,Y){H=H||[],Y=Y||{};try{return new Blob(H,Y)}catch(ee){if(ee.name!=="TypeError")throw ee;for(var $=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,re=new $,ue=0;ue<H.length;ue+=1)re.append(H[ue]);return re.getBlob(Y.type)}}typeof Promise>"u"&&n(3);var p=Promise;function v(H,Y){Y&&H.then(function($){Y(null,$)},function($){Y($)})}function w(H,Y,$){typeof Y=="function"&&H.then(Y),typeof $=="function"&&H.catch($)}function E(H){return typeof H!="string"&&(console.warn(H+" used as a key, but it is not a string."),H=String(H)),H}function y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var S="local-forage-detect-blob-support",A=void 0,B={},I=Object.prototype.toString,_="readonly",L="readwrite";function j(H){for(var Y=H.length,$=new ArrayBuffer(Y),re=new Uint8Array($),ue=0;ue<Y;ue++)re[ue]=H.charCodeAt(ue);return $}function z(H){return new p(function(Y){var $=H.transaction(S,L),re=d([""]);$.objectStore(S).put(re,"key"),$.onabort=function(ue){ue.preventDefault(),ue.stopPropagation(),Y(!1)},$.oncomplete=function(){var ue=navigator.userAgent.match(/Chrome\/(\d+)/),ee=navigator.userAgent.match(/Edge\//);Y(ee||!ue||parseInt(ue[1],10)>=43)}}).catch(function(){return!1})}function J(H){return typeof A=="boolean"?p.resolve(A):z(H).then(function(Y){return A=Y,A})}function ae(H){var Y=B[H.name],$={};$.promise=new p(function(re,ue){$.resolve=re,$.reject=ue}),Y.deferredOperations.push($),Y.dbReady?Y.dbReady=Y.dbReady.then(function(){return $.promise}):Y.dbReady=$.promise}function ne(H){var Y=B[H.name],$=Y.deferredOperations.pop();if($)return $.resolve(),$.promise}function Pe(H,Y){var $=B[H.name],re=$.deferredOperations.pop();if(re)return re.reject(Y),re.promise}function oe(H,Y){return new p(function($,re){if(B[H.name]=B[H.name]||Ee(),H.db)if(Y)ae(H),H.db.close();else return $(H.db);var ue=[H.name];Y&&ue.push(H.version);var ee=f.open.apply(f,ue);Y&&(ee.onupgradeneeded=function(Be){var Ne=ee.result;try{Ne.createObjectStore(H.storeName),Be.oldVersion<=1&&Ne.createObjectStore(S)}catch(je){if(je.name==="ConstraintError")console.warn('The database "'+H.name+'" has been upgraded from version '+Be.oldVersion+" to version "+Be.newVersion+', but the storage "'+H.storeName+'" already exists.');else throw je}}),ee.onerror=function(Be){Be.preventDefault(),re(ee.error)},ee.onsuccess=function(){var Be=ee.result;Be.onversionchange=function(Ne){Ne.target.close()},$(Be),ne(H)}})}function ce(H){return oe(H,!1)}function me(H){return oe(H,!0)}function ye(H,Y){if(!H.db)return!0;var $=!H.db.objectStoreNames.contains(H.storeName),re=H.version<H.db.version,ue=H.version>H.db.version;if(re&&(H.version!==Y&&console.warn('The database "'+H.name+`" can't be downgraded from version `+H.db.version+" to version "+H.version+"."),H.version=H.db.version),ue||$){if($){var ee=H.db.version+1;ee>H.version&&(H.version=ee)}return!0}return!1}function Fe(H){return new p(function(Y,$){var re=new FileReader;re.onerror=$,re.onloadend=function(ue){var ee=btoa(ue.target.result||"");Y({__local_forage_encoded_blob:!0,data:ee,type:H.type})},re.readAsBinaryString(H)})}function Te(H){var Y=j(atob(H.data));return d([Y],{type:H.type})}function ge(H){return H&&H.__local_forage_encoded_blob}function se(H){var Y=this,$=Y._initReady().then(function(){var re=B[Y._dbInfo.name];if(re&&re.dbReady)return re.dbReady});return w($,H,H),$}function we(H){ae(H);for(var Y=B[H.name],$=Y.forages,re=0;re<$.length;re++){var ue=$[re];ue._dbInfo.db&&(ue._dbInfo.db.close(),ue._dbInfo.db=null)}return H.db=null,ce(H).then(function(ee){return H.db=ee,ye(H)?me(H):ee}).then(function(ee){H.db=Y.db=ee;for(var Be=0;Be<$.length;Be++)$[Be]._dbInfo.db=ee}).catch(function(ee){throw Pe(H,ee),ee})}function X(H,Y,$,re){re===void 0&&(re=1);try{var ue=H.db.transaction(H.storeName,Y);$(null,ue)}catch(ee){if(re>0&&(!H.db||ee.name==="InvalidStateError"||ee.name==="NotFoundError"))return p.resolve().then(function(){if(!H.db||ee.name==="NotFoundError"&&!H.db.objectStoreNames.contains(H.storeName)&&H.version<=H.db.version)return H.db&&(H.version=H.db.version+1),me(H)}).then(function(){return we(H).then(function(){X(H,Y,$,re-1)})}).catch($);$(ee)}}function Ee(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function st(H){var Y=this,$={db:null};if(H)for(var re in H)$[re]=H[re];var ue=B[$.name];ue||(ue=Ee(),B[$.name]=ue),ue.forages.push(Y),Y._initReady||(Y._initReady=Y.ready,Y.ready=se);var ee=[];function Be(){return p.resolve()}for(var Ne=0;Ne<ue.forages.length;Ne++){var je=ue.forages[Ne];je!==Y&&ee.push(je._initReady().catch(Be))}var We=ue.forages.slice(0);return p.all(ee).then(function(){return $.db=ue.db,ce($)}).then(function(Xe){return $.db=Xe,ye($,Y._defaultConfig.version)?me($):Xe}).then(function(Xe){$.db=ue.db=Xe,Y._dbInfo=$;for(var tt=0;tt<We.length;tt++){var kt=We[tt];kt!==Y&&(kt._dbInfo.db=$.db,kt._dbInfo.version=$.version)}})}function Me(H,Y){var $=this;H=E(H);var re=new p(function(ue,ee){$.ready().then(function(){X($._dbInfo,_,function(Be,Ne){if(Be)return ee(Be);try{var je=Ne.objectStore($._dbInfo.storeName),We=je.get(H);We.onsuccess=function(){var Xe=We.result;Xe===void 0&&(Xe=null),ge(Xe)&&(Xe=Te(Xe)),ue(Xe)},We.onerror=function(){ee(We.error)}}catch(Xe){ee(Xe)}})}).catch(ee)});return v(re,Y),re}function K(H,Y){var $=this,re=new p(function(ue,ee){$.ready().then(function(){X($._dbInfo,_,function(Be,Ne){if(Be)return ee(Be);try{var je=Ne.objectStore($._dbInfo.storeName),We=je.openCursor(),Xe=1;We.onsuccess=function(){var tt=We.result;if(tt){var kt=tt.value;ge(kt)&&(kt=Te(kt));var sn=H(kt,tt.key,Xe++);sn!==void 0?ue(sn):tt.continue()}else ue()},We.onerror=function(){ee(We.error)}}catch(tt){ee(tt)}})}).catch(ee)});return v(re,Y),re}function fe(H,Y,$){var re=this;H=E(H);var ue=new p(function(ee,Be){var Ne;re.ready().then(function(){return Ne=re._dbInfo,I.call(Y)==="[object Blob]"?J(Ne.db).then(function(je){return je?Y:Fe(Y)}):Y}).then(function(je){X(re._dbInfo,L,function(We,Xe){if(We)return Be(We);try{var tt=Xe.objectStore(re._dbInfo.storeName);je===null&&(je=void 0);var kt=tt.put(je,H);Xe.oncomplete=function(){je===void 0&&(je=null),ee(je)},Xe.onabort=Xe.onerror=function(){var sn=kt.error?kt.error:kt.transaction.error;Be(sn)}}catch(sn){Be(sn)}})}).catch(Be)});return v(ue,$),ue}function Ce(H,Y){var $=this;H=E(H);var re=new p(function(ue,ee){$.ready().then(function(){X($._dbInfo,L,function(Be,Ne){if(Be)return ee(Be);try{var je=Ne.objectStore($._dbInfo.storeName),We=je.delete(H);Ne.oncomplete=function(){ue()},Ne.onerror=function(){ee(We.error)},Ne.onabort=function(){var Xe=We.error?We.error:We.transaction.error;ee(Xe)}}catch(Xe){ee(Xe)}})}).catch(ee)});return v(re,Y),re}function Se(H){var Y=this,$=new p(function(re,ue){Y.ready().then(function(){X(Y._dbInfo,L,function(ee,Be){if(ee)return ue(ee);try{var Ne=Be.objectStore(Y._dbInfo.storeName),je=Ne.clear();Be.oncomplete=function(){re()},Be.onabort=Be.onerror=function(){var We=je.error?je.error:je.transaction.error;ue(We)}}catch(We){ue(We)}})}).catch(ue)});return v($,H),$}function Ke(H){var Y=this,$=new p(function(re,ue){Y.ready().then(function(){X(Y._dbInfo,_,function(ee,Be){if(ee)return ue(ee);try{var Ne=Be.objectStore(Y._dbInfo.storeName),je=Ne.count();je.onsuccess=function(){re(je.result)},je.onerror=function(){ue(je.error)}}catch(We){ue(We)}})}).catch(ue)});return v($,H),$}function Ue(H,Y){var $=this,re=new p(function(ue,ee){if(H<0){ue(null);return}$.ready().then(function(){X($._dbInfo,_,function(Be,Ne){if(Be)return ee(Be);try{var je=Ne.objectStore($._dbInfo.storeName),We=!1,Xe=je.openKeyCursor();Xe.onsuccess=function(){var tt=Xe.result;if(!tt){ue(null);return}H===0||We?ue(tt.key):(We=!0,tt.advance(H))},Xe.onerror=function(){ee(Xe.error)}}catch(tt){ee(tt)}})}).catch(ee)});return v(re,Y),re}function Bt(H){var Y=this,$=new p(function(re,ue){Y.ready().then(function(){X(Y._dbInfo,_,function(ee,Be){if(ee)return ue(ee);try{var Ne=Be.objectStore(Y._dbInfo.storeName),je=Ne.openKeyCursor(),We=[];je.onsuccess=function(){var Xe=je.result;if(!Xe){re(We);return}We.push(Xe.key),Xe.continue()},je.onerror=function(){ue(je.error)}}catch(Xe){ue(Xe)}})}).catch(ue)});return v($,H),$}function It(H,Y){Y=y.apply(this,arguments);var $=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||$.name,H.storeName=H.storeName||$.storeName);var re=this,ue;if(!H.name)ue=p.reject("Invalid arguments");else{var ee=H.name===$.name&&re._dbInfo.db,Be=ee?p.resolve(re._dbInfo.db):ce(H).then(function(Ne){var je=B[H.name],We=je.forages;je.db=Ne;for(var Xe=0;Xe<We.length;Xe++)We[Xe]._dbInfo.db=Ne;return Ne});H.storeName?ue=Be.then(function(Ne){if(Ne.objectStoreNames.contains(H.storeName)){var je=Ne.version+1;ae(H);var We=B[H.name],Xe=We.forages;Ne.close();for(var tt=0;tt<Xe.length;tt++){var kt=Xe[tt];kt._dbInfo.db=null,kt._dbInfo.version=je}var sn=new p(function(Qt,wt){var Cn=f.open(H.name,je);Cn.onerror=function(Fr){var qo=Cn.result;qo.close(),wt(Fr)},Cn.onupgradeneeded=function(){var Fr=Cn.result;Fr.deleteObjectStore(H.storeName)},Cn.onsuccess=function(){var Fr=Cn.result;Fr.close(),Qt(Fr)}});return sn.then(function(Qt){We.db=Qt;for(var wt=0;wt<Xe.length;wt++){var Cn=Xe[wt];Cn._dbInfo.db=Qt,ne(Cn._dbInfo)}}).catch(function(Qt){throw(Pe(H,Qt)||p.resolve()).catch(function(){}),Qt})}}):ue=Be.then(function(Ne){ae(H);var je=B[H.name],We=je.forages;Ne.close();for(var Xe=0;Xe<We.length;Xe++){var tt=We[Xe];tt._dbInfo.db=null}var kt=new p(function(sn,Qt){var wt=f.deleteDatabase(H.name);wt.onerror=function(){var Cn=wt.result;Cn&&Cn.close(),Qt(wt.error)},wt.onblocked=function(){console.warn('dropInstance blocked for database "'+H.name+'" until all open connections are closed')},wt.onsuccess=function(){var Cn=wt.result;Cn&&Cn.close(),sn(Cn)}});return kt.then(function(sn){je.db=sn;for(var Qt=0;Qt<We.length;Qt++){var wt=We[Qt];ne(wt._dbInfo)}}).catch(function(sn){throw(Pe(H,sn)||p.resolve()).catch(function(){}),sn})})}return v(ue,Y),ue}var St={_driver:"asyncStorage",_initStorage:st,_support:h(),iterate:K,getItem:Me,setItem:fe,removeItem:Ce,clear:Se,length:Ke,key:Ue,keys:Bt,dropInstance:It};function lt(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wn="~~local_forage_type~",Rt=/^~~local_forage_type~([^~]+)~/,Nn="__lfsc__:",rr=Nn.length,Dn="arbf",en="blob",tn="si08",Kn="ui08",Hn="uic8",Wt="si16",Sr="si32",vr="ur16",Tn="ui32",yr="fl32",wr="fl64",ir=rr+Dn.length,Vi=Object.prototype.toString;function Ui(H){var Y=H.length*.75,$=H.length,re,ue=0,ee,Be,Ne,je;H[H.length-1]==="="&&(Y--,H[H.length-2]==="="&&Y--);var We=new ArrayBuffer(Y),Xe=new Uint8Array(We);for(re=0;re<$;re+=4)ee=yt.indexOf(H[re]),Be=yt.indexOf(H[re+1]),Ne=yt.indexOf(H[re+2]),je=yt.indexOf(H[re+3]),Xe[ue++]=ee<<2|Be>>4,Xe[ue++]=(Be&15)<<4|Ne>>2,Xe[ue++]=(Ne&3)<<6|je&63;return We}function Xi(H){var Y=new Uint8Array(H),$="",re;for(re=0;re<Y.length;re+=3)$+=yt[Y[re]>>2],$+=yt[(Y[re]&3)<<4|Y[re+1]>>4],$+=yt[(Y[re+1]&15)<<2|Y[re+2]>>6],$+=yt[Y[re+2]&63];return Y.length%3===2?$=$.substring(0,$.length-1)+"=":Y.length%3===1&&($=$.substring(0,$.length-2)+"=="),$}function qu(H,Y){var $="";if(H&&($=Vi.call(H)),H&&($==="[object ArrayBuffer]"||H.buffer&&Vi.call(H.buffer)==="[object ArrayBuffer]")){var re,ue=Nn;H instanceof ArrayBuffer?(re=H,ue+=Dn):(re=H.buffer,$==="[object Int8Array]"?ue+=tn:$==="[object Uint8Array]"?ue+=Kn:$==="[object Uint8ClampedArray]"?ue+=Hn:$==="[object Int16Array]"?ue+=Wt:$==="[object Uint16Array]"?ue+=vr:$==="[object Int32Array]"?ue+=Sr:$==="[object Uint32Array]"?ue+=Tn:$==="[object Float32Array]"?ue+=yr:$==="[object Float64Array]"?ue+=wr:Y(new Error("Failed to get type for BinaryArray"))),Y(ue+Xi(re))}else if($==="[object Blob]"){var ee=new FileReader;ee.onload=function(){var Be=wn+H.type+"~"+Xi(this.result);Y(Nn+en+Be)},ee.readAsArrayBuffer(H)}else try{Y(JSON.stringify(H))}catch(Be){console.error("Couldn't convert value into a JSON string: ",H),Y(null,Be)}}function Rs(H){if(H.substring(0,rr)!==Nn)return JSON.parse(H);var Y=H.substring(ir),$=H.substring(rr,ir),re;if($===en&&Rt.test(Y)){var ue=Y.match(Rt);re=ue[1],Y=Y.substring(ue[0].length)}var ee=Ui(Y);switch($){case Dn:return ee;case en:return d([ee],{type:re});case tn:return new Int8Array(ee);case Kn:return new Uint8Array(ee);case Hn:return new Uint8ClampedArray(ee);case Wt:return new Int16Array(ee);case vr:return new Uint16Array(ee);case Sr:return new Int32Array(ee);case Tn:return new Uint32Array(ee);case yr:return new Float32Array(ee);case wr:return new Float64Array(ee);default:throw new Error("Unkown type: "+$)}}var Eo={serialize:qu,deserialize:Rs,stringToBuffer:Ui,bufferToString:Xi};function au(H,Y,$,re){H.executeSql("CREATE TABLE IF NOT EXISTS "+Y.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],$,re)}function Zu(H){var Y=this,$={db:null};if(H)for(var re in H)$[re]=typeof H[re]!="string"?H[re].toString():H[re];var ue=new p(function(ee,Be){try{$.db=openDatabase($.name,String($.version),$.description,$.size)}catch(Ne){return Be(Ne)}$.db.transaction(function(Ne){au(Ne,$,function(){Y._dbInfo=$,ee()},function(je,We){Be(We)})},Be)});return $.serializer=Eo,ue}function pi(H,Y,$,re,ue,ee){H.executeSql($,re,ue,function(Be,Ne){Ne.code===Ne.SYNTAX_ERR?Be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Y.storeName],function(je,We){We.rows.length?ee(je,Ne):au(je,Y,function(){je.executeSql($,re,ue,ee)},ee)},ee):ee(Be,Ne)},ee)}function Ms(H,Y){var $=this;H=E(H);var re=new p(function(ue,ee){$.ready().then(function(){var Be=$._dbInfo;Be.db.transaction(function(Ne){pi(Ne,Be,"SELECT * FROM "+Be.storeName+" WHERE key = ? LIMIT 1",[H],function(je,We){var Xe=We.rows.length?We.rows.item(0).value:null;Xe&&(Xe=Be.serializer.deserialize(Xe)),ue(Xe)},function(je,We){ee(We)})})}).catch(ee)});return v(re,Y),re}function bs(H,Y){var $=this,re=new p(function(ue,ee){$.ready().then(function(){var Be=$._dbInfo;Be.db.transaction(function(Ne){pi(Ne,Be,"SELECT * FROM "+Be.storeName,[],function(je,We){for(var Xe=We.rows,tt=Xe.length,kt=0;kt<tt;kt++){var sn=Xe.item(kt),Qt=sn.value;if(Qt&&(Qt=Be.serializer.deserialize(Qt)),Qt=H(Qt,sn.key,kt+1),Qt!==void 0){ue(Qt);return}}ue()},function(je,We){ee(We)})})}).catch(ee)});return v(re,Y),re}function wc(H,Y,$,re){var ue=this;H=E(H);var ee=new p(function(Be,Ne){ue.ready().then(function(){Y===void 0&&(Y=null);var je=Y,We=ue._dbInfo;We.serializer.serialize(Y,function(Xe,tt){tt?Ne(tt):We.db.transaction(function(kt){pi(kt,We,"INSERT OR REPLACE INTO "+We.storeName+" (key, value) VALUES (?, ?)",[H,Xe],function(){Be(je)},function(sn,Qt){Ne(Qt)})},function(kt){if(kt.code===kt.QUOTA_ERR){if(re>0){Be(wc.apply(ue,[H,je,$,re-1]));return}Ne(kt)}})})}).catch(Ne)});return v(ee,$),ee}function eh(H,Y,$){return wc.apply(this,[H,Y,$,1])}function th(H,Y){var $=this;H=E(H);var re=new p(function(ue,ee){$.ready().then(function(){var Be=$._dbInfo;Be.db.transaction(function(Ne){pi(Ne,Be,"DELETE FROM "+Be.storeName+" WHERE key = ?",[H],function(){ue()},function(je,We){ee(We)})})}).catch(ee)});return v(re,Y),re}function nh(H){var Y=this,$=new p(function(re,ue){Y.ready().then(function(){var ee=Y._dbInfo;ee.db.transaction(function(Be){pi(Be,ee,"DELETE FROM "+ee.storeName,[],function(){re()},function(Ne,je){ue(je)})})}).catch(ue)});return v($,H),$}function Cc(H){var Y=this,$=new p(function(re,ue){Y.ready().then(function(){var ee=Y._dbInfo;ee.db.transaction(function(Be){pi(Be,ee,"SELECT COUNT(key) as c FROM "+ee.storeName,[],function(Ne,je){var We=je.rows.item(0).c;re(We)},function(Ne,je){ue(je)})})}).catch(ue)});return v($,H),$}function xc(H,Y){var $=this,re=new p(function(ue,ee){$.ready().then(function(){var Be=$._dbInfo;Be.db.transaction(function(Ne){pi(Ne,Be,"SELECT key FROM "+Be.storeName+" WHERE id = ? LIMIT 1",[H+1],function(je,We){var Xe=We.rows.length?We.rows.item(0).key:null;ue(Xe)},function(je,We){ee(We)})})}).catch(ee)});return v(re,Y),re}function rh(H){var Y=this,$=new p(function(re,ue){Y.ready().then(function(){var ee=Y._dbInfo;ee.db.transaction(function(Be){pi(Be,ee,"SELECT key FROM "+ee.storeName,[],function(Ne,je){for(var We=[],Xe=0;Xe<je.rows.length;Xe++)We.push(je.rows.item(Xe).key);re(We)},function(Ne,je){ue(je)})})}).catch(ue)});return v($,H),$}function Qu(H){return new p(function(Y,$){H.transaction(function(re){re.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ue,ee){for(var Be=[],Ne=0;Ne<ee.rows.length;Ne++)Be.push(ee.rows.item(Ne).name);Y({db:H,storeNames:Be})},function(ue,ee){$(ee)})},function(re){$(re)})})}function Ju(H,Y){Y=y.apply(this,arguments);var $=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||$.name,H.storeName=H.storeName||$.storeName);var re=this,ue;return H.name?ue=new p(function(ee){var Be;H.name===$.name?Be=re._dbInfo.db:Be=openDatabase(H.name,"","",0),H.storeName?ee({db:Be,storeNames:[H.storeName]}):ee(Qu(Be))}).then(function(ee){return new p(function(Be,Ne){ee.db.transaction(function(je){function We(sn){return new p(function(Qt,wt){je.executeSql("DROP TABLE IF EXISTS "+sn,[],function(){Qt()},function(Cn,Fr){wt(Fr)})})}for(var Xe=[],tt=0,kt=ee.storeNames.length;tt<kt;tt++)Xe.push(We(ee.storeNames[tt]));p.all(Xe).then(function(){Be()}).catch(function(sn){Ne(sn)})},function(je){Ne(je)})})}):ue=p.reject("Invalid arguments"),v(ue,Y),ue}var ea={_driver:"webSQLStorage",_initStorage:Zu,_support:lt(),iterate:bs,getItem:Ms,setItem:eh,removeItem:th,clear:nh,length:Cc,key:xc,keys:rh,dropInstance:Ju};function Ec(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function lu(H,Y){var $=H.name+"/";return H.storeName!==Y.storeName&&($+=H.storeName+"/"),$}function Qa(){var H="_localforage_support_test";try{return localStorage.setItem(H,!0),localStorage.removeItem(H),!1}catch{return!0}}function Ja(){return!Qa()||localStorage.length>0}function Pc(H){var Y=this,$={};if(H)for(var re in H)$[re]=H[re];return $.keyPrefix=lu(H,Y._defaultConfig),Ja()?(Y._dbInfo=$,$.serializer=Eo,p.resolve()):p.reject()}function O0(H){var Y=this,$=Y.ready().then(function(){for(var re=Y._dbInfo.keyPrefix,ue=localStorage.length-1;ue>=0;ue--){var ee=localStorage.key(ue);ee.indexOf(re)===0&&localStorage.removeItem(ee)}});return v($,H),$}function I0(H,Y){var $=this;H=E(H);var re=$.ready().then(function(){var ue=$._dbInfo,ee=localStorage.getItem(ue.keyPrefix+H);return ee&&(ee=ue.serializer.deserialize(ee)),ee});return v(re,Y),re}function F0(H,Y){var $=this,re=$.ready().then(function(){for(var ue=$._dbInfo,ee=ue.keyPrefix,Be=ee.length,Ne=localStorage.length,je=1,We=0;We<Ne;We++){var Xe=localStorage.key(We);if(Xe.indexOf(ee)===0){var tt=localStorage.getItem(Xe);if(tt&&(tt=ue.serializer.deserialize(tt)),tt=H(tt,Xe.substring(Be),je++),tt!==void 0)return tt}}});return v(re,Y),re}function Os(H,Y){var $=this,re=$.ready().then(function(){var ue=$._dbInfo,ee;try{ee=localStorage.key(H)}catch{ee=null}return ee&&(ee=ee.substring(ue.keyPrefix.length)),ee});return v(re,Y),re}function Sc(H){var Y=this,$=Y.ready().then(function(){for(var re=Y._dbInfo,ue=localStorage.length,ee=[],Be=0;Be<ue;Be++){var Ne=localStorage.key(Be);Ne.indexOf(re.keyPrefix)===0&&ee.push(Ne.substring(re.keyPrefix.length))}return ee});return v($,H),$}function ih(H){var Y=this,$=Y.keys().then(function(re){return re.length});return v($,H),$}function k0(H,Y){var $=this;H=E(H);var re=$.ready().then(function(){var ue=$._dbInfo;localStorage.removeItem(ue.keyPrefix+H)});return v(re,Y),re}function oh(H,Y,$){var re=this;H=E(H);var ue=re.ready().then(function(){Y===void 0&&(Y=null);var ee=Y;return new p(function(Be,Ne){var je=re._dbInfo;je.serializer.serialize(Y,function(We,Xe){if(Xe)Ne(Xe);else try{localStorage.setItem(je.keyPrefix+H,We),Be(ee)}catch(tt){(tt.name==="QuotaExceededError"||tt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ne(tt),Ne(tt)}})})});return v(ue,$),ue}function sh(H,Y){if(Y=y.apply(this,arguments),H=typeof H!="function"&&H||{},!H.name){var $=this.config();H.name=H.name||$.name,H.storeName=H.storeName||$.storeName}var re=this,ue;return H.name?ue=new p(function(ee){H.storeName?ee(lu(H,re._defaultConfig)):ee(H.name+"/")}).then(function(ee){for(var Be=localStorage.length-1;Be>=0;Be--){var Ne=localStorage.key(Be);Ne.indexOf(ee)===0&&localStorage.removeItem(Ne)}}):ue=p.reject("Invalid arguments"),v(ue,Y),ue}var uh={_driver:"localStorageWrapper",_initStorage:Pc,_support:Ec(),iterate:F0,getItem:I0,setItem:oh,removeItem:k0,clear:O0,length:ih,key:Os,keys:Sc,dropInstance:sh},ah=function(Y,$){return Y===$||typeof Y=="number"&&typeof $=="number"&&isNaN(Y)&&isNaN($)},el=function(Y,$){for(var re=Y.length,ue=0;ue<re;){if(ah(Y[ue],$))return!0;ue++}return!1},lh=Array.isArray||function(H){return Object.prototype.toString.call(H)==="[object Array]"},mn={},ch={},Ko={INDEXEDDB:St,WEBSQL:ea,LOCALSTORAGE:uh},fh=[Ko.INDEXEDDB._driver,Ko.WEBSQL._driver,Ko.LOCALSTORAGE._driver],Yo=["dropInstance"],tl=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Yo),Dc={description:"",driver:fh.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function nl(H,Y){H[Y]=function(){var $=arguments;return H.ready().then(function(){return H[Y].apply(H,$)})}}function mi(){for(var H=1;H<arguments.length;H++){var Y=arguments[H];if(Y)for(var $ in Y)Y.hasOwnProperty($)&&(lh(Y[$])?arguments[0][$]=Y[$].slice():arguments[0][$]=Y[$])}return arguments[0]}var L0=function(){function H(Y){s(this,H);for(var $ in Ko)if(Ko.hasOwnProperty($)){var re=Ko[$],ue=re._driver;this[$]=ue,mn[ue]||this.defineDriver(re)}this._defaultConfig=mi({},Dc),this._config=mi({},this._defaultConfig,Y),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return H.prototype.config=function($){if((typeof $>"u"?"undefined":o($))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var re in $){if(re==="storeName"&&($[re]=$[re].replace(/\W/g,"_")),re==="version"&&typeof $[re]!="number")return new Error("Database version must be a number.");this._config[re]=$[re]}return"driver"in $&&$.driver?this.setDriver(this._config.driver):!0}else return typeof $=="string"?this._config[$]:this._config},H.prototype.defineDriver=function($,re,ue){var ee=new p(function(Be,Ne){try{var je=$._driver,We=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!$._driver){Ne(We);return}for(var Xe=tl.concat("_initStorage"),tt=0,kt=Xe.length;tt<kt;tt++){var sn=Xe[tt],Qt=!el(Yo,sn);if((Qt||$[sn])&&typeof $[sn]!="function"){Ne(We);return}}var wt=function(){for(var qo=function(na){return function(){var Zo=new Error("Method "+na+" is not implemented by the current driver"),Po=p.reject(Zo);return v(Po,arguments[arguments.length-1]),Po}},rl=0,Tc=Yo.length;rl<Tc;rl++){var ta=Yo[rl];$[ta]||($[ta]=qo(ta))}};wt();var Cn=function(qo){mn[je]&&console.info("Redefining LocalForage driver: "+je),mn[je]=$,ch[je]=qo,Be()};"_support"in $?$._support&&typeof $._support=="function"?$._support().then(Cn,Ne):Cn(!!$._support):Cn(!0)}catch(Fr){Ne(Fr)}});return w(ee,re,ue),ee},H.prototype.driver=function(){return this._driver||null},H.prototype.getDriver=function($,re,ue){var ee=mn[$]?p.resolve(mn[$]):p.reject(new Error("Driver not found."));return w(ee,re,ue),ee},H.prototype.getSerializer=function($){var re=p.resolve(Eo);return w(re,$),re},H.prototype.ready=function($){var re=this,ue=re._driverSet.then(function(){return re._ready===null&&(re._ready=re._initDriver()),re._ready});return w(ue,$,$),ue},H.prototype.setDriver=function($,re,ue){var ee=this;lh($)||($=[$]);var Be=this._getSupportedDrivers($);function Ne(){ee._config.driver=ee.driver()}function je(tt){return ee._extend(tt),Ne(),ee._ready=ee._initStorage(ee._config),ee._ready}function We(tt){return function(){var kt=0;function sn(){for(;kt<tt.length;){var Qt=tt[kt];return kt++,ee._dbInfo=null,ee._ready=null,ee.getDriver(Qt).then(je).catch(sn)}Ne();var wt=new Error("No available storage method found.");return ee._driverSet=p.reject(wt),ee._driverSet}return sn()}}var Xe=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=Xe.then(function(){var tt=Be[0];return ee._dbInfo=null,ee._ready=null,ee.getDriver(tt).then(function(kt){ee._driver=kt._driver,Ne(),ee._wrapLibraryMethodsWithReady(),ee._initDriver=We(Be)})}).catch(function(){Ne();var tt=new Error("No available storage method found.");return ee._driverSet=p.reject(tt),ee._driverSet}),w(this._driverSet,re,ue),this._driverSet},H.prototype.supports=function($){return!!ch[$]},H.prototype._extend=function($){mi(this,$)},H.prototype._getSupportedDrivers=function($){for(var re=[],ue=0,ee=$.length;ue<ee;ue++){var Be=$[ue];this.supports(Be)&&re.push(Be)}return re},H.prototype._wrapLibraryMethodsWithReady=function(){for(var $=0,re=tl.length;$<re;$++)nl(this,tl[$])},H.prototype.createInstance=function($){return new H($)},H}(),Bi=new L0;r.exports=Bi},{3:3}]},{},[4])(4)})}(Oy)),Oy.exports}var cQ=lQ();const e0=uc(cQ),kx="drawnix-local-data",Iy="main_board_content";e0.config({name:"Drawnix",storeName:"drawnix_store",driver:[e0.INDEXEDDB,e0.LOCALSTORAGE]});function fQ(){const[e,t]=W.useState({children:[]});return W.useEffect(()=>{(async()=>{const r=window.top;if(r._saveCurrentArticle){const s=r._currentArticle;if(s&&s.indexOf("{")!==-1){const a=JSON.parse(s);if(a.type==="drawnix"){t({children:a.elements,viewport:a.viewport});return}else return t({children:S7}),!0}else return t({children:S7}),!0}const i=await e0.getItem(Iy);if(i){t(i);return}const o=localStorage.getItem(kx);if(o){const s=JSON.parse(o);t(s),await e0.setItem(Iy,s),localStorage.removeItem(kx);return}t({children:S7})})()},[]),b.jsx(aQ,{value:e.children,viewport:e.viewport,theme:e.theme,onChange:n=>{e0.setItem(Iy,n)},afterInit:n=>{console.log("board initialized"),console.log("add __drawnix__web__debug_log to window, so you can call add log anywhere, like: window.__drawnix__web__console('some thing')"),window.__drawnix__web__console=r=>{hQ(n,r)}}})}const hQ=(e,t)=>{const n=O.getBoardContainer(e).closest(".drawnix");let r=n.querySelector(".drawnix-console");r||(r=document.createElement("div"),r.classList.add("drawnix-console"),n.append(r));const i=document.createElement("div");i.innerHTML=t,r.append(i)},dQ=Av.createRoot(document.getElementById("root"));dQ.render(b.jsx(W.StrictMode,{children:b.jsx(fQ,{})}));export{zr as A,gt as B,qv as D,ht as F,Ye as M,$e as N,yo as P,R,Ss as S,IA as _,dp as a,Za as b,YI as c,u4 as d,yg as e,d$ as f,uc as g,AS as h,_n as i,rt as j,yn as k,f3 as l,Yv as m,h3 as n,vs as o,fm as p};
